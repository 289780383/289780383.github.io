GE.Format=function(t,e){this.editorUi=t,this.container=e},GE.Format.prototype.labelIndex=0,GE.Format.prototype.currentIndex=0,GE.Format.prototype.showCloseButton=!0,GE.Format.prototype.inactiveTabBackgroundColor="#f1f3f4",GE.Format.prototype.roundableShapes=["label","rectangle","internalStorage","corner","parallelogram","swimlane","triangle","trapezoid","ext","step","tee","process","progress","link","rhombus","offPageConnector","loopLimit","hexagon","manualInput","curlyBracket","singleArrow","callout","doubleArrow","flexArrow","card","umlLifeline"],GE.Format.prototype.init=function(){var t=this.editorUi.editor,e=t.graph;this.update=mxUtils.bind(this,function(t,e){this.clearSelectionState(),this.refresh()}),e.getSelectionModel().addListener(mxEvent.CHANGE,this.update),e.addListener(mxEvent.EDITING_STARTED,this.update),e.addListener(mxEvent.EDITING_STOPPED,this.update),e.getModel().addListener(mxEvent.CHANGE,this.update),e.addListener(mxEvent.ROOT,mxUtils.bind(this,function(){this.refresh()})),t.addListener("autosaveChanged",mxUtils.bind(this,function(){this.refresh()})),this.refresh()},GE.Format.prototype.clearSelectionState=function(){this.selectionState=null},GE.Format.prototype.getSelectionState=function(){return null==this.selectionState&&(this.selectionState=this.createSelectionState()),this.selectionState},GE.Format.prototype.createSelectionState=function(){for(var t=this.editorUi.editor.graph.getSelectionCells(),e=this.initSelectionState(),n=0;n<t.length;n++)this.updateSelectionStateForCell(e,t[n],t);return e},GE.Format.prototype.initSelectionState=function(){return{vertices:[],edges:[],x:null,y:null,width:null,height:null,style:{},containsImage:!1,containsLabel:!1,fill:!0,glass:!0,rounded:!0,comic:!0,autoSize:!1,image:!0,shadow:!0,lineJumps:!0,resizable:!0,table:!1,cell:!1,row:!1,movable:!0,rotatable:!0}},GE.Format.prototype.updateSelectionStateForCell=function(t,e,n){var i=this.editorUi.editor.graph;if(i.getModel().isVertex(e)){t.resizable=t.resizable&&i.isCellResizable(e),t.rotatable=t.rotatable&&i.isCellRotatable(e),t.movable=t.movable&&i.isCellMovable(e)&&!i.isTableRow(e)&&!i.isTableCell(e),t.table=t.table||i.isTable(e),t.cell=t.cell||i.isTableCell(e),t.row=t.row||i.isTableRow(e),t.vertices.push(e);var s=i.getCellGeometry(e);if(null!=s&&(s.width>0?null==t.width?t.width=s.width:t.width!=s.width&&(t.width=""):t.containsLabel=!0,s.height>0?null==t.height?t.height=s.height:t.height!=s.height&&(t.height=""):t.containsLabel=!0,!s.relative||null!=s.offset)){var l=s.relative?s.offset.x:s.x,o=s.relative?s.offset.y:s.y;null==t.x?t.x=l:t.x!=l&&(t.x=""),null==t.y?t.y=o:t.y!=o&&(t.y="")}}else i.getModel().isEdge(e)&&(t.edges.push(e),t.resizable=!1,t.rotatable=!1,t.movable=!1);var a=i.view.getState(e);if(null!=a){t.autoSize=t.autoSize||this.isAutoSizeState(a),t.glass=t.glass&&this.isGlassState(a),t.rounded=t.rounded&&this.isRoundedState(a),t.lineJumps=t.lineJumps&&this.isLineJumpState(a),t.comic=t.comic&&this.isComicState(a),t.image=t.image&&this.isImageState(a),t.shadow=t.shadow&&this.isShadowState(a),t.fill=t.fill&&this.isFillState(a);var r=mxUtils.getValue(a.style,mxConstants.STYLE_SHAPE,null);for(var d in t.containsImage=t.containsImage||"image"==r,a.style){var u=a.style[d];null!=u&&(null==t.style[d]?t.style[d]=u:t.style[d]!=u&&(t.style[d]=""))}}},GE.Format.prototype.isFillState=function(t){return t.view.graph.model.isVertex(t.cell)||"arrow"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"filledEdge"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"waterLeakageRope"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"flow2"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"flexArrow"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)},GE.Format.prototype.isGlassState=function(t){var e=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null);return"label"==e||"rectangle"==e||"internalStorage"==e||"ext"==e||"umlLifeline"==e||"swimlane"==e||"process"==e||"progress"==e},GE.Format.prototype.isRoundedState=function(t){return null!=t.shape?t.shape.isRoundable():mxUtils.indexOf(this.roundableShapes,mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null))>=0},GE.Format.prototype.isLineJumpState=function(t){var e=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null);return!mxUtils.getValue(t.style,mxConstants.STYLE_CURVED,!1)&&("connector"==e||"filledEdge"==e||"flow1"==e||"flow2"==e)},GE.Format.prototype.isComicState=function(t){var e=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null);return mxUtils.indexOf(["label","rectangle","internalStorage","corner","parallelogram","note","collate","swimlane","triangle","trapezoid","ext","step","tee","process","progress","link","rhombus","offPageConnector","loopLimit","hexagon","manualInput","singleArrow","doubleArrow","flexArrow","filledEdge","waterLeakageRope","card","umlLifeline","connector","folder","component","sortShape","cross","umlFrame","cube","isoCube","isoRectangle","partialRectangle"],e)>=0},GE.Format.prototype.isAutoSizeState=function(t){return"1"==mxUtils.getValue(t.style,mxConstants.STYLE_AUTOSIZE,null)},GE.Format.prototype.isImageState=function(t){var e=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null);return"label"==e||"image"==e},GE.Format.prototype.isShadowState=function(t){return"image"!=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)},GE.Format.prototype.clear=function(){if(this.container.innerHTML="",null!=this.panels)for(var t=0;t<this.panels.length;t++)this.panels[t].destroy();this.panels=[]},GE.Format.prototype.refresh=function(){if("0px"!=this.container.style.width){this.clear();var t=this.editorUi,e=t.editor.graph,n=document.createElement("div");n.style.whiteSpace="nowrap",n.style.color="rgb(112, 112, 112)",n.style.textAlign="left",n.style.cursor="default";var i=document.createElement("div");if(i.className="geFormatSection",i.style.textAlign="center",i.style.fontWeight="bold",i.style.paddingTop="8px",i.style.fontSize="13px",i.style.borderWidth="0px 0px 1px 1px",i.style.borderStyle="solid",i.style.display="inline-block",i.style.height="25px",i.style.overflow="hidden",i.style.width="100%",this.container.appendChild(n),mxEvent.addListener(i,GE.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()})),e.isSelectionEmpty()){if(mxUtils.write(i,mxResources.get("diagram")),i.style.borderLeftWidth="0px",this.showCloseButton){var s=document.createElement("img");s.setAttribute("border","0"),s.setAttribute("src",GE.Dialog.prototype.closeImage),s.setAttribute("title",mxResources.get("hide")),s.style.position="absolute",s.style.display="block",s.style.right="0px",s.style.top="8px",s.style.cursor="pointer",s.style.marginTop="1px",s.style.marginRight="17px",s.style.border="1px solid transparent",s.style.padding="1px",s.style.opacity=.5,i.appendChild(s),mxEvent.addListener(s,"click",function(){t.actions.get("formatPanel").funct()})}n.appendChild(i),this.panels.push(new GE.DiagramFormatPanel(this,t,n))}else if(e.isEditing())mxUtils.write(i,mxResources.get("text")),n.appendChild(i),this.panels.push(new GE.TextFormatPanel(this,t,n));else{var l=this.getSelectionState().containsLabel;let s=!1;if(this.selectionState.vertices.length>0)for(let t=0;t<this.selectionState.vertices.length;t++){const n=this.selectionState.vertices[t];if(e.view.getState(n).disableText){s=!0;break}}var o=null,a=null,r=mxUtils.bind(this,function(t,e,n){var i=mxUtils.bind(this,function(i){o!=t&&(l?this.labelIndex=n:this.currentIndex=n,null!=o&&(o.style.backgroundColor=this.inactiveTabBackgroundColor,o.style.borderBottomWidth="1px"),(o=t).style.backgroundColor="",o.style.borderBottomWidth="0px",a!=e&&(null!=a&&(a.style.display="none"),(a=e).style.display=""))});mxEvent.addListener(t,"click",i),mxEvent.addListener(t,GE.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()})),n==(l?this.labelIndex:this.currentIndex)&&i()}),d=0;i.style.backgroundColor=this.inactiveTabBackgroundColor,i.style.borderLeftWidth="1px",i.style.cursor="pointer",i.style.width=l||s?"50%":"33.3%",i.style.width=l||s?"50%":"33.3%";var u=i.cloneNode(!1),m=u.cloneNode(!1);if(u.style.backgroundColor=this.inactiveTabBackgroundColor,m.style.backgroundColor=this.inactiveTabBackgroundColor,l)u.style.borderLeftWidth="0px";else{i.style.borderLeftWidth="0px",mxUtils.write(i,mxResources.get("style")),n.appendChild(i);var p=n.cloneNode(!1);p.style.display="none",this.panels.push(new GE.StyleFormatPanel(this,t,p)),this.container.appendChild(p),r(i,p,d++)}if(!s){mxUtils.write(u,mxResources.get("text")),n.appendChild(u);var c=n.cloneNode(!1);c.style.display="none",this.panels.push(new GE.TextFormatPanel(this,t,c)),this.container.appendChild(c)}mxUtils.write(m,mxResources.get("arrange")),n.appendChild(m);var g=n.cloneNode(!1);g.style.display="none",this.panels.push(new GE.ArrangePanel(this,t,g)),this.container.appendChild(g),s||r(u,c,d++),r(m,g,d++)}}},GE.BaseFormatPanel=function(t,e,n){this.format=t,this.editorUi=e,this.container=n,this.listeners=[]},GE.BaseFormatPanel.prototype.buttonBackgroundColor="white",GE.BaseFormatPanel.prototype.getSelectionState=function(){for(var t=this.editorUi.editor.graph,e=t.getSelectionCells(),n=null,i=0;i<e.length;i++){var s=t.view.getState(e[i]);if(null!=s){var l=mxUtils.getValue(s.style,mxConstants.STYLE_SHAPE,null);if(null!=l)if(null==n)n=l;else if(n!=l)return null}}return n},GE.BaseFormatPanel.prototype.installInputHandler=function(t,e,n,i,s,l,o,a){l=null!=l?l:"",a=null!=a&&a;var r=this.editorUi,d=r.editor.graph;i=null!=i?i:1,s=null!=s?s:999;var u=null,m=!1,p=mxUtils.bind(this,function(p){var c=a?parseFloat(t.value):parseInt(t.value);if(isNaN(c)||e!=mxConstants.STYLE_ROTATION||(c=mxUtils.mod(Math.round(100*c),36e3)/100),c=Math.min(s,Math.max(i,isNaN(c)?n:c)),d.cellEditor.isContentEditing()&&o)m||(m=!0,null!=u&&(d.cellEditor.restoreSelection(u),u=null),o(c),t.value=c+l,m=!1);else if(c!=mxUtils.getValue(this.format.getSelectionState().style,e,n)){d.isEditing()&&d.stopEditing(!0),d.getModel().beginUpdate();try{var g=d.getSelectionCells();d.setCellStyles(e,c,g),e==mxConstants.STYLE_FONTSIZE&&d.updateLabelElements(d.getSelectionCells(),function(t){t.style.fontSize=c+"px",t.removeAttribute("size")});for(var h=0;h<g.length;h++)0==d.model.getChildCount(g[h])&&d.autoSizeCell(g[h],!1);r.fireEvent(new mxEventObject("styleChanged","keys",[e],"values",[c],"cells",g))}finally{d.getModel().endUpdate()}}t.value=c+l,mxEvent.consume(p)});return o&&d.cellEditor.isContentEditing()&&mxEvent.addListener(t,"mousedown",function(){document.activeElement==d.cellEditor.textarea&&(u=d.cellEditor.saveSelection())}),mxEvent.addListener(t,"change",p),mxEvent.addListener(t,"blur",p),p},GE.BaseFormatPanel.prototype.createPanel=function(){var t=document.createElement("div");return t.className="geFormatSection",t.style.padding="12px 0px 12px 18px",t},GE.BaseFormatPanel.prototype.createTitle=function(t){var e=document.createElement("div");return e.style.padding="0px 0px 6px 0px",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.width="200px",e.style.fontWeight="bold",mxUtils.write(e,t),e},GE.BaseFormatPanel.prototype.createStepper=function(t,e,n,i,s,l,o){n=null!=n?n:1,i=null!=i?i:8,(GE.IS_MT||document.documentMode>=8)&&(i+=1);var a=document.createElement("div");mxUtils.setPrefixedStyle(a.style,"borderRadius","3px"),a.style.border="1px solid rgb(192, 192, 192)",a.style.position="absolute";var r=document.createElement("div");r.style.borderBottom="1px solid rgb(192, 192, 192)",r.style.position="relative",r.style.height=i+"px",r.style.width="10px",r.className="geBtnUp",a.appendChild(r);var d=r.cloneNode(!1);if(d.style.border="none",d.style.height=i+"px",d.className="geBtnDown",a.appendChild(d),mxEvent.addListener(d,"click",function(i){""==t.value&&(t.value=l||"2");var s=o?parseFloat(t.value):parseInt(t.value);isNaN(s)||(t.value=s-n,null!=e&&e(i)),mxEvent.consume(i)}),mxEvent.addListener(r,"click",function(i){""==t.value&&(t.value=l||"0");var s=o?parseFloat(t.value):parseInt(t.value);isNaN(s)||(t.value=s+n,null!=e&&e(i)),mxEvent.consume(i)}),s){var u=null;mxEvent.addGestureListeners(a,function(t){mxEvent.consume(t)},null,function(t){if(null!=u){try{u.select()}catch(t){}u=null,mxEvent.consume(t)}})}return a},GE.BaseFormatPanel.prototype.createOption=function(t,e,n,i){var s=document.createElement("div");s.style.padding="6px 0px 1px 0px",s.style.whiteSpace="nowrap",s.style.overflow="hidden",s.style.width="200px",s.style.height="18px";var l=document.createElement("input");l.setAttribute("type","checkbox"),l.style.margin="0px 6px 0px 0px",s.appendChild(l);var o=document.createElement("span");mxUtils.write(o,t),s.appendChild(o);var a=!1,r=e(),d=function(t){a||(a=!0,t?(l.setAttribute("checked","checked"),l.defaultChecked=!0,l.checked=!0):(l.removeAttribute("checked"),l.defaultChecked=!1,l.checked=!1),r!=t&&(r=t,e()!=r&&n(r)),a=!1)};return mxEvent.addListener(s,"click",function(t){if("disabled"!=l.getAttribute("disabled")){var e=mxEvent.getSource(t);e!=s&&e!=o||(l.checked=!l.checked),d(l.checked)}}),d(r),null!=i&&(i.install(d),this.listeners.push(i)),s},GE.BaseFormatPanel.prototype.createCellOption=function(t,e,n,i,s,l,o,a){i=null!=i?"null"==i?null:i:"1",s=null!=s?"null"==s?null:s:"0";var r=this.editorUi,d=r.editor.graph;return this.createOption(t,function(){var t=d.view.getState(d.getSelectionCell());return null!=t?mxUtils.getValue(t.style,e,n)!=s:null},function(t){if(a&&d.stopEditing(),null!=o)o.funct();else{d.getModel().beginUpdate();try{var n=t?i:s;d.setCellStyles(e,n,d.getSelectionCells()),null!=l&&l(d.getSelectionCells(),n),r.fireEvent(new mxEventObject("styleChanged","keys",[e],"values",[n],"cells",d.getSelectionCells()))}finally{d.getModel().endUpdate()}}},{install:function(t){this.listener=function(){var i=d.view.getState(d.getSelectionCell());null!=i&&t(mxUtils.getValue(i.style,e,n)!=s)},d.getModel().addListener(mxEvent.CHANGE,this.listener)},destroy:function(){d.getModel().removeListener(this.listener)}})},GE.BaseFormatPanel.prototype.createColorOption=function(t,e,n,i,s,l,o){var a=document.createElement("div");a.style.padding="6px 0px 1px 0px",a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.width="200px",a.style.height="18px";var r=document.createElement("input");r.setAttribute("type","checkbox"),r.style.margin="0px 6px 0px 0px",o||a.appendChild(r);var d=document.createElement("span");mxUtils.write(d,t),a.appendChild(d);var u=e(),m=!1,p=null,c=function(t,s,a){m||(m=!0,t=/(^#?[a-zA-Z0-9]*$)/.test(t)?t:i,p.innerHTML='<div style="width:36px;height:12px;margin:3px;border:1px solid black;background-color:'+mxUtils.htmlEntities(null!=t&&t!=mxConstants.NONE?t:i)+';"></div>',null!=t&&t!=mxConstants.NONE?(r.setAttribute("checked","checked"),r.defaultChecked=!0,r.checked=!0):(r.removeAttribute("checked"),r.defaultChecked=!1,r.checked=!1),p.style.display=r.checked||o?"":"none",null!=l&&l(t),s||(u=t,(a||o||e()!=u)&&n(u)),m=!1)};return(p=mxUtils.button("",mxUtils.bind(this,function(t){this.editorUi.pickColor(u,function(t){c(t,null,!0)}),mxEvent.consume(t)}))).style.position="absolute",p.style.marginTop="-4px",p.style.right="20px",p.style.height="22px",p.className="geColorBtn",p.style.display=r.checked||o?"":"none",a.appendChild(p),mxEvent.addListener(a,"click",function(t){var e=mxEvent.getSource(t);e!=r&&"INPUT"==e.nodeName||(e!=r&&(r.checked=!r.checked),r.checked||null==u||u==mxConstants.NONE||i==mxConstants.NONE||(i=u),c(r.checked?i:mxConstants.NONE))}),c(u,!0),null!=s&&(s.install(c),this.listeners.push(s)),a},GE.BaseFormatPanel.prototype.createCellColorOption=function(t,e,n,i,s){var l=this.editorUi,o=l.editor.graph;return this.createColorOption(t,function(){var t=o.view.getState(o.getSelectionCell());return null!=t?mxUtils.getValue(t.style,e,null):null},function(t){o.getModel().beginUpdate();try{null!=s&&s(t),o.setCellStyles(e,t,o.getSelectionCells()),l.fireEvent(new mxEventObject("styleChanged","keys",[e],"values",[t],"cells",o.getSelectionCells()))}finally{o.getModel().endUpdate()}},n||mxConstants.NONE,{install:function(t){this.listener=function(){var n=o.view.getState(o.getSelectionCell());null!=n&&t(mxUtils.getValue(n.style,e,null))},o.getModel().addListener(mxEvent.CHANGE,this.listener)},destroy:function(){o.getModel().removeListener(this.listener)}},i)},GE.BaseFormatPanel.prototype.addArrow=function(t,e){e=null!=e?e:10;var n=document.createElement("div");n.style.display="inline-block",n.style.padding="6px",n.style.paddingRight="4px";var i=10-e;2==i?n.style.paddingTop="6px":i>0?n.style.paddingTop=6-i+"px":n.style.marginTop="-2px",n.style.height=e+"px",n.style.borderLeft="1px solid #a0a0a0",n.innerHTML='<img border="0" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHBJREFUeNpidHB2ZyAGsACxDRBPIKCuA6TwCBB/h2rABu4A8SYmKCcXiP/iUFgAxL9gCi8A8SwsirZCMQMTkmANEH9E4v+CmsaArvAdyNFI/FlQ92EoBIE+qCRIUz168DBgsU4OqhinQpgHMABAgAEALY4XLIsJ20oAAAAASUVORK5CYII=" style="margin-bottom:4px;">',mxUtils.setOpacity(n,70);var s=t.getElementsByTagName("div")[0];return null!=s&&(s.style.paddingRight="6px",s.style.marginLeft="4px",s.style.marginTop="-1px",s.style.display="inline-block",mxUtils.setOpacity(s,60)),mxUtils.setOpacity(t,100),t.style.border="1px solid #a0a0a0",t.style.backgroundColor=this.buttonBackgroundColor,t.style.backgroundImage="none",t.style.width="auto",t.className+=" geColorBtn",mxUtils.setPrefixedStyle(t.style,"borderRadius","3px"),t.appendChild(n),s},GE.BaseFormatPanel.prototype.addUnitInput=function(t,e,n,i,s,l,o,a,r){o=null!=o?o:0;var d=document.createElement("input");d.style.position="absolute",d.style.textAlign="right",d.style.marginTop="-2px",d.style.right=n+12+"px",d.style.width=i+"px",t.appendChild(d);var u=this.createStepper(d,s,l,null,a,null,r);return u.style.marginTop=o-2+"px",u.style.right=n+"px",t.appendChild(u),d},GE.BaseFormatPanel.prototype.createRelativeOption=function(t,e,n,i,s){n=null!=n?n:44;var l=this.editorUi.editor.graph,o=this.createPanel();o.style.paddingTop="10px",o.style.paddingBottom="10px",mxUtils.write(o,t),o.style.fontWeight="bold";var a=mxUtils.bind(this,function(t){if(null!=i)i(r);else{var n=parseInt(r.value);n=Math.min(100,Math.max(0,isNaN(n)?100:n));var s=l.view.getState(l.getSelectionCell());null!=s&&n!=mxUtils.getValue(s.style,e,100)&&(100==n&&(n=null),l.setCellStyles(e,n,l.getSelectionCells()),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[e],"values",[n],"cells",l.getSelectionCells()))),r.value=(null!=n?n:"100")+" %"}mxEvent.consume(t)}),r=this.addUnitInput(o,"%",20,n,a,10,-15,null!=i);if(null!=e){var d=mxUtils.bind(this,function(t,n,i){if(i||r!=document.activeElement){var s=this.format.getSelectionState(),l=parseInt(mxUtils.getValue(s.style,e,100));r.value=isNaN(l)?"":l+" %"}});mxEvent.addListener(r,"keydown",function(t){13==t.keyCode?(l.container.focus(),mxEvent.consume(t)):27==t.keyCode&&(d(null,null,!0),l.container.focus(),mxEvent.consume(t))}),l.getModel().addListener(mxEvent.CHANGE,d),this.listeners.push({destroy:function(){l.getModel().removeListener(d)}}),d()}return mxEvent.addListener(r,"blur",a),mxEvent.addListener(r,"change",a),null!=s&&s(r),o},GE.BaseFormatPanel.prototype.addLabel=function(t,e,n,i){i=null!=i?i:61;var s=document.createElement("div");mxUtils.write(s,e),s.style.position="absolute",s.style.right=n+"px",s.style.width=i+"px",s.style.marginTop="6px",s.style.textAlign="center",t.appendChild(s)},GE.BaseFormatPanel.prototype.addKeyHandler=function(t,e){mxEvent.addListener(t,"keydown",mxUtils.bind(this,function(t){13==t.keyCode?(this.editorUi.editor.graph.container.focus(),mxEvent.consume(t)):27==t.keyCode&&(null!=e&&e(null,null,!0),this.editorUi.editor.graph.container.focus(),mxEvent.consume(t))}))},GE.BaseFormatPanel.prototype.styleButtons=function(t){for(var e=0;e<t.length;e++)mxUtils.setPrefixedStyle(t[e].style,"borderRadius","3px"),mxUtils.setOpacity(t[e],100),t[e].style.border="1px solid #a0a0a0",t[e].style.padding="4px",t[e].style.paddingTop="3px",t[e].style.paddingRight="1px",t[e].style.margin="1px",t[e].style.width="24px",t[e].style.height="20px",t[e].className+=" geColorBtn"},GE.BaseFormatPanel.prototype.destroy=function(){if(null!=this.listeners){for(var t=0;t<this.listeners.length;t++)this.listeners[t].destroy();this.listeners=null}},GE.ArrangePanel=function(t,e,n){GE.BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(GE.ArrangePanel,GE.BaseFormatPanel),GE.ArrangePanel.prototype.init=function(){var t=this.editorUi.editor.graph,e=this.format.getSelectionState();if(this.container.appendChild(this.addLayerOps(this.createPanel())),this.addGeometry(this.container),this.addEdgeGeometry(this.container),e.containsLabel&&0!=e.edges.length||this.container.appendChild(this.addAngle(this.createPanel())),e.containsLabel||0!=e.edges.length||"rectangle"==e.style.shape||"label"==e.style.shape||this.container.appendChild(this.addFlip(this.createPanel())),e.vertices.length>1&&(this.container.appendChild(this.addAlign(this.createPanel())),this.container.appendChild(this.addDistribute(this.createPanel()))),(t.isTable(e.vertices[0])||t.isTableRow(e.vertices[0])||t.isTableCell(e.vertices[0]))&&this.container.appendChild(this.addTable(this.createPanel())),this.container.appendChild(this.addGroupOps(this.createPanel())),e.containsLabel){var n=document.createElement("div");n.style.width="100%",n.style.marginTop="0px",n.style.fontWeight="bold",n.style.padding="10px 0 0 18px",mxUtils.write(n,mxResources.get("style")),this.container.appendChild(n),new GE.StyleFormatPanel(this.format,this.editorUi,this.container)}},GE.ArrangePanel.prototype.addTable=function(t){var e=this.editorUi,n=e.editor.graph,i=this.format.getSelectionState();t.style.paddingTop="6px",t.style.paddingBottom="10px";var s=document.createElement("div");s.style.marginTop="2px",s.style.marginBottom="8px",s.style.fontWeight="bold",mxUtils.write(s,mxResources.get("table")),t.appendChild(s);var l=document.createElement("div");l.style.position="relative",l.style.paddingLeft="0px",l.style.borderWidth="0px",l.className="geToolbarContainer";var o=[e.toolbar.addButton("geSprite-insertcolumnbefore",mxResources.get("insertColumnBefore"),mxUtils.bind(this,function(){try{n.insertTableColumn(i.vertices[0],!0)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-insertcolumnafter",mxResources.get("insertColumnAfter"),mxUtils.bind(this,function(){try{n.insertTableColumn(i.vertices[0],!1)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-deletecolumn",mxResources.get("deleteColumn"),mxUtils.bind(this,function(){try{n.deleteTableColumn(i.vertices[0])}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-insertrowbefore",mxResources.get("insertRowBefore"),mxUtils.bind(this,function(){try{n.insertTableRow(i.vertices[0],!0)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-insertrowafter",mxResources.get("insertRowAfter"),mxUtils.bind(this,function(){try{n.insertTableRow(i.vertices[0],!1)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-deleterow",mxResources.get("deleteRow"),mxUtils.bind(this,function(){try{n.deleteTableRow(i.vertices[0])}catch(t){e.handleError(t)}}),l)];return this.styleButtons(o),t.appendChild(l),o[2].style.marginRight="9px",t},GE.ArrangePanel.prototype.addLayerOps=function(t){var e,n=this.editorUi;return(e=mxUtils.button(mxResources.get("toFront"),function(t){n.actions.get("toFront").funct()})).setAttribute("title",mxResources.get("toFront")+" ("+this.editorUi.actions.get("toFront").shortcut+")"),e.style.width="100px",e.style.marginRight="2px",t.appendChild(e),(e=mxUtils.button(mxResources.get("toBack"),function(t){n.actions.get("toBack").funct()})).setAttribute("title",mxResources.get("toBack")+" ("+this.editorUi.actions.get("toBack").shortcut+")"),e.style.width="100px",t.appendChild(e),t},GE.ArrangePanel.prototype.addGroupOps=function(t){var e=this.editorUi,n=e.editor.graph,i=n.getSelectionCell(),s=this.format.getSelectionState(),l=0,o=null;if((t.style.paddingTop="8px",t.style.paddingBottom="6px",n.getSelectionCount()>1?((o=mxUtils.button(mxResources.get("group"),function(t){e.actions.get("group").funct()})).setAttribute("title",mxResources.get("group")+" ("+this.editorUi.actions.get("group").shortcut+")"),o.style.width="202px",o.style.marginBottom="2px",t.appendChild(o),l++):1!=n.getSelectionCount()||n.getModel().isEdge(i)||n.isSwimlane(i)||n.isTable(i)||s.row||s.cell||!(n.getModel().getChildCount(i)>0)||((o=mxUtils.button(mxResources.get("ungroup"),function(t){e.actions.get("ungroup").funct()})).setAttribute("title",mxResources.get("ungroup")+" ("+this.editorUi.actions.get("ungroup").shortcut+")"),o.style.width="202px",o.style.marginBottom="2px",t.appendChild(o),l++),s.vertices.length>0)&&(l>0&&(mxUtils.br(t),l=0),(o=mxUtils.button(mxResources.get("copySize"),function(t){e.actions.get("copySize").funct()})).setAttribute("title",mxResources.get("copySize")+" ("+this.editorUi.actions.get("copySize").shortcut+")"),o.style.width="202px",o.style.marginBottom="2px",t.appendChild(o),l++,null!=e.copiedSize)){var a=mxUtils.button(mxResources.get("pasteSize"),function(t){e.actions.get("pasteSize").funct()});a.setAttribute("title",mxResources.get("pasteSize")+" ("+this.editorUi.actions.get("pasteSize").shortcut+")"),t.appendChild(a),l++,o.style.width="100px",o.style.marginBottom="2px",a.style.width="100px",a.style.marginBottom="2px"}return 1==n.getSelectionCount()&&n.getModel().isVertex(i)&&!s.row&&!s.cell&&n.getModel().isVertex(n.getModel().getParent(i))?(l>0&&mxUtils.br(t),(o=mxUtils.button(mxResources.get("removeFromGroup"),function(t){e.actions.get("removeFromGroup").funct()})).setAttribute("title",mxResources.get("removeFromGroup")),o.style.width="202px",o.style.marginBottom="2px",t.appendChild(o),l++):n.getSelectionCount()>0&&(l>0&&mxUtils.br(t),(o=mxUtils.button(mxResources.get("clearWaypoints"),mxUtils.bind(this,function(t){this.editorUi.actions.get("clearWaypoints").funct()}))).setAttribute("title",mxResources.get("clearWaypoints")+" ("+this.editorUi.actions.get("clearWaypoints").shortcut+")"),o.style.width="202px",o.style.marginBottom="2px",t.appendChild(o),l++),0==l&&(t.style.display="none"),t},GE.ArrangePanel.prototype.addAlign=function(t){var e=this.editorUi.editor.graph;t.style.paddingTop="6px",t.style.paddingBottom="12px",t.appendChild(this.createTitle(mxResources.get("align")));var n=document.createElement("div");n.style.position="relative",n.style.paddingLeft="0px",n.style.borderWidth="0px",n.className="geToolbarContainer";var i=this.editorUi.toolbar.addButton("geSprite-alignleft",mxResources.get("left"),function(){e.alignCells(mxConstants.ALIGN_LEFT)},n),s=this.editorUi.toolbar.addButton("geSprite-aligncenter",mxResources.get("center"),function(){e.alignCells(mxConstants.ALIGN_CENTER)},n),l=this.editorUi.toolbar.addButton("geSprite-alignright",mxResources.get("right"),function(){e.alignCells(mxConstants.ALIGN_RIGHT)},n),o=this.editorUi.toolbar.addButton("geSprite-aligntop",mxResources.get("top"),function(){e.alignCells(mxConstants.ALIGN_TOP)},n),a=this.editorUi.toolbar.addButton("geSprite-alignmiddle",mxResources.get("middle"),function(){e.alignCells(mxConstants.ALIGN_MIDDLE)},n),r=this.editorUi.toolbar.addButton("geSprite-alignbottom",mxResources.get("bottom"),function(){e.alignCells(mxConstants.ALIGN_BOTTOM)},n);return this.styleButtons([i,s,l,o,a,r]),l.style.marginRight="6px",t.appendChild(n),t},GE.ArrangePanel.prototype.addFlip=function(t){var e=this.editorUi.editor.graph;t.style.paddingTop="6px",t.style.paddingBottom="10px";var n,i=document.createElement("div");return i.style.marginTop="2px",i.style.marginBottom="8px",i.style.fontWeight="bold",mxUtils.write(i,mxResources.get("flip")),t.appendChild(i),(n=mxUtils.button(mxResources.get("horizontal"),function(t){e.toggleCellStyles(mxConstants.STYLE_FLIPH,!1)})).setAttribute("title",mxResources.get("horizontal")),n.style.width="100px",n.style.marginRight="2px",t.appendChild(n),(n=mxUtils.button(mxResources.get("vertical"),function(t){e.toggleCellStyles(mxConstants.STYLE_FLIPV,!1)})).setAttribute("title",mxResources.get("vertical")),n.style.width="100px",t.appendChild(n),t},GE.ArrangePanel.prototype.addDistribute=function(t){var e,n=this.editorUi.editor.graph;return t.style.paddingTop="6px",t.style.paddingBottom="12px",t.appendChild(this.createTitle(mxResources.get("distribute"))),(e=mxUtils.button(mxResources.get("horizontal"),function(t){n.distributeCells(!0)})).setAttribute("title",mxResources.get("horizontal")),e.style.width="100px",e.style.marginRight="2px",t.appendChild(e),(e=mxUtils.button(mxResources.get("vertical"),function(t){n.distributeCells(!1)})).setAttribute("title",mxResources.get("vertical")),e.style.width="100px",t.appendChild(e),t},GE.ArrangePanel.prototype.addAngle=function(t){var e=this.editorUi,n=e.editor.graph,i=this.format.getSelectionState();t.style.paddingBottom="8px";var s=document.createElement("div");s.style.position="absolute",s.style.width="70px",s.style.marginTop="0px",s.style.fontWeight="bold";var l=null,o=null,a=null;if(!i.rotatable||i.table||i.row||i.cell?t.style.paddingTop="8px":(mxUtils.write(s,mxResources.get("angle")),t.appendChild(s),l=this.addUnitInput(t,"°",20,44,function(){o.apply(this,arguments)}),mxUtils.br(t),t.style.paddingTop="10px"),!i.containsLabel){var r=mxResources.get("reverse");i.vertices.length>0&&i.edges.length>0?r=mxResources.get("turn")+" / "+r:i.vertices.length>0&&(r=mxResources.get("turn")),(a=mxUtils.button(r,function(t){e.actions.get("turn").funct(t)})).setAttribute("title",r+" ("+this.editorUi.actions.get("turn").shortcut+")"),a.style.width="202px",t.appendChild(a),null!=l&&(a.style.marginTop="8px")}if(null!=l){var d=mxUtils.bind(this,function(t,e,n){if(n||document.activeElement!=l){i=this.format.getSelectionState();var s=parseFloat(mxUtils.getValue(i.style,mxConstants.STYLE_ROTATION,0));l.value=isNaN(s)?"":s+"°"}});o=this.installInputHandler(l,mxConstants.STYLE_ROTATION,0,0,360,"°",null,!0),this.addKeyHandler(l,d),n.getModel().addListener(mxEvent.CHANGE,d),this.listeners.push({destroy:function(){n.getModel().removeListener(d)}}),d()}return t},GE.BaseFormatPanel.prototype.getUnit=function(){switch(this.editorUi.editor.graph.view.unit){case mxConstants.POINTS:return"pt";case mxConstants.INCHES:return'"';case mxConstants.MILLIMETERS:return"mm"}},GE.BaseFormatPanel.prototype.inUnit=function(t){return this.editorUi.editor.graph.view.formatUnitText(t)},GE.BaseFormatPanel.prototype.fromUnit=function(t){switch(this.editorUi.editor.graph.view.unit){case mxConstants.POINTS:return t;case mxConstants.INCHES:return t*mxConstants.PIXELS_PER_INCH;case mxConstants.MILLIMETERS:return t*mxConstants.PIXELS_PER_MM}},GE.BaseFormatPanel.prototype.isFloatUnit=function(){return this.editorUi.editor.graph.view.unit!=mxConstants.POINTS},GE.BaseFormatPanel.prototype.getUnitStep=function(){switch(this.editorUi.editor.graph.view.unit){case mxConstants.POINTS:return 1;case mxConstants.INCHES:return.1;case mxConstants.MILLIMETERS:return.5}},GE.ArrangePanel.prototype.addGeometry=function(t){var e,n,i,s,l=this,o=this.editorUi,a=o.editor.graph,r=this.format.getSelectionState(),d=this.createPanel();d.style.paddingBottom="8px",(x=document.createElement("div")).style.position="absolute",x.style.width="50px",x.style.marginTop="0px",x.style.fontWeight="bold",mxUtils.write(x,mxResources.get("size")),d.appendChild(x);var u=this.addUnitInput(d,this.getUnit(),84,44,function(){e.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),m=this.addUnitInput(d,this.getUnit(),20,44,function(){n.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),p=document.createElement("div");p.className="geSprite geSprite-fit",p.setAttribute("title",mxResources.get("autosize")+" ("+this.editorUi.actions.get("autosize").shortcut+")"),p.style.position="relative",p.style.cursor="pointer",p.style.marginTop="-3px",p.style.border="0px",p.style.left="52px",mxUtils.setOpacity(p,50),mxEvent.addListener(p,"mouseenter",function(){mxUtils.setOpacity(p,100)}),mxEvent.addListener(p,"mouseleave",function(){mxUtils.setOpacity(p,50)}),mxEvent.addListener(p,"click",function(){o.actions.get("autosize").funct()}),d.appendChild(p),r.row?(u.style.visibility="hidden",u.nextSibling.style.visibility="hidden"):this.addLabel(d,mxResources.get("width"),84),this.addLabel(d,mxResources.get("height"),20),mxUtils.br(d);var c=document.createElement("div");c.style.paddingTop="8px",c.style.paddingRight="20px",c.style.whiteSpace="nowrap",c.style.textAlign="right";var g=this.createCellOption(mxResources.get("constrainProportions"),mxConstants.STYLE_ASPECT,null,"fixed","null");g.style.width="100%",c.appendChild(g),r.cell||r.row?p.style.visibility="hidden":d.appendChild(c);var h=g.getElementsByTagName("input")[0];this.addKeyHandler(u,C),this.addKeyHandler(m,C),e=this.addGeometryHandler(u,function(t,e,n){if(a.isTableCell(n))return a.setTableColumnWidth(n,e-t.width,!0),!0;if(t.width>0){e=Math.max(1,l.fromUnit(e));h.checked&&(t.height=Math.round(t.height*e*100/t.width)/100),t.width=e}}),n=this.addGeometryHandler(m,function(t,e,n){if(a.isTableCell(n)&&(n=a.model.getParent(n)),a.isTableRow(n))return a.setTableRowHeight(n,e-t.height),!0;if(t.height>0){e=Math.max(1,l.fromUnit(e));h.checked&&(t.width=Math.round(t.width*e*100/t.height)/100),t.height=e}}),(r.resizable||r.row||r.cell)&&t.appendChild(d);var x,y=this.createPanel();y.style.paddingBottom="30px",(x=document.createElement("div")).style.position="absolute",x.style.width="70px",x.style.marginTop="0px",x.style.fontWeight="bold",mxUtils.write(x,mxResources.get("position")),y.appendChild(x);var E=this.addUnitInput(y,this.getUnit(),84,44,function(){i.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),S=this.addUnitInput(y,this.getUnit(),20,44,function(){s.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit());mxUtils.br(y),this.addLabel(y,mxResources.get("left"),84),this.addLabel(y,mxResources.get("top"),20);var C=mxUtils.bind(this,function(t,e,n){(r=this.format.getSelectionState()).containsLabel||r.vertices.length!=a.getSelectionCount()||null==r.width||null==r.height?d.style.display="none":(d.style.display="",(n||document.activeElement!=u)&&(u.value=this.inUnit(r.width)+(""==r.width?"":" "+this.getUnit())),(n||document.activeElement!=m)&&(m.value=this.inUnit(r.height)+(""==r.height?"":" "+this.getUnit()))),r.vertices.length==a.getSelectionCount()&&null!=r.x&&null!=r.y?(y.style.display="",(n||document.activeElement!=E)&&(E.value=this.inUnit(r.x)+(""==r.x?"":" "+this.getUnit())),(n||document.activeElement!=S)&&(S.value=this.inUnit(r.y)+(""==r.y?"":" "+this.getUnit()))):y.style.display="none"});this.addKeyHandler(E,C),this.addKeyHandler(S,C),a.getModel().addListener(mxEvent.CHANGE,C),this.listeners.push({destroy:function(){a.getModel().removeListener(C)}}),C(),i=this.addGeometryHandler(E,function(t,e){e=l.fromUnit(e),t.relative?t.offset.x=e:t.x=e}),s=this.addGeometryHandler(S,function(t,e){e=l.fromUnit(e),t.relative?t.offset.y=e:t.y=e}),r.movable&&t.appendChild(y)},GE.ArrangePanel.prototype.addGeometryHandler=function(t,e){var n=this.editorUi.editor.graph,i=null,s=this;function l(l){if(""!=t.value){var o=parseFloat(t.value);if(isNaN(o))t.value=i+" "+s.getUnit();else if(o!=i){n.getModel().beginUpdate();try{for(var a=n.getSelectionCells(),r=0;r<a.length;r++)if(n.getModel().isVertex(a[r])){var d=n.getCellGeometry(a[r]);if(null!=d&&(d=d.clone(),!e(d,o,a[r]))){var u=n.view.getState(a[r]);null!=u&&n.isRecursiveVertexResize(u)&&n.resizeChildCells(a[r],d),n.getModel().setGeometry(a[r],d),n.constrainChildCells(a[r])}}}finally{n.getModel().endUpdate()}i=o,t.value=o+" "+s.getUnit()}}mxEvent.consume(l)}return mxEvent.addListener(t,"blur",l),mxEvent.addListener(t,"change",l),mxEvent.addListener(t,"focus",function(){i=t.value}),l},GE.ArrangePanel.prototype.addEdgeGeometryHandler=function(t,e){var n=this.editorUi.editor.graph,i=null;function s(s){if(""!=t.value){var l=parseFloat(t.value);if(isNaN(l))t.value=i+" pt";else if(l!=i){n.getModel().beginUpdate();try{for(var o=n.getSelectionCells(),a=0;a<o.length;a++)if(n.getModel().isEdge(o[a])){var r=n.getCellGeometry(o[a]);null!=r&&(r=r.clone(),e(r,l),n.getModel().setGeometry(o[a],r))}}finally{n.getModel().endUpdate()}i=l,t.value=l+" pt"}}mxEvent.consume(s)}return mxEvent.addListener(t,"blur",s),mxEvent.addListener(t,"change",s),mxEvent.addListener(t,"focus",function(){i=t.value}),s},GE.ArrangePanel.prototype.addEdgeGeometry=function(t){var e,n,i,s,l,o=this.editorUi,a=o.editor.graph,r=this.format.getSelectionState(),d=this.createPanel();(g=document.createElement("div")).style.position="absolute",g.style.width="70px",g.style.marginTop="0px",g.style.fontWeight="bold",mxUtils.write(g,mxResources.get("width")),d.appendChild(g);var u=this.addUnitInput(d,"pt",20,44,function(){e.apply(this,arguments)});function e(t){var e=parseInt(u.value);(e=Math.min(999,Math.max(1,isNaN(e)?1:e)))!=mxUtils.getValue(r.style,"width",mxCellRenderer.defaultShapes.flexArrow.prototype.defaultWidth)&&(a.setCellStyles("width",e,a.getSelectionCells()),o.fireEvent(new mxEventObject("styleChanged","keys",["width"],"values",[e],"cells",a.getSelectionCells()))),u.value=e+" pt",mxEvent.consume(t)}mxUtils.br(d),this.addKeyHandler(u,E),mxEvent.addListener(u,"blur",e),mxEvent.addListener(u,"change",e),t.appendChild(d);var m=this.createPanel();m.style.paddingBottom="30px",(g=document.createElement("div")).style.position="absolute",g.style.width="70px",g.style.marginTop="0px",g.style.fontWeight="bold",mxUtils.write(g,"Start"),m.appendChild(g);var p=this.addUnitInput(m,"pt",84,44,function(){s.apply(this,arguments)}),c=this.addUnitInput(m,"pt",20,44,function(){l.apply(this,arguments)});mxUtils.br(m),this.addLabel(m,mxResources.get("left"),84),this.addLabel(m,mxResources.get("top"),20),t.appendChild(m),this.addKeyHandler(p,E),this.addKeyHandler(c,E);var g,h=this.createPanel();h.style.paddingBottom="30px",(g=document.createElement("div")).style.position="absolute",g.style.width="70px",g.style.marginTop="0px",g.style.fontWeight="bold",mxUtils.write(g,"End"),h.appendChild(g);var x=this.addUnitInput(h,"pt",84,44,function(){n.apply(this,arguments)}),y=this.addUnitInput(h,"pt",20,44,function(){i.apply(this,arguments)});mxUtils.br(h),this.addLabel(h,mxResources.get("left"),84),this.addLabel(h,mxResources.get("top"),20),t.appendChild(h),this.addKeyHandler(x,E),this.addKeyHandler(y,E);var E=mxUtils.bind(this,function(t,e,n){r=this.format.getSelectionState();var i=a.getSelectionCell();if("link"==r.style.shape||"flexArrow"==r.style.shape){if(d.style.display="",n||document.activeElement!=u){var s=mxUtils.getValue(r.style,"width",mxCellRenderer.defaultShapes.flexArrow.prototype.defaultWidth);u.value=s+" pt"}}else d.style.display="none";if(1==a.getSelectionCount()&&a.model.isEdge(i)){var l=a.model.getGeometry(i);null!=l.sourcePoint&&null==a.model.getTerminal(i,!0)?(p.value=l.sourcePoint.x,c.value=l.sourcePoint.y):m.style.display="none",null!=l.targetPoint&&null==a.model.getTerminal(i,!1)?(x.value=l.targetPoint.x,y.value=l.targetPoint.y):h.style.display="none"}else m.style.display="none",h.style.display="none"});s=this.addEdgeGeometryHandler(p,function(t,e){t.sourcePoint.x=e}),l=this.addEdgeGeometryHandler(c,function(t,e){t.sourcePoint.y=e}),n=this.addEdgeGeometryHandler(x,function(t,e){t.targetPoint.x=e}),i=this.addEdgeGeometryHandler(y,function(t,e){t.targetPoint.y=e}),a.getModel().addListener(mxEvent.CHANGE,E),this.listeners.push({destroy:function(){a.getModel().removeListener(E)}}),E()},GE.TextFormatPanel=function(t,e,n){GE.BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(GE.TextFormatPanel,GE.BaseFormatPanel),GE.TextFormatPanel.prototype.init=function(){this.container.style.borderBottom="none",this.addFont(this.container)},GE.TextFormatPanel.prototype.addFont=function(t){var e=this.editorUi,n=e.editor.graph,i=this.format.getSelectionState(),s=this.createTitle(mxResources.get("font"));s.style.paddingLeft="18px",s.style.paddingTop="10px",s.style.paddingBottom="6px",t.appendChild(s);var l=this.createPanel();if(l.style.paddingTop="2px",l.style.paddingBottom="2px",l.style.position="relative",l.style.marginLeft="-2px",l.style.borderWidth="0px",l.className="geToolbarContainer",n.cellEditor.isContentEditing()){var o=l.cloneNode(),a=this.editorUi.toolbar.addMenu(mxResources.get("style"),mxResources.get("style"),!0,"formatBlock",o,null,!0);a.style.color="rgb(112, 112, 112)",a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.margin="0px",this.addArrow(a),a.style.width="192px",a.style.height="15px",a.getElementsByTagName("div")[0].style.cssFloat="right",t.appendChild(o)}t.appendChild(l);var r=this.createPanel();r.style.marginTop="8px",r.style.borderTop="1px solid #c0c0c0",r.style.paddingTop="6px",r.style.paddingBottom="6px";var d=this.editorUi.toolbar.addMenu("宋体",mxResources.get("fontFamily"),!0,"fontFamily",l,null,!0);d.style.color="rgb(112, 112, 112)",d.style.whiteSpace="nowrap",d.style.overflow="hidden",d.style.margin="0px",this.addArrow(d),d.style.width="192px",d.style.height="15px";var u=l.cloneNode(!1);u.style.marginLeft="-3px";var m=this.editorUi.toolbar.addItems(["bold","italic","underline"],u,!0);m[0].setAttribute("title",mxResources.get("bold")+" ("+this.editorUi.actions.get("bold").shortcut+")"),m[1].setAttribute("title",mxResources.get("italic")+" ("+this.editorUi.actions.get("italic").shortcut+")"),m[2].setAttribute("title",mxResources.get("underline")+" ("+this.editorUi.actions.get("underline").shortcut+")");var p=this.editorUi.toolbar.addItems(["vertical"],u,!0)[0];t.appendChild(u),this.styleButtons(m),this.styleButtons([p]);var c=l.cloneNode(!1);c.style.marginLeft="-3px",c.style.paddingBottom="0px";var g=function(t){return function(){return t()}},h=this.editorUi.toolbar.addButton("geSprite-left",mxResources.get("left"),n.cellEditor.isContentEditing()?function(t){n.cellEditor.alignText(mxConstants.ALIGN_LEFT,t)}:g(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_ALIGN],[mxConstants.ALIGN_LEFT])),c),x=this.editorUi.toolbar.addButton("geSprite-center",mxResources.get("center"),n.cellEditor.isContentEditing()?function(t){n.cellEditor.alignText(mxConstants.ALIGN_CENTER,t)}:g(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_ALIGN],[mxConstants.ALIGN_CENTER])),c),y=this.editorUi.toolbar.addButton("geSprite-right",mxResources.get("right"),n.cellEditor.isContentEditing()?function(t){n.cellEditor.alignText(mxConstants.ALIGN_RIGHT,t)}:g(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_ALIGN],[mxConstants.ALIGN_RIGHT])),c);if(this.styleButtons([h,x,y]),n.cellEditor.isContentEditing()){var E=this.editorUi.toolbar.addButton("geSprite-removeformat",mxResources.get("strikethrough"),function(){document.execCommand("strikeThrough",!1,null)},u);this.styleButtons([E]),E.firstChild.style.background="url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIDBoMjR2MjRIMFYweiIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBjbGlwLXBhdGg9InVybCgjYikiIGZpbGw9IiMwMTAxMDEiIGQ9Ik03LjI0IDguNzVjLS4yNi0uNDgtLjM5LTEuMDMtLjM5LTEuNjcgMC0uNjEuMTMtMS4xNi40LTEuNjcuMjYtLjUuNjMtLjkzIDEuMTEtMS4yOS40OC0uMzUgMS4wNS0uNjMgMS43LS44My42Ni0uMTkgMS4zOS0uMjkgMi4xOC0uMjkuODEgMCAxLjU0LjExIDIuMjEuMzQuNjYuMjIgMS4yMy41NCAxLjY5Ljk0LjQ3LjQuODMuODggMS4wOCAxLjQzLjI1LjU1LjM4IDEuMTUuMzggMS44MWgtMy4wMWMwLS4zMS0uMDUtLjU5LS4xNS0uODUtLjA5LS4yNy0uMjQtLjQ5LS40NC0uNjgtLjItLjE5LS40NS0uMzMtLjc1LS40NC0uMy0uMS0uNjYtLjE2LTEuMDYtLjE2LS4zOSAwLS43NC4wNC0xLjAzLjEzLS4yOS4wOS0uNTMuMjEtLjcyLjM2LS4xOS4xNi0uMzQuMzQtLjQ0LjU1LS4xLjIxLS4xNS40My0uMTUuNjYgMCAuNDguMjUuODguNzQgMS4yMS4zOC4yNS43Ny40OCAxLjQxLjdINy4zOWMtLjA1LS4wOC0uMTEtLjE3LS4xNS0uMjV6TTIxIDEydi0ySDN2Mmg5LjYyYy4xOC4wNy40LjE0LjU1LjIuMzcuMTcuNjYuMzQuODcuNTEuMjEuMTcuMzUuMzYuNDMuNTcuMDcuMi4xMS40My4xMS42OSAwIC4yMy0uMDUuNDUtLjE0LjY2LS4wOS4yLS4yMy4zOC0uNDIuNTMtLjE5LjE1LS40Mi4yNi0uNzEuMzUtLjI5LjA4LS42My4xMy0xLjAxLjEzLS40MyAwLS44My0uMDQtMS4xOC0uMTNzLS42Ni0uMjMtLjkxLS40MmMtLjI1LS4xOS0uNDUtLjQ0LS41OS0uNzUtLjE0LS4zMS0uMjUtLjc2LS4yNS0xLjIxSDYuNGMwIC41NS4wOCAxLjEzLjI0IDEuNTguMTYuNDUuMzcuODUuNjUgMS4yMS4yOC4zNS42LjY2Ljk4LjkyLjM3LjI2Ljc4LjQ4IDEuMjIuNjUuNDQuMTcuOS4zIDEuMzguMzkuNDguMDguOTYuMTMgMS40NC4xMy44IDAgMS41My0uMDkgMi4xOC0uMjhzMS4yMS0uNDUgMS42Ny0uNzljLjQ2LS4zNC44Mi0uNzcgMS4wNy0xLjI3cy4zOC0xLjA3LjM4LTEuNzFjMC0uNi0uMS0xLjE0LS4zMS0xLjYxLS4wNS0uMTEtLjExLS4yMy0uMTctLjMzSDIxeiIvPjwvc3ZnPg==)",E.firstChild.style.backgroundPosition="2px 2px",E.firstChild.style.backgroundSize="18px 18px",this.styleButtons([E])}var S,C,f,T,v,L,R,b=this.editorUi.toolbar.addButton("geSprite-top",mxResources.get("top"),g(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_VERTICAL_ALIGN],[mxConstants.ALIGN_TOP])),c),A=this.editorUi.toolbar.addButton("geSprite-middle",mxResources.get("middle"),g(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_VERTICAL_ALIGN],[mxConstants.ALIGN_MIDDLE])),c),U=this.editorUi.toolbar.addButton("geSprite-bottom",mxResources.get("bottom"),g(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_VERTICAL_ALIGN],[mxConstants.ALIGN_BOTTOM])),c);if(this.styleButtons([b,A,U]),t.appendChild(c),n.cellEditor.isContentEditing()){b.style.display="none",A.style.display="none",U.style.display="none",p.style.display="none",(f=this.editorUi.toolbar.addButton("geSprite-justifyfull",mxResources.get("block"),function(){1==f.style.opacity&&document.execCommand("justifyfull",!1,null)},c)).style.marginRight="9px",f.style.opacity=1,this.styleButtons([f,S=this.editorUi.toolbar.addButton("geSprite-subscript",mxResources.get("subscript")+" ("+GE.Editor.ctrlKey+"+,)",function(){document.execCommand("subscript",!1,null)},c),C=this.editorUi.toolbar.addButton("geSprite-superscript",mxResources.get("superscript")+" ("+GE.Editor.ctrlKey+"+.)",function(){document.execCommand("superscript",!1,null)},c)]),S.style.marginLeft="9px";var N=c.cloneNode(!1);N.style.paddingTop="4px";var I=[this.editorUi.toolbar.addButton("geSprite-orderedlist",mxResources.get("numberedList"),function(){document.execCommand("insertorderedlist",!1,null)},N),this.editorUi.toolbar.addButton("geSprite-unorderedlist",mxResources.get("bulletedList"),function(){document.execCommand("insertunorderedlist",!1,null)},N),this.editorUi.toolbar.addButton("geSprite-outdent",mxResources.get("decreaseIndent"),function(){document.execCommand("outdent",!1,null)},N),this.editorUi.toolbar.addButton("geSprite-indent",mxResources.get("increaseIndent"),function(){document.execCommand("indent",!1,null)},N),this.editorUi.toolbar.addButton("geSprite-removeformat",mxResources.get("removeFormat"),function(){document.execCommand("removeformat",!1,null)},N),this.editorUi.toolbar.addButton("geSprite-code",mxResources.get("html"),function(){n.cellEditor.toggleViewMode()},N)];this.styleButtons(I),I[I.length-2].style.marginLeft="9px",t.appendChild(N)}else m[2].style.marginRight="9px",y.style.marginRight="9px";var _=l.cloneNode(!1);_.style.marginLeft="0px",_.style.paddingTop="8px",_.style.paddingBottom="4px",_.style.fontWeight="normal",mxUtils.write(_,mxResources.get("position"));var O=document.createElement("select");O.style.position="absolute",O.style.right="20px",O.style.width="97px",O.style.marginTop="-2px";for(var w=["topLeft","top","topRight","left","center","right","bottomLeft","bottom","bottomRight"],G={topLeft:[mxConstants.ALIGN_LEFT,mxConstants.ALIGN_TOP,mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_BOTTOM],top:[mxConstants.ALIGN_CENTER,mxConstants.ALIGN_TOP,mxConstants.ALIGN_CENTER,mxConstants.ALIGN_BOTTOM],topRight:[mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_TOP,mxConstants.ALIGN_LEFT,mxConstants.ALIGN_BOTTOM],left:[mxConstants.ALIGN_LEFT,mxConstants.ALIGN_MIDDLE,mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_MIDDLE],center:[mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE],right:[mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_MIDDLE,mxConstants.ALIGN_LEFT,mxConstants.ALIGN_MIDDLE],bottomLeft:[mxConstants.ALIGN_LEFT,mxConstants.ALIGN_BOTTOM,mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_TOP],bottom:[mxConstants.ALIGN_CENTER,mxConstants.ALIGN_BOTTOM,mxConstants.ALIGN_CENTER,mxConstants.ALIGN_TOP],bottomRight:[mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_BOTTOM,mxConstants.ALIGN_LEFT,mxConstants.ALIGN_TOP]},M=0;M<w.length;M++){var F=document.createElement("option");F.setAttribute("value",w[M]),mxUtils.write(F,mxResources.get(w[M])),O.appendChild(F)}_.appendChild(O);var D=l.cloneNode(!1);D.style.marginLeft="0px",D.style.paddingTop="4px",D.style.paddingBottom="4px",D.style.fontWeight="normal",mxUtils.write(D,mxResources.get("writingDirection"));var Y=document.createElement("select");Y.style.position="absolute",Y.style.right="20px",Y.style.width="97px",Y.style.marginTop="-2px";var P=["automatic","leftToRight","rightToLeft"],B={automatic:null,leftToRight:mxConstants.TEXT_DIRECTION_LTR,rightToLeft:mxConstants.TEXT_DIRECTION_RTL};for(M=0;M<P.length;M++){var k=document.createElement("option");k.setAttribute("value",P[M]),mxUtils.write(k,mxResources.get(P[M])),Y.appendChild(k)}D.appendChild(Y),n.isEditing()||(t.appendChild(_),mxEvent.addListener(O,"change",function(t){n.getModel().beginUpdate();try{var e=G[O.value];null!=e&&(n.setCellStyles(mxConstants.STYLE_LABEL_POSITION,e[0],n.getSelectionCells()),n.setCellStyles(mxConstants.STYLE_VERTICAL_LABEL_POSITION,e[1],n.getSelectionCells()),n.setCellStyles(mxConstants.STYLE_ALIGN,e[2],n.getSelectionCells()),n.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,e[3],n.getSelectionCells()))}finally{n.getModel().endUpdate()}mxEvent.consume(t)}),t.appendChild(D),mxEvent.addListener(Y,"change",function(t){n.setCellStyles(mxConstants.STYLE_TEXT_DIRECTION,B[Y.value],n.getSelectionCells()),mxEvent.consume(t)}));var H=document.createElement("input");H.style.textAlign="right",H.style.marginTop="4px",H.style.position="absolute";H.style.right="32px",H.style.width="40px",H.style.height="17px",u.appendChild(H);var W=null,z=this.installInputHandler(H,mxConstants.STYLE_FONTSIZE,GE.Menus.prototype.defaultFontSize,1,999," pt",function(t){if(window.getSelection&&!GE.IS_IE11){var e=(o=window.getSelection()).rangeCount>0?o.getRangeAt(0).commonAncestorContainer:n.cellEditor.textarea;function i(e,i){null!=n.cellEditor.textarea&&e!=n.cellEditor.textarea&&n.cellEditor.textarea.contains(e)&&(i||o.containsNode(e,!0))&&("FONT"==e.nodeName?(e.removeAttribute("size"),e.style.fontSize=t+"px"):mxUtils.getCurrentStyle(e).fontSize!=t+"px"&&(mxUtils.getCurrentStyle(e.parentNode).fontSize!=t+"px"?e.style.fontSize=t+"px":e.style.fontSize=""))}if(e!=n.cellEditor.textarea&&e.nodeType==mxConstants.NODETYPE_ELEMENT||document.execCommand("fontSize",!1,"1"),e!=n.cellEditor.textarea&&(e=e.parentNode),null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT){var s=e.getElementsByTagName("*");i(e);for(var l=0;l<s.length;l++)i(s[l])}H.value=t+" pt"}else if(window.getSelection||document.selection){var o,a=null;if(document.selection)a=document.selection.createRange().parentElement();else(o=window.getSelection()).rangeCount>0&&(a=o.getRangeAt(0).commonAncestorContainer);if(null!=a&&function(t,e){for(;null!=e;){if(e===t)return!0;e=e.parentNode}return!1}(n.cellEditor.textarea,a)){W=t,document.execCommand("fontSize",!1,"4");for(s=n.cellEditor.textarea.getElementsByTagName("font"),l=0;l<s.length;l++)if("4"==s[l].getAttribute("size")){s[l].removeAttribute("size"),s[l].style.fontSize=W+"px",window.setTimeout(function(){H.value=W+" pt",W=null},0);break}}}},!0),j=this.createStepper(H,z,1,10,!0,GE.Menus.prototype.defaultFontSize);j.style.display=H.style.display,j.style.marginTop="4px",j.style.right="20px",u.appendChild(j),d.getElementsByTagName("div")[0].style.cssFloat="right";var V=null,K="#ffffff",Z=null,Q="#000000",J=n.cellEditor.isContentEditing()?this.createColorOption(mxResources.get("backgroundColor"),function(){return K},function(t){document.execCommand("backcolor",!1,t!=mxConstants.NONE?t:"transparent")},"#ffffff",{install:function(t){V=t},destroy:function(){V=null}},null,!0):this.createCellColorOption(mxResources.get("backgroundColor"),mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,"#ffffff",null,function(t){n.updateLabelElements(n.getSelectionCells(),function(t){t.style.backgroundColor=null})});J.style.fontWeight="bold";var X=this.createCellColorOption(mxResources.get("borderColor"),mxConstants.STYLE_LABEL_BORDERCOLOR,"#000000");X.style.fontWeight="bold";var q=n.cellEditor.isContentEditing()?this.createColorOption(mxResources.get("fontColor"),function(){return Q},function(t){if(GE.IS_FF){for(var e=n.cellEditor.textarea.getElementsByTagName("font"),i=[],s=0;s<e.length;s++)i.push({node:e[s],color:e[s].getAttribute("color")});document.execCommand("forecolor",!1,t!=mxConstants.NONE?t:"transparent");var l=n.cellEditor.textarea.getElementsByTagName("font");for(s=0;s<l.length;s++)if(s>=i.length||l[s]!=i[s].node||l[s]==i[s].node&&l[s].getAttribute("color")!=i[s].color){var o=l[s].firstChild;if(null!=o&&"A"==o.nodeName&&null==o.nextSibling&&null!=o.firstChild){l[s].parentNode.insertBefore(o,l[s]);for(e=o.firstChild;null!=e;){var a=e.nextSibling;l[s].appendChild(e),e=a}o.appendChild(l[s])}break}}else document.execCommand("forecolor",!1,t!=mxConstants.NONE?t:"transparent")},"#000000",{install:function(t){Z=t},destroy:function(){Z=null}},null,!0):this.createCellColorOption(mxResources.get("fontColor"),mxConstants.STYLE_FONTCOLOR,"#000000",function(t){null==t||t==mxConstants.NONE?J.style.display="none":J.style.display="",X.style.display=J.style.display},function(t){null==t||t==mxConstants.NONE?n.setCellStyles(mxConstants.STYLE_NOLABEL,"1",n.getSelectionCells()):n.setCellStyles(mxConstants.STYLE_NOLABEL,null,n.getSelectionCells()),n.updateLabelElements(n.getSelectionCells(),function(t){t.removeAttribute("color"),t.style.color=null})});q.style.fontWeight="bold",r.appendChild(q),r.appendChild(J),n.cellEditor.isContentEditing()||r.appendChild(X),t.appendChild(r);var $=this.createPanel();$.style.paddingTop="2px",$.style.paddingBottom="4px";var tt=this.createCellOption(mxResources.get("wordWrap"),mxConstants.STYLE_WHITE_SPACE,null,"wrap","null",null,null,!0);tt.style.fontWeight="bold",i.containsLabel||i.autoSize||0!=i.edges.length||$.appendChild(tt);var et=this.createCellOption(mxResources.get("formattedText"),"html","0",null,null,null,e.actions.get("formattedText"));et.style.fontWeight="bold",$.appendChild(et);var nt=this.createPanel();nt.style.paddingTop="10px",nt.style.paddingBottom="28px",nt.style.fontWeight="normal";var it,st,lt,ot,at,rt=document.createElement("div");rt.style.position="absolute",rt.style.width="70px",rt.style.marginTop="0px",rt.style.fontWeight="bold",mxUtils.write(rt,mxResources.get("spacing")),nt.appendChild(rt);var dt=this.addUnitInput(nt,"pt",91,44,function(){it.apply(this,arguments)}),ut=this.addUnitInput(nt,"pt",20,44,function(){st.apply(this,arguments)});mxUtils.br(nt),this.addLabel(nt,mxResources.get("top"),91),this.addLabel(nt,mxResources.get("global"),20),mxUtils.br(nt),mxUtils.br(nt);var mt=this.addUnitInput(nt,"pt",162,44,function(){lt.apply(this,arguments)}),pt=this.addUnitInput(nt,"pt",91,44,function(){ot.apply(this,arguments)}),ct=this.addUnitInput(nt,"pt",20,44,function(){at.apply(this,arguments)});if(mxUtils.br(nt),this.addLabel(nt,mxResources.get("left"),162),this.addLabel(nt,mxResources.get("bottom"),91),this.addLabel(nt,mxResources.get("right"),20),n.cellEditor.isContentEditing()){var gt=null,ht=null;t.appendChild(this.createRelativeOption(mxResources.get("lineheight"),null,null,function(t){var e=""==t.value?120:parseInt(t.value);e=Math.max(0,isNaN(e)?120:e),null!=gt&&(n.cellEditor.restoreSelection(gt),gt=null);for(var i=n.getSelectedElement();null!=i&&i.nodeType!=mxConstants.NODETYPE_ELEMENT;)i=i.parentNode;null!=i&&i==n.cellEditor.textarea&&null!=n.cellEditor.textarea.firstChild&&("P"!=n.cellEditor.textarea.firstChild.nodeName&&(n.cellEditor.textarea.innerHTML="<p>"+n.cellEditor.textarea.innerHTML+"</p>"),i=n.cellEditor.textarea.firstChild),null!=i&&null!=n.cellEditor.textarea&&i!=n.cellEditor.textarea&&n.cellEditor.textarea.contains(i)&&(i.style.lineHeight=e+"%"),t.value=e+" %"},function(t){ht=t,mxEvent.addListener(t,"mousedown",function(){document.activeElement==n.cellEditor.textarea&&(gt=n.cellEditor.saveSelection())}),mxEvent.addListener(t,"touchstart",function(){document.activeElement==n.cellEditor.textarea&&(gt=n.cellEditor.saveSelection())}),t.value="120 %"}));var xt=l.cloneNode(!1);xt.style.paddingLeft="0px";var yt=this.editorUi.toolbar.addItems(["image"],xt,!0);I=[this.editorUi.toolbar.addButton("geSprite-horizontalrule",mxResources.get("insertHorizontalRule"),function(){document.execCommand("inserthorizontalrule",!1)},xt),this.editorUi.toolbar.addMenuFunctionInContainer(xt,"geSprite-table",mxResources.get("table"),!1,mxUtils.bind(this,function(t){this.editorUi.menus.addInsertTableItem(t)}))];this.styleButtons(yt),this.styleButtons(I);var Et=this.createPanel();Et.style.paddingTop="10px",Et.style.paddingBottom="10px",Et.appendChild(this.createTitle(mxResources.get("insert"))),Et.appendChild(xt),t.appendChild(Et);var St=l.cloneNode(!1);St.style.paddingLeft="0px";I=[this.editorUi.toolbar.addButton("geSprite-insertcolumnbefore",mxResources.get("insertColumnBefore"),mxUtils.bind(this,function(){try{null!=v&&n.insertColumn(v,null!=L?L.cellIndex:0)}catch(t){this.editorUi.handleError(t)}}),St),this.editorUi.toolbar.addButton("geSprite-insertcolumnafter",mxResources.get("insertColumnAfter"),mxUtils.bind(this,function(){try{null!=v&&n.insertColumn(v,null!=L?L.cellIndex+1:-1)}catch(t){this.editorUi.handleError(t)}}),St),this.editorUi.toolbar.addButton("geSprite-deletecolumn",mxResources.get("deleteColumn"),mxUtils.bind(this,function(){try{null!=v&&null!=L&&n.deleteColumn(v,L.cellIndex)}catch(t){this.editorUi.handleError(t)}}),St),this.editorUi.toolbar.addButton("geSprite-insertrowbefore",mxResources.get("insertRowBefore"),mxUtils.bind(this,function(){try{null!=v&&null!=R&&n.insertRow(v,R.sectionRowIndex)}catch(t){this.editorUi.handleError(t)}}),St),this.editorUi.toolbar.addButton("geSprite-insertrowafter",mxResources.get("insertRowAfter"),mxUtils.bind(this,function(){try{null!=v&&null!=R&&n.insertRow(v,R.sectionRowIndex+1)}catch(t){this.editorUi.handleError(t)}}),St),this.editorUi.toolbar.addButton("geSprite-deleterow",mxResources.get("deleteRow"),mxUtils.bind(this,function(){try{null!=v&&null!=R&&n.deleteRow(v,R.sectionRowIndex)}catch(t){this.editorUi.handleError(t)}}),St)];this.styleButtons(I),I[2].style.marginRight="9px";var Ct=this.createPanel();Ct.style.paddingTop="10px",Ct.style.paddingBottom="10px",Ct.appendChild(this.createTitle(mxResources.get("table"))),Ct.appendChild(St);var ft=l.cloneNode(!1);ft.style.paddingLeft="0px";I=[this.editorUi.toolbar.addButton("geSprite-strokecolor",mxResources.get("borderColor"),mxUtils.bind(this,function(t){if(null!=v){var e=v.style.borderColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)});this.editorUi.pickColor(e,function(e){var i=null==L||null!=t&&mxEvent.isShiftDown(t)?v:L;n.processElements(i,function(t){t.style.border=null}),null==e||e==mxConstants.NONE?(i.removeAttribute("border"),i.style.border="",i.style.borderCollapse=""):(i.setAttribute("border","1"),i.style.border="1px solid "+e,i.style.borderCollapse="collapse")})}}),ft),this.editorUi.toolbar.addButton("geSprite-fillcolor",mxResources.get("backgroundColor"),mxUtils.bind(this,function(t){if(null!=v){var e=v.style.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)});this.editorUi.pickColor(e,function(e){var i=null==L||null!=t&&mxEvent.isShiftDown(t)?v:L;n.processElements(i,function(t){t.style.backgroundColor=null}),null==e||e==mxConstants.NONE?i.style.backgroundColor="":i.style.backgroundColor=e})}}),ft),this.editorUi.toolbar.addButton("geSprite-fit",mxResources.get("spacing"),function(){if(null!=v){var t=v.getAttribute("cellPadding")||0,n=new GE.FilenameDialog(e,t,mxResources.get("apply"),mxUtils.bind(this,function(t){null!=t&&t.length>0?v.setAttribute("cellPadding",t):v.removeAttribute("cellPadding")}),mxResources.get("spacing"));e.showDialog(n.container,300,80,!0,!0),n.init()}},ft),this.editorUi.toolbar.addButton("geSprite-left",mxResources.get("left"),function(){null!=v&&v.setAttribute("align","left")},ft),this.editorUi.toolbar.addButton("geSprite-center",mxResources.get("center"),function(){null!=v&&v.setAttribute("align","center")},ft),this.editorUi.toolbar.addButton("geSprite-right",mxResources.get("right"),function(){null!=v&&v.setAttribute("align","right")},ft)];this.styleButtons(I),I[2].style.marginRight="9px",Ct.appendChild(ft),t.appendChild(Ct),T=Ct}else t.appendChild($),t.appendChild(this.createRelativeOption(mxResources.get("opacity"),mxConstants.STYLE_TEXT_OPACITY)),t.appendChild(nt);function Tt(t,e){t.style.backgroundImage=e?"linear-gradient(#c5ecff 0px,#87d4fb 100%)":""}var vt=mxUtils.bind(this,function(t,e,n){i=this.format.getSelectionState();var s=mxUtils.getValue(i.style,mxConstants.STYLE_FONTSTYLE,0);if(Tt(m[0],(s&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD),Tt(m[1],(s&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC),Tt(m[2],(s&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE),d.firstChild.nodeValue=mxUtils.getValue(i.style,mxConstants.STYLE_FONTFAMILY,GE.Menus.prototype.defaultFont),Tt(p,"0"==mxUtils.getValue(i.style,mxConstants.STYLE_HORIZONTAL,"1")),n||document.activeElement!=H){var l=parseFloat(mxUtils.getValue(i.style,mxConstants.STYLE_FONTSIZE,GE.Menus.prototype.defaultFontSize));H.value=isNaN(l)?"":l+" pt"}var o=mxUtils.getValue(i.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER);Tt(h,o==mxConstants.ALIGN_LEFT),Tt(x,o==mxConstants.ALIGN_CENTER),Tt(y,o==mxConstants.ALIGN_RIGHT);var a=mxUtils.getValue(i.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE);Tt(b,a==mxConstants.ALIGN_TOP),Tt(A,a==mxConstants.ALIGN_MIDDLE),Tt(U,a==mxConstants.ALIGN_BOTTOM);var r=mxUtils.getValue(i.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),u=mxUtils.getValue(i.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE);r==mxConstants.ALIGN_LEFT&&u==mxConstants.ALIGN_TOP?O.value="topLeft":r==mxConstants.ALIGN_CENTER&&u==mxConstants.ALIGN_TOP?O.value="top":r==mxConstants.ALIGN_RIGHT&&u==mxConstants.ALIGN_TOP?O.value="topRight":r==mxConstants.ALIGN_LEFT&&u==mxConstants.ALIGN_BOTTOM?O.value="bottomLeft":r==mxConstants.ALIGN_CENTER&&u==mxConstants.ALIGN_BOTTOM?O.value="bottom":r==mxConstants.ALIGN_RIGHT&&u==mxConstants.ALIGN_BOTTOM?O.value="bottomRight":r==mxConstants.ALIGN_LEFT?O.value="left":r==mxConstants.ALIGN_RIGHT?O.value="right":O.value="center";var c=mxUtils.getValue(i.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION);if(c==mxConstants.TEXT_DIRECTION_RTL?Y.value="rightToLeft":c==mxConstants.TEXT_DIRECTION_LTR?Y.value="leftToRight":c==mxConstants.TEXT_DIRECTION_AUTO&&(Y.value="automatic"),n||document.activeElement!=ut){l=parseFloat(mxUtils.getValue(i.style,mxConstants.STYLE_SPACING,2));ut.value=isNaN(l)?"":l+" pt"}if(n||document.activeElement!=dt){l=parseFloat(mxUtils.getValue(i.style,mxConstants.STYLE_SPACING_TOP,0));dt.value=isNaN(l)?"":l+" pt"}if(n||document.activeElement!=ct){l=parseFloat(mxUtils.getValue(i.style,mxConstants.STYLE_SPACING_RIGHT,0));ct.value=isNaN(l)?"":l+" pt"}if(n||document.activeElement!=pt){l=parseFloat(mxUtils.getValue(i.style,mxConstants.STYLE_SPACING_BOTTOM,0));pt.value=isNaN(l)?"":l+" pt"}if(n||document.activeElement!=mt){l=parseFloat(mxUtils.getValue(i.style,mxConstants.STYLE_SPACING_LEFT,0));mt.value=isNaN(l)?"":l+" pt"}});if(st=this.installInputHandler(ut,mxConstants.STYLE_SPACING,2,-999,999," pt"),it=this.installInputHandler(dt,mxConstants.STYLE_SPACING_TOP,0,-999,999," pt"),at=this.installInputHandler(ct,mxConstants.STYLE_SPACING_RIGHT,0,-999,999," pt"),ot=this.installInputHandler(pt,mxConstants.STYLE_SPACING_BOTTOM,0,-999,999," pt"),lt=this.installInputHandler(mt,mxConstants.STYLE_SPACING_LEFT,0,-999,999," pt"),this.addKeyHandler(H,vt),this.addKeyHandler(ut,vt),this.addKeyHandler(dt,vt),this.addKeyHandler(ct,vt),this.addKeyHandler(pt,vt),this.addKeyHandler(mt,vt),n.getModel().addListener(mxEvent.CHANGE,vt),this.listeners.push({destroy:function(){n.getModel().removeListener(vt)}}),vt(),n.cellEditor.isContentEditing()){var Lt=!1,Rt=function(){Lt||(Lt=!0,window.setTimeout(function(){for(var t=n.getSelectedElement();null!=t&&t.nodeType!=mxConstants.NODETYPE_ELEMENT;)t=t.parentNode;if(null!=t){function e(t,e,n){if(null!=n.style&&null!=e){var i=e.lineHeight;return null!=n.style.lineHeight&&"%"==n.style.lineHeight.substring(n.style.lineHeight.length-1)?parseInt(n.style.lineHeight)/100:"px"==i.substring(i.length-2)?parseFloat(i)/t:parseInt(i)}return""}function s(t){var e=null!=t?t.fontSize:null;return null!=e&&"px"==e.substring(e.length-2)?parseFloat(e):mxConstants.DEFAULT_FONTSIZE}t==n.cellEditor.textarea&&1==n.cellEditor.textarea.children.length&&n.cellEditor.textarea.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT&&(t=n.cellEditor.textarea.firstChild);var l=mxUtils.getCurrentStyle(t),o=s(l),a=e(o,l,t),r=t.getElementsByTagName("*");if(r.length>0&&window.getSelection&&!GE.IS_IE11)for(var u=window.getSelection(),p=0;p<r.length;p++){if(u.containsNode(r[p],!0))temp=mxUtils.getCurrentStyle(r[p]),((b=e(o=Math.max(s(temp),o),temp,r[p]))!=a||isNaN(b))&&(a="")}function c(e){if(null!=n.getParentByName(t,e,n.cellEditor.textarea))return!0;for(var i=t;null!=i&&1==i.childNodes.length;)if((i=i.childNodes[0]).nodeName==e)return!0;return!1}function g(t,e){if(null!=t&&null!=e){if(t==e)return!0;if(t.length>e.length+1)return t.substring(t.length-e.length-1,t.length)=="-"+e}return!1}if(null!=l){if(Tt(m[0],"bold"==l.fontWeight||l.fontWeight>400||c("B")||c("STRONG")),Tt(m[1],"italic"==l.fontStyle||c("I")||c("EM")),Tt(m[2],c("U")),Tt(C,c("SUP")),Tt(S,c("SUB")),n.cellEditor.isTableSelected())Tt(f,g(l.textAlign,"justify")),Tt(h,g(l.textAlign,"left")),Tt(x,g(l.textAlign,"center")),Tt(y,g(l.textAlign,"right"));else{var E=n.cellEditor.align||mxUtils.getValue(i.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER);g(l.textAlign,"justify")?(Tt(f,g(l.textAlign,"justify")),Tt(h,!1),Tt(x,!1),Tt(y,!1)):(Tt(f,!1),Tt(h,E==mxConstants.ALIGN_LEFT),Tt(x,E==mxConstants.ALIGN_CENTER),Tt(y,E==mxConstants.ALIGN_RIGHT))}if(v=n.getParentByName(t,"TABLE",n.cellEditor.textarea),R=null==v?null:n.getParentByName(t,"TR",v),L=null==v?null:n.getParentByNames(t,["TD","TH"],v),T.style.display=null!=v?"":"none",document.activeElement!=H){"FONT"==t.nodeName&&"4"==t.getAttribute("size")&&null!=W?(t.removeAttribute("size"),t.style.fontSize=W+" pt",W=null):H.value=isNaN(o)?"":o+" pt";var b=parseFloat(a);isNaN(b)?ht.value="100 %":ht.value=Math.round(100*b)+" %"}var A=l.color.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)}),U=l.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)});if(null!=Z&&(Q="#"==A.charAt(0)?A:"#000000",Z(Q,!0)),null!=V&&(K="#"==U.charAt(0)?U:null,V(K,!0)),null!=d.firstChild){var N=l.fontFamily;"'"==N.charAt(0)&&(N=N.substring(1)),"'"==N.charAt(N.length-1)&&(N=N.substring(0,N.length-1)),'"'==N.charAt(0)&&(N=N.substring(1)),'"'==N.charAt(N.length-1)&&(N=N.substring(0,N.length-1)),d.firstChild.nodeValue=N}}}Lt=!1},0))};(GE.IS_FF||GE.IS_EDGE||GE.IS_IE11)&&mxEvent.addListener(n.cellEditor.textarea,"DOMSubtreeModified",Rt),mxEvent.addListener(n.cellEditor.textarea,"input",Rt),mxEvent.addListener(n.cellEditor.textarea,"touchend",Rt),mxEvent.addListener(n.cellEditor.textarea,"mouseup",Rt),mxEvent.addListener(n.cellEditor.textarea,"keyup",Rt),this.listeners.push({destroy:function(){}}),Rt()}return t},GE.StyleFormatPanel=function(t,e,n){GE.BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(GE.StyleFormatPanel,GE.BaseFormatPanel),GE.StyleFormatPanel.prototype.defaultStrokeColor="black",GE.StyleFormatPanel.prototype.init=function(){var t=this.format.getSelectionState();if(!t.containsLabel){t.containsImage&&1==t.vertices.length&&"image"==t.style.shape&&null!=t.style.image&&"data:image/svg+xml;"==t.style.image.substring(0,19)&&this.container.appendChild(this.addSvgStyles(this.createPanel())),t.containsImage&&"image"!=t.style.shape||this.container.appendChild(this.addFill(this.createPanel())),this.container.appendChild(this.addStroke(this.createPanel())),this.container.appendChild(this.addLineJumps(this.createPanel()));var e=this.createRelativeOption(mxResources.get("opacity"),mxConstants.STYLE_OPACITY,41);e.style.paddingTop="8px",e.style.paddingBottom="8px",this.container.appendChild(e),this.container.appendChild(this.addEffects(this.createPanel()))}var n=this.addEditOps(this.createPanel());null!=n.firstChild&&mxUtils.br(n),this.container.appendChild(this.addStyleOps(n))},GE.StyleFormatPanel.prototype.getCssRules=function(t){var e=document.implementation.createHTMLDocument(""),n=document.createElement("style");return mxUtils.setTextContent(n,t),e.body.appendChild(n),n.sheet.cssRules},GE.StyleFormatPanel.prototype.addSvgStyles=function(t){this.editorUi.editor.graph;var e=this.format.getSelectionState();t.style.paddingTop="6px",t.style.paddingBottom="6px",t.style.fontWeight="bold",t.style.display="none";try{var n=e.style.editableCssRules;if(null!=n){var i=new RegExp(n),s=e.style.image.substring(e.style.image.indexOf(",")+1),l=window.atob?atob(s):Base64.decode(s,!0),o=mxUtils.parseXml(l);if(null!=o)for(var a=o.getElementsByTagName("style"),r=0;r<a.length;r++)for(var d=this.getCssRules(mxUtils.getTextContent(a[r])),u=0;u<d.length;u++)this.addSvgRule(t,d[u],o,a[r],d,u,i)}}catch(t){}return t},GE.StyleFormatPanel.prototype.addSvgRule=function(t,e,n,i,s,l,o){var a=this.editorUi.editor.graph;if(o.test(e.selectorText)){var r=mxUtils.bind(this,function(e,o,r){if(""!=e.style[o]){var d=this.createColorOption(r+" "+e.selectorText,function(){return(t=(t=e.style[o]).match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):"";var t},function(t){s[l].style[o]=t;for(var e="",r=0;r<s.length;r++)e+=s[r].cssText+" ";i.textContent=e;var d=mxUtils.getXml(n.documentElement);a.setCellStyles(mxConstants.STYLE_IMAGE,"data:image/svg+xml,"+(window.btoa?btoa(d):Base64.encode(d,!0)),a.getSelectionCells())},"#ffffff",{install:function(t){},destroy:function(){}});t.appendChild(d),t.style.display=""}});r(e,"fill",mxResources.get("fill")),r(e,"stroke",mxResources.get("line"))}},GE.StyleFormatPanel.prototype.addEditOps=function(t){var e=this.format.getSelectionState(),n=null;if(1==this.editorUi.editor.graph.getSelectionCount()&&((n=mxUtils.button(mxResources.get("editStyle"),mxUtils.bind(this,function(t){this.editorUi.actions.get("editStyle").funct()}))).setAttribute("title",mxResources.get("editStyle")+" ("+this.editorUi.actions.get("editStyle").shortcut+")"),n.style.width="202px",n.style.marginBottom="2px",t.appendChild(n)),e.image){var i=mxUtils.button(mxResources.get("editImage"),mxUtils.bind(this,function(t){this.editorUi.actions.get("image").funct()}));i.setAttribute("title",mxResources.get("editImage")),i.style.marginBottom="2px",null==n?i.style.width="202px":(n.style.width="100px",i.style.width="100px",i.style.marginLeft="2px"),t.appendChild(i)}return t},GE.StyleFormatPanel.prototype.addFill=function(t){var e=this.editorUi.editor.graph,n=this.format.getSelectionState();t.style.paddingTop="6px",t.style.paddingBottom="6px";var i=document.createElement("select");i.style.position="absolute",i.style.marginTop="-2px",i.style.right="72px",i.style.width="70px",mxEvent.addListener(i,"click",function(t){mxEvent.consume(t)});var s=this.createCellColorOption(mxResources.get("gradient"),mxConstants.STYLE_GRADIENTCOLOR,"#ffffff",function(t){null==t||t==mxConstants.NONE?i.style.display="none":i.style.display=""}),l="image"==n.style.shape?mxConstants.STYLE_IMAGE_BACKGROUND:mxConstants.STYLE_FILLCOLOR,o="image"==n.style.shape?mxResources.get("background"):mxResources.get("fill"),a=this.createCellColorOption(o,l,"#ffffff");a.style.fontWeight="bold";var r=mxUtils.getValue(n.style,l,null);s.style.display=null!=r&&r!=mxConstants.NONE&&n.fill&&"image"!=n.style.shape?"":"none";for(var d=[mxConstants.DIRECTION_NORTH,mxConstants.DIRECTION_EAST,mxConstants.DIRECTION_SOUTH,mxConstants.DIRECTION_WEST,mxConstants.DIRECTION_RADIAL],u=0;u<d.length;u++){var m=document.createElement("option");m.setAttribute("value",d[u]),mxUtils.write(m,mxResources.get(d[u])),i.appendChild(m)}s.appendChild(i);var p=mxUtils.bind(this,function(){n=this.format.getSelectionState();var e=mxUtils.getValue(n.style,mxConstants.STYLE_GRADIENT_DIRECTION,mxConstants.DIRECTION_SOUTH);""==e&&(e=mxConstants.DIRECTION_SOUTH),i.value=e,t.style.display=n.fill?"":"none";var l=mxUtils.getValue(n.style,mxConstants.STYLE_FILLCOLOR,null);!n.fill||n.containsImage||null==l||l==mxConstants.NONE||"filledEdge"==n.style.shape||"waterLeakageRope"==n.style.shape||"flow1"==n.style.shape||"flow2"==n.style.shape?s.style.display="none":s.style.display=""});e.getModel().addListener(mxEvent.CHANGE,p),this.listeners.push({destroy:function(){e.getModel().removeListener(p)}}),p(),mxEvent.addListener(i,"change",function(t){e.setCellStyles(mxConstants.STYLE_GRADIENT_DIRECTION,i.value,e.getSelectionCells()),mxEvent.consume(t)}),t.appendChild(a),t.appendChild(s);var c=this.getCustomColors();for(u=0;u<c.length;u++)t.appendChild(this.createCellColorOption(c[u].title,c[u].key,c[u].defaultValue));return t},GE.StyleFormatPanel.prototype.getCustomColors=function(){var t=this.format.getSelectionState(),e=[];return"swimlane"!=t.style.shape&&"table"!=t.style.shape||e.push({title:mxResources.get("laneColor"),key:"swimlaneFillColor",defaultValue:"#ffffff"}),e},GE.StyleFormatPanel.prototype.addStroke=function(t){var e=this.editorUi,n=e.editor.graph,i=this.format.getSelectionState();t.style.paddingTop="4px",t.style.paddingBottom="4px",t.style.whiteSpace="normal";var s=document.createElement("div");s.style.fontWeight="bold";var l=document.createElement("select");l.style.position="absolute",l.style.marginTop="-2px",l.style.right="72px",l.style.width="80px";for(var o=["sharp","rounded","curved"],a=0;a<o.length;a++){var r=document.createElement("option");r.setAttribute("value",o[a]),mxUtils.write(r,mxResources.get(o[a])),l.appendChild(r)}mxEvent.addListener(l,"change",function(t){n.getModel().beginUpdate();try{var i=[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],s=["0",null];"rounded"==l.value?s=["1",null]:"curved"==l.value&&(s=[null,"1"]);for(var o=0;o<i.length;o++)n.setCellStyles(i[o],s[o],n.getSelectionCells());e.fireEvent(new mxEventObject("styleChanged","keys",i,"values",s,"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}mxEvent.consume(t)}),mxEvent.addListener(l,"click",function(t){mxEvent.consume(t)});var d="image"==i.style.shape?mxConstants.STYLE_IMAGE_BORDER:mxConstants.STYLE_STROKECOLOR,u="image"==i.style.shape?mxResources.get("border"):mxResources.get("line"),m=this.createCellColorOption(u,d,"#000000");m.appendChild(l),s.appendChild(m);var p=s.cloneNode(!1);p.style.fontWeight="normal",p.style.whiteSpace="nowrap",p.style.position="relative",p.style.paddingLeft="16px",p.style.marginBottom="2px",p.style.marginTop="2px",p.className="geToolbarContainer";var c=mxUtils.bind(this,function(t,e,n,i,s){var l=this.editorUi.menus.styleChange(t,"",i,s,"geIcon",null),o=document.createElement("div");return o.style.width=e+"px",o.style.height="1px",o.style.borderBottom="1px "+n+" "+this.defaultStrokeColor,o.style.paddingTop="6px",l.firstChild.firstChild.style.padding="0px 4px 0px 4px",l.firstChild.firstChild.style.width=e+"px",l.firstChild.firstChild.appendChild(o),l}),g=this.editorUi.toolbar.addMenuFunctionInContainer(p,"geSprite-orthogonal",mxResources.get("pattern"),!1,mxUtils.bind(this,function(t){c(t,75,"solid",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],[null,null]).setAttribute("title",mxResources.get("solid")),c(t,75,"dashed",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1",null]).setAttribute("title",mxResources.get("dashed")),c(t,75,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 1"]).setAttribute("title",mxResources.get("dotted")+" (1)"),c(t,75,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 2"]).setAttribute("title",mxResources.get("dotted")+" (2)"),c(t,75,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 4"]).setAttribute("title",mxResources.get("dotted")+" (3)"),c(t,75,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","2 1"]).setAttribute("title",mxResources.get("dotted")+" (4)"),c(t,75,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","4 1"]).setAttribute("title",mxResources.get("dotted")+" (5)")})),h=p.cloneNode(!1),x=this.editorUi.toolbar.addMenuFunctionInContainer(h,"geSprite-connection",mxResources.get("connection"),!1,mxUtils.bind(this,function(t){this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],[null,null,null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",mxResources.get("line")),this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["link",null,null,null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",mxResources.get("link")),this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["flexArrow",null,null,null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",mxResources.get("arrow")),this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["arrow",null,null,null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",mxResources.get("simpleArrow"))})),y=this.editorUi.toolbar.addMenuFunctionInContainer(h,"geSprite-orthogonal",mxResources.get("pattern"),!1,mxUtils.bind(this,function(t){c(t,33,"solid",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],[null,null]).setAttribute("title",mxResources.get("solid")),c(t,33,"dashed",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1",null]).setAttribute("title",mxResources.get("dashed")),c(t,33,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 1"]).setAttribute("title",mxResources.get("dotted")+" (1)"),c(t,33,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 2"]).setAttribute("title",mxResources.get("dotted")+" (2)"),c(t,33,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 4"]).setAttribute("title",mxResources.get("dotted")+" (3)"),c(t,33,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","2 1"]).setAttribute("title",mxResources.get("dotted")+" (4)"),c(t,33,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","4 1"]).setAttribute("title",mxResources.get("dotted")+" (5)")})),E=p.cloneNode(!1),S=document.createElement("input");S.style.textAlign="right",S.style.marginTop="2px",S.style.width="41px",S.setAttribute("title",mxResources.get("linewidth")),p.appendChild(S);var C=S.cloneNode(!0);function f(t){var s=parseInt(S.value);(s=Math.min(999,Math.max(1,isNaN(s)?1:s)))!=mxUtils.getValue(i.style,mxConstants.STYLE_STROKEWIDTH,1)&&(n.setCellStyles(mxConstants.STYLE_STROKEWIDTH,s,n.getSelectionCells()),e.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_STROKEWIDTH],"values",[s],"cells",n.getSelectionCells()))),S.value=s+" pt",mxEvent.consume(t)}function T(t){var s=parseInt(C.value);(s=Math.min(999,Math.max(1,isNaN(s)?1:s)))!=mxUtils.getValue(i.style,mxConstants.STYLE_STROKEWIDTH,1)&&(n.setCellStyles(mxConstants.STYLE_STROKEWIDTH,s,n.getSelectionCells()),e.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_STROKEWIDTH],"values",[s],"cells",n.getSelectionCells()))),C.value=s+" pt",mxEvent.consume(t)}h.appendChild(C);var v=this.createStepper(S,f,1,9);v.style.display=S.style.display,v.style.marginTop="2px",p.appendChild(v);var L=this.createStepper(C,T,1,9);L.style.display=C.style.display,L.style.marginTop="2px",h.appendChild(L),S.style.position="absolute",S.style.right="32px",S.style.height="15px",v.style.right="20px",C.style.position="absolute",C.style.right="32px",C.style.height="15px",L.style.right="20px",mxEvent.addListener(S,"blur",f),mxEvent.addListener(S,"change",f),mxEvent.addListener(C,"blur",T),mxEvent.addListener(C,"change",T);var R=this.editorUi.toolbar.addMenuFunctionInContainer(E,"geSprite-orthogonal",mxResources.get("waypoints"),!1,mxUtils.bind(this,function(t){"arrow"!=i.style.shape&&(this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",mxResources.get("straight")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",mxResources.get("orthogonal")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",mxResources.get("isometric")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",mxResources.get("isometric")),"connector"==i.style.shape&&this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",mxResources.get("curved")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",mxResources.get("entityRelation")))})),b=this.editorUi.toolbar.addMenuFunctionInContainer(E,"geSprite-startclassic",mxResources.get("linestart"),!1,mxUtils.bind(this,function(t){if("connector"==i.style.shape||"flexArrow"==i.style.shape||"filledEdge"==i.style.shape||"waterLeakageRope"==i.style.shape||"flow1"==i.style.shape||"flow2"==i.style.shape){var e=this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.NONE,0],"geIcon",null,!1);e.setAttribute("title",mxResources.get("none")),e.firstChild.firstChild.innerHTML='<font style="font-size:10px;">'+mxUtils.htmlEntities(mxResources.get("none"))+"</font>","flexArrow"!=i.style.shape?(this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC,1],"geIcon geSprite geSprite-startclassic",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC_THIN,1],"geIcon geSprite geSprite-startclassicthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OPEN,0],"geIcon geSprite geSprite-startopen",null,!1).setAttribute("title",mxResources.get("openArrow")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OPEN_THIN,0],"geIcon geSprite geSprite-startopenthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["openAsync",0],"geIcon geSprite geSprite-startopenasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK,1],"geIcon geSprite geSprite-startblock",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK_THIN,1],"geIcon geSprite geSprite-startblockthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["async",1],"geIcon geSprite geSprite-startasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OVAL,1],"geIcon geSprite geSprite-startoval",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND,1],"geIcon geSprite geSprite-startdiamond",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND_THIN,1],"geIcon geSprite geSprite-startthindiamond",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC,0],"geIcon geSprite geSprite-startclassictrans",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC_THIN,0],"geIcon geSprite geSprite-startclassicthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK,0],"geIcon geSprite geSprite-startblocktrans",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK_THIN,0],"geIcon geSprite geSprite-startblockthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["async",0],"geIcon geSprite geSprite-startasynctrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OVAL,0],"geIcon geSprite geSprite-startovaltrans",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND,0],"geIcon geSprite geSprite-startdiamondtrans",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND_THIN,0],"geIcon geSprite geSprite-startthindiamondtrans",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["box",0],"geIcon geSprite geSvgSprite geSprite-box",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["halfCircle",0],"geIcon geSprite geSvgSprite geSprite-halfCircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["dash",0],"geIcon geSprite geSprite-startdash",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["cross",0],"geIcon geSprite geSprite-startcross",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["circlePlus",0],"geIcon geSprite geSprite-startcircleplus",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["circle",1],"geIcon geSprite geSprite-startcircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERone",0],"geIcon geSprite geSprite-starterone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERmandOne",0],"geIcon geSprite geSprite-starteronetoone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERmany",0],"geIcon geSprite geSprite-startermany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERoneToMany",0],"geIcon geSprite geSprite-starteronetomany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERzeroToOne",1],"geIcon geSprite geSprite-starteroneopt",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERzeroToMany",1],"geIcon geSprite geSprite-startermanyopt",null,!1)):this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW],[mxConstants.ARROW_BLOCK],"geIcon geSprite geSprite-startblocktrans",null,!1).setAttribute("title",mxResources.get("block"))}})),A=this.editorUi.toolbar.addMenuFunctionInContainer(E,"geSprite-endclassic",mxResources.get("lineend"),!1,mxUtils.bind(this,function(t){if("connector"==i.style.shape||"flexArrow"==i.style.shape||"filledEdge"==i.style.shape||"waterLeakageRope"==i.style.shape||"flow1"==i.style.shape||"flow2"==i.style.shape){var e=this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.NONE,0],"geIcon",null,!1);e.setAttribute("title",mxResources.get("none")),e.firstChild.firstChild.innerHTML='<font style="font-size:10px;">'+mxUtils.htmlEntities(mxResources.get("none"))+"</font>","flexArrow"!=i.style.shape?(this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC,1],"geIcon geSprite geSprite-endclassic",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC_THIN,1],"geIcon geSprite geSprite-endclassicthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OPEN,0],"geIcon geSprite geSprite-endopen",null,!1).setAttribute("title",mxResources.get("openArrow")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OPEN_THIN,0],"geIcon geSprite geSprite-endopenthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["openAsync",0],"geIcon geSprite geSprite-endopenasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK,1],"geIcon geSprite geSprite-endblock",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK_THIN,1],"geIcon geSprite geSprite-endblockthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["async",1],"geIcon geSprite geSprite-endasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OVAL,1],"geIcon geSprite geSprite-endoval",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND,1],"geIcon geSprite geSprite-enddiamond",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND_THIN,1],"geIcon geSprite geSprite-endthindiamond",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC,0],"geIcon geSprite geSprite-endclassictrans",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC_THIN,0],"geIcon geSprite geSprite-endclassicthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK,0],"geIcon geSprite geSprite-endblocktrans",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK_THIN,0],"geIcon geSprite geSprite-endblockthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["async",0],"geIcon geSprite geSprite-endasynctrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OVAL,0],"geIcon geSprite geSprite-endovaltrans",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND,0],"geIcon geSprite geSprite-enddiamondtrans",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND_THIN,0],"geIcon geSprite geSprite-endthindiamondtrans",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["box",0],"geIcon geSprite geSvgSprite geFlipSprite geSprite-box",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["halfCircle",0],"geIcon geSprite geSvgSprite geFlipSprite geSprite-halfCircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["dash",0],"geIcon geSprite geSprite-enddash",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["cross",0],"geIcon geSprite geSprite-endcross",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["circlePlus",0],"geIcon geSprite geSprite-endcircleplus",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["circle",1],"geIcon geSprite geSprite-endcircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERone",0],"geIcon geSprite geSprite-enderone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERmandOne",0],"geIcon geSprite geSprite-enderonetoone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERmany",0],"geIcon geSprite geSprite-endermany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERoneToMany",0],"geIcon geSprite geSprite-enderonetomany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERzeroToOne",1],"geIcon geSprite geSprite-enderoneopt",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERzeroToMany",1],"geIcon geSprite geSprite-endermanyopt",null,!1)):this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW],[mxConstants.ARROW_BLOCK],"geIcon geSprite geSprite-endblocktrans",null,!1).setAttribute("title",mxResources.get("block"))}}));this.addArrow(x,8),this.addArrow(R),this.addArrow(b),this.addArrow(A);var U=this.addArrow(g,9);U.className="geIcon",U.style.width="84px";var N=this.addArrow(y,9);N.className="geIcon",N.style.width="22px";var I=document.createElement("div");I.style.width="85px",I.style.height="1px",I.style.borderBottom="1px solid "+this.defaultStrokeColor,I.style.marginBottom="9px",U.appendChild(I);var _=document.createElement("div");_.style.width="23px",_.style.height="1px",_.style.borderBottom="1px solid "+this.defaultStrokeColor,_.style.marginBottom="9px",N.appendChild(_),g.style.height="15px",y.style.height="15px",x.style.height="15px",R.style.height="17px",b.style.marginLeft="3px",b.style.height="17px",A.style.marginLeft="3px",A.style.height="17px",t.appendChild(s),t.appendChild(h),t.appendChild(p);var O,w,G,M,F,D,Y=p.cloneNode(!1);(Y.style.paddingBottom="6px",Y.style.paddingTop="4px",Y.style.fontWeight="normal","waterLeakageRope"!=i.style.shape)&&((H=document.createElement("div")).style.position="absolute",H.style.marginLeft="3px",H.style.marginBottom="12px",H.style.marginTop="2px",H.style.fontWeight="normal",H.style.width="76px",mxUtils.write(H,mxResources.get("lineend")),Y.appendChild(H),G=this.addUnitInput(Y,"pt",74,33,function(){O.apply(this,arguments)}),M=this.addUnitInput(Y,"pt",20,33,function(){w.apply(this,arguments)}));if("waterLeakageRope"!=i.style.shape){mxUtils.br(Y);var P=document.createElement("div");P.style.height="8px",Y.appendChild(P)}(H=document.createElement("div")).style.position="absolute",H.style.marginLeft="3px",H.style.marginBottom="12px",H.style.marginTop="2px",H.style.fontWeight="normal",H.style.width="76px",mxUtils.write(H,mxResources.get("linestart")),Y.appendChild(H);var B=this.addUnitInput(Y,"pt",74,33,function(){F.apply(this,arguments)}),k=this.addUnitInput(Y,"pt",20,33,function(){D.apply(this,arguments)});mxUtils.br(Y),this.addLabel(Y,mxResources.get("spacing"),74,50),this.addLabel(Y,mxResources.get("size"),20,50),mxUtils.br(Y);var H,W,z=s.cloneNode(!1);z.style.fontWeight="normal",z.style.position="relative",z.style.paddingLeft="16px",z.style.marginBottom="2px",z.style.marginTop="6px",z.style.borderWidth="0px",z.style.paddingBottom="18px",(H=document.createElement("div")).style.position="absolute",H.style.marginLeft="3px",H.style.marginBottom="12px",H.style.marginTop="1px",H.style.fontWeight="normal",H.style.width="120px",mxUtils.write(H,mxResources.get("perimeter")),z.appendChild(H);var j=this.addUnitInput(z,"pt",20,41,function(){W.apply(this,arguments)});i.edges.length==n.getSelectionCount()?(t.appendChild(E),t.appendChild(Y)):i.vertices.length==n.getSelectionCount()&&t.appendChild(z);var V=mxUtils.bind(this,function(t,s,o){i=this.format.getSelectionState();mxUtils.getValue(i.style,d,null);if(o||document.activeElement!=S){var a=parseInt(mxUtils.getValue(i.style,mxConstants.STYLE_STROKEWIDTH,1));S.value=isNaN(a)?"":a+" pt"}if(o||document.activeElement!=C){a=parseInt(mxUtils.getValue(i.style,mxConstants.STYLE_STROKEWIDTH,1));C.value=isNaN(a)?"":a+" pt"}l.style.visibility="connector"==i.style.shape||"filledEdge"==i.style.shape||"waterLeakageRope"==i.style.shape||"flow1"==i.style.shape||"flow2"==i.style.shape?"":"hidden","1"==mxUtils.getValue(i.style,mxConstants.STYLE_CURVED,null)?l.value="curved":"1"==mxUtils.getValue(i.style,mxConstants.STYLE_ROUNDED,null)&&(l.value="rounded"),"1"==mxUtils.getValue(i.style,mxConstants.STYLE_DASHED,null)?null==mxUtils.getValue(i.style,mxConstants.STYLE_DASH_PATTERN,null)?I.style.borderBottom="1px dashed "+this.defaultStrokeColor:I.style.borderBottom="1px dotted "+this.defaultStrokeColor:I.style.borderBottom="1px solid "+this.defaultStrokeColor,_.style.borderBottom=I.style.borderBottom;var r=R.getElementsByTagName("div")[0],u=mxUtils.getValue(i.style,mxConstants.STYLE_EDGE,null);"1"==mxUtils.getValue(i.style,mxConstants.STYLE_NOEDGESTYLE,null)&&(u=null),"orthogonalEdgeStyle"==u&&"1"==mxUtils.getValue(i.style,mxConstants.STYLE_CURVED,null)?r.className="geSprite geSprite-curved":r.className="straight"==u||"none"==u||null==u?"geSprite geSprite-straight":"entityRelationEdgeStyle"==u?"geSprite geSprite-entity":"elbowEdgeStyle"==u?"geSprite "+("vertical"==mxUtils.getValue(i.style,mxConstants.STYLE_ELBOW,null)?"geSprite-verticalelbow":"geSprite-horizontalelbow"):"isometricEdgeStyle"==u?"geSprite "+("vertical"==mxUtils.getValue(i.style,mxConstants.STYLE_ELBOW,null)?"geSprite-verticalisometric":"geSprite-horizontalisometric"):"geSprite geSprite-orthogonal";var m=x.getElementsByTagName("div")[0];function c(t,n,s,l){var o=s.getElementsByTagName("div")[0];return o.className=e.getCssClassForMarker(l,i.style.shape,t,n),"geSprite geSprite-noarrow"==o.className&&(o.innerHTML=mxUtils.htmlEntities(mxResources.get("none")),o.style.backgroundImage="none",o.style.verticalAlign="top",o.style.marginTop="5px",o.style.fontSize="10px",o.style.filter="none",o.style.color=this.defaultStrokeColor,o.nextSibling.style.marginTop="0px"),o}"link"==i.style.shape?m.className="geSprite geSprite-linkedge":"flexArrow"==i.style.shape?m.className="geSprite geSprite-arrow":"arrow"==i.style.shape?m.className="geSprite geSprite-simplearrow":m.className="geSprite geSprite-connection",i.edges.length==n.getSelectionCount()?(h.style.display="",p.style.display="none"):(h.style.display="none",p.style.display="");var g=c(mxUtils.getValue(i.style,mxConstants.STYLE_STARTARROW,null),mxUtils.getValue(i.style,"startFill","1"),b,"start"),y=c(mxUtils.getValue(i.style,mxConstants.STYLE_ENDARROW,null),mxUtils.getValue(i.style,"endFill","1"),A,"end");if("arrow"==i.style.shape?(g.className="geSprite geSprite-noarrow",y.className="geSprite geSprite-endblocktrans"):"link"==i.style.shape&&(g.className="geSprite geSprite-noarrow",y.className="geSprite geSprite-noarrow"),mxUtils.setOpacity(R,"arrow"==i.style.shape?30:100),"connector"!=i.style.shape&&"flexArrow"!=i.style.shape&&"filledEdge"!=i.style.shape&&"waterLeakageRope"!=i.style.shape&&"flow1"!=i.style.shape&&"flow2"!=i.style.shape?(mxUtils.setOpacity(b,30),mxUtils.setOpacity(A,30)):(mxUtils.setOpacity(b,100),mxUtils.setOpacity(A,100)),o||document.activeElement!=k){a=parseInt(mxUtils.getValue(i.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE));k.value=isNaN(a)?"":a+" pt"}if(o||document.activeElement!=B){a=parseInt(mxUtils.getValue(i.style,mxConstants.STYLE_SOURCE_PERIMETER_SPACING,0));B.value=isNaN(a)?"":a+" pt"}if(M&&(o||document.activeElement!=M)){a=parseInt(mxUtils.getValue(i.style,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE));M.value=isNaN(a)?"":a+" pt"}if(G&&(o||document.activeElement!=B)){a=parseInt(mxUtils.getValue(i.style,mxConstants.STYLE_TARGET_PERIMETER_SPACING,0));G.value=isNaN(a)?"":a+" pt"}if(o||document.activeElement!=j){a=parseInt(mxUtils.getValue(i.style,mxConstants.STYLE_PERIMETER_SPACING,0));j.value=isNaN(a)?"":a+" pt"}});return D=this.installInputHandler(k,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE,0,999," pt"),F=this.installInputHandler(B,mxConstants.STYLE_SOURCE_PERIMETER_SPACING,0,-999,999," pt"),M&&(w=this.installInputHandler(M,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE,0,999," pt")),G&&(O=this.installInputHandler(G,mxConstants.STYLE_TARGET_PERIMETER_SPACING,0,-999,999," pt")),W=this.installInputHandler(j,mxConstants.STYLE_PERIMETER_SPACING,0,0,999," pt"),this.addKeyHandler(S,V),this.addKeyHandler(k,V),this.addKeyHandler(B,V),M&&this.addKeyHandler(M,V),G&&this.addKeyHandler(G,V),this.addKeyHandler(j,V),n.getModel().addListener(mxEvent.CHANGE,V),this.listeners.push({destroy:function(){n.getModel().removeListener(V)}}),V(),t},GE.StyleFormatPanel.prototype.addLineJumps=function(t){var e=this.format.getSelectionState();if(GE.Graph.lineJumpsEnabled&&e.edges.length>0&&0==e.vertices.length&&e.lineJumps){t.style.padding="8px 0px 24px 18px";var n=this.editorUi,i=n.editor.graph,s=document.createElement("div");s.style.position="absolute",s.style.fontWeight="bold",s.style.width="80px",mxUtils.write(s,mxResources.get("lineJumps")),t.appendChild(s);var l=document.createElement("select");l.style.position="absolute",l.style.marginTop="-2px",l.style.right="76px",l.style.width="62px";for(var o,a=["none","arc","gap","sharp"],r=0;r<a.length;r++){var d=document.createElement("option");d.setAttribute("value",a[r]),mxUtils.write(d,mxResources.get(a[r])),l.appendChild(d)}mxEvent.addListener(l,"change",function(t){i.getModel().beginUpdate();try{i.setCellStyles("jumpStyle",l.value,i.getSelectionCells()),n.fireEvent(new mxEventObject("styleChanged","keys",["jumpStyle"],"values",[l.value],"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}mxEvent.consume(t)}),mxEvent.addListener(l,"click",function(t){mxEvent.consume(t)}),t.appendChild(l);var u=this.addUnitInput(t,"pt",22,33,function(){o.apply(this,arguments)});o=this.installInputHandler(u,"jumpSize",GE.Graph.defaultJumpSize,0,999," pt");var m=mxUtils.bind(this,function(t,n,i){if(e=this.format.getSelectionState(),l.value=mxUtils.getValue(e.style,"jumpStyle","none"),i||document.activeElement!=u){var s=parseInt(mxUtils.getValue(e.style,"jumpSize",GE.Graph.defaultJumpSize));u.value=isNaN(s)?"":s+" pt"}});this.addKeyHandler(u,m),i.getModel().addListener(mxEvent.CHANGE,m),this.listeners.push({destroy:function(){i.getModel().removeListener(m)}}),m()}else t.style.display="none";return t},GE.StyleFormatPanel.prototype.addEffects=function(t){var e=this.editorUi.editor.graph,n=this.format.getSelectionState();t.style.paddingTop="0px",t.style.paddingBottom="2px";var i=document.createElement("table");i.style.width="100%",i.style.fontWeight="bold",i.style.paddingRight="20px";var s=document.createElement("tbody"),l=document.createElement("tr");l.style.padding="0px";var o=document.createElement("td");o.style.padding="0px",o.style.width="50%",o.setAttribute("valign","top");var a=o.cloneNode(!0);a.style.paddingLeft="8px",l.appendChild(o),l.appendChild(a),s.appendChild(l),i.appendChild(s),t.appendChild(i);var r=o,d=0,u=mxUtils.bind(this,function(t,e,n){var i=this.createCellOption(t,e,n);i.style.width="100%",r.appendChild(i),r=r==o?a:o,d++}),m=mxUtils.bind(this,function(e,i,s){n=this.format.getSelectionState(),o.innerHTML="",a.innerHTML="",r=o,n.rounded&&u(mxResources.get("rounded"),mxConstants.STYLE_ROUNDED,0),"swimlane"==n.style.shape&&u(mxResources.get("divider"),"swimlaneLine",1),n.containsImage||u(mxResources.get("shadow"),mxConstants.STYLE_SHADOW,0),n.glass&&u(mxResources.get("glass"),mxConstants.STYLE_GLASS,0),n.comic&&u(mxResources.get("comic"),"comic",0),0==d&&(t.style.display="none")});return e.getModel().addListener(mxEvent.CHANGE,m),this.listeners.push({destroy:function(){e.getModel().removeListener(m)}}),m(),t},GE.StyleFormatPanel.prototype.addStyleOps=function(t){t.style.paddingTop="10px",t.style.paddingBottom="10px";var e=mxUtils.button(mxResources.get("setAsDefaultStyle"),mxUtils.bind(this,function(t){this.editorUi.actions.get("setAsDefaultStyle").funct()}));return e.setAttribute("title",mxResources.get("setAsDefaultStyle")+" ("+this.editorUi.actions.get("setAsDefaultStyle").shortcut+")"),e.style.width="202px",t.appendChild(e),t},GE.DiagramFormatPanel=function(t,e,n){GE.BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(GE.DiagramFormatPanel,GE.BaseFormatPanel),GE.DiagramFormatPanel.prototype.init=function(){var t=this.editorUi.editor.graph;this.container.appendChild(this.addView(this.createPanel())),t.isEnabled()&&(this.container.appendChild(this.addOptions(this.createPanel())),this.container.appendChild(this.addPaperSize(this.createPanel())),this.container.appendChild(this.addStyleOps(this.createPanel())))},GE.DiagramFormatPanel.prototype.createBgColorOption=function(t,e,n,i,s,l,o){var a=document.createElement("div");a.style.padding="6px 0px 1px 0px",a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.width="200px",a.style.height="18px";var r=document.createElement("input");r.setAttribute("type","checkbox"),r.style.margin="0px 6px 0px 0px",o||a.appendChild(r);var d=document.createElement("span");mxUtils.write(d,t),a.appendChild(d);var u=e(),m=!1,p=null,c=function(t,s,a){m||(m=!0,t=/(^#?[a-zA-Z0-9]*$)/.test(t)?t:i,p.innerHTML='<div style="width:36px;height:12px;margin:3px;border:1px solid black;background-color:'+mxUtils.htmlEntities(null!=t&&t!=mxConstants.NONE?t:i)+';"></div>',null!=t?(r.setAttribute("checked","checked"),r.defaultChecked=!0,r.checked=!0):(t=null,r.removeAttribute("checked"),r.defaultChecked=!1,r.checked=!1),p.style.display=r.checked||o?"":"none",null!=l&&l(t),s||(u=t,(a||o||e()!=u)&&n(u)),m=!1)};return(p=mxUtils.button("",mxUtils.bind(this,function(t){this.editorUi.pickColor(u,function(t){c(t,null,!0)}),mxEvent.consume(t)}))).style.position="absolute",p.style.marginTop="-4px",p.style.right="20px",p.style.height="22px",p.className="geColorBtn",p.style.display=r.checked||o?"":"none",a.appendChild(p),mxEvent.addListener(a,"click",function(t){var e=mxEvent.getSource(t);e!=r&&"INPUT"==e.nodeName||(e!=r&&(r.checked=!r.checked),r.checked||null==u||u==mxConstants.NONE||i==mxConstants.NONE||(i=u),c(r.checked?i:null))}),c(u,!0),null!=s&&(s.install(c),this.listeners.push(s)),a},GE.DiagramFormatPanel.prototype.addView=function(t){var e=this.editorUi,n=e.editor.graph;t.appendChild(this.createTitle(mxResources.get("view"))),this.addGridOption(t);let i=null;if(n.isEnabled()){var s=this.createBgColorOption(mxResources.get("background"),function(){return n.background||n.backgroundImage},function(t){let s;null===t?(i.style.visibility="hidden",s=new ChangePageSetup(e,null,null)):(i.style.visibility="visible",(s=new ChangePageSetup(e,t)).ignoreImage=!0),n.model.execute(s)},"#ffffff",{install:function(t){this.listener=function(){t(n.background)},e.addListener("backgroundColorChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}});(i=mxUtils.button(mxResources.get("themes"),function(t){e.showGraphThemesDialog(null,e.editor.graph.backgroundImage),mxEvent.consume(t)})).style.position="absolute",i.className="geColorBtn",i.style.marginTop="-4px",i.style.paddingBottom=11==document.documentMode||GE.IS_MT?"0px":"2px",i.style.height="22px",i.style.right="72px",i.style.width="56px",s.appendChild(i),t.appendChild(s)}return t},GE.DiagramFormatPanel.prototype.addOptions=function(t){var e=this.editorUi,n=e.editor.graph;return t.appendChild(this.createTitle(mxResources.get("options"))),n.isEnabled()&&(t.appendChild(this.createOption(mxResources.get("splitWay"),function(){return n.isSplitEnabled()},function(t){e.actions.get("splitWay").funct()},{install:function(t){this.listener=function(){t(n.isSplitEnabled())},e.addListener("splitWayChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}})),t.appendChild(this.createOption(mxResources.get("connectionArrows"),function(){return n.connectionArrowsEnabled},function(t){e.actions.get("connectionArrows").funct()},{install:function(t){this.listener=function(){t(n.connectionArrowsEnabled)},e.addListener("connectionArrowsChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}})),t.appendChild(this.createOption(mxResources.get("connectionPoints"),function(){return n.connectionHandler.isEnabled()},function(t){e.actions.get("connectionPoints").funct()},{install:function(t){this.listener=function(){t(n.connectionHandler.isEnabled())},e.addListener("connectionPointsChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}})),t.appendChild(this.createOption(mxResources.get("guides"),function(){return n.graphHandler.guidesEnabled},function(t){e.actions.get("guides").funct()},{install:function(t){this.listener=function(){t(n.graphHandler.guidesEnabled)},e.addListener("guidesEnabledChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}}))),t},GE.DiagramFormatPanel.prototype.addGridOption=function(t){var e=this,n=this.editorUi,i=n.editor.graph,s=document.createElement("input");s.style.position="absolute",s.style.textAlign="right",s.style.width="38px",s.value=this.inUnit(i.getGridSize())+" "+this.getUnit();var l=this.createStepper(s,o,this.getUnitStep(),null,null,null,this.isFloatUnit());function o(t){var n=e.isFloatUnit()?parseFloat(s.value):parseInt(s.value);(n=e.fromUnit(Math.max(e.inUnit(1),isNaN(n)?e.inUnit(10):n)))!=i.getGridSize()&&i.setGridSize(n),s.value=e.inUnit(n)+" "+e.getUnit(),mxEvent.consume(t)}s.style.display=i.isGridEnabled()?"":"none",l.style.display=s.style.display,mxEvent.addListener(s,"keydown",function(t){13==t.keyCode?(i.container.focus(),mxEvent.consume(t)):27==t.keyCode&&(s.value=i.getGridSize(),i.container.focus(),mxEvent.consume(t))}),mxEvent.addListener(s,"blur",o),mxEvent.addListener(s,"change",o);var a=function(t,n){s.value=e.inUnit(i.getGridSize())+" "+e.getUnit(),e.format.refresh()};if(i.view.addListener("unitChanged",a),this.listeners.push({destroy:function(){i.view.removeListener(a)}}),GE.IS_SVG){s.style.marginTop="-2px",s.style.right="84px",l.style.marginTop="-16px",l.style.right="72px";var r=this.createColorOption(mxResources.get("grid"),function(){var t=i.view.gridColor;return i.isGridEnabled()?t:null},function(t){var e=i.isGridEnabled();t==mxConstants.NONE?i.setGridEnabled(!1):(i.setGridEnabled(!0),n.setGridColor(t)),s.style.display=i.isGridEnabled()?"":"none",l.style.display=s.style.display,e!=i.isGridEnabled()&&n.fireEvent(new mxEventObject("gridEnabledChanged"))},"#e0e0e0",{install:function(t){this.listener=function(){t(i.isGridEnabled()?i.view.gridColor:null)},n.addListener("gridColorChanged",this.listener),n.addListener("gridEnabledChanged",this.listener)},destroy:function(){n.removeListener(this.listener)}});r.appendChild(s),r.appendChild(l),t.appendChild(r)}else s.style.marginTop="2px",s.style.right="32px",l.style.marginTop="2px",l.style.right="20px",t.appendChild(s),t.appendChild(l),t.appendChild(this.createOption(mxResources.get("grid"),function(){return i.isGridEnabled()},function(t){i.setGridEnabled(t),i.isGridEnabled()&&(i.view.gridColor="#e0e0e0"),n.fireEvent(new mxEventObject("gridEnabledChanged"))},{install:function(t){this.listener=function(){s.style.display=i.isGridEnabled()?"":"none",l.style.display=s.style.display,t(i.isGridEnabled())},n.addListener("gridEnabledChanged",this.listener)},destroy:function(){n.removeListener(this.listener)}}))},GE.DiagramFormatPanel.prototype.addDocumentProperties=function(t){this.editorUi.editor.graph;return t.appendChild(this.createTitle(mxResources.get("options"))),t};const addPageFormatPanel=function(t,e,n,i){var s=document.createElement("select");s.style.marginBottom="8px",s.style.width="202px";var l=document.createElement("div");l.style.marginLeft="4px",l.style.width="210px",l.style.height="24px";var o=document.createElement("input");o.setAttribute("size","7"),o.style.textAlign="right",l.appendChild(o),mxUtils.write(l," x ");var a=document.createElement("input");a.setAttribute("size","7"),a.style.textAlign="right",l.appendChild(a),l.style.display="none";for(var r=new Object,d=[{key:"19201080",title:"1920 x 1080",format:new mxRectangle(0,0,1920,1080)},{key:"1440900",title:"1440 x 900",format:new mxRectangle(0,0,1440,900)},{key:"12801924",title:"1280 x 1024",format:new mxRectangle(0,0,1280,1024)},{key:"1280720",title:"1280 x 720",format:new mxRectangle(0,0,1280,720)},{key:"1280600",title:"1280 x 600",format:new mxRectangle(0,0,1280,600)},{key:"1152864",title:"1152 x 864",format:new mxRectangle(0,0,1152,864)},{key:"default",title:"1024 x 768",format:mxConstants.PAGE_FORMAT_DEFAULT},{key:"800600",title:"800 x 600",format:new mxRectangle(0,0,800,600)},{key:"custom",title:mxResources.get("custom"),format:null}],u=0;u<d.length;u++){var m=d[u];r[m.key]=m;var p=document.createElement("option");p.setAttribute("value",m.key),mxUtils.write(p,m.title),s.appendChild(p)}var c=!1;function g(t,e,i){if(i||o!=document.activeElement&&a!=document.activeElement){for(var r=!1,u=0;u<d.length;u++){var m=d[u];c?"custom"==m.key&&(s.value=m.key,c=!1):null!=m.format&&n.width==m.format.width&&n.height==m.format.height&&(s.value=m.key,r=!0)}r?l.style.display="none":(o.value=n.width,a.value=n.height,s.value="custom",l.style.display="")}}g(),t.appendChild(s),mxUtils.br(t),t.appendChild(l);var h=n,x=function(t,e){var d=r[s.value];null!=d.format?(o.value=d.format.width,a.value=d.format.height,l.style.display="none"):l.style.display="";var u=parseFloat(o.value);(isNaN(u)||u<=0)&&(o.value=n.width);var m=parseFloat(a.value);(isNaN(m)||m<=0)&&(a.value=n.height/100);var p=new mxRectangle(0,0,Math.floor(parseFloat(o.value)),Math.floor(parseFloat(a.value)));e&&c||p.width==h.width&&p.height==h.height||(h=p,null!=i&&i(h))};return mxEvent.addListener(o,"blur",x),mxEvent.addListener(o,"click",x),mxEvent.addListener(a,"blur",x),mxEvent.addListener(a,"click",x),mxEvent.addListener(s,"change",function(t){c="custom"==s.value,x(0,!0)}),x(),{set:function(t){n=t,g(0,0,!0)},get:function(){return h},widthInput:o,heightInput:a}};GE.DiagramFormatPanel.prototype.addPaperSize=function(t){var e=this.editorUi,n=e.editor.graph;t.appendChild(this.createTitle(mxResources.get("paperSize")));var i=addPageFormatPanel(t,0,n.pageFormat,function(t){if(null==n.pageFormat||n.pageFormat.width!=t.width||n.pageFormat.height!=t.height){var i=new ChangePageSetup(e,null,null,t);i.ignoreColor=!0,i.ignoreImage=!0,n.model.execute(i)}});this.addKeyHandler(i.widthInput,function(){i.set(n.pageFormat)}),this.addKeyHandler(i.heightInput,function(){i.set(n.pageFormat)});var s=function(){i.set(n.pageFormat)};return e.addListener("pageFormatChanged",s),this.listeners.push({destroy:function(){e.removeListener(s)}}),n.getModel().addListener(mxEvent.CHANGE,s),this.listeners.push({destroy:function(){n.getModel().removeListener(s)}}),t},GE.DiagramFormatPanel.prototype.addStyleOps=function(t){return btn=mxUtils.button(mxResources.get("clearDefaultStyle"),mxUtils.bind(this,function(t){this.editorUi.actions.get("clearDefaultStyle").funct()})),btn.setAttribute("title",mxResources.get("clearDefaultStyle")+" ("+this.editorUi.actions.get("clearDefaultStyle").shortcut+")"),btn.style.width="202px",t.appendChild(btn),t},GE.DiagramFormatPanel.prototype.destroy=function(){GE.BaseFormatPanel.prototype.destroy.apply(this,arguments),this.gridEnabledListener&&(this.editorUi.removeListener(this.gridEnabledListener),this.gridEnabledListener=null)};