function mxTooltipHandler(t,i){null!=t&&(this.graph=t,this.delay=i||500,this.graph.addMouseListener(this))}mxTooltipHandler.prototype.zIndex=10005,mxTooltipHandler.prototype.graph=null,mxTooltipHandler.prototype.delay=null,mxTooltipHandler.prototype.ignoreTouchEvents=!0,mxTooltipHandler.prototype.hideOnHover=!1,mxTooltipHandler.prototype.destroyed=!1,mxTooltipHandler.prototype.enabled=!0,mxTooltipHandler.prototype.isEnabled=function(){return this.enabled},mxTooltipHandler.prototype.setEnabled=function(t){this.enabled=t},mxTooltipHandler.prototype.isHideOnHover=function(){return this.hideOnHover},mxTooltipHandler.prototype.setHideOnHover=function(t){this.hideOnHover=t},mxTooltipHandler.prototype.init=function(){null!=document.body&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(t){this.hideTooltip()})))},mxTooltipHandler.prototype.getStateForEvent=function(t){return t.getState()},mxTooltipHandler.prototype.mouseDown=function(t,i){this.reset(i,!1),this.hideTooltip()},mxTooltipHandler.prototype.mouseMove=function(t,i){if(i.getX()!=this.lastX||i.getY()!=this.lastY){this.reset(i,!0);var e=this.getStateForEvent(i);(this.isHideOnHover()||e!=this.state||i.getSource()!=this.node&&(!this.stateSource||null!=e&&this.stateSource==(i.isSource(e.shape)||!i.isSource(e.text))))&&this.hideTooltip()}this.lastX=i.getX(),this.lastY=i.getY()},mxTooltipHandler.prototype.mouseUp=function(t,i){this.reset(i,!0),this.hideTooltip()},mxTooltipHandler.prototype.resetTimer=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null)},mxTooltipHandler.prototype.reset=function(t,i,e){if((!this.ignoreTouchEvents||mxEvent.isMouseEvent(t.getEvent()))&&(this.resetTimer(),e=null!=e?e:this.getStateForEvent(t),i&&this.isEnabled()&&null!=e&&(null==this.div||"hidden"==this.div.style.visibility))){var o=t.getSource(),s=t.getX(),n=t.getY(),l=t.isSource(e.shape)||t.isSource(e.text);this.thread=window.setTimeout(mxUtils.bind(this,function(){if(!this.graph.isEditing()&&!this.graph.popupMenuHandler.isMenuShowing()&&!this.graph.isMouseDown){var t=this.graph.getTooltip(e,o,s,n);this.show(t,s,n),this.state=e,this.node=o,this.stateSource=l}}),this.delay)}},mxTooltipHandler.prototype.hide=function(){this.resetTimer(),this.hideTooltip()},mxTooltipHandler.prototype.hideTooltip=function(){null!=this.div&&(this.div.style.visibility="hidden",this.div.innerHTML="")},mxTooltipHandler.prototype.show=function(t,i,e){if(!this.destroyed&&null!=t&&t.length>0){null==this.div&&this.init();var o=mxUtils.getScrollOrigin();this.div.style.zIndex=this.zIndex,this.div.style.left=i+o.x+"px",this.div.style.top=e+mxConstants.TOOLTIP_VERTICAL_OFFSET+o.y+"px",mxUtils.isNode(t)?(this.div.innerHTML="",this.div.appendChild(t)):this.div.innerHTML=t.replace(/\n/g,"<br>"),this.div.style.visibility="",mxUtils.fit(this.div)}},mxTooltipHandler.prototype.destroy=function(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent.release(this.div),null!=this.div&&null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)};