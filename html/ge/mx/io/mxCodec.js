function mxCodec(e){this.document=e||mxUtils.createXmlDocument(),this.objects=[]}mxCodec.prototype.document=null,mxCodec.prototype.objects=null,mxCodec.prototype.elements=null,mxCodec.prototype.encodeDefaults=!1,mxCodec.prototype.putObject=function(e,t){return this.objects[e]=t,t},mxCodec.prototype.getObject=function(e){var t=null;if(null!=e&&null==(t=this.objects[e])&&null==(t=this.lookup(e))){var n=this.getElementById(e);null!=n&&(t=this.decode(n))}return t},mxCodec.prototype.lookup=function(e){return null},mxCodec.prototype.getElementById=function(e){return this.updateElements(),this.elements[e]},mxCodec.prototype.updateElements=function(){null==this.elements&&(this.elements=new Object,null!=this.document.documentElement&&this.addElement(this.document.documentElement))},mxCodec.prototype.addElement=function(e){if(e.nodeType==mxConstants.NODETYPE_ELEMENT){var t=e.getAttribute("id");if(null!=t)if(null==this.elements[t])this.elements[t]=e;else if(this.elements[t]!=e)throw new Error(t+": Duplicate ID")}for(e=e.firstChild;null!=e;)this.addElement(e),e=e.nextSibling},mxCodec.prototype.getId=function(e){var t=null;return null!=e&&null==(t=this.reference(e))&&e instanceof mxCell&&null==(t=e.getId())&&0==(t=mxCellPath.create(e)).length&&(t="root"),t},mxCodec.prototype.reference=function(e){return null},mxCodec.prototype.encode=function(e){var t=null;if(null!=e&&null!=e.constructor){var n=mxCodecRegistry.getCodec(e.constructor);null!=n?t=n.encode(this,e):mxUtils.isNode(e)?t=mxUtils.importNode(this.document,e,!0):mxLog.warn("mxCodec.encode: No codec for "+mxUtils.getFunctionName(e.constructor))}return t},mxCodec.prototype.decode=function(e,t){this.updateElements();var n=null;if(null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT){var o=null;try{o=window[e.nodeName]}catch(e){}var l=mxCodecRegistry.getCodec(o);null!=l?n=l.decode(this,e,t):(n=e.cloneNode(!0)).removeAttribute("as")}return n},mxCodec.prototype.encodeCell=function(e,t,n){if(t.appendChild(this.encode(e)),null==n||n)for(var o=e.getChildCount(),l=0;l<o;l++)this.encodeCell(e.getChildAt(l),t)},mxCodec.prototype.isCellCodec=function(e){return null!=e&&"function"==typeof e.isCellCodec&&e.isCellCodec()},mxCodec.prototype.decodeCell=function(e,t){t=null==t||t;var n=null;if(null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT){var o=mxCodecRegistry.getCodec(e.nodeName);if(!this.isCellCodec(o))for(var l=e.firstChild;null!=l&&!this.isCellCodec(o);)o=mxCodecRegistry.getCodec(l.nodeName),l=l.nextSibling;this.isCellCodec(o)||(o=mxCodecRegistry.getCodec(mxCell)),n=o.decode(this,e),t&&this.insertIntoGraph(n)}return n},mxCodec.prototype.insertIntoGraph=function(e){var t=e.parent,n=e.getTerminal(!0),o=e.getTerminal(!1);if(e.setTerminal(null,!1),e.setTerminal(null,!0),e.parent=null,null!=t){if(t==e)throw new Error(t.id+": Self Reference");t.insert(e)}null!=n&&n.insertEdge(e,!0),null!=o&&o.insertEdge(e,!1)},mxCodec.prototype.setAttribute=function(e,t,n){null!=t&&null!=n&&e.setAttribute(t,n)};