function mxToolbar(e){this.container=e}mxToolbar.prototype=new mxEventSource,mxToolbar.prototype.constructor=mxToolbar,mxToolbar.prototype.container=null,mxToolbar.prototype.enabled=!0,mxToolbar.prototype.noReset=!1,mxToolbar.prototype.updateDefaultMode=!0,mxToolbar.prototype.addItem=function(e,t,o,n,i,l){var s=document.createElement(null!=t?"img":"button"),a=i||(null!=l?"mxToolbarMode":"mxToolbarItem");s.className=a,s.setAttribute("src",t),null!=e&&(null!=t?s.setAttribute("title",e):mxUtils.write(s,e)),this.container.appendChild(s),null!=o&&mxEvent.addListener(s,"click",o);var d=mxUtils.bind(this,function(e){null!=n?s.setAttribute("src",t):s.style.backgroundColor=""});return mxEvent.addGestureListeners(s,mxUtils.bind(this,function(e){if(null!=n?s.setAttribute("src",n):s.style.backgroundColor="gray",null!=l){null==this.menu&&(this.menu=new mxPopupMenu,this.menu.init());var t=this.currentImg;if(this.menu.isMenuShowing()&&this.menu.hideMenu(),t!=s){this.currentImg=s,this.menu.factoryMethod=l;var o=new mxPoint(s.offsetLeft,s.offsetTop+s.offsetHeight);this.menu.popup(o.x,o.y,null,e),this.menu.isMenuShowing()&&(s.className=a+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),s.className=a,this.currentImg=null})}}}),null,d),mxEvent.addListener(s,"mouseout",d),s},mxToolbar.prototype.addCombo=function(e){var t=document.createElement("div");t.style.display="inline",t.className="mxToolbarComboContainer";var o=document.createElement("select");return o.className=e||"mxToolbarCombo",t.appendChild(o),this.container.appendChild(t),o},mxToolbar.prototype.addActionCombo=function(e,t){var o=document.createElement("select");return o.className=t||"mxToolbarCombo",this.addOption(o,e,null),mxEvent.addListener(o,"change",function(e){var t=o.options[o.selectedIndex];o.selectedIndex=0,null!=t.funct&&t.funct(e)}),this.container.appendChild(o),o},mxToolbar.prototype.addOption=function(e,t,o){var n=document.createElement("option");return mxUtils.writeln(n,t),"function"==typeof o?n.funct=o:n.setAttribute("value",o),e.appendChild(n),n},mxToolbar.prototype.addSwitchMode=function(e,t,o,n,i){var l=document.createElement("img");return l.initialClassName=i||"mxToolbarMode",l.className=l.initialClassName,l.setAttribute("src",t),l.altIcon=n,null!=e&&l.setAttribute("title",e),mxEvent.addListener(l,"click",mxUtils.bind(this,function(e){var t;null!=(t=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",t)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=l),this.selectedMode=l,null!=(t=l.altIcon)?(l.altIcon=l.getAttribute("src"),l.setAttribute("src",t)):l.className=l.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT)),o()})),this.container.appendChild(l),null==this.defaultMode&&(this.defaultMode=l,this.selectMode(l),o()),l},mxToolbar.prototype.addMode=function(e,t,o,n,i,l){l=null==l||l;var s=document.createElement(null!=t?"img":"button");return s.initialClassName=i||"mxToolbarMode",s.className=s.initialClassName,s.setAttribute("src",t),s.altIcon=n,null!=e&&s.setAttribute("title",e),this.enabled&&l&&(mxEvent.addListener(s,"click",mxUtils.bind(this,function(e){this.selectMode(s,o),this.noReset=!1})),mxEvent.addListener(s,"dblclick",mxUtils.bind(this,function(e){this.selectMode(s,o),this.noReset=!0})),null==this.defaultMode&&(this.defaultMode=s,this.defaultFunction=o,this.selectMode(s,o))),this.container.appendChild(s),s},mxToolbar.prototype.selectMode=function(e,t){if(this.selectedMode!=e){var o;if(null!=this.selectedMode)null!=(o=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",o)):this.selectedMode.className=this.selectedMode.initialClassName;this.selectedMode=e,null!=(o=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",o)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",t))}},mxToolbar.prototype.resetMode=function(e){!e&&this.noReset||this.selectedMode==this.defaultMode||this.selectMode(this.defaultMode,this.defaultFunction)},mxToolbar.prototype.addSeparator=function(e){return this.addItem(null,e,null)},mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)},mxToolbar.prototype.addLine=function(){var e=document.createElement("hr");e.style.marginRight="6px",e.setAttribute("size","1"),this.container.appendChild(e)},mxToolbar.prototype.destroy=function(){mxEvent.release(this.container),this.container=null,this.defaultMode=null,this.defaultFunction=null,this.selectedMode=null,null!=this.menu&&this.menu.destroy()};