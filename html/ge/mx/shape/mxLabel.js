function mxLabel(t,i,e,n){mxRectangleShape.call(this,t,i,e,n)}mxUtils.extend(mxLabel,mxRectangleShape),mxLabel.prototype.imageSize=mxConstants.DEFAULT_IMAGESIZE,mxLabel.prototype.spacing=2,mxLabel.prototype.indicatorSize=10,mxLabel.prototype.indicatorSpacing=2,mxLabel.prototype.init=function(t){mxShape.prototype.init.apply(this,arguments),null!=this.indicatorShape&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))},mxLabel.prototype.redraw=function(){null!=this.indicator&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection,this.indicator.redraw()),mxShape.prototype.redraw.apply(this,arguments)},mxLabel.prototype.isHtmlAllowed=function(){return mxRectangleShape.prototype.isHtmlAllowed.apply(this,arguments)&&null==this.indicatorColor&&null==this.indicatorShape},mxLabel.prototype.paintForeground=function(t,i,e,n,s){this.paintImage(t,i,e,n,s),this.paintIndicator(t,i,e,n,s),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxLabel.prototype.paintImage=function(t,i,e,n,s){if(null!=this.image){var o=this.getImageBounds(i,e,n,s);t.image(o.x,o.y,o.width,o.height,this.image,!1,!1,!1)}},mxLabel.prototype.getImageBounds=function(t,i,e,n){var s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),o=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),a=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_WIDTH,mxConstants.DEFAULT_IMAGESIZE),r=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_HEIGHT,mxConstants.DEFAULT_IMAGESIZE),h=mxUtils.getNumber(this.style,mxConstants.STYLE_SPACING,this.spacing)+5;return s==mxConstants.ALIGN_CENTER?t+=(e-a)/2:s==mxConstants.ALIGN_RIGHT?t+=e-a-h:t+=h,o==mxConstants.ALIGN_TOP?i+=h:o==mxConstants.ALIGN_BOTTOM?i+=n-r-h:i+=(n-r)/2,new mxRectangle(t,i,a,r)},mxLabel.prototype.paintIndicator=function(t,i,e,n,s){if(null!=this.indicator)this.indicator.bounds=this.getIndicatorBounds(i,e,n,s),this.indicator.paint(t);else if(null!=this.indicatorImage){var o=this.getIndicatorBounds(i,e,n,s);t.image(o.x,o.y,o.width,o.height,this.indicatorImage,!1,!1,!1)}},mxLabel.prototype.getIndicatorBounds=function(t,i,e,n){var s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),o=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),a=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_WIDTH,this.indicatorSize),r=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_HEIGHT,this.indicatorSize),h=this.spacing+5;return s==mxConstants.ALIGN_RIGHT?t+=e-a-h:s==mxConstants.ALIGN_CENTER?t+=(e-a)/2:t+=h,o==mxConstants.ALIGN_BOTTOM?i+=n-r-h:o==mxConstants.ALIGN_TOP?i+=h:i+=(n-r)/2,new mxRectangle(t,i,a,r)},mxLabel.prototype.redrawHtmlShape=function(){for(mxRectangleShape.prototype.redrawHtmlShape.apply(this,arguments);this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);if(null!=this.image){var t=document.createElement("img");t.style.position="relative",t.setAttribute("border","0");var i=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height);i.x-=this.bounds.x,i.y-=this.bounds.y,t.style.left=Math.round(i.x)+"px",t.style.top=Math.round(i.y)+"px",t.style.width=Math.round(i.width)+"px",t.style.height=Math.round(i.height)+"px",t.src=this.image,this.node.appendChild(t)}};