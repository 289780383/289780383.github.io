function mxGraphHandler(e){this.graph=e,this.graph.addMouseListener(this),this.panHandler=mxUtils.bind(this,function(){this.suspended||(this.updatePreview(),this.updateHint())}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.escapeHandler=mxUtils.bind(this,function(e,t){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler),this.refreshHandler=mxUtils.bind(this,function(e,t){window.setTimeout(mxUtils.bind(this,function(){if(null!=this.first&&!this.suspended){var e=this.currentDx,t=this.currentDy;this.currentDx=0,this.currentDy=0,this.updatePreview(),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),null==this.pBounds?this.reset():(this.currentDx=e,this.currentDy=t,this.updatePreview(),this.updateHint(),this.livePreviewUsed&&this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1))}}),0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.keyHandler=mxUtils.bind(this,function(e){if(null!=this.graph.container&&"hidden"!=this.graph.container.style.visibility&&null!=this.first&&!this.suspended){var t=this.graph.isCloneEvent(e)&&this.graph.isCellsCloneable()&&this.isCloneEnabled();t!=this.cloning&&(this.cloning=t,this.checkPreview(),this.updatePreview())}}),mxEvent.addListener(document,"keydown",this.keyHandler),mxEvent.addListener(document,"keyup",this.keyHandler)}mxGraphHandler.prototype.graph=null,mxGraphHandler.prototype.maxCells=50,mxGraphHandler.prototype.enabled=!0,mxGraphHandler.prototype.highlightEnabled=!0,mxGraphHandler.prototype.cloneEnabled=!0,mxGraphHandler.prototype.moveEnabled=!0,mxGraphHandler.prototype.guidesEnabled=!1,mxGraphHandler.prototype.handlesVisible=!0,mxGraphHandler.prototype.guide=null,mxGraphHandler.prototype.currentDx=null,mxGraphHandler.prototype.currentDy=null,mxGraphHandler.prototype.updateCursor=!0,mxGraphHandler.prototype.selectEnabled=!0,mxGraphHandler.prototype.removeCellsFromParent=!0,mxGraphHandler.prototype.removeEmptyParents=!1,mxGraphHandler.prototype.connectOnDrop=!1,mxGraphHandler.prototype.scrollOnMove=!0,mxGraphHandler.prototype.minimumSize=6,mxGraphHandler.prototype.previewColor="black",mxGraphHandler.prototype.htmlPreview=!1,mxGraphHandler.prototype.shape=null,mxGraphHandler.prototype.scaleGrid=!1,mxGraphHandler.prototype.rotationEnabled=!0,mxGraphHandler.prototype.maxLivePreview=0,mxGraphHandler.prototype.allowLivePreview=GE.IS_SVG,mxGraphHandler.prototype.isEnabled=function(){return this.enabled},mxGraphHandler.prototype.setEnabled=function(e){this.enabled=e},mxGraphHandler.prototype.isCloneEnabled=function(){return this.cloneEnabled},mxGraphHandler.prototype.setCloneEnabled=function(e){this.cloneEnabled=e},mxGraphHandler.prototype.isMoveEnabled=function(){return this.moveEnabled},mxGraphHandler.prototype.setMoveEnabled=function(e){this.moveEnabled=e},mxGraphHandler.prototype.isSelectEnabled=function(){return this.selectEnabled},mxGraphHandler.prototype.setSelectEnabled=function(e){this.selectEnabled=e},mxGraphHandler.prototype.isRemoveCellsFromParent=function(){return this.removeCellsFromParent},mxGraphHandler.prototype.setRemoveCellsFromParent=function(e){this.removeCellsFromParent=e},mxGraphHandler.prototype.isPropagateSelectionCell=function(e,t,i){var l=this.graph.model.getParent(e);if(t){var n=this.graph.getCellGeometry(e);return!this.graph.model.isEdge(e)&&!this.graph.model.isEdge(l)&&!this.graph.isSiblingSelected(e)&&(null==n||n.relative||!this.graph.isSwimlane(l))}return(!this.graph.isToggleEvent(i.getEvent())||!this.graph.isSiblingSelected(e)&&!this.graph.isCellSelected(e)&&!this.graph.isSwimlane(l)||this.graph.isCellSelected(l))&&(this.graph.isToggleEvent(i.getEvent())||!this.graph.isCellSelected(l))},mxGraphHandler.prototype.getInitialCellForEvent=function(e){var t=e.getState();if(!(this.graph.isToggleEvent(e.getEvent())&&mxEvent.isAltDown(e.getEvent())||null==t||this.graph.isCellSelected(t.cell)))for(var i=this.graph.model,l=this.graph.view.getState(i.getParent(t.cell));null!=l&&!this.graph.isCellSelected(l.cell)&&(i.isVertex(l.cell)||i.isEdge(l.cell))&&this.isPropagateSelectionCell(t.cell,!0,e);)t=l,l=this.graph.view.getState(this.graph.getModel().getParent(t.cell));return null!=t?t.cell:null},mxGraphHandler.prototype.isDelayedSelection=function(e,t){if(!this.graph.isToggleEvent(t.getEvent())||!mxEvent.isAltDown(t.getEvent()))for(;null!=e;){if(this.graph.selectionCellsHandler.isHandled(e))return this.graph.cellEditor.getEditingCell()!=e;e=this.graph.model.getParent(e)}return this.graph.isToggleEvent(t.getEvent())&&!mxEvent.isAltDown(t.getEvent())},mxGraphHandler.prototype.selectDelayed=function(e){if(!this.graph.popupMenuHandler.isPopupTrigger(e)){var t=e.getCell();null==t&&(t=this.cell);var i=this.graph.view.getState(t);if(null!=i)if(e.isSource(i.control))this.graph.selectCellForEvent(t,e.getEvent());else{if(!this.graph.isToggleEvent(e.getEvent())||!mxEvent.isAltDown(e.getEvent()))for(var l=this.graph.getModel(),n=l.getParent(t);null!=this.graph.view.getState(n)&&(l.isVertex(n)||l.isEdge(n))&&this.isPropagateSelectionCell(t,!1,e);)t=n,n=l.getParent(t);this.graph.selectCellForEvent(t,e.getEvent())}}},mxGraphHandler.prototype.consumeMouseEvent=function(e,t){t.consume()},mxGraphHandler.prototype.mouseDown=function(e,t){if(!t.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null!=t.getState()&&!mxEvent.isMultiTouchEvent(t.getEvent())){var i=this.getInitialCellForEvent(t);if(this.delayedSelection=this.isDelayedSelection(i,t),this.cell=null,this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(i,t.getEvent()),this.isMoveEnabled()){var l=this.graph.model,n=l.getGeometry(i);this.graph.isCellMovable(i)&&(!l.isEdge(i)||this.graph.getSelectionCount()>1||null!=n.points&&n.points.length>0||null==l.getTerminal(i,!0)||null==l.getTerminal(i,!1)||this.graph.allowDanglingEdges||this.graph.isCloneEvent(t.getEvent())&&this.graph.isCellsCloneable())?this.start(i,t.getX(),t.getY()):this.delayedSelection&&(this.cell=i),this.cellWasClicked=!0,this.consumeMouseEvent(mxEvent.MOUSE_DOWN,t)}}},mxGraphHandler.prototype.getGuideStates=function(){var e=this.graph.getDefaultParent(),t=this.graph.getModel(),i=mxUtils.bind(this,function(e){return null!=this.graph.view.getState(e)&&t.isVertex(e)&&null!=t.getGeometry(e)&&!t.getGeometry(e).relative});return this.graph.view.getCellStates(t.filterDescendants(i,e))},mxGraphHandler.prototype.getCells=function(e){return!this.delayedSelection&&this.graph.isCellMovable(e)?[e]:this.graph.getMovableCells(this.graph.getSelectionCells())},mxGraphHandler.prototype.getPreviewBounds=function(e){var t=this.getBoundingBox(e);if(null!=t){if(t.width=Math.max(0,t.width-1),t.height=Math.max(0,t.height-1),t.width<this.minimumSize){var i=this.minimumSize-t.width;t.x-=i/2,t.width=this.minimumSize}else t.x=Math.round(t.x),t.width=Math.ceil(t.width);this.graph.view.translate,this.graph.view.scale;if(t.height<this.minimumSize){var l=this.minimumSize-t.height;t.y-=l/2,t.height=this.minimumSize}else t.y=Math.round(t.y),t.height=Math.ceil(t.height)}return t},mxGraphHandler.prototype.getBoundingBox=function(e){var t=null;if(null!=e&&e.length>0)for(var i=this.graph.getModel(),l=0;l<e.length;l++)if(i.isVertex(e[l])||i.isEdge(e[l])){var n=this.graph.view.getState(e[l]);if(null!=n){var s=n;i.isVertex(e[l])&&null!=n.shape&&null!=n.shape.boundingBox&&(s=n.shape.boundingBox),null==t?t=mxRectangle.fromRectangle(s):t.add(s)}}return t},mxGraphHandler.prototype.createPreviewShape=function(e){var t=new mxRectangleShape(e,null,this.previewColor);return t.isDashed=!0,this.htmlPreview?(t.dialect=mxConstants.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),t.pointerEvents=!1,GE.IS_IOS&&(t.getSvgScreenOffset=function(){return 0})),t},mxGraphHandler.prototype.start=function(e,t,i,l){this.cell=e,this.first=mxUtils.convertPoint(this.graph.container,t,i),this.cells=null!=l?l:this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.allCells=new mxDictionary,this.cloning=!1,this.cellCount=0;for(var n=0;n<this.cells.length;n++)this.cellCount+=this.addStates(this.cells[n],this.allCells);if(this.guidesEnabled){this.guide=new mxGuide(this.graph,this.getGuideStates());var s=this.graph.model.getParent(e),r=this.graph.model.getChildCount(s)<2,h=new mxDictionary,a=this.graph.getOpposites(this.graph.getEdges(this.cell),this.cell);for(n=0;n<a.length;n++){var o=this.graph.view.getState(a[n]);null==o||h.get(o)||h.put(o,!0)}this.guide.isStateIgnored=mxUtils.bind(this,function(e){var t=this.graph.model.getParent(e.cell);return null!=e.cell&&(!this.cloning&&this.isCellMoving(e.cell)||e.cell!=(this.target||s)&&!r&&!h.get(e)&&(null==this.target||this.graph.model.getChildCount(this.target)>=2)&&t!=(this.target||s))})}},mxGraphHandler.prototype.addStates=function(e,t){var i=this.graph.view.getState(e),l=0;if(null!=i&&null==t.get(e)){t.put(e,i),l++;for(var n=this.graph.model.getChildCount(e),s=0;s<n;s++)l+=this.addStates(this.graph.model.getChildAt(e,s),t)}return l},mxGraphHandler.prototype.isCellMoving=function(e){return null!=this.allCells.get(e)},mxGraphHandler.prototype.useGuidesForEvent=function(e){return null==this.guide||this.guide.isEnabledForEvent(e.getEvent())&&!this.graph.isConstrainedEvent(e.getEvent())},mxGraphHandler.prototype.snap=function(e){var t=this.scaleGrid?this.graph.view.scale:1;return e.x=this.graph.snap(e.x/t)*t,e.y=this.graph.snap(e.y/t)*t,e},mxGraphHandler.prototype.getDelta=function(e){var t=mxUtils.convertPoint(this.graph.container,e.getX(),e.getY());return new mxPoint(t.x-this.first.x-this.graph.panDx,t.y-this.first.y-this.graph.panDy)},mxGraphHandler.prototype.constraintRange=function(){},mxGraphHandler.prototype.updateHint=function(e){},mxGraphHandler.prototype.removeHint=function(){},mxGraphHandler.prototype.roundLength=function(e){return Math.round(100*e)/100},mxGraphHandler.prototype.isValidDropTarget=function(e,t){return this.graph.model.getParent(this.cell)!=e},mxGraphHandler.prototype.checkPreview=function(){this.livePreviewActive&&this.cloning?(this.resetLivePreview(),this.livePreviewActive=!1):this.maxLivePreview>=this.cellCount&&!this.livePreviewActive&&this.allowLivePreview?this.cloning&&this.livePreviewActive||(this.livePreviewActive=!0,this.livePreviewUsed=!0):this.livePreviewUsed||null!=this.shape||(this.shape=this.createPreviewShape(this.bounds))},mxGraphHandler.prototype.mouseMove=function(e,t){var i=this.graph;if(t.isConsumed()||!i.isMouseDown||null==this.cell||null==this.first||null==this.bounds||this.suspended){if((this.isMoveEnabled()||this.isCloneEnabled())&&this.updateCursor&&!t.isConsumed()&&(null!=t.getState()||null!=t.sourceState)&&!i.isMouseDown){var l=i.getCursorForMouseEvent(t);null==l&&i.isEnabled()&&i.isCellMovable(t.getCell())&&(l=i.getModel().isEdge(t.getCell())?mxConstants.CURSOR_MOVABLE_EDGE:mxConstants.CURSOR_MOVABLE_VERTEX),null!=l&&null!=t.sourceState&&t.sourceState.setCursor(l)}}else{if(mxEvent.isMultiTouchEvent(t.getEvent()))return void this.reset();var n=this.getDelta(t),s=i.tolerance;if(null!=this.shape||this.livePreviewActive||Math.abs(n.x)>s||Math.abs(n.y)>s){null==this.highlight&&(this.highlight=new mxCellHighlight(this.graph,mxConstants.DROP_TARGET_COLOR,3));var r=i.isCloneEvent(t.getEvent())&&i.isCellsCloneable()&&this.isCloneEnabled(),h=i.isGridEnabledEvent(t.getEvent()),a=t.getCell(),o=!0,p=null;this.cloning=r,i.isDropEnabled()&&this.highlightEnabled&&(p=i.getDropTarget(this.cells,t.getEvent(),a,r));var d=i.getView().getState(p),g=!1;if(null!=d&&(r||this.isValidDropTarget(p,t)))this.target!=p&&(this.target=p,this.setHighlightColor(mxConstants.DROP_TARGET_COLOR)),g=!0;else if(this.target=null,this.connectOnDrop&&null!=a&&1==this.cells.length&&i.getModel().isVertex(a)&&i.isCellConnectable(a)&&null!=(d=i.getView().getState(a))){var u=null==i.getEdgeValidationError(null,this.cell,a)?mxConstants.VALID_COLOR:mxConstants.INVALID_CONNECT_TARGET_COLOR;this.setHighlightColor(u),g=!0}null!=d&&g?this.highlight.highlight(d):this.highlight.hide(),null!=this.guide&&this.useGuidesForEvent(t)?(n=this.guide.move(this.bounds,n,h,r),o=!1):n=this.graph.snapDelta(n,this.bounds,!h,!1,!1),null!=this.guide&&o&&this.guide.hide(),i.isConstrainedEvent(t.getEvent())&&(Math.abs(n.x)>Math.abs(n.y)?n.y=0:n.x=0),this.checkPreview(),this.currentDx==n.x&&this.currentDy==n.y||(this.currentDx=n.x,this.currentDy=n.y,this.constraintRange(),this.updatePreview(),this.updateHint(t))}this.consumeMouseEvent(mxEvent.MOUSE_MOVE,t),mxEvent.consume(t.getEvent())}},mxGraphHandler.prototype.updatePreview=function(e){this.livePreviewUsed&&!e?null!=this.cells&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1),this.updateLivePreview(this.currentDx,this.currentDy)):this.updatePreviewShape()},mxGraphHandler.prototype.updatePreviewShape=function(){null!=this.shape&&null!=this.pBounds&&(this.shape.bounds=new mxRectangle(Math.round(this.pBounds.x+this.currentDx),Math.round(this.pBounds.y+this.currentDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())},mxGraphHandler.prototype.updateLivePreview=function(e,t){if(!this.suspended){var i=[];if(null!=this.allCells&&this.allCells.visit(mxUtils.bind(this,function(l,n){if(null==this.graph.view.getState(n.cell))n.destroy();else{var s=n.clone();i.push([n,s]),null!=n.shape&&(null==n.shape.originalPointerEvents&&(n.shape.originalPointerEvents=n.shape.pointerEvents),n.shape.pointerEvents=!1,null!=n.text&&(null==n.text.originalPointerEvents&&(n.text.originalPointerEvents=n.text.pointerEvents),n.text.pointerEvents=!1)),this.graph.model.isVertex(n.cell)&&(n.x+=e,n.y+=t,this.cloning||(n.view.graph.cellRenderer.redraw(n,!0),n.view.invalidate(n.cell),n.invalid=!1,null!=n.control&&null!=n.control.node&&(n.control.node.style.visibility="hidden")))}})),0==i.length)this.reset();else{for(var l=this.graph.view.scale,n=0;n<i.length;n++){var s=i[n][0];if(this.graph.model.isEdge(s.cell)){var r=this.graph.getCellGeometry(s.cell),h=[];if(null!=r&&null!=r.points)for(var a=0;a<r.points.length;a++)null!=r.points[a]&&h.push(new mxPoint(r.points[a].x+e/l,r.points[a].y+t/l));var o=s.visibleSourceState,p=s.visibleTargetState,d=i[n][1].absolutePoints;if(null!=o&&this.isCellMoving(o.cell))s.view.updateFixedTerminalPoint(s,o,!0,this.graph.getConnectionConstraint(s,o,!0));else{var g=d[0];s.setAbsoluteTerminalPoint(new mxPoint(g.x+e,g.y+t),!0),o=null}if(null!=p&&this.isCellMoving(p.cell))s.view.updateFixedTerminalPoint(s,p,!1,this.graph.getConnectionConstraint(s,p,!1));else{var u=d[d.length-1];s.setAbsoluteTerminalPoint(new mxPoint(u.x+e,u.y+t),!1),p=null}s.view.updatePoints(s,h,o,p),s.view.updateFloatingTerminalPoints(s,o,p),s.view.updateEdgeLabelOffset(s),s.invalid=!1,this.cloning||s.view.graph.cellRenderer.redraw(s,!0)}}this.graph.view.validate(),this.redrawHandles(i),this.resetPreviewStates(i)}}},mxGraphHandler.prototype.redrawHandles=function(e){for(var t=0;t<e.length;t++){var i=this.graph.selectionCellsHandler.getHandler(e[t][0].cell);null!=i&&i.redraw(!0)}},mxGraphHandler.prototype.resetPreviewStates=function(e){for(var t=0;t<e.length;t++)e[t][0].setState(e[t][1])},mxGraphHandler.prototype.suspend=function(){this.suspended||(this.livePreviewUsed&&this.updateLivePreview(0,0),null!=this.shape&&(this.shape.node.style.visibility="hidden"),null!=this.guide&&this.guide.setVisible(!1),this.suspended=!0)},mxGraphHandler.prototype.resume=function(){this.suspended&&(this.suspended=null,this.livePreviewUsed&&(this.livePreviewActive=!0),null!=this.shape&&(this.shape.node.style.visibility="visible"),null!=this.guide&&this.guide.setVisible(!0))},mxGraphHandler.prototype.resetLivePreview=function(){null!=this.allCells&&(this.allCells.visit(mxUtils.bind(this,function(e,t){null!=t.shape&&null!=t.shape.originalPointerEvents&&(t.shape.pointerEvents=t.shape.originalPointerEvents,t.shape.originalPointerEvents=null,t.shape.bounds=null,null!=t.text&&(t.text.pointerEvents=t.text.originalPointerEvents,t.text.originalPointerEvents=null)),null!=t.control&&null!=t.control.node&&"hidden"==t.control.node.style.visibility&&(t.control.node.style.visibility=""),t.view.invalidate(t.cell)})),this.graph.view.validate())},mxGraphHandler.prototype.setHandlesVisibleForCells=function(e,t){if(this.handlesVisible!=t){this.handlesVisible=t;for(var i=0;i<e.length;i++){var l=this.graph.selectionCellsHandler.getHandler(e[i]);null!=l&&(l.setHandlesVisible(t),t&&l.redraw())}}},mxGraphHandler.prototype.setHighlightColor=function(e){null!=this.highlight&&this.highlight.setHighlightColor(e)},mxGraphHandler.prototype.mouseUp=function(e,t){if(!t.isConsumed())if(this.livePreviewUsed&&this.resetLivePreview(),null==this.cell||null==this.first||null==this.shape&&!this.livePreviewUsed||null==this.currentDx||null==this.currentDy)this.isSelectEnabled()&&this.delayedSelection&&null!=this.cell&&this.selectDelayed(t);else{var i=this.graph,l=t.getCell();if(this.connectOnDrop&&null==this.target&&null!=l&&i.getModel().isVertex(l)&&i.isCellConnectable(l)&&i.isEdgeValid(null,this.cell,l))i.connectionHandler.connect(this.cell,l,t.getEvent());else{var n=i.isCloneEvent(t.getEvent())&&i.isCellsCloneable()&&this.isCloneEnabled(),s=i.getView().scale,r=this.roundLength(this.currentDx/s),h=this.roundLength(this.currentDy/s),a=this.target;i.isSplitEnabled()&&i.isSplitTarget(a,this.cells,t.getEvent())?i.splitEdge(a,this.cells,null,r,h,t.getGraphX(),t.getGraphY()):this.moveCells(this.cells,r,h,n,this.target,t.getEvent())}}this.cellWasClicked&&this.consumeMouseEvent(mxEvent.MOUSE_UP,t),this.reset()},mxGraphHandler.prototype.reset=function(){this.livePreviewUsed&&(this.resetLivePreview(),this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!0)),this.destroyShapes(),this.removeHint(),this.delayedSelection=!1,this.livePreviewActive=null,this.livePreviewUsed=null,this.cellWasClicked=!1,this.suspended=null,this.currentDx=null,this.currentDy=null,this.cellCount=null,this.cloning=!1,this.allCells=null,this.pBounds=null,this.guides=null,this.target=null,this.first=null,this.cells=null,this.cell=null},mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(e,t,i){if(this.graph.getModel().isVertex(e)){var l=this.graph.getView().getState(e);if(null!=l){var n=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(i),mxEvent.getClientY(i)),s=mxUtils.toRadians(mxUtils.getValue(l.style,mxConstants.STYLE_ROTATION)||0);if(0!=s){var r=Math.cos(-s),h=Math.sin(-s),a=new mxPoint(l.getCenterX(),l.getCenterY());n=mxUtils.getRotatedPoint(n,r,h,a)}return!mxUtils.contains(l,n.x,n.y)}}return!1},mxGraphHandler.prototype.moveCells=function(e,t,i,l,n,s){l&&(e=this.graph.getCloneableCells(e));var r=this.graph.getModel().getParent(this.cell);!this.cell.isSub&&null==n&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(r,e,s)&&(n=this.graph.getDefaultParent()),l=l&&!this.graph.isCellLocked(n||this.graph.getDefaultParent()),this.graph.getModel().beginUpdate();try{var h=[];if(!l&&null!=n&&this.removeEmptyParents){for(var a=new mxDictionary,o=0;o<e.length;o++)a.put(e[o],!0);for(o=0;o<e.length;o++){var p=this.graph.model.getParent(e[o]);null==p||a.get(p)||(a.put(p,!0),h.push(p))}}e=this.graph.moveCells(e,t,i,l,n,s);var d=[];for(let e=0;e<h.length;e++)this.shouldRemoveParent(h[e])&&d.push(h[e]);if(this.graph.removeCells(d,!1),r&&r.autosize&&r.children.length>0){const e=r.children;let t=Number.MAX_VALUE,i=0,l=Number.MAX_VALUE,n=0;for(let s=0;s<e.length;s++){const r=e[s];r.vertex&&(r.geometry.x<t&&(t=r.geometry.x),r.geometry.y<l&&(l=r.geometry.y),r.geometry.x+r.geometry.width>i&&(i=r.geometry.x+r.geometry.width),r.geometry.y+r.geometry.height>n&&(n=r.geometry.y+r.geometry.height))}if(t!==Number.MAX_VALUE||0!==i||l!==Number.MAX_VALUE||0!==n){r.geometry.x+=t,r.geometry.y+=l,r.geometry.width=i-t,r.geometry.height=n-l;for(let i=0;i<e.length;i++){const n=e[i];n.geometry.x-=t,n.geometry.y-=l}this.graph.refresh(r)}}}finally{this.graph.getModel().endUpdate()}l&&this.graph.setSelectionCells(e),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(e[0])},mxGraphHandler.prototype.shouldRemoveParent=function(e){var t=this.graph.view.getState(e);return null!=t&&(this.graph.model.isEdge(t.cell)||this.graph.model.isVertex(t.cell))&&this.graph.isCellDeletable(t.cell)&&0==this.graph.model.getChildCount(t.cell)&&this.graph.isTransparentState(t)},mxGraphHandler.prototype.destroyShapes=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.guide&&(this.guide.destroy(),this.guide=null),null!=this.highlight&&(this.highlight.destroy(),this.highlight=null)},mxGraphHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.refreshHandler&&(this.graph.getModel().removeListener(this.refreshHandler),this.refreshHandler=null),mxEvent.removeListener(document,"keydown",this.keyHandler),mxEvent.removeListener(document,"keyup",this.keyHandler),this.destroyShapes(),this.removeHint()};