function mxCellStatePreview(t){this.deltas=new mxDictionary,this.graph=t}mxCellStatePreview.prototype.graph=null,mxCellStatePreview.prototype.deltas=null,mxCellStatePreview.prototype.count=0,mxCellStatePreview.prototype.isEmpty=function(){return 0==this.count},mxCellStatePreview.prototype.moveState=function(t,e,l,i,a){i=null==i||i,a=null==a||a;var r=this.deltas.get(t.cell);return null==r?(r={point:new mxPoint(e,l),state:t},this.deltas.put(t.cell,r),this.count++):i?(r.point.x+=e,r.point.y+=l):(r.point.x=e,r.point.y=l),a&&this.addEdges(t),r.point},mxCellStatePreview.prototype.show=function(t){this.deltas.visit(mxUtils.bind(this,function(t,e){this.translateState(e.state,e.point.x,e.point.y)})),this.deltas.visit(mxUtils.bind(this,function(e,l){this.revalidateState(l.state,l.point.x,l.point.y,t)}))},mxCellStatePreview.prototype.translateState=function(t,e,l){if(null!=t){var i=this.graph.getModel();if(i.isVertex(t.cell)){t.view.updateCellState(t);var a=i.getGeometry(t.cell);0==e&&0==l||null==a||a.relative&&null==this.deltas.get(t.cell)||(t.x+=e,t.y+=l)}for(var r=i.getChildCount(t.cell),n=0;n<r;n++)this.translateState(t.view.getState(i.getChildAt(t.cell,n)),e,l)}},mxCellStatePreview.prototype.revalidateState=function(t,e,l,i){if(null!=t){var a=this.graph.getModel();a.isEdge(t.cell)&&t.view.updateCellState(t);var r=this.graph.getCellGeometry(t.cell),n=t.view.getState(a.getParent(t.cell));0==e&&0==l||null==r||!r.relative||!a.isVertex(t.cell)||null!=n&&!a.isVertex(n.cell)&&null==this.deltas.get(t.cell)||(t.x+=e,t.y+=l),this.graph.cellRenderer.redraw(t),null!=i&&i(t);for(var o=a.getChildCount(t.cell),s=0;s<o;s++)this.revalidateState(this.graph.view.getState(a.getChildAt(t.cell,s)),e,l,i)}},mxCellStatePreview.prototype.addEdges=function(t){for(var e=this.graph.getModel(),l=e.getEdgeCount(t.cell),i=0;i<l;i++){var a=t.view.getState(e.getEdgeAt(t.cell,i));null!=a&&this.moveState(a,0,0)}};