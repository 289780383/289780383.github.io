!function(e){function t(t){for(var n,a,i=t[0],u=t[1],c=t[2],l=0,m=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&m.push(o[a][0]),o[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(d&&d(t);m.length;)m.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var u=r[a];0!==o[u]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},o={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[];a[e]?t.push(a[e]):0!==a[e]&&{"chunk-1c8bc923":1,"chunk-60063045":1,"chunk-7a6bbf18":1}[e]&&t.push(a[e]=new Promise(function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-1c8bc923":"471c535d","chunk-60063045":"0c3a79cc","chunk-7a6bbf18":"1a627a30"}[e]+".css",o=i.p+n,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var c=(d=s[u]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(c===n||c===o))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){var d;if((c=(d=l[u]).getAttribute("data-href"))===n||c===o)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[e],m.parentNode.removeChild(m),r(s)},m.href=o,document.getElementsByTagName("head")[0].appendChild(m)}).then(function(){a[e]=0}));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise(function(t,n){r=o[e]=[t,n]});t.push(r[2]=n);var s,u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=function(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-1c8bc923":"631f6d62","chunk-60063045":"cdbf61a8","chunk-7a6bbf18":"a75f87bd"}[e]+".js"}(e);var c=new Error;s=function(t){u.onerror=u.onload=null,clearTimeout(l);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",c.name="ChunkLoadError",c.type=n,c.request=a,r[1](c)}o[e]=void 0}};var l=setTimeout(function(){s({type:"timeout",target:u})},12e4);u.onerror=u.onload=s,document.head.appendChild(u)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=c;s.push([0,"chunk-vendors"]),r()}({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("f0a0")},"0969":function(e,t,r){},2629:function(e,t,r){"use strict";r("9b22")},"3de1":function(e,t,r){"use strict";r.d(t,"g",function(){return i}),r.d(t,"i",function(){return u}),r.d(t,"a",function(){return c}),r.d(t,"j",function(){return l}),r.d(t,"b",function(){return d}),r.d(t,"c",function(){return m}),r.d(t,"e",function(){return f}),r.d(t,"h",function(){return h}),r.d(t,"f",function(){return p}),r.d(t,"k",function(){return v}),r.d(t,"d",function(){return g});var n=r("a293"),a=(r("587c"),r("27ae"),r("591f"),r("feb3"),r("e3b5"),r("7a3a"),r("7446"),r("5d08"),r("4200"),r("fc13"),r("9b5f"),r("f566"),r("d447"),r("62f9"),r("bf2f"),r("16ca"),r("a18c")),o=r("4360"),s=r("a593");function i(){var e=o.a.state.userInfo.role,t=o.a.state.userInfo.rights,r=o.a.state.userInfo.source,s=a.a[0].children,i=[];i.push(a.a[0]),i[0].children=[];var u,c=!0;if(2==e&&2==r){for(var l=0;l<s.length;l++)for(var d=0;d<t.length;d++)-1!=(s[l].data.type+"").indexOf(t[d]+"")&&(i[0].children.push(s[l]),c&&!s[l].children&&(u=s[l],c=!1));i[0].children=function(e,t){var r=new Map;return e.filter(function(e){return!r.has(e[t])&&r.set(e[t],1)})}(i[0].children,"name"),o.a.commit("set_routerArr",[i,u])}else{var m,f=Object(n.a)(s);try{for(f.s();!(m=f.n()).done;){var h=m.value;-1!=h.data.role.indexOf(e+"")&&(i[0].children.push(h),c&&!h.children&&(u=h,c=!1))}}catch(e){f.e(e)}finally{f.f()}o.a.commit("set_routerArr",[i,u])}}function u(e,t){return(Array(t).join(0)+e).slice(-t)+""}function c(e){for(var t=[],r={},n=0;n<e.length;n++)r[e[n].id]=e[n];for(var a=0;a<e.length;a++){var o=r[e[a].pId];o?(o.children||(o.children=[]),o.children.push(e[a])):t.push(e[a])}return t}function l(e,t){s.default.prototype.$message({showClose:"success"!=e,duration:2e3,message:t,center:!0,type:e})}function d(e){var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var a=t.getDate();return r+"-"+n+"-"+(a=a<10?"0"+a:a)}function m(e){var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var a=t.getDate();a=a<10?"0"+a:a;var o=t.getHours();o=o<10?"0"+o:o;var s=t.getMinutes();s=s<10?"0"+s:s;var i=t.getSeconds();return r+"-"+n+"-"+a+" "+o+":"+s+":"+(i=i<10?"0"+i:i)}function f(e,t){for(var r=0;r<t.length;r++)if(t[r].label==e)return t[r].value}function h(e,t){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(t))return!1;switch(Object.prototype.toString.call(e)){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Array]":for(var r=0;r<e.length;r++)if(!h(e[r],t[r]))return!1;return!0;case"[object Object]":for(var n=Object.keys(e),a=0;a<n.length;a++)if(!h(e[n[a]],t[n[a]]))return!1;n=Object.keys(t);for(var o=0;o<n.length;o++)if(!h(e[n[o]],t[n[o]]))return!1;return!0;default:return!1}}function p(e,t){e=parseInt(e),t=parseInt(t);var r,n=parseInt((new Date).getTime()/1e3);return n>=t?r=100:n<e?r=0:0==(r=parseInt((n-e)/(t-e)*100))&&(r=1),r}function v(e){if(e.length>0){var t=[55,36,33,35,69,67,34,24,32,66,68];for(var r in e)if(61==e[r].id){var n=JSON.parse(JSON.stringify(e[r].children));e[r].children=[0,1,2,3,4,5,6,7,8,9,10];for(var a=0;a<n.length;a++){var o=t.indexOf(n[a].id);e[r].children[o]=n[a],n.splice(a,1),a--}n.length>0&&(e[r].children=e[r].children.concat(n));for(var s=0;s<e[r].children.length;s++)e[r].children[s].constructor!==Object&&(e[r].children.splice(s,1),s--);break}}return e}function g(e,t){var r=0;if(e&&t){var n=new Date(t).getTime()-new Date(e).getTime();r=Math.ceil(n/1e3/60/60/24)}return r}},4022:function(e,t,r){},4262:function(e,t){var r,n,a,o,s;r=document,n=window,a=r.documentElement,o="orientationchange"in window?"orientationchange":"resize",s=function(){var e=a.clientWidth;e&&(a.style.fontSize=e/1920*100+"px")},r.addEventListener&&(n.addEventListener(o,s,!1),r.addEventListener("DOMContentLoaded",s,!1))},4360:function(e,t,r){"use strict";r("1d43");var n=r("a593"),a=r("7736"),o=r("a18c"),s=r("c9f8");n.default.use(a.a);t.a=new a.a.Store({state:{count:"123",userInfo:{role:"-1",source:"-1",rights:""},webClose:0,companyName:"",platformName:"",routerArr:[],dataList:{tabsdata:{tabsActive:"aa",tabsList:[]}},freezenStation:{id:"",name:"",stationGuid:"",rights:""},freezeImageList:[{label:"1",value:r("ee8d")},{label:"2",value:r("c8bf")}],g_realData:{},g_newRealData:{},g_videoInfo:{},g_newAlarmInfo:{},g_newAlarmNum:{},g_currentAlarmVar:{},g_freezeDataComName:"freezeStationList",graphStationGuid:"",graphProjectId:"",graphPageId:"",curGraphXml:"",isAutoLogin:!1},mutations:{set_routerArr:function(e,t){e.routerArr=t[0],e.dataList.tabsdata.tabsList=[{title:t[1].data.name,name:t[1].name,url:t[1].path}],o.b.addRoutes(t[0]),setTimeout(function(){o.b.push(t[1].path)},1)},set_count:function(e,t){e.count=t},set_userName:function(e,t){e.userInfo.userName=t},set_password:function(e,t){e.userInfo.password=t},set_tabsList:function(e,t){e.dataList.tabsdata.tabsList=t},set_tabsActive:function(e,t){e.dataList.tabsdata.tabsActive=t},set_userInfo:function(e,t){e.userInfo=t},set_role:function(e,t){e.userInfo.role=t},set_source:function(e,t){e.userInfo.source=t},set_rights:function(e,t){e.userInfo.rights=t},set_freezenStation:function(e,t){e.freezenStation=t},set_g_realData:function(e,t){e.g_realData=t},set_g_webSocketData:function(e,t){e.g_webSocketData=t},set_isRefreshFreezeStationList:function(e,t){e.isRefreshFreezeStationList=t},set_g_videoInfo:function(e,t){e.g_videoInfo=t},set_companyName:function(e,t){e.companyName=t},set_platformName:function(e,t){e.platformName=t},set_g_newAlarmInfo:function(e,t){e.g_newAlarmInfo=t},set_g_newAlarmNum:function(e,t){e.g_newAlarmNum=t},set_g_allAlarm:function(e,t){e.g_allAlarm=t},set_g_newRealData:function(e,t){e.g_newRealData=t},set_g_currentAlarmVar:function(e,t){e.g_currentAlarmVar=t},set_g_freezeDataComName:function(e,t){e.g_freezeDataComName=t},set_graphStationGuid:function(e,t){e.graphStationGuid=t},set_graphProjectId:function(e,t){e.graphProjectId=t},set_graphPageId:function(e,t){e.graphPageId=t},set_curGraphXml:function(e,t){e.curGraphXml=t},set_isAutoLogin:function(e,t){e.isAutoLogin=t}},getters:{},actions:{},modules:{chartExhibition:{namespaced:!0,state:{devPoints:[],devGuids:[]},mutations:{set_devPoints:function(e,t){e.devPoints=t},set_devGuids:function(e,t){e.devGuids=t}}}},plugins:[new s.a({storage:window.sessionStorage,reducer:function(e){return{count:e.count,userInfo:e.userInfo,dataList:e.dataList}}}).plugin]})},"56d7":function(e,t,r){"use strict";r.r(t);r("31e1"),r("8d9b"),r("3b2b"),r("736a"),r("5b12"),r("9b5f"),r("27ae");var n=r("a593"),a={name:"app",data:function(){return{cashViews:["FreezeData"],companyName:""}},created:function(){var e=this;this.$axios({method:"post",headers:{},url:"/web/system/querySystem",data:""}).then(function(t){e.$store.commit("set_companyName",t.data.info.companyName),e.$store.commit("set_platformName",t.data.info.platformName),e.companyName=t.data.info.companyName,document.title=t.data.info.platformName})}},o=(r("034f"),r("5d22")),s=Object(o.a)(a,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},[],!1,null,null,null).exports,i=r("a18c"),u=r("4360"),c=r("2763"),l=r.n(c);r("ccc1");n.default.use(l.a),n.default.prototype.$notify=c.Notification,n.default.prototype.$message=c.Message,n.default.prototype.$msgBox=c.MessageBox;r("4262"),r("e3d6"),r("cd92");var d=r("82ae"),m=r.n(d),f=r("fed1"),h=r.n(f),p=(r("62f9"),r("3de1"));-1!=u.a.state.userInfo.role&&0==u.a.state.routerArr.length&&Object(p.g)(),i.b.beforeEach(function(e,t,r){var n=u.a.state.userInfo;0===Object.keys(n).length&&"/"!==e.path?r("/"):r()});var v=r("ba63"),g=r("4d28"),b=r.n(g),w=(r("679c"),{install:function(e){e.directive("preventClick",{inserted:function(e,t){e.addEventListener("click",function(){e.disabled||(e.disabled=!0,setTimeout(function(){e.disabled=!1},t.value||1e3))})}})}}),y=r("897d"),A=r.n(y);r("b3b0"),r("a5f8"),r("fc13"),r("16ca");n.default.directive("dialogDrag",{bind:function(e,t,r,n){var a=e.querySelector(".el-dialog__header"),o=e.querySelector(".el-dialog");a.style.cssText+=";cursor:move;",o.style.cssText+=";top:0px;";var s=window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]};a.onmousedown=function(e){var t=e.clientX-a.offsetLeft,r=e.clientY-a.offsetTop,n=document.body.clientWidth,i=document.documentElement.clientHeight,u=o.offsetWidth,c=o.offsetHeight,l=o.offsetLeft,d=n-o.offsetLeft-u,m=o.offsetTop,f=i-o.offsetTop-c,h=s(o,"left"),p=s(o,"top");return h.includes("%")?(h=+document.body.clientWidth*(+h.replace(/\%/g,"")/100),p=+document.body.clientHeight*(+p.replace(/\%/g,"")/100)):(h=+h.replace(/\px/g,""),p=+p.replace(/\px/g,"")),document.onmousemove=function(e){var n=e.clientX-t,a=e.clientY-r;-n>l?n=-l:n>d&&(n=d),-a>m?a=-m:a>f&&(a=f),o.style.cssText+=";left:".concat(n+h,"px;top:").concat(a+p,"px;")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null},!1}}});var k=r("265a"),N=r.n(k),S=r("60b5");r("6a61"),r("f566"),r("d447"),r("bf2f");function C(e){return"[object Object]"===Object.prototype.toString.call(e)}function I(){return(I=Object(S.a)(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$msgBox.confirm("提示",{title:"提示",message:r,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(){return!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(){return(x=Object(S.a)(regeneratorRuntime.mark(function e(t,r){var n,a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(s in n=r.split("\n"),a=[],o=t.$createElement,n)a.push(o("p",null,n[s]));return e.next=6,t.$msgBox.confirm("提示",{title:"提示",message:o("div",null,a),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(function(){return!1});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var G={isObj:C,isNum:function(e){return!!new RegExp("^[0-9]*$").test(e)&&!!/^[0-9]+$/.test(e)},deepClone:function e(t,r){if(void 0===t||null===t)return t;if(function(e){return Array.isArray(e)}(t)){for(var n=[],a=0;a<t.length;a++)n.push(e(t[a],r));return n}if(C(t)){var o={};for(var s in t)r&&r.indexOf(s)>=0||(o[s]=e(t[s],r));return o}return t},arrayRemove:function(e,t){var r=e.indexOf(t);return r>-1&&(e.splice(r,1),!0)},isEmpty:function(e){return void 0===e||null===e||""===e},guid:function(){var e,t,r="";for(e=0;e<32;e++)t=16*Math.random()|0,r+=(12===e?4:16===e?3&t|8:t).toString(16);return r},confirm:function(e,t){return I.apply(this,arguments)},confirmMultiLine:function(e,t){return x.apply(this,arguments)}},F=r("303e"),R=r("acf6"),E=r("7dd6");r("1d43"),r("01e5"),r("e487"),r("529f"),r("3bae"),r("ea94");var D=function(){function e(t){var r=this;Object(F.a)(this,e),Object(E.a)(this,"g",{getVarQualifiedName:function(e){if(null===e)return null;for(var t in r.stations)for(var n=r.stations[t],a=0;a<n.devices.length;a++)for(var o=n.devices[a],s=0;s<o.variables.length;s++){var i=o.variables[s];if(i.guid===e)return o.name+"/"+i.name}return null},getVarDescription:function(e){if(null===e)return null;for(var t in r.stations)for(var n=r.stations[t],a=0;a<n.devices.length;a++)for(var o=n.devices[a],s=0;s<o.variables.length;s++){var i=o.variables[s];if(i.guid===e)return 2===i.varType?i.reg.description?i.reg.description:["断开","闭合"]:null}return null},getVar:function(e){if(null===e)return null;for(var t in r.stations)for(var n=r.stations[t],a=0;a<n.devices.length;a++)for(var o=n.devices[a],s=0;s<o.variables.length;s++){var i=o.variables[s];if(i.guid===e)return i}return null}}),Object(E.a)(this,"v",{getVarQualifiedName:function(e){if(null===e)return null;var t=r.devices[e.devId];if(!t)return"";var n=r.stations[t.stationId];return n?n.name+"."+t.name+"."+e.name:""},getVarDescription:function(e){return null===e?null:2===e.varType?e.reg.description?e.reg.description:["断开","闭合"]:null},getVarDefaultValue:function(e){switch(e.varType){case 1:var t=2;e.reg.decimalDigits&&(t=e.reg.decimalDigits);var r=0;return e.reg.initValue&&(r=e.reg.initValue),r.toFixed(t);case 2:var n=0;return e.reg.initState&&(n=e.reg.initState),e.reg.description?e.reg.description[n]:["断开","闭合"][n];case 3:return e.reg.initString?e.reg.initString:""}}}),this.vue=t,this.clearAll()}return Object(R.a)(e,[{key:"clearAll",value:function(){this.stations={},this.devices={},this.variables={}}},{key:"getGraphVarTreeDate",value:function(e){return this.vue.$axios({method:"get",headers:{},url:"/web/station/queryVirDevsVirVars",params:{stationGuid:e}})}},{key:"getAll",value:function(){var e=Object(S.a)(regeneratorRuntime.mark(function e(t){var r,n,a,o,s,i,u,c,l,d,m=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearAll(),e.next=3,this.getGraphVarTreeDate(t);case 3:if(r=e.sent,0==(n=r.data).code&&n.info){for(a={id:n.info.guid,name:n.info.name},this.stations[a.id]=a,this.stations[a.id].devices=[],(o=n.info.virDevs).forEach(function(e){e.name=e.devName,e.tag&&""!==e.tag?e.tag=e.tag.split(","):e.tag=[],e.variables=[];var t=m.stations[e.stationGuid];t?(m.devices[e.devGuid]=e,t.devices.push(e)):m.vue.$msgBox.alert("设备(ID="+e.devGuid+")原先挂在站点(ID="+e.stationGuid+")下，现在该站点不存在了！")}),s=[],i=0;i<o.length;i++)if(u=o[i].virVars,c=o[i].devName,l=o[i].devGuid,u)for(d=0;d<u.length;d++)u[d].devName=c,u[d].guid=u[d].varGuid,u[d].devGuid=l,u[d].stationGuid=t,s.push(u[d]);else console.warn("设备"+c+"没有变量");s.forEach(function(e,t){var r=m.devices[e.devGuid];void 0===r?m.vue.$msgBox.alert("变量(ID="+e.varGuid+")原先挂在设备(ID="+e.devGuid+")下，现在该设备不存在了！"):((e={name:e.varName,guid:e.varGuid,rwMode:e.rwMode,funCode:"",regAddr:1,varType:e.varType?e.varType:e.type}).reg={description:"",decimalDigits:"",initValue:"",initState:"",initString:"",rwMode:e.rwMode,varType:e.varType?e.varType:e.type},r.variables.push(e),m.variables[e.varGuid]=e)})}return e.abrupt("return",!0);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setProgress",value:function(e){this.progress=e}},{key:"createVarTree",value:function(e,t,r,n,a,o,s){var i,u=this,c=function(e){var n=[];for(var c in u.stations){for(var l=u.stations[c],d={name:l.name,devices:[]},m=0;m<l.devices.length;m++){var f=l.devices[m];if(!(""!==v&&f.name.indexOf(v)<0)){for(var h={name:f.name,variables:[]},g=0;g<f.variables.length;g++){var b=f.variables[g];if(!(""!==p&&b.name.indexOf(p)<0)){var w=b.reg.rwMode?b.reg.rwMode:1;0!==t&&t!==w&&3!==w||0!==r&&r!==b.varType&&(4!==r||3===b.varType)||h.variables.push(b)}}h.variables.length>0&&d.devices.push(h)}}d.devices.length>0&&n.push(d)}i=new GE.Tree("var-tree");for(var y=0;y<n.length;y++){var A=n[y],k=new GE.TreeNode({name:A.name,open:!0});i.append(k),s&&s(i,k,A);for(var N=0;N<A.devices.length;N++){var S=A.devices[N],C=new GE.TreeNode({name:S.name,open:!0});k.append(C),o&&o(i,C,S);for(var I=0;I<S.variables.length;I++){var x=S.variables[I],G=new GE.TreeNode({name:x.name,open:!1});C.append(G),a(i,G,x)}}}i.show(e)},l=document.createElement("div");l.style.overflow="hidden",l.style.width="100%",l.style.padding="0px",e.appendChild(l);var d=document.createElement("div");d.style.whiteSpace="nowrap",d.style.textOverflow="clip",d.style.paddingBottom="4px",d.style.cursor="default";var m=document.createElement("input");m.setAttribute("placeholder",mxResources.get("searchDevs")),m.setAttribute("type","text"),m.style.fontSize="12px",m.style.overflow="hidden",m.style.boxSizing="border-box",m.style.border="solid 1px #d5d5d5",m.style.borderRightWidth="0px",m.style.width="40%",m.style.outline="none",m.style.padding="6px",d.appendChild(m);var f=document.createElement("input");f.setAttribute("placeholder",mxResources.get("searchVars")),f.setAttribute("type","text"),f.style.fontSize="12px",f.style.overflow="hidden",f.style.boxSizing="border-box",f.style.border="solid 1px #d5d5d5",f.style.borderLeftStyle="dashed",f.style.width="60%",f.style.outline="none",f.style.padding="6px",f.style.paddingRight="20px",d.appendChild(f);var h=document.createElement("img");h.setAttribute("src",GE.Sidebar.prototype.searchImage),h.setAttribute("title",mxResources.get("search")),h.style.position="relative",h.style.left="-18px",h.style.top="1px",d.appendChild(h),l.appendChild(d);var p="",v="",g=function(){var e=f.value.trim(),t=m.value.trim();p===e&&v===t||(p=e,v=t,c(b),n&&n(i))};mxEvent.addListener(h,"click",function(){g(),f.focus()}),mxEvent.addListener(f,"keydown",mxUtils.bind(this,function(e){13===e.keyCode&&(g(),mxEvent.consume(e))})),mxEvent.addListener(m,"keydown",mxUtils.bind(this,function(e){13===e.keyCode&&(g(),mxEvent.consume(e))}));var b=document.createElement("div");return b.style.overflow="auto",b.style.width="100%",b.style.height="300px",b.style.padding="0px",e.appendChild(b),c(b),i}}]),e}();n.default.prototype.$pubFunc=G,n.default.prototype.$coreData=new D(n.default.prototype),n.default.prototype.$comm=new n.default,n.default.component("chart",b.a),n.default.prototype.$md5=A.a,n.default.use(w),n.default.prototype.$echarts=b.a,n.default.component("downloadExcel",v.a),n.default.prototype.$erd=N()();var j=!0;m.a.interceptors.response.use(function(e){return e},function(e){if(!u.a.state.isAutoLogin)return-1!=(e+"").indexOf("303")&&(u.a.commit("set_role",-1),window.sessionStorage.clear(),sessionStorage.clear(),j&&(alert("登录超时请重新登录"),j=!1,-1!=u.a.state.userInfo.source&&(window.location.href="./index.html"))),e});var T={},_=window.location.href.split("?")[1];if(_)for(var O in _=_.split("&"))T[_[O].split("=")[0]]=_[O].split("=")[1];m.a.interceptors.request.use(function(e){return e.headers["X-Requested-With"]="XMLHttpRequest",T.id&&(e.headers.id=T.id),e},function(e){return Promise.reject(e)}),n.default.prototype.$axios=m.a,n.default.prototype.$qs=h.a,n.default.config.productionTip=!1,n.default.prototype.$showMessage=p.j,new n.default({router:i.b,store:u.a,render:function(e){return e(s)}}).$mount("#app")},"70ab":function(e,t,r){"use strict";r("b729")},"92fe":function(e,t,r){},"9a43":function(e,t,r){"use strict";r("4022")},"9b22":function(e,t,r){},a18c:function(e,t,r){"use strict";r.d(t,"a",function(){return w});r("27ae"),r("591f"),r("feb3");var n=r("a593"),a=r("8aaf"),o=r("7dd6"),s=(r("fc13"),r("9b5f"),r("3de1")),i=Object(o.a)({data:function(){return{userName:"",password:"",message:!0}},created:function(){window.sessionStorage.clear(),sessionStorage.clear(),document.onkeydown=function(e){window.event.keyCode}},computed:{platformName:function(){return this.$store.state.platformName}},methods:{loginBtn:function(){var e=this;if(""==this.userName)this.message&&this.$showMessage("error","请填写用户名");else if(""==this.password)this.message&&this.$showMessage("error","请填写密码");else{var t=this.$md5(this.password+"").toUpperCase();this.$axios({method:"post",headers:{},url:"/login",data:{userName:this.userName,userPasswd:t}}).then(function(r){var n=r.data;0==n.code?2!=n.info.source?(e.$store.commit("set_userName",e.userName),e.$store.commit("set_password",t),e.$store.commit("set_role",n.info.role),e.$store.commit("set_source",-2),Object(s.g)()):e.$axios({method:"get",headers:{},url:"/web/user/queryUserByName",params:{userName:e.userName}}).then(function(t){0!=t.data.info.rights.length?(e.$store.commit("set_userName",e.userName),e.$store.commit("set_role",n.info.role),e.$store.commit("set_source",n.info.source),t.data.info.rights,e.$store.commit("set_rights",t.data.info.rights),Object(s.g)()):e.$showMessage("error","无权限")}).catch(function(t){e.$showMessage("error",t)}):e.$showMessage("error",n.msg)}).catch(function(t){e.$showMessage("error",t)})}},keydown:function(e){13==window.event.keyCode&&this.loginBtn();var t=event.target;t.value=t.value.replace(/\s+/g,"")},getCode:function(e){var t=this;this.$axios({method:"post",headers:{},url:"/getVerifyCode",data:{}}).then(function(e){var r=e.data;0==r.code||t.$showMessage("error",r.msg)}).catch(function(e){t.$showMessage("error",e)})}}},"created",function(){}),u=(r("fcb0"),r("5d22")),c=Object(u.a)(i,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("div",{staticClass:"title"},[e._v(e._s(e.platformName))]),r("div",{staticClass:"loginBox"},[r("div",{staticClass:"loginBoxTitle"}),r("div",{staticClass:"userName"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],attrs:{placeholder:"请输入用户名",type:"text"},domProps:{value:e.userName},on:{keydown:e.keydown,input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),r("div",{staticClass:"password"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{placeholder:"请输入密码",type:"password"},domProps:{value:e.password},on:{keydown:e.keydown,input:function(t){t.target.composing||(e.password=t.target.value)}}})]),r("div",{staticClass:"loginBtn",on:{click:e.loginBtn}},[e._v("登 录")])])])},[],!1,null,null,null).exports,l=(r("bf2f"),r("1d43"),{data:function(){return{navs:[],navShow:!0}},created:function(){this.navs=this.$store.state.routerArr[0].children},computed:{tabsList:function(){return this.$store.state.dataList.tabsdata.tabsList}},methods:{navClik:function(e){var t=!0;for(var r in this.tabsList)this.tabsList[r],this.tabsList[r].name==e.name&&(t=!1);t&&this.tabsList.push({title:e.data.name,name:e.name,url:e.path}),this.$store.commit("set_tabsList",this.tabsList),this.$store.commit("set_tabsActive",e.name)}}}),d=(r("ced9"),Object(u.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"navDiv"},[r("transition",{attrs:{name:"el-zoom-in-top"}},[e.navShow?r("div",{staticClass:"nav",on:{mouseleave:function(t){e.navShow=!e.navShow}}},[r("div",{staticClass:"navTop",on:{click:function(t){e.navShow=!e.navShow}}}),r("div",{staticClass:"nav1Div"},[e._l(e.navs,function(t,n){return[!t.children&&t.data.show?r("div",{key:n,staticClass:"nav1"},[r("router-link",{attrs:{to:t.path},nativeOn:{click:function(r){return e.navClik(t)}}},[r("u",{class:t.name}),r("span",[e._v(e._s(t.data.name))]),r("i",{staticClass:"navL"})])],1):t.data.show?r("div",{key:n,staticClass:"nav1"},[r("span",[r("u",{class:t.name}),r("span",[e._v(e._s(t.data.name))]),r("i",{staticClass:"navL"})]),r("div",{staticClass:"nav2Div"},[e._l(e.navs,function(n,a){return[t.path.split("/")[1]==n.path.split("/")[1]&&n.path.split("/").length>2?r("div",{key:a,staticClass:"nav2"},[r("router-link",{attrs:{to:n.path},nativeOn:{click:function(t){return e.navClik(n)}}},[e._v(e._s(n.data.name))])],1):e._e()]})],2)]):e._e()]})],2)]):e._e()]),e.navShow?e._e():r("div",{staticClass:"navClick",on:{click:function(t){e.navShow=!e.navShow},mouseover:function(t){e.navShow=!e.navShow}}},[r("i",[e._v("菜")]),r("i",[e._v("单")])])],1)},[],!1,null,null,null).exports),m=r("6abc"),f={data:function(){var e=this,t=function(t,r,n){""==r&&""==e.ruleForm2.userConPasswd&&""==e.ruleForm2.oidPassword?n():""===r?n(new Error("请输入密码")):r==e.ruleForm2.oidPassword?n(new Error("新密码不能与原密码相同")):(""!==e.ruleForm2.userConPasswd&&e.$refs.ruleForm2.validateField("userConPasswd"),n())},r=function(t,r,n){""==r&&""==e.ruleForm2.userConPasswd&&""==e.ruleForm2.oidPassword?n():""===r?n(new Error("请再次输入密码")):r!==e.ruleForm2.userPasswd?n(new Error("两次输入密码不一致")):n()},n=function(t,r,n){""==r&&""==e.ruleForm2.userConPasswd&&""==e.ruleForm2.oidPassword?n():""===r?n(new Error("请输入原密码")):r==e.ruleForm2.userPasswd?n(new Error("新密码不能与原密码相同")):n()};return{userName:"",dialogWidth:"5.8rem",ruleForm2:{userPasswd:"",userConPasswd:"",oidPassword:"",userName:"",department:"",realName:"",phone:"",role:2},ruleForm:{},treeData1:[],dialogVisible:!1,editBtnLoading:!1,fullScreenIf:!1,userNav:!1,rules2:{userPasswd:[{validator:t,trigger:"blur"}],userConPasswd:[{validator:r,trigger:"blur"}],oidPassword:[{validator:n,trigger:"blur"}],phone:[{message:"联系方式不能为空",trigger:"blur",required:!0}],realName:[{message:"真实姓名不能为空",trigger:"blur",required:!0}],department:[{message:"请选择组织架构不能为空",trigger:"change",required:!0}]},rules3:{userPasswd:[{validator:t,trigger:"blur"}],userConPasswd:[{validator:r,trigger:"blur"}],oidPassword:[{validator:n,trigger:"blur"}]},defaultProps2:{children:"children",emitPath:!1,checkStrictly:!0,label:"name",value:"id",expandTrigger:"hover"},userGroups:[],source:this.$store.state.userInfo.source,role:this.$store.state.userInfo.role}},created:function(){this.getTreeList(),this.getUserInfo()},mounted:function(){this.userName=this.$store.state.userInfo.userName,this.$store.state},computed:{platformName:function(){return this.$store.state.platformName}},methods:{getUserInfo:function(){var e=this;this.$axios({method:"get",headers:{},url:"/web/user/queryUserByName",params:{userName:this.$store.state.userInfo.userName}}).then(function(t){e.ruleForm={userPasswd:"",userConPasswd:"",userName:t.data.info.name,department:t.data.info.organizeId,realName:t.data.info.realName,phone:t.data.info.phone,userGuid:t.data.info.userGuid,role:t.data.info.role},e.ruleForm2=Object(m.a)({},e.ruleForm)}).catch(function(t){e.$showMessage("error",t)})},fullScreen:function(){this.fullScreenIf=!this.fullScreenIf,this.fullScreenIf?(document.documentElement.RequestFullScreen&&document.documentElement.RequestFullScreen(),document.documentElement.mozRequestFullScreen&&document.documentElement.mozRequestFullScreen(),document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(),document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen(),document.exitFullScreen&&document.exitFullscreen()):(document.mozCancelFullScreen&&document.mozCancelFullScreen(),document.webkitExitFullscreen&&document.webkitExitFullscreen(),document.msExitFullscreen&&document.msExitFullscreen())},getGroupList:function(){var e=this;this.$axios({method:"get",headers:{},url:"/web/group/queryAllUserGroup"}).then(function(t){var r=t.data;0==r.code?e.userGroups=r.info:e.$showMessage("error",r.msg)}).catch(function(t){e.$showMessage("error",t)})},userOut:function(){this.$emit("back","")},getTreeList:function(){var e=this;this.$axios({method:"get",headers:{},url:"/web/organize/queryOrganize"}).then(function(t){var r=t.data;0==r.code?e.treeData1=Object(s.a)(r.info):e.$showMessage("error",r.msg)}).catch(function(t){e.$showMessage("error",t)})},editClick:function(){var e=this;this.$refs.ruleForm2.validate(function(t){if(!t)return!1;e.editBtnLoading=!0;var r=2==e.role&&2==e.source?"/web/user/updateUserBySelf":"/web/user/updateRoleUserBySelf";e.ruleForm2.userName,""==e.ruleForm2.userPasswd||e.$md5(e.ruleForm2.userPasswd+"").toUpperCase(),""==e.ruleForm2.oidPassword||e.$md5(e.ruleForm2.oidPassword+"").toUpperCase(),""==e.ruleForm2.userConPasswd||e.$md5(e.ruleForm2.userConPasswd+"").toUpperCase(),""==e.ruleForm2.realName||e.ruleForm2.realName,""==e.ruleForm2.phone||e.ruleForm2.phone,e.ruleForm2.userGuid,e.$axios({method:"post",headers:{},url:r,data:{userName:e.ruleForm2.userName,userPasswd:""==e.ruleForm2.userPasswd?void 0:e.$md5(e.ruleForm2.userPasswd+"").toUpperCase(),oldPasswd:""==e.ruleForm2.oidPassword?void 0:e.$md5(e.ruleForm2.oidPassword+"").toUpperCase(),userConPasswd:""==e.ruleForm2.userConPasswd?void 0:e.$md5(e.ruleForm2.userConPasswd+"").toUpperCase(),realName:""==e.ruleForm2.realName?void 0:e.ruleForm2.realName,phone:""==e.ruleForm2.phone?void 0:e.ruleForm2.phone,userGuid:e.ruleForm2.userGuid}}).then(function(t){0==t.data.code?(e.$message({message:"用户修改成功",type:"success",center:!0,offset:200,onClose:function(){e.message=!0}}),e.dialogVisible=!1):e.$showMessage("error",t.data.msg),e.editBtnLoading=!1}).catch(function(t){e.$showMessage("error",t),e.editBtnLoading=!1})})},dialogOpen:function(){var e=this;this.ruleForm2=Object(m.a)({},this.ruleForm),this.$nextTick(function(){e.$store.state.userInfo.userName;e.$refs.ruleForm2.clearValidate()})}}},h=(r("9a43"),Object(u.a)(f,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header"},[r("div",{staticClass:"title"},[e._v(e._s(e.platformName))]),r("div",{staticClass:"headerRight"},[r("div",{staticClass:"userInfo",on:{click:function(t){t.stopPropagation(),e.userNav=!e.userNav}}},[e.userNav?r("div",{staticClass:"userNav"},[r("div",{on:{click:function(t){e.dialogVisible=!0}}},[e._v("用户信息")]),r("div",{on:{click:e.userOut}},[e._v("退出系统")])]):e._e()]),r("div",{class:e.fullScreenIf?"fullScreen":"fullScreenq",on:{click:e.fullScreen}}),r("div",{staticClass:"userLogin"},[e._v("欢迎用户："+e._s(e.userName))])]),r("el-dialog",{attrs:{title:"用户信息",visible:e.dialogVisible,width:e.dialogWidth},on:{"update:visible":function(t){e.dialogVisible=t},open:e.dialogOpen}},[r("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm2",staticStyle:{width:"390px","font-size":"18px"},attrs:{model:e.ruleForm2,"status-icon":"",rules:2==e.source&&2==e.role?e.rules2:e.rules3,"label-width":"1.2rem","label-position":"right"}},[r("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[r("el-input",{attrs:{disabled:""},model:{value:e.ruleForm2.userName,callback:function(t){e.$set(e.ruleForm2,"userName",t)},expression:"ruleForm2.userName"}})],1),r("el-form-item",{attrs:{label:"原密码：",prop:"oidPassword"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm2.oidPassword,callback:function(t){e.$set(e.ruleForm2,"oidPassword",t)},expression:"ruleForm2.oidPassword"}})],1),r("el-form-item",{attrs:{label:"新密码：",prop:"userPasswd"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm2.userPasswd,callback:function(t){e.$set(e.ruleForm2,"userPasswd",t)},expression:"ruleForm2.userPasswd"}})],1),r("el-form-item",{attrs:{label:"确认密码：",prop:"userConPasswd"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm2.userConPasswd,callback:function(t){e.$set(e.ruleForm2,"userConPasswd",t)},expression:"ruleForm2.userConPasswd"}})],1),2==e.source&&2==e.role?r("el-form-item",{attrs:{label:"所在部门：",prop:"department"}},[r("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.treeData1,props:e.defaultProps2,"show-all-levels":!1},model:{value:e.ruleForm2.department,callback:function(t){e.$set(e.ruleForm2,"department",t)},expression:"ruleForm2.department"}})],1):e._e(),2==e.source&&2==e.role?r("el-form-item",{attrs:{label:"真实姓名：",prop:"realName"}},[r("el-input",{model:{value:e.ruleForm2.realName,callback:function(t){e.$set(e.ruleForm2,"realName",t)},expression:"ruleForm2.realName"}})],1):e._e(),2==e.source&&2==e.role?r("el-form-item",{attrs:{label:"联系方式：",prop:"phone"}},[r("el-input",{model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",t)},expression:"ruleForm2.phone"}})],1):e._e()],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.editBtnLoading},on:{click:e.editClick}},[e._v("确定修改")])],1)],1)],1)},[],!1,null,null,null).exports),p=(r("3bae"),r("e3b5"),{data:function(){return{tabIndex:2}},computed:{tabsList:function(){return this.$store.state.dataList.tabsdata.tabsList},tabsActive:{set:function(e){this.$store.commit("set_tabsActive",e)},get:function(){return this.$store.state.dataList.tabsdata.tabsActive}}},mounted:function(){},methods:{removeTab:function(e){var t=this.tabsList,r=this.tabsActive,n="";r===e&&t.forEach(function(a,o){if(a.name===e){var s=t[o+1]||t[o-1];if(s)return r=s.name,void(n=s.url)}}),this.$store.commit("set_tabsActive",r),this.$router.push(n),this.$store.commit("set_tabsList",t.filter(function(t){return t.name!=e}))},tabClick:function(e){for(var t in this.tabsList)if(this.tabsList[t].name==this.tabsActive){this.$router.push(this.tabsList[t].url);break}}}}),v=(r("70ab"),{components:{Nav:d,Header:h,Tabs:Object(u.a)(p,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"tabs"},[r("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabClick,"tab-remove":e.removeTab},model:{value:e.tabsActive,callback:function(t){e.tabsActive=t},expression:"tabsActive"}},e._l(e.tabsList,function(t,n){return r("el-tab-pane",{key:n,class:1==e.tabsList.length?"is-active":"",attrs:{closable:1!=e.tabsList.length,label:t.title,name:t.name}})}),1)],1)},[],!1,null,null,null).exports},data:function(){return{companyName:this.$store.state.companyName,websocket:null,sendTimer:null,reconnectTimer:null,dataRequestNum:0,isManualClose:!1,role:this.$store.state.userInfo.role,stationGuidArr:[],isRouterAlive:!0,keepAliveArr:["FreezeData"]}},provide:function(){return{reload:this.reload}},created:function(){2==this.role&&(this.getRealData(),this.initWebSocket())},computed:{webClose:function(){clearInterval(this.sendTimer),this.websocket&&this.websocket.close()}},methods:{reload:function(){var e=this;this.keepAliveArr=[],this.isRouterAlive=!1,this.$nextTick(function(){return e.isRouterAlive=!0,e.keepAliveArr=["FreezeData"]})},afterRouterChange:function(){this.keepAliveArr=["FreezeData"]},getRealData:function(e){var t=this;this.$axios({method:"get",headers:{},url:"web/realdata/getRealData"}).then(function(e){var r=e.data;if(0==r.code&&r.info){t.dataRequestNum=0;var n={},a=r.info.varList,o=r.info.devList;for(var s in a)for(var i in o)a[s].devGuid==o[i].devGuid&&(n[o[i].stationGuid]||(n[o[i].stationGuid]=[]),n[o[i].stationGuid].push(a[s]));var u={},c=r.info.stationList,l="";for(var d in c)l=l+c[d].stationGuid+",",t.stationGuidArr.push(c[d].stationGuid),n[c[d].stationGuid]||(n[c[d].stationGuid]=[]),u[c[d].stationGuid]=[];for(var m in o)u[o[m].stationGuid].push(o[m]);var f={vars:n,devs:u};t.$store.commit("set_g_realData",f),t.getCurrentAllAlarm(l)}}).catch(function(e){})},getCurrentAllAlarm:function(e){var t=this;this.$axios({method:"get",headers:{},url:"web/alarm/getAllAlarmRecord",params:{stationGuids:e.substring(0,e.length-1)}}).then(function(e){var r=e.data;if(0==r.code){var n=JSON.parse(JSON.stringify(t.$store.state.g_currentAlarmVar));if(r.info){var a=r.info;for(var o in a)n[a[o].stationGuid]||(n[a[o].stationGuid]=[]),a[o].recordState<3&&n[a[o].stationGuid].push(a[o]);t.$store.commit("set_g_currentAlarmVar",n)}}}).catch(function(e){})},getDataErrorAction:function(){this.dataRequestNum>3?this.dataRequestNum=0:(this.dataRequestNum++,this.getRealData())},initWebSocket:function(){this.websocket&&(this.websocket.close(),this.websocket=null);var e="ws://"+window.location.host+"//websocket";this.websocket=new WebSocket(e),this.websocket.onmessage=this.websocketonmessage,this.websocket.onopen=this.websocketonopen,this.websocket.onerror=this.websocketonerror,this.websocket.onclose=this.websocketclose},websocketonopen:function(){var e=this;clearInterval(this.reconnectTimer),clearInterval(this.sendTimer),this.reconnectTimer=null,this.sendTimer=null,this.sendTimer=setInterval(function(){e.websocket.send("hellow world")},3e4)},websocketonmessage:function(e){this.$store.state.g_realData||this.getRealData();var t=JSON.parse(e.data);switch(t.funCode){case 1:switch(t.messageId){case 1:case 2:case 3:break;case 7:var r=t.event;this.$store.commit("set_g_newAlarmInfo",r);var n=JSON.parse(JSON.stringify(this.$store.state.g_currentAlarmVar));switch(r.recordState){case 1:var a=JSON.parse(JSON.stringify(this.$store.state.g_newAlarmNum));a[r.stationGuid]||(a[r.stationGuid]=0),a[r.stationGuid]+=1,this.$store.commit("set_g_newAlarmNum",a),this.$store.state.g_newAlarmNum;var o=-1;n[r.stationGuid]||(n[r.stationGuid]=[]);for(var s=0;s<n[r.stationGuid].length;s++)if(n[r.stationGuid][s].varGuid==r.varGuid){o=s;break}o>-1?n[r.stationGuid][o]=r:n[r.stationGuid].push(r),this.$store.commit("set_g_currentAlarmVar",n);break;case 2:break;case 3:case 4:n[r.stationGuid]||(n[r.stationGuid]=[]);for(var i=0;i<n[r.stationGuid].length;i++)if(n[r.stationGuid][i].varGuid==r.varGuid){n[r.stationGuid].splice(i,1);break}this.$store.commit("set_g_currentAlarmVar",n)}}break;case 2:if(4==t.messageId){var u=t.event;if(-1==this.stationGuidArr.indexOf(u.stationGuid))return;this.$store.commit("set_g_newRealData",u);var c=JSON.parse(JSON.stringify(this.$store.state.g_realData));if(c&&c.vars[u.stationGuid]){for(var l=JSON.parse(JSON.stringify(c.vars[u.stationGuid])),d=0;d<l.length;d++)l[d].varGuid==u.varGuid&&(l[d].data.v=u.value,l[d].data.vTime=u.valueTime,l[d].data.commStateTime=u.commStateTime,l[d].data.commState=u.commState,l[d].data.alarmState=u.alarmState,l[d].data.alarmStateTime=u.alarmStateTime);c.vars[u.stationGuid]=l,this.$store.commit("set_g_realData",c)}}5==t.messageId&&this.getRealData(!0)}},websocketonerror:function(){this.reconnectTimer||this.websocketReconnectAction()},websocketsend:function(){},websocketclose:function(e){this.isManualClose||this.reconnectTimer||this.websocketReconnectAction()},websocketReconnectAction:function(){var e=this;this.websocket=null,clearInterval(this.sendTimer),this.reconnectTimer=setInterval(function(){e.initWebSocket()},1e4)},back:function(){this.$store.commit("set_role",-1),clearInterval(this.sendTimer),this.websocket&&this.websocket.close(),this.$axios({method:"get",headers:{},url:"/logout",data:{}}),window.sessionStorage.clear(),sessionStorage.clear(),setTimeout(function(){window.location.href="./index.html"},300)}},destroyed:function(){clearInterval(this.sendTimer),this.websocket.close()}}),g=(r("2629"),Object(u.a)(v,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("Header",{on:{back:e.back}}),r("Tabs"),r("keep-alive",{attrs:{include:e.keepAliveArr},on:{"after-enter":e.afterRouterChange}},[e.isRouterAlive?r("router-view",{staticClass:"router"}):e._e()],1),r("Nav"),r("div",{staticClass:"companyName"},[e._v(e._s(e.companyName))])],1)},[],!1,null,null,null).exports);n.default.use(a.a);var b=[{path:"/",name:"Login",data:{name:"login",role:"1",show:!0},component:c},{path:"/thirdParty",name:"ThirdParty",data:{name:"thirdParty",role:"999",show:!0},component:function(){return Promise.all([r.e("chunk-1c8bc923"),r.e("chunk-60063045"),r.e("chunk-7a6bbf18")]).then(r.bind(null,"413a"))}}],w=[{path:"/home",name:"Home",data:{name:"home",role:"1,2,3",type:"1,2,3,4,5,6,7,8,9",show:!0},component:g,children:[{path:"/exhibition",name:"Exhibition",data:{name:"综合展板",role:"2",type:"7",show:!0,img:0},component:function(){return r.e("chunk-7a6bbf18").then(r.bind(null,"98d7"))}},{path:"/freezeData",name:"FreezeData",data:{name:"冻结数据",role:"2",type:"2",show:!0,img:1},component:function(){return Promise.all([r.e("chunk-1c8bc923"),r.e("chunk-60063045")]).then(r.bind(null,"0925"))}},{path:"/alarmCenter",name:"AlarmCenter",data:{name:"报警管理",role:"2",type:"0",show:!0,img:3},children:[]},{path:"/alarmCenter/currentAlarm",name:"CurrentAlarm",data:{name:"当前报警",role:"2",type:"0",show:!1},component:function(){return r.e("chunk-60063045").then(r.bind(null,"7f6c"))}},{path:"/alarmCenter/historyAlarm",name:"HistoryAlarm",data:{name:"历史报警",role:"2",type:"0",show:!1},component:function(){return r.e("chunk-60063045").then(r.bind(null,"4fcb"))}},{path:"/projectVideo",name:"ProjectVideo",data:{name:"项目视频",role:"2",type:"4",show:!0,img:2},component:function(){return Promise.all([r.e("chunk-1c8bc923"),r.e("chunk-7a6bbf18")]).then(r.bind(null,"5b23"))}},{path:"/reportCenter",name:"ReportCenter",data:{name:"报表中心",role:"2",type:"5",show:!0,img:3},children:[]},{path:"/reportCenter/customReport",name:"CustomReport",data:{name:"定制报表",role:"2",type:"5",show:!1},component:function(){return r.e("chunk-60063045").then(r.bind(null,"9f0c"))}},{path:"/reportCenter/queryReport",name:"QueryReport",data:{name:"历史数据",role:"2",type:"5",show:!1},component:function(){return r.e("chunk-60063045").then(r.bind(null,"20da"))}},{path:"/userRights",name:"UserRights",data:{name:"用户权限",role:"1,2,3",show:!0,type:"1,6,8",img:4},children:[]},{path:"/userRights/user",name:"User",data:{name:"用户维护",role:"2",type:"1",show:!1},component:function(){return r.e("chunk-60063045").then(r.bind(null,"ac16"))}},{path:"/userRights/authorization",name:"Authorization",data:{name:"项目授权",role:"2",type:"6",show:!1},component:function(){return r.e("chunk-60063045").then(r.bind(null,"4d97"))}},{path:"/userRights/structure",name:"Structure",data:{name:"组织结构维护",role:"2,3",type:"8",show:!1},component:function(){return r.e("chunk-1c8bc923").then(r.bind(null,"18b8"))}},{path:"/userRights/roleAccount",name:"RoleAccount",data:{name:"角色账户",role:"1",type:"false",show:!1},component:function(){return r.e("chunk-1c8bc923").then(r.bind(null,"600d"))}},{path:"/systemConfig",name:"SystemConfig",data:{name:"系统设置",role:"2,3",type:"9",show:!0,img:5},children:[]},{path:"/systemConfig/projectInfoForCustomer",name:"projectInfoForCustomer",data:{name:"项目维护",role:"2",type:"9",show:!1},component:function(){return r.e("chunk-60063045").then(r.bind(null,"c415"))}},{path:"/systemConfig/systemInfo",name:"SystemInfo",data:{name:"系统信息",role:"2,3",type:"9",show:!1},component:function(){return r.e("chunk-1c8bc923").then(r.bind(null,"f68c"))}},{path:"/systemConfig/systemLog",name:"SystemLog",data:{name:"系统日志",role:"2,3",type:"9",show:!1},component:function(){return r.e("chunk-1c8bc923").then(r.bind(null,"27d2"))}},{path:"/systemConfig/projectInfo",name:"ProjectInfo",data:{name:"项目基本信息",role:"3",type:"false",show:!1},component:function(){return r.e("chunk-7a6bbf18").then(r.bind(null,"5849"))}},{path:"/systemConfig/projectConfig",name:"ProjectConfig",data:{name:"项目配置",role:"3",type:"false",show:!1},component:function(){return Promise.all([r.e("chunk-60063045"),r.e("chunk-7a6bbf18"),r.e("chunk-1c8bc923")]).then(r.bind(null,"4117"))}},{path:"/systemConfig/StationConfig",name:"StationConfig",data:{name:"站点配置",role:"3",type:"false",show:!1},component:function(){return r.e("chunk-1c8bc923").then(r.bind(null,"9cf9"))}},{path:"/systemConfig/maintain",name:"Maintain",data:{name:"工程维护",role:"3",type:"false",show:!1},component:function(){return r.e("chunk-1c8bc923").then(r.bind(null,"30e6"))}},{path:"/systemConfig/AlarmTemplate",name:"AlarmTemplate",data:{name:"报警模板",role:"3",show:!1},component:function(){return r.e("chunk-1c8bc923").then(r.bind(null,"09e4"))}},{path:"/systemConfig/alarmConfig/AlarmConfig",name:"AlarmConfig",data:{name:"报警配置",role:"3",show:!1},component:function(){return r.e("chunk-7a6bbf18").then(r.bind(null,"23b8"))}}]}],y=new a.a({routes:b});t.b=y},b729:function(e,t,r){},c8bf:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAUCAYAAAD7s6+GAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMGI2YzI2YS0zODJkLTM2NDQtYTg4MS03NTkyNzRlYzRiMTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDU0MDFBQTlDNEVFMTFFQUIwMEZEMDMwQTMxQ0UwQkUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDU0MDFBQThDNEVFMTFFQUIwMEZEMDMwQTMxQ0UwQkUiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTZjODg1YjYtZWU0NC1iMjRkLWI3NmYtN2M1MDQ5OWI1Yjg4IiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NWZkMGMxZjctNzNhMi0wOTQyLWJmN2MtOTIwOGI5YTFkNjQ2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++KjodAAAA01JREFUeNq0l1loE0EYx5M0iVcfTAVbRSpYoR4IaiqGeiBqFQutWmxQRFQU64VKFZIHBX3SWtEXffBCPFCMKCpiLQ2i4oMH8UAo3gdqBaVNta1WhcT/J/+V6bK77pb0gx+zOzuZ/e/Md0zc6XTapbfyirlD0UwHs8FY4Ae/XZk3ebkPpMBzUA/ioFEbcPnCpb+tVyfQjWYp2Aj6gotARr4DP0AWRXszKLQXyAOjwHKwARwAh0CHNtCriJTr7WAtB9bia76hPx/X/TlpErx19ZzVgsVgBwiBVeCrPPAog6rBJrAGArehHQORJ9DWkauyE+AwmNpDQmUh9oMKMEOEQ4Pvn1DcTEMTAVGIPIt72frzYAm3ZDAYIuLBSnAGrLDx4iBoYGunX7ObdINFICwd7rL55dloT4E+YA5YDfbRF62sg1tz2oZQsRKQAAH2DVP6zOwYGCdBnVU4srBIVhJs5kNx4hwbq+XnJBKpzQbPZ3InJIInkyQ/rgxcAZ/AaDXKdfaBC/fUS3/7Am6ArSDfgU/JqswDuxlsqu3Sba1cx5T7SuLiwiQN5n/CFZ8lPjoBPOTWh7oRAFNAtkF/EQVohNkf1vWbiRT7xfwakhUdBO6AftwqpyZB1hu0mUSxy0G/WSzkilA3oz/dzZSSMuiLKNtq9Cyi65PtrbJ6iZf+KSv5HXykczux96xaqr1mKdQHl2ZxByssbtUsQu+zGnSCu+K4DoXeVksd7RzRLMBoTzKoogZizTLLcHBPtvwWGAgmMW85KZHPeB6wchstbwYoMMHoD9qYfwQYD66J0EcMpmqK3Al+2pikHUipfWExplKpQFHmaM0XG5jCAha/r2KOvu5ByZSivxcUy4EE9zLZFvDZYoImsF63vUYCY8y18sIaJXAK2EpQvdLlV81KWcL3QFOTh2e+OL+uBnV+Ie7lYLAAnAQvQSto4VYfYQ0+/p9CEKS4Aq6kPnhKmFMTBmW0mO+OaSXarR2clWOelKyDPOa1ol9eNIATtFB4T1kOT03ifo/BMmho6yKUYj38ynUMMDnWPQBvmIL8TO6ZOjinOGcu02Ipq9FRHpTatRO+2+SvSB5PUlLHJzK4OlkcMm0+/ptoZAapY9ns8lfkjwADAJBK7FcV+0ikAAAAAElFTkSuQmCC"},cd92:function(e,t,r){},ced9:function(e,t,r){"use strict";r("92fe")},e3d6:function(e,t,r){},ee8d:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAVCAYAAAAw73wjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowMGI2YzI2YS0zODJkLTM2NDQtYTg4MS03NTkyNzRlYzRiMTUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzY2N0MzNzBDNEVEMTFFQUE5RkVFRDNBNzJERjNDOTAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzY2N0MzNkZDNEVEMTFFQUE5RkVFRDNBNzJERjNDOTAiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTZjODg1YjYtZWU0NC1iMjRkLWI3NmYtN2M1MDQ5OWI1Yjg4IiBzdFJlZjpkb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NWZkMGMxZjctNzNhMi0wOTQyLWJmN2MtOTIwOGI5YTFkNjQ2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+LkJm9QAAAwVJREFUeNq8l21ojWEYx885G1tHQz74wDZW85JJEikvZQmt8GVmpEheEpLUJsrGfNnM+2sUtRTjiw8LkVqhvGy1RkJEUVMbH7xvE8fvWv9HT2fPc95su+rX/Zz7ea5z/s913dd93ScYiUQCXpZTV5TGsAVKYQwMCvSf/YLXcAnOOZPv19z890DQSygi9zCUQRfchyfQDr8h1Efi/sB3MAGjYQ7MNk2wF465haZHCcxgaIaJsB1OBQbOajTa7x6F5RLeY9HReQFjYThv058ip8IJaLUMwzM4r3kTOQxmEbjmXqln8ipDCWQisktzznMmvlAv9gHC9jJKm9EGIyBDa+1eDJH7oCLGfRO8HrLgi70QeralS9AUiVzkiIyyCVo3P3XdCW8l3IouHz7CDxWEn9ADWvuxbJ2CsAxWwmX0HQy53uIdIm/7ON9S5dvabZLoSfo8Dl5pTdkzu3y+ozABkY4Vwyr01CsoJ0OotZRNh+NJVGvQYy4tjt/hJNfxaY2HYIlFdIEmGhP8gm747LEPdsTwGa9CScaGEsQ8xovO9pSvG+0xnKogV2vU0r1Bqc9UI8iBWnijgqpQNburPBWbC/XO9hTWZGccJ6czBF3XiVpWikJtm+x2IuqkbIgq18vc28k0rZ8619xTFUqrj39HikLbSH/YiWiLJrMTdM7WXuqYpX4wjIrh05Si0EYtsR6hdzW5OgHHrTAS7rjmglGjl9mLNSQp8iVp/8RYbvtziA+23s7AxjiORWp7m7QdJWtlST7vBM4aUbWz4e9Qh6rxcdoNN2CzmkMgKqJ5WuMxIwQrEhS5Ex6j56yOe/tDuuiUiHJuzvRwtCKZp8h7nSVNwIMEBFyB+fDcr3jUNq3VLlSWi3udRxF5gWEtLEb8ddehpK/NsrAUZqivf4NHcE33S7V/1qKj3PPgjLgjOhNaqit1Ph0om6xWbueCSkRWxTvhW5qroUAdy1Ly1afP/+8pP6SGkKujYovW6MO4f0VcgktU7QXaK/taaERCu/R3p8G9jbmF/hVgAEpE4lLK5UyqAAAAAElFTkSuQmCC"},f0a0:function(e,t,r){},fcb0:function(e,t,r){"use strict";r("0969")}});