function mxMorphing(t,e,i,o){mxAnimation.call(this,o),this.graph=t,this.steps=null!=e?e:6,this.ease=null!=i?i:1.5}mxMorphing.prototype=new mxAnimation,mxMorphing.prototype.constructor=mxMorphing,mxMorphing.prototype.graph=null,mxMorphing.prototype.steps=null,mxMorphing.prototype.step=0,mxMorphing.prototype.ease=null,mxMorphing.prototype.cells=null,mxMorphing.prototype.updateAnimation=function(){mxAnimation.prototype.updateAnimation.apply(this,arguments);var t=new mxCellStatePreview(this.graph);if(null!=this.cells)for(var e=0;e<this.cells.length;e++)this.animateCell(this.cells[e],t,!1);else this.animateCell(this.graph.getModel().getRoot(),t,!0);this.show(t),(t.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()},mxMorphing.prototype.show=function(t){t.show()},mxMorphing.prototype.animateCell=function(t,e,i){var o=this.graph.getView().getState(t),r=null;if(null!=o&&(r=this.getDelta(o),this.graph.getModel().isVertex(t)&&(0!=r.x||0!=r.y))){var l=this.graph.view.getTranslate(),n=this.graph.view.getScale();r.x+=l.x*n,r.y+=l.y*n,e.moveState(o,-r.x/this.ease,-r.y/this.ease)}if(i&&!this.stopRecursion(o,r))for(var h=this.graph.getModel().getChildCount(t),p=0;p<h;p++)this.animateCell(this.graph.getModel().getChildAt(t,p),e,i)},mxMorphing.prototype.stopRecursion=function(t,e){return null!=e&&(0!=e.x||0!=e.y)},mxMorphing.prototype.getDelta=function(t){var e=this.getOriginForCell(t.cell),i=this.graph.getView().getTranslate(),o=this.graph.getView().getScale(),r=t.x/o-i.x,l=t.y/o-i.y;return new mxPoint((e.x-r)*o,(e.y-l)*o)},mxMorphing.prototype.getOriginForCell=function(t){var e=null;if(null!=t){var i=this.graph.getModel().getParent(t),o=this.graph.getCellGeometry(t);if(e=this.getOriginForCell(i),null!=o)if(o.relative){var r=this.graph.getCellGeometry(i);null!=r&&(e.x+=o.x*r.width,e.y+=o.y*r.height)}else e.x+=o.x,e.y+=o.y}if(null==e){var l=this.graph.view.getTranslate();e=new mxPoint(-l.x,-l.y)}return e};