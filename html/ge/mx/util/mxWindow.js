function mxWindow(t,e,i,s,n,l,h,o,m,r){null!=e&&(h=null==h||h,this.content=e,this.init(i,s,n,l,r),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(h),this.setTitle(t),(null==o||o)&&this.installMoveHandler(),null!=m&&null!=m.parentNode?m.parentNode.replaceChild(this.div,m):GE.container.appendChild(this.div))}mxWindow.prototype=new mxEventSource,mxWindow.prototype.constructor=mxWindow,mxWindow.prototype.closeImage=GE.imageBasePath+"/close.gif",mxWindow.prototype.minimizeImage=GE.imageBasePath+"/minimize.gif",mxWindow.prototype.normalizeImage=GE.imageBasePath+"/normalize.gif",mxWindow.prototype.maximizeImage=GE.imageBasePath+"/maximize.gif",mxWindow.prototype.resizeImage=GE.imageBasePath+"/resize.gif",mxWindow.prototype.visible=!1,mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40),mxWindow.prototype.destroyOnClose=!0,mxWindow.prototype.contentHeightCorrection=2,mxWindow.prototype.title=null,mxWindow.prototype.content=null,mxWindow.prototype.init=function(t,e,i,s,n){n=null!=n?n:"mxWindow",this.div=document.createElement("div"),this.div.className=n,this.div.style.left=t+"px",this.div.style.top=e+"px",this.table=document.createElement("table"),this.table.className=n,GE.IS_POINTER&&(this.div.style.touchAction="none"),null!=i&&(this.div.style.width=i+"px",this.table.style.width=i+"px"),null!=s&&(this.div.style.height=s+"px",this.table.style.height=s+"px");var l=document.createElement("tbody"),h=document.createElement("tr");this.title=document.createElement("td"),this.title.className=n+"Title",this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),h.appendChild(this.title),l.appendChild(h),h=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=n+"Pane",this.contentWrapper=document.createElement("div"),this.contentWrapper.className=n+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),"DIV"!=this.content.nodeName.toUpperCase()&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),h.appendChild(this.td),l.appendChild(h),this.table.appendChild(l),this.div.appendChild(this.table);var o=mxUtils.bind(this,function(t){this.activate()});mxEvent.addGestureListeners(this.title,o),mxEvent.addGestureListeners(this.table,o),this.hide()},mxWindow.prototype.setTitle=function(t){for(var e=this.title.firstChild;null!=e;){var i=e.nextSibling;e.nodeType==mxConstants.NODETYPE_TEXT&&e.parentNode.removeChild(e),e=i}mxUtils.write(this.title,t||""),this.title.appendChild(this.buttons)},mxWindow.prototype.setScrollable=function(t){(null==navigator.userAgent||navigator.userAgent.indexOf("Presto/2.5")<0)&&(this.contentWrapper.style.overflow=t?"auto":"hidden")},mxWindow.prototype.activate=function(){if(mxWindow.activeWindow!=this){var t=mxUtils.getCurrentStyle(this.getElement()),e=null!=t?t.zIndex:3;if(mxWindow.activeWindow){var i=mxWindow.activeWindow.getElement();null!=i&&null!=i.style&&(i.style.zIndex=e)}var s=mxWindow.activeWindow;this.getElement().style.zIndex=parseInt(e)+1,mxWindow.activeWindow=this,this.fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",s))}},mxWindow.prototype.getElement=function(){return this.div},mxWindow.prototype.fit=function(){mxUtils.fit(this.div)},mxWindow.prototype.isResizable=function(){return null!=this.resize&&"none"!=this.resize.style.display},mxWindow.prototype.setResizable=function(t){if(t)if(null==this.resize){this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="2px",this.resize.style.right="2px",this.resize.setAttribute("src",this.resizeImage),this.resize.style.cursor="nw-resize";var e=null,i=null,s=null,n=null,l=mxUtils.bind(this,function(t){this.activate(),e=mxEvent.getClientX(t),i=mxEvent.getClientY(t),s=this.div.offsetWidth,n=this.div.offsetHeight,mxEvent.addGestureListeners(document,null,h,o),this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",t)),mxEvent.consume(t)}),h=mxUtils.bind(this,function(t){if(null!=e&&null!=i){var l=mxEvent.getClientX(t)-e,h=mxEvent.getClientY(t)-i;this.setSize(s+l,n+h),this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",t)),mxEvent.consume(t)}}),o=mxUtils.bind(this,function(t){null!=e&&null!=i&&(e=null,i=null,mxEvent.removeGestureListeners(document,null,h,o),this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",t)),mxEvent.consume(t))});mxEvent.addGestureListeners(this.resize,l,h,o),this.div.appendChild(this.resize)}else this.resize.style.display="inline";else null!=this.resize&&(this.resize.style.display="none")},mxWindow.prototype.setSize=function(t,e){t=Math.max(this.minimumSize.width,t),e=Math.max(this.minimumSize.height,e),this.div.style.width=t+"px",this.div.style.height=e+"px",this.table.style.width=t+"px",this.table.style.height=e+"px",this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"},mxWindow.prototype.setMinimizable=function(t){this.minimize.style.display=t?"":"none"},mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)},mxWindow.prototype.installMinimizeHandler=function(){this.minimize=document.createElement("img"),this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.minimize.style.cursor="pointer",this.minimize.style.marginLeft="2px",this.minimize.style.display="none",this.buttons.appendChild(this.minimize);var t=!1,e=null,i=null,s=mxUtils.bind(this,function(s){if(this.activate(),t)t=!1,this.minimize.setAttribute("src",this.minimizeImage),this.minimize.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=e,this.div.style.height=i,this.table.style.height=i,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",s));else{t=!0,this.minimize.setAttribute("src",this.normalizeImage),this.minimize.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",e=this.maximize.style.display,this.maximize.style.display="none",i=this.table.style.height;var n=this.getMinimumSize();n.height>0&&(this.div.style.height=n.height+"px",this.table.style.height=n.height+"px"),n.width>0&&(this.div.style.width=n.width+"px",this.table.style.width=n.width+"px"),null!=this.resize&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",s))}mxEvent.consume(s)});mxEvent.addGestureListeners(this.minimize,s)},mxWindow.prototype.setMaximizable=function(t){this.maximize.style.display=t?"":"none"},mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);var t=!1,e=null,i=null,s=null,n=null,l=null,h=mxUtils.bind(this,function(h){if(this.activate(),"none"!=this.maximize.style.display){if(t){t=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimize.style.display=l,this.div.style.left=e+"px",this.div.style.top=i+"px",this.div.style.height=s,this.div.style.width=n,"auto"!=mxUtils.getCurrentStyle(this.contentWrapper).overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.table.style.height=s,this.table.style.width=n,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",h))}else{t=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",l=this.minimize.style.display,this.minimize.style.display="none",e=parseInt(this.div.style.left),i=parseInt(this.div.style.top),s=this.table.style.height,n=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px";var o=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0);this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=o-2+"px",this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=o-2+"px",null!=this.resize&&(this.resize.style.visibility="hidden"),"auto"!=mxUtils.getCurrentStyle(this.contentWrapper).overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",h))}mxEvent.consume(h)}});mxEvent.addGestureListeners(this.maximize,h),mxEvent.addListener(this.title,"dblclick",h)},mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move",mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(t){var e=mxEvent.getClientX(t),i=mxEvent.getClientY(t),s=this.getX(),n=this.getY(),l=mxUtils.bind(this,function(t){var l=mxEvent.getClientX(t)-e,h=mxEvent.getClientY(t)-i;this.setLocation(s+l,n+h),this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",t)),mxEvent.consume(t)}),h=mxUtils.bind(this,function(t){mxEvent.removeGestureListeners(document,null,l,h),this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",t)),mxEvent.consume(t)});mxEvent.addGestureListeners(document,null,l,h),this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",t)),mxEvent.consume(t)})),GE.IS_POINTER&&(this.title.style.touchAction="none")},mxWindow.prototype.setLocation=function(t,e){this.div.style.left=t+"px",this.div.style.top=e+"px"},mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)},mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)},mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(t){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",t)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent.consume(t)}))},mxWindow.prototype.setImage=function(t){this.image=document.createElement("img"),this.image.setAttribute("src",t),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)},mxWindow.prototype.setClosable=function(t){this.closeImg.style.display=t?"":"none"},mxWindow.prototype.isVisible=function(){return null!=this.div&&"none"!=this.div.style.display},mxWindow.prototype.setVisible=function(t){null!=this.div&&this.isVisible()!=t&&(t?this.show():this.hide())},mxWindow.prototype.show=function(){this.div.style.display="",this.activate(),"auto"!=mxUtils.getCurrentStyle(this.contentWrapper).overflow&&null==this.resize||"none"==this.contentWrapper.style.display||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.SHOW))},mxWindow.prototype.hide=function(){this.div.style.display="none",this.fireEvent(new mxEventObject(mxEvent.HIDE))},mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY)),null!=this.div&&(mxEvent.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.title=null,this.content=null,this.contentWrapper=null};