var mxPerimeter={RectanglePerimeter:function(t,n,o,e){var i=t.getCenterX(),x=t.getCenterY(),r=o.x-i,a=o.y-x,m=Math.atan2(a,r),w=new mxPoint(0,0),h=Math.PI,P=Math.PI/2-m,f=Math.atan2(t.height,t.width);return m<-h+f||m>h-f?(w.x=t.x,w.y=x-t.width*Math.tan(m)/2):m<-f?(w.y=t.y,w.x=i-t.height*Math.tan(P)/2):m<f?(w.x=t.x+t.width,w.y=x+t.width*Math.tan(m)/2):(w.y=t.y+t.height,w.x=i+t.height*Math.tan(P)/2),e&&(o.x>=t.x&&o.x<=t.x+t.width?w.x=o.x:o.y>=t.y&&o.y<=t.y+t.height&&(w.y=o.y),o.x<t.x?w.x=t.x:o.x>t.x+t.width&&(w.x=t.x+t.width),o.y<t.y?w.y=t.y:o.y>t.y+t.height&&(w.y=t.y+t.height)),w},EllipsePerimeter:function(t,n,o,e){var i=t.x,x=t.y,r=t.width/2,a=t.height/2,m=i+r,w=x+a,h=o.x,P=o.y,f=parseInt(h-m),l=parseInt(P-w);if(0==f&&0!=l)return new mxPoint(m,w+a*l/Math.abs(l));if(0==f&&0==l)return new mxPoint(h,P);if(e){if(P>=x&&P<=x+t.height){var M=P-w,s=Math.sqrt(r*r*(1-M*M/(a*a)))||0;return h<=i&&(s=-s),new mxPoint(m+s,P)}if(h>=i&&h<=i+t.width){s=h-m,M=Math.sqrt(a*a*(1-s*s/(r*r)))||0;return P<=x&&(M=-M),new mxPoint(h,w+M)}}var u=l/f,y=w-u*m,I=r*r*u*u+a*a,C=-2*m*I,T=r*r*u*u*m*m+a*a*m*m-r*r*a*a,O=Math.sqrt(C*C-4*I*T),E=(-C+O)/(2*I),R=(-C-O)/(2*I),N=u*E+y,g=u*R+y,D=0,_=0;return Math.sqrt(Math.pow(E-h,2)+Math.pow(N-P,2))<Math.sqrt(Math.pow(R-h,2)+Math.pow(g-P,2))?(D=E,_=N):(D=R,_=g),new mxPoint(D,_)},RhombusPerimeter:function(t,n,o,e){var i=t.x,x=t.y,r=t.width,a=t.height,m=i+r/2,w=x+a/2,h=o.x,P=o.y;if(m==h)return w>P?new mxPoint(m,x):new mxPoint(m,x+a);if(w==P)return m>h?new mxPoint(i,w):new mxPoint(i+r,w);var f=m,l=w;return e&&(h>=i&&h<=i+r?f=h:P>=x&&P<=x+a&&(l=P)),h<m?P<w?mxUtils.intersection(h,P,f,l,m,x,i,w):mxUtils.intersection(h,P,f,l,m,x+a,i,w):P<w?mxUtils.intersection(h,P,f,l,m,x,i+r,w):mxUtils.intersection(h,P,f,l,m,x+a,i+r,w)},TrianglePerimeter:function(t,n,o,e){var i=null!=n?n.style[mxConstants.STYLE_DIRECTION]:null,x=i==mxConstants.DIRECTION_NORTH||i==mxConstants.DIRECTION_SOUTH,r=t.x,a=t.y,m=t.width,w=t.height,h=r+m/2,P=a+w/2,f=new mxPoint(r,a),l=new mxPoint(r+m,P),M=new mxPoint(r,a+w);i==mxConstants.DIRECTION_NORTH?(f=M,l=new mxPoint(h,a),M=new mxPoint(r+m,a+w)):i==mxConstants.DIRECTION_SOUTH?(l=new mxPoint(h,a+w),M=new mxPoint(r+m,a)):i==mxConstants.DIRECTION_WEST&&(f=new mxPoint(r+m,a),l=new mxPoint(r,P),M=new mxPoint(r+m,a+w));var s=o.x-h,u=o.y-P,y=x?Math.atan2(s,u):Math.atan2(u,s),I=x?Math.atan2(m,w):Math.atan2(w,m),C=null;if(i==mxConstants.DIRECTION_NORTH||i==mxConstants.DIRECTION_WEST?y>-I&&y<I:y<-Math.PI+I||y>Math.PI-I)C=e&&(x&&o.x>=f.x&&o.x<=M.x||!x&&o.y>=f.y&&o.y<=M.y)?x?new mxPoint(o.x,f.y):new mxPoint(f.x,o.y):i==mxConstants.DIRECTION_NORTH?new mxPoint(r+m/2+w*Math.tan(y)/2,a+w):i==mxConstants.DIRECTION_SOUTH?new mxPoint(r+m/2-w*Math.tan(y)/2,a):i==mxConstants.DIRECTION_WEST?new mxPoint(r+m,a+w/2+m*Math.tan(y)/2):new mxPoint(r,a+w/2-m*Math.tan(y)/2);else{if(e){var T=new mxPoint(h,P);o.y>=a&&o.y<=a+w?(T.x=x?h:i==mxConstants.DIRECTION_WEST?r+m:r,T.y=o.y):o.x>=r&&o.x<=r+m&&(T.x=o.x,T.y=x?i==mxConstants.DIRECTION_NORTH?a+w:a:P),s=o.x-T.x,u=o.y-T.y,h=T.x,P=T.y}C=x&&o.x<=r+m/2||!x&&o.y<=a+w/2?mxUtils.intersection(o.x,o.y,h,P,f.x,f.y,l.x,l.y):mxUtils.intersection(o.x,o.y,h,P,l.x,l.y,M.x,M.y)}return null==C&&(C=new mxPoint(h,P)),C},HexagonPerimeter:function(t,n,o,e){var i=t.x,x=t.y,r=t.width,a=t.height,m=t.getCenterX(),w=t.getCenterY(),h=o.x,P=o.y,f=h-m,l=P-w,M=-Math.atan2(l,f),s=Math.PI,u=Math.PI/2,y=new mxPoint(m,w),I=null!=n?mxUtils.getValue(n.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,C=I==mxConstants.DIRECTION_NORTH||I==mxConstants.DIRECTION_SOUTH,T=new mxPoint,O=new mxPoint;if((h<i&&P<x||h<i&&P>x+a||h>i+r&&P<x||h>i+r&&P>x+a)&&(e=!1),e){if(C){if(h==m){if(P<=x)return new mxPoint(m,x);if(P>=x+a)return new mxPoint(m,x+a)}else if(h<i){if(P==x+a/4)return new mxPoint(i,x+a/4);if(P==x+3*a/4)return new mxPoint(i,x+3*a/4)}else if(h>i+r){if(P==x+a/4)return new mxPoint(i+r,x+a/4);if(P==x+3*a/4)return new mxPoint(i+r,x+3*a/4)}else if(h==i){if(P<w)return new mxPoint(i,x+a/4);if(P>w)return new mxPoint(i,x+3*a/4)}else if(h==i+r){if(P<w)return new mxPoint(i+r,x+a/4);if(P>w)return new mxPoint(i+r,x+3*a/4)}if(P==x)return new mxPoint(m,x);if(P==x+a)return new mxPoint(m,x+a);h<m?P>x+a/4&&P<x+3*a/4?(T=new mxPoint(i,x),O=new mxPoint(i,x+a)):P<x+a/4?(T=new mxPoint(i-Math.floor(.5*r),x+Math.floor(.5*a)),O=new mxPoint(i+r,x-Math.floor(.25*a))):P>x+3*a/4&&(T=new mxPoint(i-Math.floor(.5*r),x+Math.floor(.5*a)),O=new mxPoint(i+r,x+Math.floor(1.25*a))):h>m&&(P>x+a/4&&P<x+3*a/4?(T=new mxPoint(i+r,x),O=new mxPoint(i+r,x+a)):P<x+a/4?(T=new mxPoint(i,x-Math.floor(.25*a)),O=new mxPoint(i+Math.floor(1.5*r),x+Math.floor(.5*a))):P>x+3*a/4&&(T=new mxPoint(i+Math.floor(1.5*r),x+Math.floor(.5*a)),O=new mxPoint(i,x+Math.floor(1.25*a))))}else{if(P==w){if(h<=i)return new mxPoint(i,x+a/2);if(h>=i+r)return new mxPoint(i+r,x+a/2)}else if(P<x){if(h==i+r/4)return new mxPoint(i+r/4,x);if(h==i+3*r/4)return new mxPoint(i+3*r/4,x)}else if(P>x+a){if(h==i+r/4)return new mxPoint(i+r/4,x+a);if(h==i+3*r/4)return new mxPoint(i+3*r/4,x+a)}else if(P==x){if(h<m)return new mxPoint(i+r/4,x);if(h>m)return new mxPoint(i+3*r/4,x)}else if(P==x+a){if(h<m)return new mxPoint(i+r/4,x+a);if(P>w)return new mxPoint(i+3*r/4,x+a)}if(h==i)return new mxPoint(i,w);if(h==i+r)return new mxPoint(i+r,w);P<w?h>i+r/4&&h<i+3*r/4?(T=new mxPoint(i,x),O=new mxPoint(i+r,x)):h<i+r/4?(T=new mxPoint(i-Math.floor(.25*r),x+a),O=new mxPoint(i+Math.floor(.5*r),x-Math.floor(.5*a))):h>i+3*r/4&&(T=new mxPoint(i+Math.floor(.5*r),x-Math.floor(.5*a)),O=new mxPoint(i+Math.floor(1.25*r),x+a)):P>w&&(h>i+r/4&&h<i+3*r/4?(T=new mxPoint(i,x+a),O=new mxPoint(i+r,x+a)):h<i+r/4?(T=new mxPoint(i-Math.floor(.25*r),x),O=new mxPoint(i+Math.floor(.5*r),x+Math.floor(1.5*a))):h>i+3*r/4&&(T=new mxPoint(i+Math.floor(.5*r),x+Math.floor(1.5*a)),O=new mxPoint(i+Math.floor(1.25*r),x)))}var E=m,R=w;h>=i&&h<=i+r?(E=h,R=P<w?x+a:x):P>=x&&P<=x+a&&(R=P,E=h<m?i+r:i),y=mxUtils.intersection(E,R,o.x,o.y,T.x,T.y,O.x,O.y)}else{if(C){if(M==(N=Math.atan2(a/4,r/2)))return new mxPoint(i+r,x+Math.floor(.25*a));if(M==u)return new mxPoint(i+Math.floor(.5*r),x);if(M==s-N)return new mxPoint(i,x+Math.floor(.25*a));if(M==-N)return new mxPoint(i+r,x+Math.floor(.75*a));if(M==-u)return new mxPoint(i+Math.floor(.5*r),x+a);if(M==-s+N)return new mxPoint(i,x+Math.floor(.75*a));M<N&&M>-N?(T=new mxPoint(i+r,x),O=new mxPoint(i+r,x+a)):M>N&&M<u?(T=new mxPoint(i,x-Math.floor(.25*a)),O=new mxPoint(i+Math.floor(1.5*r),x+Math.floor(.5*a))):M>u&&M<s-N?(T=new mxPoint(i-Math.floor(.5*r),x+Math.floor(.5*a)),O=new mxPoint(i+r,x-Math.floor(.25*a))):M>s-N&&M<=s||M<-s+N&&M>=-s?(T=new mxPoint(i,x),O=new mxPoint(i,x+a)):M<-N&&M>-u?(T=new mxPoint(i+Math.floor(1.5*r),x+Math.floor(.5*a)),O=new mxPoint(i,x+Math.floor(1.25*a))):M<-u&&M>-s+N&&(T=new mxPoint(i-Math.floor(.5*r),x+Math.floor(.5*a)),O=new mxPoint(i+r,x+Math.floor(1.25*a)))}else{var N;if(M==(N=Math.atan2(a/2,r/4)))return new mxPoint(i+Math.floor(.75*r),x);if(M==s-N)return new mxPoint(i+Math.floor(.25*r),x);if(M==s||M==-s)return new mxPoint(i,x+Math.floor(.5*a));if(0==M)return new mxPoint(i+r,x+Math.floor(.5*a));if(M==-N)return new mxPoint(i+Math.floor(.75*r),x+a);if(M==-s+N)return new mxPoint(i+Math.floor(.25*r),x+a);M>0&&M<N?(T=new mxPoint(i+Math.floor(.5*r),x-Math.floor(.5*a)),O=new mxPoint(i+Math.floor(1.25*r),x+a)):M>N&&M<s-N?(T=new mxPoint(i,x),O=new mxPoint(i+r,x)):M>s-N&&M<s?(T=new mxPoint(i-Math.floor(.25*r),x+a),O=new mxPoint(i+Math.floor(.5*r),x-Math.floor(.5*a))):M<0&&M>-N?(T=new mxPoint(i+Math.floor(.5*r),x+Math.floor(1.5*a)),O=new mxPoint(i+Math.floor(1.25*r),x)):M<-N&&M>-s+N?(T=new mxPoint(i,x+a),O=new mxPoint(i+r,x+a)):M<-s+N&&M>-s&&(T=new mxPoint(i-Math.floor(.25*r),x),O=new mxPoint(i+Math.floor(.5*r),x+Math.floor(1.5*a)))}y=mxUtils.intersection(m,w,o.x,o.y,T.x,T.y,O.x,O.y)}return null==y?new mxPoint(m,w):y}};