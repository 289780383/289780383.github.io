function mxDefaultPopupMenu(t){this.config=t}mxDefaultPopupMenu.prototype.imageBasePath=null,mxDefaultPopupMenu.prototype.config=null,mxDefaultPopupMenu.prototype.createMenu=function(t,e,n,l){if(null!=this.config){var o=this.createConditions(t,n,l),a=this.config.firstChild;this.addItems(t,e,n,l,o,a,null)}},mxDefaultPopupMenu.prototype.addItems=function(t,e,n,l,o,a,i){for(var u=!1;null!=a;){if("add"==a.nodeName){var r=a.getAttribute("if");if(null==r||o[r]){var p=a.getAttribute("as");p=mxResources.get(p)||p;var s=mxUtils.eval(mxUtils.getTextContent(a)),g=a.getAttribute("action"),d=a.getAttribute("icon"),f=a.getAttribute("iconCls"),c=a.getAttribute("enabled-if"),m=null==c||o[c];u&&(e.addSeparator(i),u=!1),null!=d&&this.imageBasePath&&(d=this.imageBasePath+d);var h=this.addAction(e,t,p,d,s,g,n,i,f,m);this.addItems(t,e,n,l,o,a.firstChild,h)}}else"separator"==a.nodeName&&(u=!0);a=a.nextSibling}},mxDefaultPopupMenu.prototype.addAction=function(t,e,n,l,o,a,i,u,r,p){return t.addItem(n,l,function(t){"function"==typeof o&&o.call(e,e,i,t),null!=a&&e.execute(a,i,t)},u,r,p)},mxDefaultPopupMenu.prototype.createConditions=function(t,e,n){var l=t.graph.getModel(),o=l.getChildCount(e),a=[];a.nocell=null==e,a.ncells=t.graph.getSelectionCount()>1,a.notRoot=l.getRoot()!=l.getParent(t.graph.getDefaultParent()),a.cell=null!=e;var i=null!=e&&1==t.graph.getSelectionCount();a.nonEmpty=i&&o>0,a.expandable=i&&t.graph.isCellFoldable(e,!1),a.collapsable=i&&t.graph.isCellFoldable(e,!0),a.validRoot=i&&t.graph.isValidRoot(e),a.emptyValidRoot=a.validRoot&&0==o,a.swimlane=i&&t.graph.isSwimlane(e);for(var u=this.config.getElementsByTagName("condition"),r=0;r<u.length;r++){var p=mxUtils.eval(mxUtils.getTextContent(u[r])),s=u[r].getAttribute("name");null!=s&&"function"==typeof p&&(a[s]=p(t,e,n))}return a};