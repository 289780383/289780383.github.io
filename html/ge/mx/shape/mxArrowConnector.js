function mxArrowConnector(t,n,o,e,r,i,s){mxShape.call(this),this.points=t,this.fill=n,this.stroke=o,this.strokewidth=null!=e?e:1,this.arrowWidth=null!=r?r:mxConstants.ARROW_WIDTH,this.arrowSpacing=null!=i?i:mxConstants.ARROW_SPACING,this.startSize=mxConstants.ARROW_SIZE/5,this.endSize=mxConstants.ARROW_SIZE/5}mxUtils.extend(mxArrowConnector,mxShape),mxArrowConnector.prototype.useSvgBoundingBox=!0,mxArrowConnector.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.arrowSpacing=mxConstants.ARROW_SPACING},mxArrowConnector.prototype.apply=function(t){mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.startSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5),this.endSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5))},mxArrowConnector.prototype.augmentBoundingBox=function(t){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var n=this.getEdgeWidth();this.isMarkerStart()&&(n=Math.max(n,this.getStartArrowWidth())),this.isMarkerEnd()&&(n=Math.max(n,this.getEndArrowWidth())),t.grow((n/2+this.strokewidth)*this.scale)},mxArrowConnector.prototype.paintEdgeShape=function(t,n){var o=this.strokewidth;this.outline&&(o=Math.max(1,mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth)));for(var e=this.getStartArrowWidth()+o,r=this.getEndArrowWidth()+o,i=this.outline?this.getEdgeWidth()+o:this.getEdgeWidth(),s=this.isOpenEnded(),a=this.isMarkerStart(),h=this.isMarkerEnd(),x=s?0:this.arrowSpacing+o/2,l=this.startSize+o,m=this.endSize+o,p=this.isArrowRounded(),u=n[n.length-1],d=1;d<n.length-1&&n[d].x==n[0].x&&n[d].y==n[0].y;)d++;var y=n[d].x-n[0].x,c=n[d].y-n[0].y,S=Math.sqrt(y*y+c*c);if(0!=S){var A,g,C=y/S,T=C,f=c/S,w=f,E=i*f,R=-i*C,W=[];p?t.setLineJoin("round"):n.length>2&&t.setMiterLimit(1.42),t.begin();var M=C,v=f;if(a&&!s)this.paintMarker(t,n[0].x,n[0].y,C,f,l,e,i,x,!0);else{var k=n[0].x+E/2+x*C,O=n[0].y+R/2+x*f,N=n[0].x-E/2+x*C,_=n[0].y-R/2+x*f;s?(t.moveTo(k,O),W.push(function(){t.lineTo(N,_)})):(t.moveTo(N,_),t.lineTo(k,O))}for(var I=0,L=0,D=0,U=0;U<n.length-2;U++){var b=mxUtils.relativeCcw(n[U].x,n[U].y,n[U+1].x,n[U+1].y,n[U+2].x,n[U+2].y);if(I=n[U+2].x-n[U+1].x,L=n[U+2].y-n[U+1].y,0!=(D=Math.sqrt(I*I+L*L))){var q=C*(T=I/D)+f*(w=L/D),z=Math.max(Math.sqrt((q+1)/2),.04);A=C+T,g=f+w;var B=Math.sqrt(A*A+g*g);if(0!=B){A/=B,g/=B;var Z=Math.max(z,Math.min(this.strokewidth/200+.04,.35)),H=0!=b&&p?Math.max(.1,Z):Math.max(z,.06),Y=n[U+1].x+g*i/2/H,G=n[U+1].y-A*i/2/H,J=n[U+1].x-g*i/2/H,P=n[U+1].y+A*i/2/H;if(0!=b&&p)if(-1==b){var V=J+f*i,K=P-C*i,j=J+w*i,F=P-T*i;t.lineTo(V,K),t.quadTo(Y,G,j,F),function(n,o){W.push(function(){t.lineTo(n,o)})}(J,P)}else t.lineTo(Y,G),function(n,o){var e=Y-f*i,r=G+C*i,s=Y-w*i,a=G+T*i;W.push(function(){t.quadTo(n,o,e,r)}),W.push(function(){t.lineTo(s,a)})}(J,P);else t.lineTo(Y,G),function(n,o){W.push(function(){t.lineTo(n,o)})}(J,P);C=T,f=w}}}if(E=i*w,R=-i*T,h&&!s)this.paintMarker(t,u.x,u.y,-C,-f,m,r,i,x,!1);else{t.lineTo(u.x-x*T+E/2,u.y-x*w+R/2);var Q=u.x-x*T-E/2,X=u.y-x*w-R/2;s?(t.moveTo(Q,X),W.splice(0,0,function(){t.moveTo(Q,X)})):t.lineTo(Q,X)}for(U=W.length-1;U>=0;U--)W[U]();s?(t.end(),t.stroke()):(t.close(),t.fillAndStroke()),t.setShadow(!1),t.setMiterLimit(4),p&&t.setLineJoin("flat"),n.length>2&&(t.setMiterLimit(4),a&&!s&&(t.begin(),this.paintMarker(t,n[0].x,n[0].y,M,v,l,e,i,x,!0),t.stroke(),t.end()),h&&!s&&(t.begin(),this.paintMarker(t,u.x,u.y,-C,-f,m,r,i,x,!0),t.stroke(),t.end()))}},mxArrowConnector.prototype.paintMarker=function(t,n,o,e,r,i,s,a,h,x){var l=a/s,m=a*r/2,p=-a*e/2,u=(h+i)*e,d=(h+i)*r;x?t.moveTo(n-m+u,o-p+d):t.lineTo(n-m+u,o-p+d),t.lineTo(n-m/l+u,o-p/l+d),t.lineTo(n+h*e,o+h*r),t.lineTo(n+m/l+u,o+p/l+d),t.lineTo(n+m+u,o+p+d)},mxArrowConnector.prototype.isArrowRounded=function(){return this.isRounded},mxArrowConnector.prototype.getStartArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEndArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEdgeWidth=function(){return mxConstants.ARROW_WIDTH/3},mxArrowConnector.prototype.isOpenEnded=function(){return!1},mxArrowConnector.prototype.isMarkerStart=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE},mxArrowConnector.prototype.isMarkerEnd=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE};