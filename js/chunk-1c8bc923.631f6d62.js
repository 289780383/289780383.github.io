(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1c8bc923"],{"048a":function(e,t,i){"use strict";i("0ab3")},"051a":function(e,t,i){},"05fa":function(e,t,i){"use strict";i("e66c")},"09a9":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAoCAYAAACfKfiZAAADjklEQVRYhe3XXYhVVRQH8N+9zkyTGVZDH870QRaRkZZhCKehD4si4vQigSTTg4WJEdWDKBgVaAQ1IUU9lGWhBCL0eYoe7JPJI0FgSUgQ0Qekw4RkNBnazNwe9j54upreO3OdevAPm3X32nuv9d/rrL33upVaraZVSCXd2Im1eCOT/3SsNdWWeQ9YgC6sw4+p5LFjLai0OAJduA2LcGtUr8emTD5w3AnUkVmEF3EqhnEnBjL5vvK8ln2CVHJyKlle9DP5ZtyAlzCCLXi0fl3LIpBK7ohO9gs58FwmH4xjt+B5XITZmfzrIxJIJdMwHz/guyY53IUn0I0x7MUmYdd/4kH0Y0cmv6pYVP8JluEDfIqZTRLYmMl7MAMLcWZ0uiGTjwoR2Iq5qeRwAqlkCq6J3R7Ma8J5O/pSye2ZfDCTv4V78TMWppL5OIAnMYpXDiOAShwcD/qxEW+nktWppBqdPBN99GfyGnbhC8xJJVf/g0AmH8HBktE/juJwDl4TwnqacNwejutXoS+T/4WPhHzqTSWzMvluvBdtLEslHeVPUMX0kpPzcG6U5daNJcK5Xo4+DOFxrEAbVsWE3uVQMqdRbohEr8/kB6vR+dkxhAtKBNYix/a6NoB7SvOexrdYLYR9O87HjZn8AL6P8y6MsiLcC2ekkmlFBB7BYnSWDHfFHffUtZk4pTSvPUZuLa7Ax5iK2XH8/SgvjnIIHahm8uG2qLyyZHAMjd5O1bijApfj1/j79yiL8bNKGxvGaCqZ0ZZKbsKskpH78WaDBLrxsrBzkfgFwqnYEnWLoyweo71CBKbilzYhKU4vGR3EngYJ7MG2EoGxTL6iGEwlFexAgq+iel50/lkmH2lzKDQFOjWH9n8biGd/TSpZl8mHo7o3yncIR2YEJzXptCmUnBPujFcz+VBBYFJx3OqB8aKKKf81gf11upEmbYxNlMB9+K2k6xQyu9E2oTyq1Go1qeQTXBd13wjveMcx1o4Jt9wlOCfqlmby9c0QKNiXw3hpbJOC4hRUjjprEgiUsRsrsbmkex0PCJ8G9gkv6Asaf7gaJrBNqN1WlnRP4Vm8G/tfYg0eEireceNIGZwIVc61Jd1S4T2/Ofbn4m5cJjwsLSXQI1RHZSyJrcB04R/PhPG/uIpPEDhBgNY9yU3bqdbJiaLp/5aF4w9bRODzZhcUF1G/8CD1CgVqo0VGJdoYEgrNnc0S+BtCmeyBJNVqZAAAAABJRU5ErkJggg=="},"09e4":function(e,t,i){"use strict";i.r(t);i("bf2f"),i("fc13"),i("9b5f"),i("5b12"),i("3de1");var a={data:function(){return{tableLoading:!1,leftList:[{name:"报警模板",selected:!0},{name:"报警限值模板",selected:!1}],alarmTemplateData:[],editeAlarmTemplate:{templateId:"",templateName:"",alarmText:"",recoveryText:""},alarmDialogVisible:!1,alarmDialogTitle:"报警模板",editAlarmFormRules:{templateName:{required:!0,message:"请输入模板名称",trigger:"blur"},alarmText:{required:!0,message:"请输入报警文本",trigger:"blur"},recoveryText:{required:!0,message:"请输入报警恢复模板",trigger:"blur"}},isNewTemplate:!0,tableHeight:"",alarmPageSize:10,alarmCurrentPage:1,limitTemplateData:[],id:0,editeLimitTemplate:{threshold:"",thresholdName:"",contents:[{thresholdType:1,alarmParam1:"",alarmParam2:""}]},limitTypeArr:[],limitDialogVisible:!1,limitPageSize:10,limitCurrentPage:1,alarmDefaultParam:{}}},created:function(){this.getLimitType(),this.getAlarmDefaultParam(),this.getAlarmTemplate()},mounted:function(){this.getTableHeight()},methods:{leftLiClick:function(e){if(!this.leftList[e].selected){for(var t in this.leftList)this.leftList[t].selected=t==e;switch(e){case 0:this.getAlarmTemplate();break;case 1:this.getLimitTemplate()}}},addTemplate:function(){var e;for(var t in this.isNewTemplate=!0,this.leftList)if(this.leftList[t].selected){e=t;break}switch(parseInt(e)){case 0:this.editeAlarmTemplate={templateId:"",templateName:"",alarmText:"{@站点名}-{@设备名}-{@变量名}越限报警",recoveryText:"{@站点名}-{@设备名}-{@变量名}报警恢复"},this.alarmDialogVisible=!0;break;case 1:this.editeLimitTemplate={thresholdId:"",thresholdName:"",contents:[{thresholdType:1,alarmParam1:"",alarmParam2:""},{thresholdType:2,alarmParam1:"",alarmParam2:""}]},this.limitDialogVisible=!0}},getAlarmTemplate:function(){var e=this;this.$axios({method:"get",url:"/web/alarm/queryAllAlarmTemplate"}).then(function(t){0==t.data.code&&(e.alarmTemplateData=t.data.info)})},alarmTemplateHandleEdit:function(e,t){this.editeAlarmTemplate=t,this.alarmDialogVisible=!0},alarmTemplateSave:function(e){var t=this;this.$refs.alarmDialogform.validate(function(i){var a;t.editeAlarmTemplate.templateId?(a="/web/alarm/updateAlarmTemplate",t.editeAlarmTemplate.updateCon=!!e):a="/web/alarm/addAlarmTemplate",t.$axios({method:"post",headers:{},url:a,data:t.editeAlarmTemplate}).then(function(i){switch(i.data.code){case 0:t.getAlarmTemplate(),t.alarmDialogVisible=!1,t.$showMessage("success","保存成功！");break;case 200:t.editeAlarmTemplate.templateId&&!e?t.$confirm(i.data.info,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.alarmTemplateSave(!0)}).catch(function(){}):t.$showMessage("error",i.data.msg);break;default:t.$showMessage("error",i.data.msg)}}).catch(function(e){t.$showMessage("error",e)})})},alarmTemplateHandleDelete:function(e,t,i){var a=this;this.$axios({method:"get",url:"/web/alarm/deleteAlarmTemplate",params:{templateId:t.templateId,deleCon:!!i}}).then(function(r){switch(r.data.code){case 0:for(var o in a.alarmTemplateData)if(a.alarmTemplateData[o].templateId==t.templateId){a.alarmTemplateData.splice(o,1);break}a.$showMessage("success","删除成功");break;case 200:i?a.$showMessage("error",r.data.msg):a.$confirm(r.data.info,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.alarmTemplateHandleDelete(e,t,!0)}).catch(function(){});break;default:a.$showMessage("error",r.data.msg)}}).catch(function(e){a.$showMessage("error",e)})},getLimitTemplate:function(){var e=this;this.limitTemplateData=[],this.$axios({method:"get",url:"/web/alarm/queryAllAlarmThreshold"}).then(function(t){0==t.data.code?e.limitTemplateData=t.data.info:e.$showMessage("error",t.data.msg)}).catch(function(t){e.$showMessage("error",t)})},limitTemplateHandleEdit:function(e,t){this.isNewTemplate=!1,this.editeLimitTemplate=t,this.limitDialogVisible=!0},addRowToLimitTemContent:function(){this.id++,this.editeLimitTemplate.content.push({id:this.id,alarmType:"",param1:"",param2:"",initialAlarmLevel:"",establishTime:"",spaceTime:"",cancelTime:""})},deleteRowsFromLimitTemContent:function(){var e=this.$refs.limtTemplateContentTable.store.states.selection;for(var t in e)this.editeLimitTemplate.content.splice(this.editeLimitTemplate.content.indexOf(e[t]),1)},limitTemplateSave:function(e){var t=this;if(0!=this.editeLimitTemplate.thresholdName.length){var i,a,r,o=!1;for(var n in this.editeLimitTemplate.contents){this.editeLimitTemplate.contents[n]=Object.assign(this.editeLimitTemplate.contents[n],this.alarmDefaultParam);var s=this.editeLimitTemplate.contents[n];1==s.thresholdType&&(o=!0,s.alarmParam1&&(i=parseFloat(s.alarmParam1)-(s.alarmParam2?parseFloat(s.alarmParam2):0))),2==s.thresholdType&&(o=!0,s.alarmParam1&&(a=parseFloat(s.alarmParam1)+(s.alarmParam2?parseFloat(s.alarmParam2):0)))}if(o){if(this.editeLimitTemplate.contents[0].thresholdType==this.editeLimitTemplate.contents[1].thresholdType)return void this.$showMessage("warning","aio报警类型不能相同");if(!i&&!a)return void this.$showMessage("warning","请至少输入一个报警限值");if(i&&a&&i<=a)return void this.$showMessage("warning","上限下阈值必须大于下限上阈值")}else if(0==this.editeLimitTemplate.contents[0].alarmParam1.length)return void this.$showMessage("warning","报警限值不能为空");this.editeLimitTemplate.thresholdId?(r="/web/alarm/updateAlarmThreshold",this.editeLimitTemplate.updateCon=!!e):r="/web/alarm/addAlarmThreshold",this.$axios({method:"post",headers:{},url:r,data:this.editeLimitTemplate}).then(function(e){switch(e.data.code){case 0:t.$showMessage("success",e.data.info),t.limitDialogVisible=!1,t.getLimitTemplate();break;case 200:t.$confirm(e.data.info,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.limitTemplateSave(!0)}).catch(function(){});break;default:t.$showMessage("error",e.data.msg)}}).catch(function(e){t.$showMessage("error",e)})}else this.$showMessage("warning","模板名不能为空")},limitTemplateHandleDelete:function(e,t,i){var a=this;this.$axios({method:"get",url:"/web/alarm/deleteAlarmThreshold",params:{thresholdId:t.thresholdId,deleCon:!!i}}).then(function(i){switch(i.data.code){case 0:a.limitTemplateData.splice(a.limitTemplateData.indexOf(t),1),a.$showMessage("success",i.data.info);break;case 200:a.$confirm(i.data.info,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.limitTemplateHandleDelete(e,t,!0)}).catch(function(){});break;default:a.$showMessage("error",i.data.msg)}}).catch(function(e){a.$showMessage("error",e)})},limitAlarmTypeChanged:function(e){3==e&&(this.editeLimitTemplate.contents=[{thresholdType:3,alarmParam1:"",alarmParam2:""}]),e<3&&(this.editeLimitTemplate.contents.length>1?this.editeLimitTemplate.contents[0].thresholdType==this.editeLimitTemplate.contents[1].thresholdType&&this.$showMessage("warning","aio类型不能相同"):this.editeLimitTemplate.contents=[{thresholdType:1,alarmParam1:"",alarmParam2:""},{thresholdType:2,alarmParam1:"",alarmParam2:""}])},getLimitType:function(){var e=this;this.$axios({method:"get",url:"/web/alarm/queryAlarmThresholdType"}).then(function(t){var i=t.data;if(0==i.code){var a=i.info;for(var r in e.limitTypeArr=[],a)e.limitTypeArr.push({value:parseInt(r),name:a[r]})}})},getAlarmDefaultParam:function(){var e=this;this.$axios({method:"get",url:"/web/var/getDefaultArarmTime"}).then(function(t){var i=t.data;if(0==i.code){var a=i.info;e.alarmDefaultParam={alarmLevel:a.defaultAlarmIntervalTime,alarmSetupTime:a.defaultAlarmSetupTime,alarmIntervalTime:a.defaultAlarmIntervalTime,alarmCancelTime:a.defaultAlarmCancelTime,alarmReminderTime:a.defaultAlarmReminderTime}}})},isFloor:function(e,t){var i=e.target.value;if(-1!=i.indexOf(".")){var a=i.substr(i.indexOf(".")+1);-1!=a.indexOf(".")&&(i=i.substr(0,i.indexOf(".")+a.indexOf(".")+1))}e.target.value=i.replace(/[^\d^\.]+/g,"")},isFloors:function(){var e=event.target,t=e.value.charAt(0);e.value=e.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".").replace(/[^\d.]/g,"").replace(/^\./g,"").replace(/([0-9]+\.[0-9]{2})[0-9]*/,"$1"),"-"==t&&(e.value="-"+e.value)},getTableHeight:function(){this.tableHeight=window.getComputedStyle(this.$refs.tableDiv).height.split("px")[0]-18-35},handleSizeChange:function(e){this.alarmPageSize=e},handleCurrentChange:function(e){this.alarmCurrentPage=e},limitHandleSizeChange:function(e){this.limitPageSize=e},limitHandleCurrentChange:function(e){this.limitCurrentPage=e}}},r=(i("73a7"),i("5d22")),o=Object(r.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"alarm"},[i("div",{staticClass:"leftDiv"},[i("ul",{staticClass:"leftUl"},e._l(e.leftList,function(t,a){return i("li",{key:a,staticClass:"leftLi",class:t.selected?"active":"",on:{click:function(t){return e.leftLiClick(a)}}},[e._v(" "+e._s(t.name)+" ")])}),0)]),i("div",{staticClass:"rightDiv"},[i("div",{staticClass:"headDiv"},[i("p",{staticClass:"title",staticStyle:{"margin-left":"0"}},[e._v(" "+e._s(e.leftList[0].selected?e.leftList[0].name:e.leftList[1].name)+" ")]),i("el-button",{staticStyle:{height:"0.45rem"},attrs:{type:"primary"},on:{click:function(t){return e.addTemplate()}}},[e._v("+添加模板")])],1),i("div",{ref:"tableDiv",staticClass:"tableDiv",class:e.leftList[0].selected?"displayBlock":"displayNone"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.alarmTemplateData,stripe:"",height:e.tableHeight}},[i("el-table-column",{attrs:{align:"center",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.templateName))]}}])}),i("el-table-column",{attrs:{align:"center",label:"报警文本"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.alarmText))]}}])}),i("el-table-column",{attrs:{align:"center",label:"报警恢复文本"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.recoveryText))]}}])}),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.alarmTemplateHandleEdit(t.$index,t.row)}}},[e._v("编辑")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.alarmTemplateHandleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),i("div",{staticClass:"tableDiv",class:e.leftList[1].selected?"displayBlock":"displayNone"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.limitTemplateData,stripe:"",height:e.tableHeight}},[i("el-table-column",{attrs:{type:"index",width:"100",align:"center",label:"序号"}}),i("el-table-column",{attrs:{align:"center",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.thresholdName))]}}])}),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.limitTemplateHandleEdit(t.$index,t.row)}}},[e._v("编辑")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.limitTemplateHandleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1)]),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"报警模板",visible:e.alarmDialogVisible,width:"32%","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.alarmDialogVisible=t}}},[i("div",{staticClass:"alarmDialogContent"},[i("el-form",{ref:"alarmDialogform",attrs:{model:e.editeAlarmTemplate,rules:e.editAlarmFormRules,"label-width":"110px","label-position":"left"}},[i("el-form-item",{attrs:{label:"模板名称",prop:"templateName"}},[i("div",{staticStyle:{display:"flex"}},[i("el-input",{model:{value:e.editeAlarmTemplate.templateName,callback:function(t){e.$set(e.editeAlarmTemplate,"templateName",t)},expression:"editeAlarmTemplate.templateName"}})],1)]),i("el-form-item",{attrs:{label:"报警文本",prop:"alarmText"}},[i("div",{staticStyle:{display:"flex"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editeAlarmTemplate.alarmText,expression:"editeAlarmTemplate.alarmText"}],staticClass:"textArea",domProps:{value:e.editeAlarmTemplate.alarmText},on:{input:function(t){t.target.composing||e.$set(e.editeAlarmTemplate,"alarmText",t.target.value)}}})])]),i("el-form-item",{attrs:{label:"报警恢复文本",prop:"recoveryText"}},[i("div",{staticStyle:{display:"flex"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editeAlarmTemplate.recoveryText,expression:"editeAlarmTemplate.recoveryText"}],staticClass:"textArea",domProps:{value:e.editeAlarmTemplate.recoveryText},on:{input:function(t){t.target.composing||e.$set(e.editeAlarmTemplate,"recoveryText",t.target.value)}}})])])],1)],1),i("div",{staticStyle:{flex:"0.1",padding:"5px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.alarmDialogVisible=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.alarmTemplateSave()}}},[e._v("保存")])],1)]),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"报警限值模板",visible:e.limitDialogVisible,width:"36%","close-on-click-modal":!1},on:{"update:visible":function(t){e.limitDialogVisible=t}}},[i("div",{staticClass:"alarmDialogContent",staticStyle:{height:"400px","flex-direction":"column","padding-top":"0"}},[i("div",{staticClass:"limitEditHead"},[i("div",{staticStyle:{display:"flex",flex:"0.5","align-items":"center"}},[i("label",{staticStyle:{width:"30%"}},[e._v("模板名称：")]),i("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入模板名称"},model:{value:e.editeLimitTemplate.thresholdName,callback:function(t){e.$set(e.editeLimitTemplate,"thresholdName",t)},expression:"editeLimitTemplate.thresholdName"}})],1),i("div",{staticStyle:{display:"flex",flex:"0.5","align-items":"center","justify-content":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.limitTemplateSave()}}},[e._v("保存模板")])],1)]),i("div",{staticClass:"limitEditContent"},[i("el-table",{ref:"limtTemplateContentTable",staticStyle:{width:"100%"},attrs:{data:e.editeLimitTemplate.contents,border:""}},[i("el-table-column",{attrs:{align:"center",label:"限值类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{on:{change:e.limitAlarmTypeChanged},model:{value:t.row.thresholdType,callback:function(i){e.$set(t.row,"thresholdType",i)},expression:"scope.row.thresholdType"}},e._l(e.limitTypeArr,function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)]}}])}),e.editeLimitTemplate.contents[0].thresholdType<3?i("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("div",{staticStyle:{display:"flex","justify-content":"center"}},[i("label",[e._v("报警限值")]),i("el-popover",{attrs:{trigger:"hover",placement:"top"}},[i("p",[e._v("aio-上限报警：上限报警限值")]),i("p",[e._v("aio-下限报警：下限报警限值")]),i("p",[e._v("上限和下限至少填一个")]),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v(" "),i("i",{staticClass:"el-popconfirm__icon el-icon-question"})])])],1)]}},{key:"default",fn:function(t){return[i("el-input",{attrs:{type:"text"},nativeOn:{keyup:function(t){return e.isFloors(t)}},model:{value:t.row.alarmParam1,callback:function(i){e.$set(t.row,"alarmParam1",i)},expression:"scope.row.alarmParam1"}})]}}],null,!1,2045184069)}):e._e(),e.editeLimitTemplate.contents[0].thresholdType<3?i("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("div",{staticStyle:{display:"flex","justify-content":"center"}},[i("label",[e._v("回差")]),e._v(" "),i("el-popover",{attrs:{trigger:"hover",placement:"top"}},[i("p",[e._v("必须为非负数，可不填")]),i("p",[e._v("上限值-回差>下限值+回差")]),i("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[i("i",{staticClass:"el-popconfirm__icon el-icon-question"})])])],1)]}},{key:"default",fn:function(t){return[i("el-input",{attrs:{type:"text"},nativeOn:{keyup:function(t){return e.isFloor(t)}},model:{value:t.row.alarmParam2,callback:function(i){e.$set(t.row,"alarmParam2",i)},expression:"scope.row.alarmParam2"}})]}}],null,!1,2329876014)}):e._e(),3==e.editeLimitTemplate.contents[0].thresholdType?i("el-table-column",{attrs:{align:"center",label:"报警限值"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{attrs:{type:"text"},nativeOn:{keyup:function(t){return e.isFloors(t)}},model:{value:t.row.alarmParam1,callback:function(i){e.$set(t.row,"alarmParam1",i)},expression:"scope.row.alarmParam1"}})]}}],null,!1,2293227692)}):e._e()],1)],1)])])],1)},[],!1,null,null,null);t.default=o.exports},"0ab3":function(e,t,i){},"0d74":function(e,t,i){"use strict";i("6ad6")},"13cb":function(e,t,i){},"18b8":function(e,t,i){"use strict";i.r(t);var a=i("6abc"),r=(i("1d43"),i("5b12"),i("9b5f"),i("bf2f"),i("e3b5"),i("3de1")),o={data:function(){return{fullscreenLoading:!1,isOrgFirst:!0,companyList:[],organizeList:[],addItemGroup:[],currItem:{type:"1",name:"",parentName:"",id:0},oldCurrItem:{},filterText:"",orgdata:[],orgdataInfo:!0,defaultProps:{children:"children",label:"name"},saveAddItemBtnLoading:!1,modifyGroupNameLoading:!1}},mounted:function(){this.isOrgFirst=!0,this.queryGroupsProjects()},methods:{gtr:function(e,t){},prefixInteger:r.i,modifyGroupName:function(){var e=this;if(""!=this.currItem.name){var t=[{id:this.currItem.id,name:this.currItem.name,type:this.currItem.type}];this.modifyGroupNameLoading=!0,this.$axios({method:"post",headers:{},url:"/web/organize/updateOrganize",data:t}).then(function(t){var i=t.data;0==i.code?(Object(r.j)("success","修改成功！"),e.oldCurrItem.name=e.currItem.name):Object(r.j)("error",i.msg),e.modifyGroupNameLoading=!1}).catch(function(e){Object(r.j)("error",e)})}else this.$showMessage("error","名称不能为空")},allowDrag:function(e){return!0},modifyProjectInfo:function(){var e=this,t=this.currItem.id.split("-")[1],i={projectName:this.currItem.name,city:this.currItem.city,organizeId:this.currItem.organizeId,companyId:this.currItem.companyId,startTime:this.currItem.startTime,endTime:this.currItem.endTime,stationGuid:this.currItem.stationGuid,projectGroupId:this.currItem.pId,projectId:t};this.currItem.stationGuid||(i.stationGuid=""),this.fullscreenLoading=!0,this.$axios({method:"post",headers:{},url:"/web/project/updateProject",data:i}).then(function(t){e.fullscreenLoading=!1;var i=t.data;0==i.code?(Object(r.j)("success","修改成功！"),e.oldCurrItem.name=e.currItem.name,e.oldCurrItem.city=e.currItem.city,e.oldCurrItem.organizeId=e.currItem.organizeId,e.oldCurrItem.companyId=e.currItem.companyId,e.oldCurrItem.startTime=e.currItem.startTime,e.oldCurrItem.endTime=e.currItem.endTime,e.oldCurrItem.stationGuid=e.currItem.stationGuid):Object(r.j)("error",i.msg)}).catch(function(t){Object(r.j)("error",t),e.fullscreenLoading=!1})},queryOrganize:function(){var e=this;this.$axios({method:"get",headers:{},url:"/web/organize/queryOrganize",data:{}}).then(function(t){var i=t.data;if(e.companyList=[],e.organizeList=[],0==i.code)for(var a=i.info,r=0;r<a.length;r++)1==a[r].type?e.companyList.push(a[r]):e.organizeList.push(a[r])}).catch(function(t){e.$showMessage("error",t)})},changeProjectItem:function(e){for(var t=[],i=0;i<this.organizeList.length;i++){var a=this.organizeList[i];a.pId==e.id&&t.push(a)}t.length>0?e.organizeId=t[0].id:e.organizeId=""},handleNodeClick:function(e,t){var i=t.parent.data.name;this.oldCurrItem=e,this.oldCurrItem.parentName=i,this.addItemGroup=[],this.currItem=Object(a.a)({},this.oldCurrItem)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},remove:function(e,t){var i=this,a={ids:t.id};t.children?Object(r.j)("error","存在子集不能删除"):this.$axios({method:"get",headers:{},url:"/web/organize/delOrganize",params:a}).then(function(e){var t=e.data;0==t.code?(Object(r.j)("success","删除成功！"),i.queryGroupsProjects()):Object(r.j)("error",t.msg)}).catch(function(e){Object(r.j)("error",e)})},getArrList:function(e){for(var t=[],i=0;i<this.organizeList.length;i++)this.organizeList[i].pId==e&&t.push(this.organizeList[i]);return t},removeAddItem:function(e){var t=e-1;this.addItemGroup.splice(t,1)},defaultAddOrgItem:function(){var e={itemName:"",type:1,city:"",organizeId:0,companyId:0,startTime:(new Date).getTime(),endTime:(new Date).getTime(),stationGuid:"",projectGroupId:""};this.addItemGroup.push(e)},queryGroupsProjects:function(){var e=this;this.$axios({method:"get",headers:{},url:"/web/organize/queryOrganize",data:{}}).then(function(t){var i=t.data;if(0==i.code){for(var a=0;a<i.info.length;a++)1==i.info[a].type?i.info[a].biaoqian="el-tree-city":i.info[a].biaoqian="el-tree-project";e.orgdata=Object(r.a)(i.info)}else Object(r.j)("error",i.msg)}).catch(function(t){Object(r.j)("error",t),e.orgdata=[],e.oldCurrItem={}})},saveAddItemBtn:function(){var e=this;if(0!=this.addItemGroup.length){var t=[];for(var i in this.addItemGroup){var a=this.addItemGroup[i];if(""==a.itemName){var o=i-0+1;return void Object(r.j)("warning","第"+o+"行名字不能为空")}var n={name:a.itemName,pId:this.currItem.id,type:a.type};t.push(n)}this.saveAddItemBtnLoading=!0,this.$axios({method:"post",headers:{},url:"/web/organize/addOrganize",data:t}).then(function(t){var i=t.data;0==i.code?(e.queryGroupsProjects(),Object(r.j)("success","添加项目成功！"),e.addItemGroup=[]):Object(r.j)("error",i.msg),e.saveAddItemBtnLoading=!1}).catch(function(e){Object(r.j)("error",e)})}else Object(r.j)("warning","你没有新添项！")}},watch:{filterText:function(e){this.$refs.orgTree.filter(e)}}},n=(i("56b7"),i("5d22")),s=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"structure"},[i("div",{staticClass:"left-div"},[i("div",{staticClass:"top-search"},[i("span",{staticClass:"el-icon-search"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.filterText,expression:"filterText"}],attrs:{type:"text",placeholder:"搜索站点"},domProps:{value:e.filterText},on:{input:function(t){t.target.composing||(e.filterText=t.target.value)}}})]),i("div",{staticClass:"bottom-content tree-container"},[i("el-tree",{ref:"orgTree",staticClass:"tree",attrs:{data:e.orgdata,props:e.defaultProps,"node-key":"id","default-expanded-keys":[1],"highlight-current":"","filter-node-method":e.filterNode,"allow-drag":e.allowDrag},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,r=t.data;return i("span",{staticClass:"custom-tree-node"},[i("span",{on:{click:function(t){return e.gtr(a,r)}}},[i("i",{class:r.biaoqian}),e._v(" "+e._s(a.label)+" "),0==a.childNodes.length?[i("el-popconfirm",{attrs:{icon:"el-icon-info",iconColor:"red",title:"确定删除吗？"},on:{confirm:function(t){return e.remove(a,r)},onConfirm:function(t){return e.remove(a,r)}}},[i("el-button",{staticClass:"del-icon",attrs:{slot:"reference",plain:"",icon:"el-icon-delete-solid"},slot:"reference"})],1)]:e._e()],2)])}}])})],1)]),i("div",{staticClass:"right-div"},[i("div",{staticClass:"right-bottom-div add-item-div"},[i("div",{staticStyle:{height:"175px"}},[i("li",{staticStyle:{"margin-top":"10px"}},[i("label",{attrs:{for:""}},[e._v("组织名称：")]),i("el-input",{staticClass:"big-input",attrs:{type:"text",readonly:0==e.currItem.id},model:{value:e.currItem.name,callback:function(t){e.$set(e.currItem,"name",t)},expression:"currItem.name"}}),0!=e.currItem.id?i("el-button",{staticClass:"add-button",attrs:{loading:e.modifyGroupNameLoading},on:{click:function(t){return e.modifyGroupName()}}},[e._v("修改")]):e._e()],1),i("li",[i("label",{attrs:{for:""}},[e._v("上级部门：")]),i("span",{staticClass:"superior"},[e._v(e._s(e.currItem.parentName))])]),1==e.currItem.type||-1==e.currItem.type?i("li",[i("label",{attrs:{for:""}},[e._v("下级部门：")]),i("el-button",{staticClass:"add-button",on:{click:function(t){return e.defaultAddOrgItem()}}},[e._v("增加+")])],1):e._e()]),i("div",{staticStyle:{flex:"1","overflow-y":"auto",height:"0"}},e._l(e.addItemGroup,function(t,a){return i("div",{key:t.id,staticClass:"add-org-div"},[i("span",{staticClass:"el-icon-close close-span",on:{click:function(t){return e.removeAddItem(a)}}}),i("li",[i("label",{staticStyle:{width:"50px"},attrs:{for:""}},[e._v(e._s(e.prefixInteger(a+1,2)))]),i("label",{staticStyle:{"text-align":"center"},attrs:{for:""}},[e._v("名称")]),i("el-input",{staticClass:"big-input",attrs:{type:"text"},model:{value:t.itemName,callback:function(i){e.$set(t,"itemName","string"==typeof i?i.trim():i)},expression:"orgItem.itemName"}}),i("el-radio",{attrs:{label:1},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"orgItem.type"}},[e._v("公司")]),i("el-radio",{attrs:{label:2},model:{value:t.type,callback:function(i){e.$set(t,"type",i)},expression:"orgItem.type"}},[e._v("部门")])],1)])}),0),i("li",{staticClass:"button-div",staticStyle:{height:"50px"}},[0!=e.addItemGroup.length?i("el-button",{staticClass:"button",attrs:{loading:e.saveAddItemBtnLoading},on:{click:function(t){return e.saveAddItemBtn()}}},[e._v("确 定")]):e._e()],1)])])])},[],!1,null,null,null);t.default=s.exports},"198b":function(e,t,i){"use strict";i("1cf5")},"1a4e":function(e,t,i){},"1cf5":function(e,t,i){},2210:function(e,t,i){},"221e":function(e,t,i){},2380:function(e,t,i){},2480:function(e,t,i){"use strict";
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e}).apply(this,arguments)}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){r(e,t,i[t])})}return e}function s(e,t){if(null==e)return{};var i,a,r=function(e,t){if(null==e)return{};var i,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)i=o[a],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)i=o[a],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}i.r(t),i.d(t,"MultiDrag",function(){return wt}),i.d(t,"Sortable",function(){return Me}),i.d(t,"Swap",function(){return lt});function c(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var d=c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u=c(/Edge/i),h=c(/firefox/i),p=c(/safari/i)&&!c(/chrome/i)&&!c(/android/i),f=c(/iP(ad|od|hone)/i),m=c(/chrome/i)&&c(/android/i),g={capture:!1,passive:!1};function v(e,t,i){e.addEventListener(t,i,!d&&g)}function b(e,t,i){e.removeEventListener(t,i,!d&&g)}function w(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function y(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function C(e,t,i,a){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&w(e,t):w(e,t))||a&&e===i)return e;if(e===i)break}while(e=y(e))}return null}var S,x=/\s+/g;function D(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(x," ").replace(" "+t+" "," ");e.className=(a+(i?" "+t:"")).replace(x," ")}}function T(e,t,i){var a=e&&e.style;if(a){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in a||-1!==t.indexOf("webkit")||(t="-webkit-"+t),a[t]=i+("string"==typeof i?"":"px")}}function k(e,t){var i="";if("string"==typeof e)i=e;else do{var a=T(e,"transform");a&&"none"!==a&&(i=a+" "+i)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(i)}function _(e,t,i){if(e){var a=e.getElementsByTagName(t),r=0,o=a.length;if(i)for(;r<o;r++)i(a[r],r);return a}return[]}function I(){var e=document.scrollingElement;return e||document.documentElement}function P(e,t,i,a,r){if(e.getBoundingClientRect||e===window){var o,n,s,l,c,u,h;if(e!==window&&e!==I()?(n=(o=e.getBoundingClientRect()).top,s=o.left,l=o.bottom,c=o.right,u=o.height,h=o.width):(n=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(t||i)&&e!==window&&(r=r||e.parentNode,!d))do{if(r&&r.getBoundingClientRect&&("none"!==T(r,"transform")||i&&"static"!==T(r,"position"))){var p=r.getBoundingClientRect();n-=p.top+parseInt(T(r,"border-top-width")),s-=p.left+parseInt(T(r,"border-left-width")),l=n+o.height,c=s+o.width;break}}while(r=r.parentNode);if(a&&e!==window){var f=k(r||e),m=f&&f.a,g=f&&f.d;f&&(l=(n/=g)+(u/=g),c=(s/=m)+(h/=m))}return{top:n,left:s,bottom:l,right:c,width:h,height:u}}}function N(e,t,i){for(var a=A(e,!0),r=P(e)[t];a;){var o=P(a)[i];if(!("top"===i||"left"===i?r>=o:r<=o))return a;if(a===I())break;a=A(a,!1)}return!1}function V(e,t,i){for(var a=0,r=0,o=e.children;r<o.length;){if("none"!==o[r].style.display&&o[r]!==Me.ghost&&o[r]!==Me.dragged&&C(o[r],i.draggable,e,!1)){if(a===t)return o[r];a++}r++}return null}function L(e,t){for(var i=e.lastElementChild;i&&(i===Me.ghost||"none"===T(i,"display")||t&&!w(i,t));)i=i.previousElementSibling;return i||null}function $(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Me.clone||t&&!w(e,t)||i++;return i}function E(e){var t=0,i=0,a=I();if(e)do{var r=k(e),o=r.a,n=r.d;t+=e.scrollLeft*o,i+=e.scrollTop*n}while(e!==a&&(e=e.parentNode));return[t,i]}function A(e,t){if(!e||!e.getBoundingClientRect)return I();var i=e,a=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var r=T(i);if(i.clientWidth<i.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!i.getBoundingClientRect||i===document.body)return I();if(a||t)return i;a=!0}}}while(i=i.parentNode);return I()}function O(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function j(e,t){return function(){if(!S){var i=arguments;1===i.length?e.call(this,i[0]):e.apply(this,i),S=setTimeout(function(){S=void 0},t)}}}function F(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function B(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function M(e,t){T(e,"position","absolute"),T(e,"top",t.top),T(e,"left",t.left),T(e,"width",t.width),T(e,"height",t.height)}function z(e){T(e,"position",""),T(e,"top",""),T(e,"left",""),T(e,"width",""),T(e,"height","")}var G="Sortable"+(new Date).getTime();function R(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach(function(e){if("none"!==T(e,"display")&&e!==Me.ghost){t.push({target:e,rect:P(e)});var i=n({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=k(e,!0);a&&(i.top-=a.f,i.left-=a.e)}e.fromRect=i}})},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[i][a])return Number(i);return-1}(t,{target:e}),1)},animateAll:function(i){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof i&&i());var r=!1,o=0;t.forEach(function(e){var t=0,i=e.target,n=i.fromRect,s=P(i),l=i.prevFromRect,c=i.prevToRect,d=e.rect,u=k(i,!0);u&&(s.top-=u.f,s.left-=u.e),i.toRect=s,i.thisAnimationDuration&&O(l,s)&&!O(n,s)&&(d.top-s.top)/(d.left-s.left)==(n.top-s.top)/(n.left-s.left)&&(t=function(e,t,i,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*a.animation}(d,l,c,a.options)),O(s,n)||(i.prevFromRect=n,i.prevToRect=s,t||(t=a.options.animation),a.animate(i,d,s,t)),t&&(r=!0,o=Math.max(o,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},t),i.thisAnimationDuration=t)}),clearTimeout(e),r?e=setTimeout(function(){"function"==typeof i&&i()},o):"function"==typeof i&&i(),t=[]},animate:function(e,t,i,a){if(a){T(e,"transition",""),T(e,"transform","");var r=k(this.el),o=r&&r.a,n=r&&r.d,s=(t.left-i.left)/(o||1),l=(t.top-i.top)/(n||1);e.animatingX=!!s,e.animatingY=!!l,T(e,"transform","translate3d("+s+"px,"+l+"px,0)"),function(e){e.offsetWidth}(e),T(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),T(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){T(e,"transition",""),T(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},a)}}}}var U=[],H={initializeByDefault:!0},W={mount:function(e){for(var t in H)!H.hasOwnProperty(t)||t in e||(e[t]=H[t]);U.push(e)},pluginEvent:function(e,t,i){var a=this;this.eventCanceled=!1,i.cancel=function(){a.eventCanceled=!0};var r=e+"Global";U.forEach(function(a){t[a.pluginName]&&(t[a.pluginName][r]&&t[a.pluginName][r](n({sortable:t},i)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](n({sortable:t},i)))})},initializePlugins:function(e,t,i,a){for(var r in U.forEach(function(a){var r=a.pluginName;if(e.options[r]||a.initializeByDefault){var n=new a(e,t,e.options);n.sortable=e,n.options=e.options,e[r]=n,o(i,n.defaults)}}),e.options)if(e.options.hasOwnProperty(r)){var n=this.modifyOption(e,r,e.options[r]);void 0!==n&&(e.options[r]=n)}},getEventProperties:function(e,t){var i={};return U.forEach(function(a){"function"==typeof a.eventProperties&&o(i,a.eventProperties.call(t[a.pluginName],e))}),i},modifyOption:function(e,t,i){var a;return U.forEach(function(r){e[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[t]&&(a=r.optionListeners[t].call(e[r.pluginName],i))}),a}};function q(e){var t=e.sortable,i=e.rootEl,a=e.name,r=e.targetEl,o=e.cloneEl,s=e.toEl,l=e.fromEl,c=e.oldIndex,h=e.newIndex,p=e.oldDraggableIndex,f=e.newDraggableIndex,m=e.originalEvent,g=e.putSortable,v=e.extraEventProperties;if(t=t||i&&i[G]){var b,w=t.options,y="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||d||u?(b=document.createEvent("Event")).initEvent(a,!0,!0):b=new CustomEvent(a,{bubbles:!0,cancelable:!0}),b.to=s||i,b.from=l||i,b.item=r||i,b.clone=o,b.oldIndex=c,b.newIndex=h,b.oldDraggableIndex=p,b.newDraggableIndex=f,b.originalEvent=m,b.pullMode=g?g.lastPutMode:void 0;var C=n({},v,W.getEventProperties(a,t));for(var S in C)b[S]=C[S];i&&i.dispatchEvent(b),w[y]&&w[y].call(t,b)}}var J=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.evt,r=s(i,["evt"]);W.pluginEvent.bind(Me)(e,t,n({dragEl:Z,parentEl:K,ghostEl:Y,rootEl:Q,nextEl:ee,lastDownEl:te,cloneEl:ie,cloneHidden:ae,dragStarted:ge,putSortable:ce,activeSortable:Me.active,originalEvent:a,oldIndex:re,oldDraggableIndex:ne,newIndex:oe,newDraggableIndex:se,hideGhostForTarget:Oe,unhideGhostForTarget:je,cloneNowHidden:function(){ae=!0},cloneNowShown:function(){ae=!1},dispatchSortableEvent:function(e){X({sortable:t,name:e,originalEvent:a})}},r))};function X(e){q(n({putSortable:ce,cloneEl:ie,targetEl:Z,rootEl:Q,oldIndex:re,oldDraggableIndex:ne,newIndex:oe,newDraggableIndex:se},e))}var Z,K,Y,Q,ee,te,ie,ae,re,oe,ne,se,le,ce,de,ue,he,pe,fe,me,ge,ve,be,we,ye,Ce=!1,Se=!1,xe=[],De=!1,Te=!1,ke=[],_e=!1,Ie=[],Pe="undefined"!=typeof document,Ne=f,Ve=u||d?"cssFloat":"float",Le=Pe&&!m&&!f&&"draggable"in document.createElement("div"),$e=function(){if(Pe){if(d)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ee=function(e,t){var i=T(e),a=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),r=V(e,0,t),o=V(e,1,t),n=r&&T(r),s=o&&T(o),l=n&&parseInt(n.marginLeft)+parseInt(n.marginRight)+P(r).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+P(o).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&n.float&&"none"!==n.float){var d="left"===n.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==d?"horizontal":"vertical"}return r&&("block"===n.display||"flex"===n.display||"table"===n.display||"grid"===n.display||l>=a&&"none"===i[Ve]||o&&"none"===i[Ve]&&l+c>a)?"vertical":"horizontal"},Ae=function(e){function t(e,i){return function(a,r,o,n){var s=a.options.group.name&&r.options.group.name&&a.options.group.name===r.options.group.name;if(null==e&&(i||s))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"==typeof e)return t(e(a,r,o,n),i)(a,r,o,n);var l=(i?a:r).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var i={},r=e.group;r&&"object"==a(r)||(r={name:r}),i.name=r.name,i.checkPull=t(r.pull,!0),i.checkPut=t(r.put),i.revertClone=r.revertClone,e.group=i},Oe=function(){!$e&&Y&&T(Y,"display","none")},je=function(){!$e&&Y&&T(Y,"display","")};Pe&&document.addEventListener("click",function(e){if(Se)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Se=!1,!1},!0);var Fe=function(e){if(Z){e=e.touches?e.touches[0]:e;var t=(r=e.clientX,o=e.clientY,xe.some(function(e){if(!L(e)){var t=P(e),i=e[G].options.emptyInsertThreshold,a=r>=t.left-i&&r<=t.right+i,s=o>=t.top-i&&o<=t.bottom+i;return i&&a&&s?n=e:void 0}}),n);if(t){var i={};for(var a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[G]._onDragOver(i)}}var r,o,n},Be=function(e){Z&&Z.parentNode[G]._isOutsideThisEl(e.target)};function Me(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=o({},t),e[G]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ee(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Me.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var a in W.initializePlugins(this,e,i),i)!(a in t)&&(t[a]=i[a]);for(var r in Ae(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Le,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?v(e,"pointerdown",this._onTapStart):(v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),xe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),o(this,R())}function ze(e,t,i,a,r,o,n,s){var l,c,h=e[G],p=h.options.onMove;return!window.CustomEvent||d||u?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=a,l.related=r||t,l.relatedRect=o||P(t),l.willInsertAfter=s,l.originalEvent=n,e.dispatchEvent(l),p&&(c=p.call(h,l,n)),c}function Ge(e){e.draggable=!1}function Re(){_e=!1}function Ue(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,a=0;i--;)a+=t.charCodeAt(i);return a.toString(36)}function He(e){return setTimeout(e,0)}function We(e){return clearTimeout(e)}Me.prototype={constructor:Me,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ve=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Z):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,a=this.options,r=a.preventOnFilter,o=e.type,n=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(n||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=a.filter;if(function(e){Ie.length=0;var t=e.getElementsByTagName("input"),i=t.length;for(;i--;){var a=t[i];a.checked&&Ie.push(a)}}(i),!Z&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||a.disabled||l.isContentEditable||(s=C(s,a.draggable,i,!1))&&s.animated||te===s)){if(re=$(s),ne=$(s,a.draggable),"function"==typeof c){if(c.call(this,e,s,this))return X({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:i,fromEl:i}),J("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some(function(a){if(a=C(l,a.trim(),i,!1))return X({sortable:t,rootEl:a,name:"filter",targetEl:s,fromEl:i,toEl:i}),J("filter",t,{evt:e}),!0})))return void(r&&e.cancelable&&e.preventDefault());a.handle&&!C(l,a.handle,i,!1)||this._prepareDragStart(e,n,s)}}},_prepareDragStart:function(e,t,i){var a,r=this,o=r.el,n=r.options,s=o.ownerDocument;if(i&&!Z&&i.parentNode===o){var l=P(i);if(Q=o,K=(Z=i).parentNode,ee=Z.nextSibling,te=i,le=n.group,Me.dragged=Z,de={target:Z,clientX:(t||e).clientX,clientY:(t||e).clientY},fe=de.clientX-l.left,me=de.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Z.style["will-change"]="all",a=function(){J("delayEnded",r,{evt:e}),Me.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!h&&r.nativeDraggable&&(Z.draggable=!0),r._triggerDragStart(e,t),X({sortable:r,name:"choose",originalEvent:e}),D(Z,n.chosenClass,!0))},n.ignore.split(",").forEach(function(e){_(Z,e.trim(),Ge)}),v(s,"dragover",Fe),v(s,"mousemove",Fe),v(s,"touchmove",Fe),v(s,"mouseup",r._onDrop),v(s,"touchend",r._onDrop),v(s,"touchcancel",r._onDrop),h&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Z.draggable=!0),J("delayStart",this,{evt:e}),!n.delay||n.delayOnTouchOnly&&!t||this.nativeDraggable&&(u||d))a();else{if(Me.eventCanceled)return void this._onDrop();v(s,"mouseup",r._disableDelayedDrag),v(s,"touchend",r._disableDelayedDrag),v(s,"touchcancel",r._disableDelayedDrag),v(s,"mousemove",r._delayedDragTouchMoveHandler),v(s,"touchmove",r._delayedDragTouchMoveHandler),n.supportPointer&&v(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(a,n.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Z&&Ge(Z),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._disableDelayedDrag),b(e,"touchend",this._disableDelayedDrag),b(e,"touchcancel",this._disableDelayedDrag),b(e,"mousemove",this._delayedDragTouchMoveHandler),b(e,"touchmove",this._delayedDragTouchMoveHandler),b(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?v(document,"pointermove",this._onTouchMove):v(document,t?"touchmove":"mousemove",this._onTouchMove):(v(Z,"dragend",this),v(Q,"dragstart",this._onDragStart));try{document.selection?He(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(Ce=!1,Q&&Z){J("dragStarted",this,{evt:t}),this.nativeDraggable&&v(document,"dragover",Be);var i=this.options;!e&&D(Z,i.dragClass,!1),D(Z,i.ghostClass,!0),Me.active=this,e&&this._appendGhost(),X({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ue){this._lastX=ue.clientX,this._lastY=ue.clientY,Oe();for(var e=document.elementFromPoint(ue.clientX,ue.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ue.clientX,ue.clientY))!==t;)t=e;if(Z.parentNode[G]._isOutsideThisEl(e),t)do{if(t[G]){if(t[G]._onDragOver({clientX:ue.clientX,clientY:ue.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);je()}},_onTouchMove:function(e){if(de){var t=this.options,i=t.fallbackTolerance,a=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=Y&&k(Y,!0),n=Y&&o&&o.a,s=Y&&o&&o.d,l=Ne&&ye&&E(ye),c=(r.clientX-de.clientX+a.x)/(n||1)+(l?l[0]-ke[0]:0)/(n||1),d=(r.clientY-de.clientY+a.y)/(s||1)+(l?l[1]-ke[1]:0)/(s||1);if(!Me.active&&!Ce){if(i&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(Y){o?(o.e+=c-(he||0),o.f+=d-(pe||0)):o={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");T(Y,"webkitTransform",u),T(Y,"mozTransform",u),T(Y,"msTransform",u),T(Y,"transform",u),he=c,pe=d,ue=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Y){var e=this.options.fallbackOnBody?document.body:Q,t=P(Z,!0,Ne,!0,e),i=this.options;if(Ne){for(ye=e;"static"===T(ye,"position")&&"none"===T(ye,"transform")&&ye!==document;)ye=ye.parentNode;ye!==document.body&&ye!==document.documentElement?(ye===document&&(ye=I()),t.top+=ye.scrollTop,t.left+=ye.scrollLeft):ye=I(),ke=E(ye)}D(Y=Z.cloneNode(!0),i.ghostClass,!1),D(Y,i.fallbackClass,!0),D(Y,i.dragClass,!0),T(Y,"transition",""),T(Y,"transform",""),T(Y,"box-sizing","border-box"),T(Y,"margin",0),T(Y,"top",t.top),T(Y,"left",t.left),T(Y,"width",t.width),T(Y,"height",t.height),T(Y,"opacity","0.8"),T(Y,"position",Ne?"absolute":"fixed"),T(Y,"zIndex","100000"),T(Y,"pointerEvents","none"),Me.ghost=Y,e.appendChild(Y),T(Y,"transform-origin",fe/parseInt(Y.style.width)*100+"% "+me/parseInt(Y.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,a=e.dataTransfer,r=i.options;J("dragStart",this,{evt:e}),Me.eventCanceled?this._onDrop():(J("setupClone",this),Me.eventCanceled||((ie=B(Z)).draggable=!1,ie.style["will-change"]="",this._hideClone(),D(ie,this.options.chosenClass,!1),Me.clone=ie),i.cloneId=He(function(){J("clone",i),Me.eventCanceled||(i.options.removeCloneOnHide||Q.insertBefore(ie,Z),i._hideClone(),X({sortable:i,name:"clone"}))}),!t&&D(Z,r.dragClass,!0),t?(Se=!0,i._loopId=setInterval(i._emulateDragOver,50)):(b(document,"mouseup",i._onDrop),b(document,"touchend",i._onDrop),b(document,"touchcancel",i._onDrop),a&&(a.effectAllowed="move",r.setData&&r.setData.call(i,a,Z)),v(document,"drop",i),T(Z,"transform","translateZ(0)")),Ce=!0,i._dragStartId=He(i._dragStarted.bind(i,t,e)),v(document,"selectstart",i),ge=!0,p&&T(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,a,r,o=this.el,s=e.target,l=this.options,c=l.group,d=Me.active,u=le===c,h=l.sort,p=ce||d,f=this,m=!1;if(!_e){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=C(s,l.draggable,o,!0),O("dragOver"),Me.eventCanceled)return m;if(Z.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return B(!1);if(Se=!1,d&&!l.disabled&&(u?h||(a=!Q.contains(Z)):ce===this||(this.lastPutMode=le.checkPull(this,d,Z,e))&&c.checkPut(this,d,Z,e))){if(r="vertical"===this._getDirection(e,s),t=P(Z),O("dragOverValid"),Me.eventCanceled)return m;if(a)return K=Q,j(),this._hideClone(),O("revert"),Me.eventCanceled||(ee?Q.insertBefore(Z,ee):Q.appendChild(Z)),B(!0);var g=L(o,l.draggable);if(!g||function(e,t,i){var a=P(L(i.el,i.options.draggable));return t?e.clientX>a.right+10||e.clientX<=a.right&&e.clientY>a.bottom&&e.clientX>=a.left:e.clientX>a.right&&e.clientY>a.top||e.clientX<=a.right&&e.clientY>a.bottom+10}(e,r,this)&&!g.animated){if(g===Z)return B(!1);if(g&&o===e.target&&(s=g),s&&(i=P(s)),!1!==ze(Q,o,Z,t,s,i,e,!!s))return j(),o.appendChild(Z),K=o,M(),B(!0)}else if(s.parentNode===o){i=P(s);var v,b,w,y=Z.parentNode!==o,S=!function(e,t,i){var a=i?e.left:e.top,r=i?e.right:e.bottom,o=i?e.width:e.height,n=i?t.left:t.top,s=i?t.right:t.bottom,l=i?t.width:t.height;return a===n||r===s||a+o/2===n+l/2}(Z.animated&&Z.toRect||t,s.animated&&s.toRect||i,r),x=r?"top":"left",k=N(s,"top","top")||N(Z,"top","top"),_=k?k.scrollTop:void 0;if(ve!==s&&(b=i[x],De=!1,Te=!S&&l.invertSwap||y),0!==(v=function(e,t,i,a,r,o,n,s){var l=a?e.clientY:e.clientX,c=a?i.height:i.width,d=a?i.top:i.left,u=a?i.bottom:i.right,h=!1;if(!n)if(s&&we<c*r){if(!De&&(1===be?l>d+c*o/2:l<u-c*o/2)&&(De=!0),De)h=!0;else if(1===be?l<d+we:l>u-we)return-be}else if(l>d+c*(1-r)/2&&l<u-c*(1-r)/2)return function(e){return $(Z)<$(e)?1:-1}(t);if((h=h||n)&&(l<d+c*o/2||l>u-c*o/2))return l>d+c/2?1:-1;return 0}(e,s,i,r,S?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Te,ve===s))){var I=$(Z);do{I-=v,w=K.children[I]}while(w&&("none"===T(w,"display")||w===Y))}if(0===v||w===s)return B(!1);ve=s,be=v;var V=s.nextElementSibling,E=!1,A=ze(Q,o,Z,t,s,i,e,E=1===v);if(!1!==A)return 1!==A&&-1!==A||(E=1===A),_e=!0,setTimeout(Re,30),j(),E&&!V?o.appendChild(Z):s.parentNode.insertBefore(Z,E?V:s),k&&F(k,0,_-k.scrollTop),K=Z.parentNode,void 0===b||Te||(we=Math.abs(b-P(s)[x])),M(),B(!0)}if(o.contains(Z))return B(!1)}return!1}function O(l,c){J(l,f,n({evt:e,isOwner:u,axis:r?"vertical":"horizontal",revert:a,dragRect:t,targetRect:i,canSort:h,fromSortable:p,target:s,completed:B,onMove:function(i,a){return ze(Q,o,Z,t,i,P(i),e,a)},changed:M},c))}function j(){O("dragOverAnimationCapture"),f.captureAnimationState(),f!==p&&p.captureAnimationState()}function B(t){return O("dragOverCompleted",{insertion:t}),t&&(u?d._hideClone():d._showClone(f),f!==p&&(D(Z,ce?ce.options.ghostClass:d.options.ghostClass,!1),D(Z,l.ghostClass,!0)),ce!==f&&f!==Me.active?ce=f:f===Me.active&&ce&&(ce=null),p===f&&(f._ignoreWhileAnimating=s),f.animateAll(function(){O("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(s===Z&&!Z.animated||s===o&&!s.animated)&&(ve=null),l.dragoverBubble||e.rootEl||s===document||(Z.parentNode[G]._isOutsideThisEl(e.target),!t&&Fe(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function M(){oe=$(Z),se=$(Z,l.draggable),X({sortable:f,name:"change",toEl:o,newIndex:oe,newDraggableIndex:se,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",Fe),b(document,"mousemove",Fe),b(document,"touchmove",Fe)},_offUpEvents:function(){var e=this.el.ownerDocument;b(e,"mouseup",this._onDrop),b(e,"touchend",this._onDrop),b(e,"pointerup",this._onDrop),b(e,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;oe=$(Z),se=$(Z,i.draggable),J("drop",this,{evt:e}),K=Z&&Z.parentNode,oe=$(Z),se=$(Z,i.draggable),Me.eventCanceled?this._nulling():(Ce=!1,Te=!1,De=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),We(this.cloneId),We(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),p&&T(document.body,"user-select",""),T(Z,"transform",""),e&&(ge&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),Y&&Y.parentNode&&Y.parentNode.removeChild(Y),(Q===K||ce&&"clone"!==ce.lastPutMode)&&ie&&ie.parentNode&&ie.parentNode.removeChild(ie),Z&&(this.nativeDraggable&&b(Z,"dragend",this),Ge(Z),Z.style["will-change"]="",ge&&!Ce&&D(Z,ce?ce.options.ghostClass:this.options.ghostClass,!1),D(Z,this.options.chosenClass,!1),X({sortable:this,name:"unchoose",toEl:K,newIndex:null,newDraggableIndex:null,originalEvent:e}),Q!==K?(oe>=0&&(X({rootEl:K,name:"add",toEl:K,fromEl:Q,originalEvent:e}),X({sortable:this,name:"remove",toEl:K,originalEvent:e}),X({rootEl:K,name:"sort",toEl:K,fromEl:Q,originalEvent:e}),X({sortable:this,name:"sort",toEl:K,originalEvent:e})),ce&&ce.save()):oe!==re&&oe>=0&&(X({sortable:this,name:"update",toEl:K,originalEvent:e}),X({sortable:this,name:"sort",toEl:K,originalEvent:e})),Me.active&&(null!=oe&&-1!==oe||(oe=re,se=ne),X({sortable:this,name:"end",toEl:K,originalEvent:e}),this.save()))),this._nulling())},_nulling:function(){J("nulling",this),Q=Z=K=Y=ee=ie=te=ae=de=ue=ge=oe=se=re=ne=ve=be=ce=le=Me.dragged=Me.ghost=Me.clone=Me.active=null,Ie.forEach(function(e){e.checked=!0}),Ie.length=he=pe=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Z&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,a=0,r=i.length,o=this.options;a<r;a++)C(e=i[a],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Ue(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,a){var r=i.children[a];C(r,this.options.draggable,i,!1)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return C(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var a=W.modifyOption(this,e,t);i[e]=void 0!==a?a:t,"group"===e&&Ae(i)},destroy:function(){J("destroy",this);var e=this.el;e[G]=null,b(e,"mousedown",this._onTapStart),b(e,"touchstart",this._onTapStart),b(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(e,"dragover",this),b(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),xe.splice(xe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ae){if(J("hideClone",this),Me.eventCanceled)return;T(ie,"display","none"),this.options.removeCloneOnHide&&ie.parentNode&&ie.parentNode.removeChild(ie),ae=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ae){if(J("showClone",this),Me.eventCanceled)return;Q.contains(Z)&&!this.options.group.revertClone?Q.insertBefore(ie,Z):ee?Q.insertBefore(ie,ee):Q.appendChild(ie),this.options.group.revertClone&&this.animate(Z,ie),T(ie,"display",""),ae=!1}}else this._hideClone()}},Pe&&v(document,"touchmove",function(e){(Me.active||Ce)&&e.cancelable&&e.preventDefault()}),Me.utils={on:v,off:b,css:T,find:_,is:function(e,t){return!!C(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},throttle:j,closest:C,toggleClass:D,clone:B,index:$,nextTick:He,cancelNextTick:We,detectDirection:Ee,getChild:V},Me.get=function(e){return e[G]},Me.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Me.utils=n({},Me.utils,e.utils)),W.mount(e)})},Me.create=function(e,t){return new Me(e,t)},Me.version="1.10.2";var qe,Je,Xe,Ze,Ke,Ye,Qe=[],et=!1;function tt(){Qe.forEach(function(e){clearInterval(e.pid)}),Qe=[]}function it(){clearInterval(Ye)}var at,rt=j(function(e,t,i,a){if(t.scroll){var r,o=(e.touches?e.touches[0]:e).clientX,n=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=I(),d=!1;Je!==i&&(Je=i,tt(),qe=t.scroll,r=t.scrollFn,!0===qe&&(qe=A(i,!0)));var u=0,h=qe;do{var p=h,f=P(p),m=f.top,g=f.bottom,v=f.left,b=f.right,w=f.width,y=f.height,C=void 0,S=void 0,x=p.scrollWidth,D=p.scrollHeight,k=T(p),_=p.scrollLeft,N=p.scrollTop;p===c?(C=w<x&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),S=y<D&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(C=w<x&&("auto"===k.overflowX||"scroll"===k.overflowX),S=y<D&&("auto"===k.overflowY||"scroll"===k.overflowY));var V=C&&(Math.abs(b-o)<=s&&_+w<x)-(Math.abs(v-o)<=s&&!!_),L=S&&(Math.abs(g-n)<=s&&N+y<D)-(Math.abs(m-n)<=s&&!!N);if(!Qe[u])for(var $=0;$<=u;$++)Qe[$]||(Qe[$]={});Qe[u].vx==V&&Qe[u].vy==L&&Qe[u].el===p||(Qe[u].el=p,Qe[u].vx=V,Qe[u].vy=L,clearInterval(Qe[u].pid),0==V&&0==L||(d=!0,Qe[u].pid=setInterval(function(){a&&0===this.layer&&Me.active._onTouchMove(Ke);var t=Qe[this.layer].vy?Qe[this.layer].vy*l:0,i=Qe[this.layer].vx?Qe[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(Me.dragged.parentNode[G],i,t,e,Ke,Qe[this.layer].el)||F(Qe[this.layer].el,i,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&h!==c&&(h=A(h,!1)));et=d}},30),ot=function(e){var t=e.originalEvent,i=e.putSortable,a=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,n=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=i||r;n();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(d)&&(o("spill"),this.onSpill({dragEl:a,putSortable:i}))}};function nt(){}function st(){}function lt(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;at=t},dragOverValid:function(e){var t=e.completed,i=e.target,a=e.onMove,r=e.activeSortable,o=e.changed,n=e.cancel;if(r.options.swap){var s=this.sortable.el,l=this.options;if(i&&i!==s){var c=at;!1!==a(i)?(D(i,l.swapClass,!0),at=i):at=null,c&&c!==at&&D(c,l.swapClass,!1)}o(),t(!0),n()}},drop:function(e){var t=e.activeSortable,i=e.putSortable,a=e.dragEl,r=i||this.sortable,o=this.options;at&&D(at,o.swapClass,!1),at&&(o.swap||i&&i.options.swap)&&a!==at&&(r.captureAnimationState(),r!==t&&t.captureAnimationState(),function(e,t){var i,a,r=e.parentNode,o=t.parentNode;if(!r||!o||r.isEqualNode(t)||o.isEqualNode(e))return;i=$(e),a=$(t),r.isEqualNode(o)&&i<a&&a++;r.insertBefore(t,r.children[i]),o.insertBefore(e,o.children[a])}(a,at),r.animateAll(),r!==t&&t.animateAll())},nulling:function(){at=null}},o(e,{pluginName:"swap",eventProperties:function(){return{swapItem:at}}})}nt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var a=V(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:ot},o(nt,{pluginName:"revertOnSpill"}),st.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:ot},o(st,{pluginName:"removeOnSpill"});var ct,dt,ut,ht,pt,ft=[],mt=[],gt=!1,vt=!1,bt=!1;function wt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?v(document,"pointerup",this._deselectMultiDrag):(v(document,"mouseup",this._deselectMultiDrag),v(document,"touchend",this._deselectMultiDrag)),v(document,"keydown",this._checkKeyDown),v(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,i){var a="";ft.length&&dt===e?ft.forEach(function(e,t){a+=(t?", ":"")+e.textContent}):a=i.textContent,t.setData("Text",a)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;ut=t},delayEnded:function(){this.isMultiDrag=~ft.indexOf(ut)},setupClone:function(e){var t=e.sortable,i=e.cancel;if(this.isMultiDrag){for(var a=0;a<ft.length;a++)mt.push(B(ft[a])),mt[a].sortableIndex=ft[a].sortableIndex,mt[a].draggable=!1,mt[a].style["will-change"]="",D(mt[a],this.options.selectedClass,!1),ft[a]===ut&&D(mt[a],this.options.chosenClass,!1);t._hideClone(),i()}},clone:function(e){var t=e.sortable,i=e.rootEl,a=e.dispatchSortableEvent,r=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ft.length&&dt===t&&(yt(!0,i),a("clone"),r()))},showClone:function(e){var t=e.cloneNowShown,i=e.rootEl,a=e.cancel;this.isMultiDrag&&(yt(!1,i),mt.forEach(function(e){T(e,"display","")}),t(),pt=!1,a())},hideClone:function(e){var t=this,i=(e.sortable,e.cloneNowHidden),a=e.cancel;this.isMultiDrag&&(mt.forEach(function(e){T(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)}),i(),pt=!0,a())},dragStartGlobal:function(e){e.sortable;!this.isMultiDrag&&dt&&dt.multiDrag._deselectMultiDrag(),ft.forEach(function(e){e.sortableIndex=$(e)}),ft=ft.sort(function(e,t){return e.sortableIndex-t.sortableIndex}),bt=!0},dragStarted:function(e){var t=this,i=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){ft.forEach(function(e){e!==ut&&T(e,"position","absolute")});var a=P(ut,!1,!0,!0);ft.forEach(function(e){e!==ut&&M(e,a)}),vt=!0,gt=!0}i.animateAll(function(){vt=!1,gt=!1,t.options.animation&&ft.forEach(function(e){z(e)}),t.options.sort&&Ct()})}},dragOver:function(e){var t=e.target,i=e.completed,a=e.cancel;vt&&~ft.indexOf(t)&&(i(!1),a())},revert:function(e){var t=e.fromSortable,i=e.rootEl,a=e.sortable,r=e.dragRect;ft.length>1&&(ft.forEach(function(e){a.addAnimationState({target:e,rect:vt?P(e):r}),z(e),e.fromRect=r,t.removeAnimationState(e)}),vt=!1,function(e,t){ft.forEach(function(i,a){var r=t.children[i.sortableIndex+(e?Number(a):0)];r?t.insertBefore(i,r):t.appendChild(i)})}(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(e){var t=e.sortable,i=e.isOwner,a=e.insertion,r=e.activeSortable,o=e.parentEl,n=e.putSortable,s=this.options;if(a){if(i&&r._hideClone(),gt=!1,s.animation&&ft.length>1&&(vt||!i&&!r.options.sort&&!n)){var l=P(ut,!1,!0,!0);ft.forEach(function(e){e!==ut&&(M(e,l),o.appendChild(e))}),vt=!0}if(!i)if(vt||Ct(),ft.length>1){var c=pt;r._showClone(t),r.options.animation&&!pt&&c&&mt.forEach(function(e){r.addAnimationState({target:e,rect:ht}),e.fromRect=ht,e.thisAnimationDuration=null})}else r._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,i=e.isOwner,a=e.activeSortable;if(ft.forEach(function(e){e.thisAnimationDuration=null}),a.options.animation&&!i&&a.multiDrag.isMultiDrag){ht=o({},t);var r=k(ut,!0);ht.top-=r.f,ht.left-=r.e}},dragOverAnimationComplete:function(){vt&&(vt=!1,Ct())},drop:function(e){var t=e.originalEvent,i=e.rootEl,a=e.parentEl,r=e.sortable,o=e.dispatchSortableEvent,n=e.oldIndex,s=e.putSortable,l=s||this.sortable;if(t){var c=this.options,d=a.children;if(!bt)if(c.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),D(ut,c.selectedClass,!~ft.indexOf(ut)),~ft.indexOf(ut))ft.splice(ft.indexOf(ut),1),ct=null,q({sortable:r,rootEl:i,name:"deselect",targetEl:ut,originalEvt:t});else{if(ft.push(ut),q({sortable:r,rootEl:i,name:"select",targetEl:ut,originalEvt:t}),t.shiftKey&&ct&&r.el.contains(ct)){var u,h,p=$(ct),f=$(ut);if(~p&&~f&&p!==f)for(f>p?(h=p,u=f):(h=f,u=p+1);h<u;h++)~ft.indexOf(d[h])||(D(d[h],c.selectedClass,!0),ft.push(d[h]),q({sortable:r,rootEl:i,name:"select",targetEl:d[h],originalEvt:t}))}else ct=ut;dt=l}if(bt&&this.isMultiDrag){if((a[G].options.sort||a!==i)&&ft.length>1){var m=P(ut),g=$(ut,":not(."+this.options.selectedClass+")");if(!gt&&c.animation&&(ut.thisAnimationDuration=null),l.captureAnimationState(),!gt&&(c.animation&&(ut.fromRect=m,ft.forEach(function(e){if(e.thisAnimationDuration=null,e!==ut){var t=vt?P(e):m;e.fromRect=t,l.addAnimationState({target:e,rect:t})}})),Ct(),ft.forEach(function(e){d[g]?a.insertBefore(e,d[g]):a.appendChild(e),g++}),n===$(ut))){var v=!1;ft.forEach(function(e){e.sortableIndex===$(e)||(v=!0)}),v&&o("update")}ft.forEach(function(e){z(e)}),l.animateAll()}dt=l}(i===a||s&&"clone"!==s.lastPutMode)&&mt.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}},nullingGlobal:function(){this.isMultiDrag=bt=!1,mt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),b(document,"pointerup",this._deselectMultiDrag),b(document,"mouseup",this._deselectMultiDrag),b(document,"touchend",this._deselectMultiDrag),b(document,"keydown",this._checkKeyDown),b(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==bt&&bt||dt!==this.sortable||e&&C(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;ft.length;){var t=ft[0];D(t,this.options.selectedClass,!1),ft.shift(),q({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},o(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[G];t&&t.options.multiDrag&&!~ft.indexOf(e)&&(dt&&dt!==t&&(dt.multiDrag._deselectMultiDrag(),dt=t),D(e,t.options.selectedClass,!0),ft.push(e))},deselect:function(e){var t=e.parentNode[G],i=ft.indexOf(e);t&&t.options.multiDrag&&~i&&(D(e,t.options.selectedClass,!1),ft.splice(i,1))}},eventProperties:function(){var e=this,t=[],i=[];return ft.forEach(function(a){var r;t.push({multiDragElement:a,index:a.sortableIndex}),r=vt&&a!==ut?-1:vt?$(a,":not(."+e.options.selectedClass+")"):$(a),i.push({multiDragElement:a,index:r})}),{items:l(ft),clones:[].concat(mt),oldIndicies:t,newIndicies:i}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function yt(e,t){mt.forEach(function(i,a){var r=t.children[i.sortableIndex+(e?Number(a):0)];r?t.insertBefore(i,r):t.appendChild(i)})}function Ct(){ft.forEach(function(e){e!==ut&&e.parentNode&&e.parentNode.removeChild(e)})}Me.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):this.options.supportPointer?v(document,"pointermove",this._handleFallbackAutoScroll):t.touches?v(document,"touchmove",this._handleFallbackAutoScroll):v(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),it(),tt(),clearTimeout(S),S=void 0},nulling:function(){Ke=Je=qe=et=Ye=Xe=Ze=null,Qe.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(a,r);if(Ke=e,t||u||d||p){rt(e,this.options,o,t);var n=A(o,!0);!et||Ye&&a===Xe&&r===Ze||(Ye&&it(),Ye=setInterval(function(){var o=A(document.elementFromPoint(a,r),!0);o!==n&&(n=o,tt()),rt(e,i.options,o,t)},10),Xe=a,Ze=r)}else{if(!this.options.bubbleScroll||A(o,!0)===I())return void tt();rt(e,this.options,A(o,!1),!1)}}},o(e,{pluginName:"scroll",initializeByDefault:!0})}),Me.mount(st,nt),t.default=Me},"24a8":function(e,t,i){"use strict";var a=i("8fe5"),r=i("f14a"),o=i("dd95"),n=i("bbee"),s=i("2ccf"),l=i("36b2"),c=i("83d4"),d=i("3de9"),u=i("7ce6"),h=i("a447"),p=i("a34a").f,f=i("38e3").f,m=i("d320").f,g=i("f8d5").trim,v=r.Number,b=v.prototype,w="Number"==l(h(b)),y=function(e){var t,i,a,r,o,n,s,l,c=d(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=g(c)).charCodeAt(0))||45===t){if(88===(i=c.charCodeAt(2))||120===i)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+c}for(n=(o=c.slice(2)).length,s=0;s<n;s++)if((l=o.charCodeAt(s))<48||l>r)return NaN;return parseInt(o,a)}return+c};if(o("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var C,S=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof S&&(w?u(function(){b.valueOf.call(i)}):"Number"!=l(i))?c(new v(y(t)),i,S):y(t)},x=a?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),D=0;x.length>D;D++)s(v,C=x[D])&&!s(S,C)&&m(S,C,f(v,C));S.prototype=b,b.constructor=S,n(r,"Number",S)}},"24fa":function(e,t,i){},2565:function(e,t,i){},"27d2":function(e,t,i){"use strict";i.r(t);i("5b12"),i("9b5f"),i("c22d"),i("e3b5"),i("27ae"),i("d447"),i("5d08");var a=i("3de1"),r={data:function(){return{typeJson:{1:"登录",2:"用户操作",3:"项目操作",4:"设备操作",5:"变量操作",6:"控制命令",7:"平台操作"},subTypeJson:{0:"未定义的操作",1:"添加",2:"删除",3:"修改",4:"权限"},search:"",tableData:[],tableHeight:0,currentPage:1,pageSize:10,tableLen:0,startTime:"",endTime:"",multipleSelection:[],json_fields:{"用户名称":"name","操作内容":"content","操作类型":"typeText","操作子类型":"subTypeText","操作时间":"timeText"}}},mounted:function(){this.getTableHeight(),this.getNowTime()},methods:{numSort:function(e,t){return t.time-e.time},queryLogData:function(){var e=this;this.tableData=[],this.$axios({method:"post",headers:{},url:"/web/system/querySystemLog",data:{timeFrom:Object(a.c)(this.startTime),timeTo:Object(a.c)(this.endTime)}}).then(function(t){var i=t.data;if(0==i.code){for(var r=0;r<i.info.length;r++)i.info[r].typeText=e.typeJson[i.info[r].type],i.info[r].subTypeText=e.subTypeJson[i.info[r].subType],i.info[r].timeText=Object(a.c)(1e3*i.info[r].time);i.info=i.info.sort(e.numSort),e.tableData=i.info}else e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t)})},handleSelectionChange:function(){},getNowTime:function(){this.startTime=(new Date).getTime()-864e5,this.endTime=(new Date).getTime()},getTableHeight:function(){this.$nextTick(function(){this.tableHeight=window.getComputedStyle(this.$refs.logTable).height.split("px")[0]-0,this.tableHeight})},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e}},computed:{filterData:function(){var e,t=this.search&&this.search.toLowerCase(),i=this.tableData;return e=t?i.filter(function(e){var i=!1;for(var a in e){if(e[a])e[a].toString().toLowerCase().indexOf(t)>-1&&(i=!0)}return i}):i,this.tableLen=e.length,e=e.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}}},o=(i("3688"),i("5d22")),n=Object(o.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"system-log"},[i("div",{staticClass:"top-search"},[i("label",{attrs:{for:""}},[e._v("时间段：")]),i("div",{staticStyle:{display:"inline-block"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择时间","value-format":"timestamp"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),i("label",{staticStyle:{width:"30px","text-align":"center",display:"inline-block"},attrs:{for:""}},[e._v("-")]),i("div",{staticStyle:{display:"inline-block"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择时间","value-format":"timestamp"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),i("el-button",{staticClass:"btnFontSize",staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:e.queryLogData}},[e._v("查询日志")]),i("download-excel",{staticClass:"export-excel-wrapper",attrs:{data:e.tableData,fields:e.json_fields,name:"日志数据.xls"}},[i("el-button",{staticClass:"btnFontSize",staticStyle:{"margin-left":"0",display:"inline-block"},attrs:{icon:"el-icon-document"}},[e._v("导出报表")])],1)],1),i("div",{ref:"logTable",staticClass:"content-table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.filterData,stripe:"",height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{width:"55",label:"序号",type:"index",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s((e.currentPage-1)*e.pageSize+t.$index+1))])]}}])}),i("el-table-column",{attrs:{align:"center",label:"用户名称",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),i("el-table-column",{attrs:{align:"center",label:"操作内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.content))]}}])}),i("el-table-column",{attrs:{align:"center",label:"操作类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.typeText))]}}])}),i("el-table-column",{attrs:{align:"center",label:"操作子类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.subTypeText))]}}])}),i("el-table-column",{attrs:{align:"center",label:"操作时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.timeText))]}}])}),i("el-table-column",{staticClass:"cell-css",attrs:{align:"right",width:"180"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{staticClass:"search-class",class:t,attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}}])})],1)],1),i("div",{staticClass:"tableBottom"},[i("el-pagination",{staticClass:"page",staticStyle:{float:"right","margin-top":".1rem"},attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.tableLen},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},[],!1,null,null,null);t.default=n.exports},"2c99":function(e,t,i){},"30e6":function(e,t,i){"use strict";i.r(t);i("5d08"),i("16ca"),i("fc13"),i("9b5f"),i("1d43");var a={data:function(){return{backList:[],configFileList:[],hisFileList:[],configLoading:!1,hisLoading:!1,fullLoading:null}},mounted:function(){},methods:{downConfig:function(){window.open("web/system/backup?param=config&time="+(new Date).getTime()),this.configLoading=!0;var e=this;setTimeout(function(){e.configLoading=!1},5e3)},downHis:function(){window.open("web/system/backup?param=hisdata&time="+(new Date).getTime()),this.hisLoading=!0;var e=this;setTimeout(function(){e.hisLoading=!1},5e3)},uploadError:function(e){this.fullLoading.close();var t=JSON.parse(e.message);this.$message({message:"上传文件失败："+t.message,type:"error",showClose:!0})},configHandleChange:function(e,t){this.configFileList=t.slice(-1)},hisHandleChange:function(e,t){this.hisFileList=t.slice(-1)},handleRemove:function(e,t){},handlePreview:function(e){},handleExceed:function(e,t){this.$message.warning("本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.fileList=[],!0},uploadConfigSuccess:function(){this.fullLoading.close(),this.$showMessage("success","上传配置数据库成功!")},uploadHisSuccess:function(){this.fullLoading.close(),this.$showMessage("success","上传历史数据库成功!")},beforeUpload:function(e){return"sql"!=e.name.replace(/.+\./,"").toLowerCase()?(this.$showMessage("warning","请上传后缀名为sql的附件!"),!1):(this.fullLoading=this.$loading({lock:!0,text:"正在上传中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),!0)}}},r=(i("f9ec"),i("5d22")),o=Object(r.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"system-config"},[i("div",{staticClass:"div-content"},[i("div",{staticClass:"top-title"},[e._v("配置备份还原")]),i("div",{staticClass:"bottom-content"},[i("ul",{staticClass:"clearfix"},[i("li",{staticClass:"config-li"},[i("p",[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.configLoading,expression:"configLoading"}],attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.downConfig()}}},[e._v("备份配置文件")])],1),i("p",{staticClass:"p-height"},[e._v("将配置文件备份下载到本地。以便将来配置文件发生故障后，可以用来还原备份过的文件，减少损失。")]),i("p",[i("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"/web/system/restore?param=config","before-upload":e.beforeUpload,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-change":e.configHandleChange,"before-remove":e.beforeRemove,"on-error":e.uploadError,"on-success":e.uploadConfigSuccess,limit:2,"on-exceed":e.handleExceed,"file-list":e.configFileList}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),i("em",[e._v("上传配置文件")])]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})])],1)]),i("li",{staticClass:"config-li"},[i("p",[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.hisLoading,expression:"hisLoading"}],attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.downHis()}}},[e._v("备份配历史库")])],1),i("p",{staticClass:"p-height"},[e._v("将历史库数据备份下载到本地。以便将来历史库发生故障后，可以用来还原备份过的数据，减少损失。")]),i("p",[i("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"/web/system/restore?param=hisdata","before-upload":e.beforeUpload,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-change":e.hisHandleChange,"before-remove":e.beforeRemove,"on-error":e.uploadError,"on-success":e.uploadHisSuccess,limit:2,"on-exceed":e.handleExceed,"file-list":e.hisFileList}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),i("em",[e._v("上传历史库文件")])]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"})])],1)])])])])])},[],!1,null,null,null);t.default=o.exports},3335:function(e,t,i){var a;"undefined"!=typeof self&&self,a=function(e){return function(e){var t={};function i(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="fb15")}({"01f9":function(e,t,i){"use strict";var a=i("2d00"),r=i("5ca1"),o=i("2aba"),n=i("32e9"),s=i("84f2"),l=i("41a0"),c=i("7f20"),d=i("38fd"),u=i("2b4c")("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,i,f,m,g,v){l(i,t,f);var b,w,y,C=function(e){if(!h&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},S=t+" Iterator",x="values"==m,D=!1,T=e.prototype,k=T[u]||T["@@iterator"]||m&&T[m],_=k||C(m),I=m?x?C("entries"):_:void 0,P="Array"==t&&T.entries||k;if(P&&(y=d(P.call(new e)))!==Object.prototype&&y.next&&(c(y,S,!0),a||"function"==typeof y[u]||n(y,u,p)),x&&k&&"values"!==k.name&&(D=!0,_=function(){return k.call(this)}),a&&!v||!h&&!D&&T[u]||n(T,u,_),s[t]=_,s[S]=p,m)if(b={values:x?_:C("values"),keys:g?_:C("keys"),entries:I},v)for(w in b)w in T||o(T,w,b[w]);else r(r.P+r.F*(h||D),t,b);return b}},"02f4":function(e,t,i){var a=i("4588"),r=i("be13");e.exports=function(e){return function(t,i){var o,n,s=String(r(t)),l=a(i),c=s.length;return l<0||l>=c?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===c||(n=s.charCodeAt(l+1))<56320||n>57343?e?s.charAt(l):o:e?s.slice(l,l+2):n-56320+(o-55296<<10)+65536}}},"0390":function(e,t,i){"use strict";var a=i("02f4")(!0);e.exports=function(e,t,i){return t+(i?a(e,t).length:1)}},"0bfb":function(e,t,i){"use strict";var a=i("cb7c");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0d58":function(e,t,i){var a=i("ce10"),r=i("e11e");e.exports=Object.keys||function(e){return a(e,r)}},1495:function(e,t,i){var a=i("86cc"),r=i("cb7c"),o=i("0d58");e.exports=i("9e1e")?Object.defineProperties:function(e,t){r(e);for(var i,n=o(t),s=n.length,l=0;s>l;)a.f(e,i=n[l++],t[i]);return e}},"214f":function(e,t,i){"use strict";i("b0c5");var a=i("2aba"),r=i("32e9"),o=i("79e5"),n=i("be13"),s=i("2b4c"),l=i("520a"),c=s("species"),d=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),u=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();e.exports=function(e,t,i){var h=s(e),p=!o(function(){var t={};return t[h]=function(){return 7},7!=""[e](t)}),f=p?!o(function(){var t=!1,i=/a/;return i.exec=function(){return t=!0,null},"split"===e&&(i.constructor={},i.constructor[c]=function(){return i}),i[h](""),!t}):void 0;if(!p||!f||"replace"===e&&!d||"split"===e&&!u){var m=/./[h],g=i(n,h,""[e],function(e,t,i,a,r){return t.exec===l?p&&!r?{done:!0,value:m.call(t,i,a)}:{done:!0,value:e.call(i,t,a)}:{done:!1}}),v=g[0],b=g[1];a(String.prototype,e,v),r(RegExp.prototype,h,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"230e":function(e,t,i){var a=i("d3f4"),r=i("7726").document,o=a(r)&&a(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},"23c6":function(e,t,i){var a=i("2d95"),r=i("2b4c")("toStringTag"),o="Arguments"==a(function(){return arguments}());e.exports=function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?i:o?a(t):"Object"==(n=a(t))&&"function"==typeof t.callee?"Arguments":n}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"2aba":function(e,t,i){var a=i("7726"),r=i("32e9"),o=i("69a8"),n=i("ca5a")("src"),s=i("fa5b"),l=(""+s).split("toString");i("8378").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,i,s){var c="function"==typeof i;c&&(o(i,"name")||r(i,"name",t)),e[t]!==i&&(c&&(o(i,n)||r(i,n,e[t]?""+e[t]:l.join(String(t)))),e===a?e[t]=i:s?e[t]?e[t]=i:r(e,t,i):(delete e[t],r(e,t,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[n]||s.call(this)})},"2aeb":function(e,t,i){var a=i("cb7c"),r=i("1495"),o=i("e11e"),n=i("613b")("IE_PROTO"),s=function(){},l=function(){var e,t=i("230e")("iframe"),a=o.length;for(t.style.display="none",i("fab2").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;a--;)delete l.prototype[o[a]];return l()};e.exports=Object.create||function(e,t){var i;return null!==e?(s.prototype=a(e),i=new s,s.prototype=null,i[n]=e):i=l(),void 0===t?i:r(i,t)}},"2b4c":function(e,t,i){var a=i("5537")("wks"),r=i("ca5a"),o=i("7726").Symbol,n="function"==typeof o;(e.exports=function(e){return a[e]||(a[e]=n&&o[e]||(n?o:r)("Symbol."+e))}).store=a},"2d00":function(e,t){e.exports=!1},"2d95":function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},"2fdb":function(e,t,i){"use strict";var a=i("5ca1"),r=i("d2c8");a(a.P+a.F*i("5147")("includes"),"String",{includes:function(e){return!!~r(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(e,t,i){var a=i("86cc"),r=i("4630");e.exports=i("9e1e")?function(e,t,i){return a.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},"38fd":function(e,t,i){var a=i("69a8"),r=i("4bf8"),o=i("613b")("IE_PROTO"),n=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),a(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?n:null}},"41a0":function(e,t,i){"use strict";var a=i("2aeb"),r=i("4630"),o=i("7f20"),n={};i("32e9")(n,i("2b4c")("iterator"),function(){return this}),e.exports=function(e,t,i){e.prototype=a(n,{next:r(1,i)}),o(e,t+" Iterator")}},"456d":function(e,t,i){var a=i("4bf8"),r=i("0d58");i("5eda")("keys",function(){return function(e){return r(a(e))}})},4588:function(e,t){var i=Math.ceil,a=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?a:i)(e)}},4630:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"4bf8":function(e,t,i){var a=i("be13");e.exports=function(e){return Object(a(e))}},5147:function(e,t,i){var a=i("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[a]=!1,!"/./"[e](t)}catch(e){}}return!0}},"520a":function(e,t,i){"use strict";var a,r,o=i("0bfb"),n=RegExp.prototype.exec,s=String.prototype.replace,l=n,c=(a=/a/,r=/b*/g,n.call(a,"a"),n.call(r,"a"),0!==a.lastIndex||0!==r.lastIndex),d=void 0!==/()??/.exec("")[1];(c||d)&&(l=function(e){var t,i,a,r,l=this;return d&&(i=new RegExp("^"+l.source+"$(?!\\s)",o.call(l))),c&&(t=l.lastIndex),a=n.call(l,e),c&&a&&(l.lastIndex=l.global?a.index+a[0].length:t),d&&a&&a.length>1&&s.call(a[0],i,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(a[r]=void 0)}),a}),e.exports=l},"52a7":function(e,t){t.f={}.propertyIsEnumerable},5537:function(e,t,i){var a=i("8378"),r=i("7726"),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:a.version,mode:i("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(e,t,i){var a=i("7726"),r=i("8378"),o=i("32e9"),n=i("2aba"),s=i("9b43"),l=function(e,t,i){var c,d,u,h,p=e&l.F,f=e&l.G,m=e&l.S,g=e&l.P,v=e&l.B,b=f?a:m?a[t]||(a[t]={}):(a[t]||{}).prototype,w=f?r:r[t]||(r[t]={}),y=w.prototype||(w.prototype={});for(c in f&&(i=t),i)u=((d=!p&&b&&void 0!==b[c])?b:i)[c],h=v&&d?s(u,a):g&&"function"==typeof u?s(Function.call,u):u,b&&n(b,c,u,e&l.U),w[c]!=u&&o(w,c,h),g&&y[c]!=u&&(y[c]=u)};a.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"5eda":function(e,t,i){var a=i("5ca1"),r=i("8378"),o=i("79e5");e.exports=function(e,t){var i=(r.Object||{})[e]||Object[e],n={};n[e]=t(i),a(a.S+a.F*o(function(){i(1)}),"Object",n)}},"5f1b":function(e,t,i){"use strict";var a=i("23c6"),r=RegExp.prototype.exec;e.exports=function(e,t){var i=e.exec;if("function"==typeof i){var o=i.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"613b":function(e,t,i){var a=i("5537")("keys"),r=i("ca5a");e.exports=function(e){return a[e]||(a[e]=r(e))}},"626a":function(e,t,i){var a=i("2d95");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==a(e)?e.split(""):Object(e)}},6762:function(e,t,i){"use strict";var a=i("5ca1"),r=i("c366")(!0);a(a.P,"Array",{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},6821:function(e,t,i){var a=i("626a"),r=i("be13");e.exports=function(e){return a(r(e))}},"69a8":function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},"6a99":function(e,t,i){var a=i("d3f4");e.exports=function(e,t){if(!a(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!a(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!a(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!a(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},7333:function(e,t,i){"use strict";var a=i("0d58"),r=i("2621"),o=i("52a7"),n=i("4bf8"),s=i("626a"),l=Object.assign;e.exports=!l||i("79e5")(function(){var e={},t={},i=Symbol(),a="abcdefghijklmnopqrst";return e[i]=7,a.split("").forEach(function(e){t[e]=e}),7!=l({},e)[i]||Object.keys(l({},t)).join("")!=a})?function(e,t){for(var i=n(e),l=arguments.length,c=1,d=r.f,u=o.f;l>c;)for(var h,p=s(arguments[c++]),f=d?a(p).concat(d(p)):a(p),m=f.length,g=0;m>g;)u.call(p,h=f[g++])&&(i[h]=p[h]);return i}:l},7726:function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},"77f1":function(e,t,i){var a=i("4588"),r=Math.max,o=Math.min;e.exports=function(e,t){return(e=a(e))<0?r(e+t,0):o(e,t)}},"79e5":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"7f20":function(e,t,i){var a=i("86cc").f,r=i("69a8"),o=i("2b4c")("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,o)&&a(e,o,{configurable:!0,value:t})}},8378:function(e,t){var i=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=i)},"84f2":function(e,t){e.exports={}},"86cc":function(e,t,i){var a=i("cb7c"),r=i("c69a"),o=i("6a99"),n=Object.defineProperty;t.f=i("9e1e")?Object.defineProperty:function(e,t,i){if(a(e),t=o(t,!0),a(i),r)try{return n(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},"9b43":function(e,t,i){var a=i("d8e8");e.exports=function(e,t,i){if(a(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,a){return e.call(t,i,a)};case 3:return function(i,a,r){return e.call(t,i,a,r)}}return function(){return e.apply(t,arguments)}}},"9c6c":function(e,t,i){var a=i("2b4c")("unscopables"),r=Array.prototype;void 0==r[a]&&i("32e9")(r,a,{}),e.exports=function(e){r[a][e]=!0}},"9def":function(e,t,i){var a=i("4588"),r=Math.min;e.exports=function(e){return e>0?r(a(e),9007199254740991):0}},"9e1e":function(e,t,i){e.exports=!i("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a352:function(t,i){t.exports=e},a481:function(e,t,i){"use strict";var a=i("cb7c"),r=i("4bf8"),o=i("9def"),n=i("4588"),s=i("0390"),l=i("5f1b"),c=Math.max,d=Math.min,u=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;i("214f")("replace",2,function(e,t,i,f){return[function(a,r){var o=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,o,r):i.call(String(o),a,r)},function(e,t){var r=f(i,e,this,t);if(r.done)return r.value;var u=a(e),h=String(this),p="function"==typeof t;p||(t=String(t));var g=u.global;if(g){var v=u.unicode;u.lastIndex=0}for(var b=[];;){var w=l(u,h);if(null===w)break;if(b.push(w),!g)break;""===String(w[0])&&(u.lastIndex=s(h,o(u.lastIndex),v))}for(var y,C="",S=0,x=0;x<b.length;x++){w=b[x];for(var D=String(w[0]),T=c(d(n(w.index),h.length),0),k=[],_=1;_<w.length;_++)k.push(void 0===(y=w[_])?y:String(y));var I=w.groups;if(p){var P=[D].concat(k,T,h);void 0!==I&&P.push(I);var N=String(t.apply(void 0,P))}else N=m(D,h,T,k,I,t);T>=S&&(C+=h.slice(S,T)+N,S=T+D.length)}return C+h.slice(S)}];function m(e,t,a,o,n,s){var l=a+e.length,c=o.length,d=p;return void 0!==n&&(n=r(n),d=h),i.call(s,d,function(i,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,a);case"'":return t.slice(l);case"<":s=n[r.slice(1,-1)];break;default:var d=+r;if(0===d)return i;if(d>c){var h=u(d/10);return 0===h?i:h<=c?void 0===o[h-1]?r.charAt(1):o[h-1]+r.charAt(1):i}s=o[d-1]}return void 0===s?"":s})}})},aae3:function(e,t,i){var a=i("d3f4"),r=i("2d95"),o=i("2b4c")("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},ac6a:function(e,t,i){for(var a=i("cadf"),r=i("0d58"),o=i("2aba"),n=i("7726"),s=i("32e9"),l=i("84f2"),c=i("2b4c"),d=c("iterator"),u=c("toStringTag"),h=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(p),m=0;m<f.length;m++){var g,v=f[m],b=p[v],w=n[v],y=w&&w.prototype;if(y&&(y[d]||s(y,d,h),y[u]||s(y,u,v),l[v]=h,b))for(g in a)y[g]||o(y,g,a[g],!0)}},b0c5:function(e,t,i){"use strict";var a=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},be13:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},c366:function(e,t,i){var a=i("6821"),r=i("9def"),o=i("77f1");e.exports=function(e){return function(t,i,n){var s,l=a(t),c=r(l.length),d=o(n,c);if(e&&i!=i){for(;c>d;)if((s=l[d++])!=s)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===i)return e||d||0;return!e&&-1}}},c649:function(e,t,i){"use strict";(function(e){i.d(t,"c",function(){return c}),i.d(t,"a",function(){return s}),i.d(t,"b",function(){return a}),i.d(t,"d",function(){return l});i("a481");var a="undefined"!=typeof window?window.console:e.console;var r,o,n=/-(\w)/g,s=(r=function(e){return e.replace(n,function(e,t){return t?t.toUpperCase():""})},o=Object.create(null),function(e){return o[e]||(o[e]=r(e))});function l(e){null!==e.parentElement&&e.parentElement.removeChild(e)}function c(e,t,i){var a=0===i?e.children[0]:e.children[i-1].nextSibling;e.insertBefore(t,a)}}).call(this,i("c8ba"))},c69a:function(e,t,i){e.exports=!i("9e1e")&&!i("79e5")(function(){return 7!=Object.defineProperty(i("230e")("div"),"a",{get:function(){return 7}}).a})},c8ba:function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},ca5a:function(e,t){var i=0,a=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+a).toString(36))}},cadf:function(e,t,i){"use strict";var a=i("9c6c"),r=i("d53b"),o=i("84f2"),n=i("6821");e.exports=i("01f9")(Array,"Array",function(e,t){this._t=n(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])},"values"),o.Arguments=o.Array,a("keys"),a("values"),a("entries")},cb7c:function(e,t,i){var a=i("d3f4");e.exports=function(e){if(!a(e))throw TypeError(e+" is not an object!");return e}},ce10:function(e,t,i){var a=i("69a8"),r=i("6821"),o=i("c366")(!1),n=i("613b")("IE_PROTO");e.exports=function(e,t){var i,s=r(e),l=0,c=[];for(i in s)i!=n&&a(s,i)&&c.push(i);for(;t.length>l;)a(s,i=t[l++])&&(~o(c,i)||c.push(i));return c}},d2c8:function(e,t,i){var a=i("aae3"),r=i("be13");e.exports=function(e,t,i){if(a(t))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(e))}},d3f4:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},d53b:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},d8e8:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},e11e:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(e,t,i){"use strict";var a=i("5ca1"),r=i("9def"),o=i("d2c8"),n="".startsWith;a(a.P+a.F*i("5147")("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),i=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),a=String(e);return n?n.call(t,a,i):t.slice(i,i+a.length)===a}})},f6fd:function(e,t){!function(e){var t=e.getElementsByTagName("script");"currentScript"in e||Object.defineProperty(e,"currentScript",{get:function(){try{throw new Error}catch(a){var e,i=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(a.stack)||[!1])[1];for(e in t)if(t[e].src==i||"interactive"==t[e].readyState)return t[e];return null}}})}(document)},f751:function(e,t,i){var a=i("5ca1");a(a.S+a.F,"Object",{assign:i("7333")})},fa5b:function(e,t,i){e.exports=i("5537")("native-function-to-string",Function.toString)},fab2:function(e,t,i){var a=i("7726").document;e.exports=a&&a.documentElement},fb15:function(e,t,i){"use strict";var a;(i.r(t),"undefined"!=typeof window)&&(i("f6fd"),(a=window.document.currentScript)&&(a=a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(i.p=a[1]));i("f751"),i("f559"),i("ac6a"),i("cadf"),i("456d");function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function o(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],a=!0,r=!1,o=void 0;try{for(var n,s=e[Symbol.iterator]();!(a=(n=s.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return i}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}i("6762"),i("2fdb");function s(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=i("a352"),c=i.n(l),d=i("c649");function u(e,t){var i=this;this.$nextTick(function(){return i.$emit(e.toLowerCase(),t)})}function h(e){return["transition-group","TransitionGroup"].includes(e)}function p(e,t,i){return e[i]||(t[i]?t[i]():void 0)}var f=["Start","Add","Remove","Update","End"],m=["Choose","Unchoose","Sort","Filter","Clone"],g=["Move"].concat(f,m).map(function(e){return"on"+e}),v=null,b={name:"draggable",inheritAttrs:!1,props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(e){var t=this.$slots.default;this.transitionMode=function(e){if(!e||1!==e.length)return!1;var t=n(e,1)[0].componentOptions;return!!t&&h(t.tag)}(t);var i=function(e,t,i){var a=0,r=0,o=p(t,i,"header");o&&(a=o.length,e=e?[].concat(s(o),s(e)):s(o));var n=p(t,i,"footer");return n&&(r=n.length,e=e?[].concat(s(e),s(n)):s(n)),{children:e,headerOffset:a,footerOffset:r}}(t,this.$slots,this.$scopedSlots),a=i.children,r=i.headerOffset,o=i.footerOffset;this.headerOffset=r,this.footerOffset=o;var l=function(e,t){var i=null,a=function(e,t){i=function(e,t,i){return void 0===i?e:((e=e||{})[t]=i,e)}(i,e,t)};if(a("attrs",Object.keys(e).filter(function(e){return"id"===e||e.startsWith("data-")}).reduce(function(t,i){return t[i]=e[i],t},{})),!t)return i;var r=t.on,o=t.props,n=t.attrs;return a("on",r),a("props",o),Object.assign(i.attrs,n),i}(this.$attrs,this.componentData);return e(this.getTag(),l,a)},created:function(){null!==this.list&&null!==this.value&&d.b.error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&d.b.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&d.b.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var e=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var t={};f.forEach(function(i){t["on"+i]=function(e){var t=this;return function(i){null!==t.realList&&t["onDrag"+e](i),u.call(t,e,i)}}.call(e,i)}),m.forEach(function(i){t["on"+i]=u.bind(e,i)});var i=Object.keys(this.$attrs).reduce(function(t,i){return t[Object(d.a)(i)]=e.$attrs[i],t},{}),a=Object.assign({},this.options,i,t,{onMove:function(t,i){return e.onDragMove(t,i)}});!("draggable"in a)&&(a.draggable=">*"),this._sortable=new c.a(this.rootContainer,a),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){this.updateOptions(e)},deep:!0},$attrs:{handler:function(e){this.updateOptions(e)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var e=this._vnode.fnOptions;return e&&e.functional},getTag:function(){return this.tag||this.element},updateOptions:function(e){for(var t in e){var i=Object(d.a)(t);-1===g.indexOf(i)&&this._sortable.option(i,e[t])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=function(e,t,i,a){if(!e)return[];var r=e.map(function(e){return e.elm}),o=t.length-a,n=s(t).map(function(e,t){return t>=o?r.length:r.indexOf(e)});return i?n.filter(function(e){return-1!==e}):n}(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode,e.footerOffset)})},getUnderlyingVm:function(e){var t=function(e,t){return e.map(function(e){return e.elm}).indexOf(t)}(this.getChildrenNodes()||[],e);return-1===t?null:{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&h(t.$options._componentTag)?t.$parent:!("realList"in t)&&1===t.$children.length&&"realList"in t.$children[0]?t.$children[0]:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=s(this.value);e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,s(e))};this.alterList(t)},updatePosition:function(e,t){var i=function(i){return i.splice(t,0,i.splice(e,1)[0])};this.alterList(i)},getRelatedContextFromMoveEvent:function(e){var t=e.to,i=e.related,a=this.getUnderlyingPotencialDraggableComponent(t);if(!a)return{component:a};var r=a.realList,o={list:r,component:a};if(t!==i&&r&&a.getUnderlyingVm){var n=a.getUnderlyingVm(i);if(n)return Object.assign(n,o)}return o},getVmIndex:function(e){var t=this.visibleIndexes,i=t.length;return e>i-1?i:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[e].data=null;var t=this.getComponent();t.children=[],t.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),v=e.item},onDragAdd:function(e){var t=e.item._underlying_vm_;if(void 0!==t){Object(d.d)(e.item);var i=this.getVmIndex(e.newIndex);this.spliceList(i,0,t),this.computeIndexes();var a={element:t,newIndex:i};this.emitChanges({added:a})}},onDragRemove:function(e){if(Object(d.c)(this.rootContainer,e.item,e.oldIndex),"clone"!==e.pullMode){var t=this.context.index;this.spliceList(t,1);var i={element:this.context.element,oldIndex:t};this.resetTransitionData(t),this.emitChanges({removed:i})}else Object(d.d)(e.clone)},onDragUpdate:function(e){Object(d.d)(e.item),Object(d.c)(e.from,e.item,e.oldIndex);var t=this.context.index,i=this.getVmIndex(e.newIndex);this.updatePosition(t,i);var a={element:this.context.element,oldIndex:t,newIndex:i};this.emitChanges({moved:a})},updateProperty:function(e,t){e.hasOwnProperty(t)&&(e[t]+=this.headerOffset)},computeFutureIndex:function(e,t){if(!e.element)return 0;var i=s(t.to.children).filter(function(e){return"none"!==e.style.display}),a=i.indexOf(t.related),r=e.component.getVmIndex(a);return-1!==i.indexOf(v)||!t.willInsertAfter?r:r+1},onDragMove:function(e,t){var i=this.move;if(!i||!this.realList)return!0;var a=this.getRelatedContextFromMoveEvent(e),r=this.context,o=this.computeFutureIndex(a,e);return Object.assign(r,{futureIndex:o}),i(Object.assign({},e,{relatedContext:a,draggedContext:r}),t)},onDragEnd:function(){this.computeIndexes(),v=null}}};"undefined"!=typeof window&&"Vue"in window&&window.Vue.component("draggable",b);var w=b;t.default=w}}).default},e.exports=a(i("2480"))},3337:function(e,t,i){"use strict";var a=i("1f04"),r=i("59bf").map;a({target:"Array",proto:!0,forced:!i("7041")("map")},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},3547:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAABuUlEQVRIieXUTauNURQH8N95wfGWTFBeBpKQRKlb3DCQL2BGJuRMJBNl5gtgpFtuSSZKSj6Bjqmp0Z0oA2+RYnBPkXO2wbMfrfPEcc7pGZB/rdpr7bX/rb3X2v9GSknAOszhFV6aBSmlaFdTgdcppZ2VvYmsGbhbOJrXW3F4lgIjYQODma75G8Lv+Bb85THnDuABFrA+brQr5BuCvx3bFJVHDHAeZ7K/hIf4CI3c5c24hdPo5MRP6FduAV9z/trs9xUTcRe3y+4spHowX175YKhgiJHh/AOa4Vn2t3ESe0PCZTyZgvAGzuZ1auMeNoaE93g3BeGXsB42samS0DEdVkSnqZi/2lAdib+TsFU3Yb8Sm/ZNh1XCS0Zb31F0blKLevDzLz/D8RxbwhusnKCyBnZjS45122GzxJ5sM6HsclWiZsavxuYtrik0rsRjXFE8BXzGdSyqCkmWr16QoEc5tiPE5nLsTvZ72V+dUloOeRdHOpRxBOdwLMS62IVT2T+EC9iHNfFw2eUeTox9nMnQ/Tf+8n9KWJeEtUrCuiodlERPayJ8Xv6UmwqBmMcqFdEcg4ZCDz/gPl78AEJHGdGVGencAAAAAElFTkSuQmCC"},3688:function(e,t,i){"use strict";i("ef37")},3727:function(e,t,i){"use strict";var a,r;a="undefined"!=typeof window?window:void 0,r=function(e,t){function i(e,t){for(var i=document.getElementsByTagName("head")[0].getElementsByTagName("script"),a=!1,r=0;r<i.length;r++)i[r].getAttribute("src")==e&&(a=!0,t());if(!a){var o=document.createElement("script");o.setAttribute("src",e),o.onload=t,document.getElementsByTagName("head")[0].appendChild(o)}}function a(e,t,i,a,r,o){var n=e,s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==s.readyState&&200==s.status){var e=JSON.parse(s.responseText);r(e)}},s.open(t,n,!0);var l=new FormData;for(var c in i)l.append(c,i[c]);s.send(l)}var r={EZUIKitPlayer:void 0,EZUIKitTalk:void 0,opt:{apiDomain:"https://open.ys7.com/api/lapp/live/talk/url",filePath:"https://open.ys7.com/assets/ezuikit_v2.6.4",accessToken:"",url:"",deviceSerial:"",channelNo:"",id:"",talkLink:"",rtcUrl:"",ttsUrl:"",stream:"",isReliesReady:!1,template:"simple",plugin:[],audio:1,autoplay:1,videoLoading:!1},state:{countTimer:void 0,recodeTime:0,recodeTimer:void 0,recodeTime:0,fetchDefaultList:!1,page:0,pageSize:5},handleTalkSuccess:function(){},handleTalkError:function(){}},o="https://open.ys7.com",n=o,s=function(t){var s=this;this.opt={id:t.id,apiDomain:o+"/api/lapp/live/talk/url",filePath:n+"/assets/ezuikit_v2.6.4",accessToken:"",url:"",deviceSerial:"",channelNo:"",talkLink:"",rtcUrl:"",ttsUrl:"",stream:"",isReliesReady:!1,template:"simple",plugin:[],audio:1,autoplay:1,fullScreenStatus:0,bSupporDoubleClickFull:!0,videoLoading:!1},this.params=t,t.id&&(this.opt.id=t.id),t.accessToken&&(this.opt.accessToken=t.accessToken),void 0!==t.audio&&(this.opt.audio=t.audio),void 0!==t.env&&(void 0!==t.env.domain&&(o=t.env.domain,this.opt.apiDomain=o+"/api/lapp/live/talk/url"),void 0!==t.env.filePathDomain&&(n=t.env.filePathDomain,this.opt.filePathDomain=t.env.filePathDomain)),t.url&&(this.opt.url=t.url,this.opt.deviceSerial=t.url.split("/")[3],this.opt.channelNo=t.url.split("/")[4].split(".")[0]),void 0!==t.template&&(this.opt.template=t.template),t.plugin&&(this.opt.plugin=t.plugin),void 0!==t.autoplay&&(this.opt.autoplay=t.autoplay?1:0),void 0!==t.bSupporDoubleClickFull&&(this.opt.bSupporDoubleClickFull=t.bSupporDoubleClickFull),void 0!==t.handleTalkSuccess&&(e.EZUIKit.handleTalkSuccess=t.handleTalkSuccess),void 0!==t.handleTalkError&&(e.EZUIKit.handleTalkError=t.handleTalkError);var l=this.opt.id,c=document.getElementById(l);c.style.fontSize=0,c.style.overflowY="auto",c.style.position="relative";var d=document.createElement("iframe");d.src=function(){switch(s.opt.template){case"simple":var e=o+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+s.opt.url+"&autoplay="+s.opt.autoplay+"&audio="+s.opt.audio+"&accessToken="+t.accessToken+"&templete=0&id="+l;return void 0!==t.controls&&t.controls&&(t.controls,t.controls.length>0&&(e+="&controls="+t.controls.join(","))),t.websocketParams&&(e+="&websocketParams="+JSON.stringify(t.websocketParams)),e;case"standard":return o+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+s.opt.url+"&autoplay="+s.opt.autoplay+"&audio="+s.opt.audio+"&accessToken="+t.accessToken+"&templete=1&id="+l;case"security":return o+"/ezopen/h5/iframe_se?bSupporDoubleClickFull=0&url="+s.opt.url+"&autoplay="+s.opt.autoplay+"&audio="+s.opt.audio+"&accessToken="+t.accessToken+"&templete=0&id="+l;default:return o+"/ezopen/h5/iframe?bSupporDoubleClickFull=0&url="+s.opt.url+"&autoplay="+s.opt.autoplay+"&audio="+s.opt.audio+"&accessToken="+t.accessToken+"&templete=0&id="+l}}();var u=document.getElementById(l).offsetHeight,h=document.getElementById(l).offsetWidth;t.height&&(u=parseInt(t.height)),t.width&&(h=parseInt(t.width)),d.width=h,d.height=u,d.id="EZUIKitPlayer-"+l,d.setAttribute("allowfullscreen",!0),d.setAttribute("allow","autoplay"),d.setAttribute("frameborder",0),c.appendChild(d);i(s.opt.filePath+"/js/jquery.js",function(){i("https://open.ys7.com/assets/layer/layer.js",function(){if(v().headerContainer){var n=document.createElement("div");n.setAttribute("class","panel-top");var l=document.createElement("div");if(l.setAttribute("class","contros"),n.appendChild(l),c.insertBefore(n,d),v().capturePictureModule){var u=document.createElement("span");u.innerHTML='<span title="截图"><svg id="capturePicture" title="截图" t="1578882764585" class="icon" viewBox="0 0 1024 1024" version="1.1"  xmlns="http://www.w3.org/2000/svg" p-id="5958" width="24" height="24">  <path    d="M887.296 315.904h-153.6c-51.2 0-68.096-102.4-119.296-102.4H392.704c-34.304 0-51.2 102.4-102.4 102.4h-153.6c-29.696 0-51.2 21.504-51.2 51.2v439.296c0 25.6 21.504 47.104 51.2 47.104h751.104c29.696 0 51.2-21.504 51.2-51.2v-435.2c-0.512-30.208-21.504-51.2-51.712-51.2zM512 768c-115.2 0-204.8-89.6-204.8-200.704s89.6-200.704 204.8-200.704 204.8 89.6 204.8 200.704-93.696 200.704-204.8 200.704z m247.296-354.304c-12.8 0-25.6-12.8-25.6-25.6s12.8-25.6 25.6-25.6 25.6 12.8 25.6 25.6c0 17.408-12.8 25.6-25.6 25.6zM256 264.704c0-8.704-8.704-16.896-16.896-16.896h-51.2c-8.704 0-16.896 8.704-16.896 16.896V281.6H256v-16.896z m256 148.992c-85.504 0-153.6 68.096-153.6 153.6s68.096 153.6 153.6 153.6 153.6-68.096 153.6-153.6-68.096-153.6-153.6-153.6z"    fill="#ffffff" p-id="5959"></path></svg></span>',u.onclick=function(){s.capturePicture()},l.appendChild(u)}if(v().saveModule,v().saveModule){var h=document.createElement("span");h.innerHTML='<span title="开始录像">  <svg id="startSave" t="1578882716693" class="icon" viewBox="0 0 1024 1024" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="3782" width="24" height="24">    <path      d="M915.2 729.6l-128-76.8c-25.6-12.8-44.8-32-44.8-51.2V435.2c0-25.6 19.2-38.4 44.8-51.2l128-76.8c25.6-12.8 44.8 0 44.8 19.2V704c0 32-19.2 38.4-44.8 25.6z m-332.8 89.6H96c-51.2 0-89.6-38.4-89.6-89.6V332.8c0-51.2 38.4-89.6 89.6-89.6h486.4c51.2 0 89.6 38.4 89.6 89.6v396.8c0 51.2-38.4 89.6-89.6 89.6zM192 364.8c-32 6.4-57.6 32-64 64-12.8 57.6 38.4 115.2 96 102.4 32-6.4 57.6-32 64-70.4 12.8-57.6-38.4-108.8-96-96z m0 0"      p-id="3783" fill="#ffffff"></path>  </svg></span>',h.onclick=function(){s.startSave(),document.getElementById("startSave").setAttribute("class","icon hide"),document.getElementById("stopSave").setAttribute("class","icon")},l.appendChild(h);var p=document.createElement("span");p.innerHTML='<span title="结束录像"> <svg id="stopSave" t="1578882716693" class="icon hide" viewBox="0 0 1024 1024" version="1.1"   xmlns="http://www.w3.org/2000/svg" p-id="3782" width="24" height="24">   <path     d="M915.2 729.6l-128-76.8c-25.6-12.8-44.8-32-44.8-51.2V435.2c0-25.6 19.2-38.4 44.8-51.2l128-76.8c25.6-12.8 44.8 0 44.8 19.2V704c0 32-19.2 38.4-44.8 25.6z m-332.8 89.6H96c-51.2 0-89.6-38.4-89.6-89.6V332.8c0-51.2 38.4-89.6 89.6-89.6h486.4c51.2 0 89.6 38.4 89.6 89.6v396.8c0 51.2-38.4 89.6-89.6 89.6zM192 364.8c-32 6.4-57.6 32-64 64-12.8 57.6 38.4 115.2 96 102.4 32-6.4 57.6-32 64-70.4 12.8-57.6-38.4-108.8-96-96z m0 0"     p-id="3783" fill="red"></path> </svg> </span>',p.onclick=function(){s.stopSave(),document.getElementById("stopSave").setAttribute("class","icon hide"),document.getElementById("startSave").setAttribute("class","icon")},l.appendChild(p)}if(v().zoomModule){var f=document.createElement("span");f.innerHTML='<span title="开启电子放大">  <svg id="enableZoom" t="1578882639834" class="icon" viewBox="0 0 1000 1000" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="2227" width="24" height="24">    <path      d="M830.6119 441.1089c0-193.7756-157.0939-350.8641-350.8775-350.8641S128.8559 247.3333 128.8559 441.1089 285.9508 791.972 479.7344 791.972 830.6119 634.8845 830.6119 441.1089zM483.2821 710.4863c-146.7975 0-265.8187-118.9953-265.8187-265.8088S336.4847 178.8697 483.2821 178.8697s265.8197 118.9953 265.8197 265.8078S630.0796 710.4863 483.2821 710.4863zM770.6031 653.5739l-72.6417 75.9485 141.6917 160.1814 82.0737-90.0739L770.6031 653.5739zM527.5849 267.4727h-88.60655762279428v132.90489048425167H306.0690340253259v88.60292721534799h132.90933675248866v132.9038911617923h88.60655762279428V488.9794719180395h132.90933675248866v-88.60292721534799H527.5849284006089V267.4726535408993z"      p-id="2228" fill="#ffffff"></path>  </svg></span>',f.onclick=function(){s.enableZoom(),document.getElementById("enableZoom").setAttribute("class","icon hide"),document.getElementById("closeZoom").setAttribute("class","icon")},l.appendChild(f);var m=document.createElement("span");m.innerHTML='<span title="关闭电子放大">  <svg id="closeZoom" t="1578882639834" class="icon hide" viewBox="0 0 1000 1000" version="1.1"    xmlns="http://www.w3.org/2000/svg" p-id="2227" width="24" height="24">    <path      d="M830.6119 441.1089c0-193.7756-157.0939-350.8641-350.8775-350.8641S128.8559 247.3333 128.8559 441.1089 285.9508 791.972 479.7344 791.972 830.6119 634.8845 830.6119 441.1089zM483.2821 710.4863c-146.7975 0-265.8187-118.9953-265.8187-265.8088S336.4847 178.8697 483.2821 178.8697s265.8197 118.9953 265.8197 265.8078S630.0796 710.4863 483.2821 710.4863zM770.6031 653.5739l-72.6417 75.9485 141.6917 160.1814 82.0737-90.0739L770.6031 653.5739zM527.5849 267.4727h-88.60655762279428v132.90489048425167H306.0690340253259v88.60292721534799h132.90933675248866v132.9038911617923h88.60655762279428V488.9794719180395h132.90933675248866v-88.60292721534799H527.5849284006089V267.4726535408993z"      p-id="2228" fill="red"></path>  </svg></span>',m.onclick=function(){s.closeZoom(),document.getElementById("closeZoom").setAttribute("class","icon hide"),document.getElementById("enableZoom").setAttribute("class","icon")},l.appendChild(m)}}function g(){var e={footerContainer:!1,talkModule:!1,broadcastModule:!1,hdModule:!1,fullScreenModule:!1};switch(s.opt.template){case"simple":case"standard":var i;if(t.footer&&t.footer instanceof Array)e={footerContainer:!0,talkModule:-1!==(i=t.footer).indexOf("talk"),broadcastModule:-1!==i.indexOf("broadcast"),hdModule:-1!==i.indexOf("hd"),fullScreenModule:-1!==i.indexOf("fullScreen")};break;case"security":break;case"voice":e={footerContainer:!0,talkModule:!0,broadcastModule:!0,hdModule:!0,fullScreenModule:!0}}return e}function v(){var e={headerContainer:!1,capturePictureModule:!1,saveModule:!1,zoomModule:!1};switch(s.opt.template){case"simple":if(t.header&&t.header instanceof Array){var i=t.header;e={headerContainer:!0,capturePictureModule:-1!==i.indexOf("capturePicture"),saveModule:-1!==i.indexOf("save"),zoomModule:-1!==i.indexOf("zoom")}}break;case"standard":case"security":break;case"voice":e={headerContainer:!0,capturePictureModule:!0,saveModule:!0,zoomModule:!0}}return e}if(g().footerContainer||-1!==s.opt.plugin.indexOf("talk")){var b=s.opt.filePath+"/npm/css/recoder.css",w=s.opt.filePath+"/npm/js/recoder.js",y=s.opt.filePath+"/recorder.js";if(function(e,t){for(var i=document.getElementsByTagName("head")[0].getElementsByTagName("link"),a=!1,r=0;r<i.length;r++)i[r].getAttribute("href")==e&&(a=!0,t());if(!a){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=e,o.onload=t,document.getElementsByTagName("head")[0].appendChild(o)}}(b,function(){}),i(w,function(){i(y,function(){})}),-1!==s.opt.plugin.indexOf("talk")||g().talkModule){a(s.opt.apiDomain,"POST",{accessToken:s.opt.accessToken,deviceSerial:s.opt.deviceSerial,channelNo:s.opt.channelNo},0,function(e){if(200==e.code){var t=e.data;if(t){var a=t.rtcUrl;-1===a.indexOf("ws")&&(a=a.replace("https","wss").replace("rtcgw","rtcgw-ws")),s.opt.rtcUrl=a,s.opt.ttsUrl="tts://"+t.ttsUrl;var o="talk://"+s.opt.deviceSerial+":0:"+s.opt.channelNo+":cas.ys7.com:6500";if(s.opt.talkLink=s.opt.ttsUrl+"/"+o,s.opt.stream=t.stream,s.opt,!s.opt.isReliesReady){var n=s.opt.filePath+"/npm/js/adapeter.js",l=s.opt.filePath+"/npm/js/janus.js",c=s.opt.filePath+"/npm/js/tts.js";i(n,function(){i(l,function(){i(c,function(){s.opt.isReliesReady=!0})})})}if(!document.getElementById("audioleft")){var d=document.createElement("div");d.style.display="none",d.id="audioleft",document.body.appendChild(d)}if(!document.getElementById("audioright")){var u=document.createElement("div");u.style.display="none",u.id="audioright",document.body.appendChild(u)}}}r.opt=s.opt})}if(g().footerContainer){var C=document.createElement("div");if(C.setAttribute("class","audio-controls"),c.appendChild(C),g().hdModule||g().fullScreenModule){var S=document.createElement("div");if(S.setAttribute("class","contros"),C.appendChild(S),g().hdModule){var x=document.createElement("span");x.setAttribute("id","video-hd"),x.innerHTML=-1===s.opt.url.indexOf(".hd")?"标清":"高清",x.onclick=function(){if(s.opt.videoLoading)return layer.msg("视频加载中，请稍后"),!1;var e=s.stop();s.opt.videoLoading=!0,e.then(e=>{s.opt.videoLoading=!1,-1===s.opt.url.indexOf(".hd")?(s.opt.url=s.opt.url.replace(".live",".hd.live"),x.innerHTML=-1===s.opt.url.indexOf(".hd")?"标清":"高清"):(s.opt.url=s.opt.url.replace(".hd.live",".live"),x.innerHTML=-1===s.opt.url.indexOf(".hd")?"标清":"高清"),s.play(s.opt.url)}).catch(e=>{})},S.appendChild(x)}if(g().fullScreenModule){var D=document.createElement("span");D.setAttribute("class","hide"),D.setAttribute("id","ezuikit-open-sound"),D.setAttribute("title","打开声音"),D.setAttribute("style","vertical-align: top;"),D.innerHTML='<svg t="1590476263239" class="icon" viewBox="0 0 1178 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2273" width="16" height="16"><path d="M665.6 51.2 665.6 51.2c-10.24-30.72-40.96-51.2-71.68-51.2-5.12 0-15.36 0-20.48 5.12l0 0L358.4 153.6 51.2 209.92l0 0C20.48 220.16 0 250.88 0 281.6 0 286.72 0 291.84 0 307.2l0 0 0 409.6 0 0c0 15.36 0 20.48 0 25.6 0 30.72 20.48 61.44 51.2 71.68l0 0L358.4 870.4l97.28 71.68 107.52 76.8 0 0c5.12 5.12 15.36 5.12 25.6 5.12 40.96 0 76.8-35.84 76.8-76.8 0-10.24 0-10.24 0-25.6l0 0L665.6 51.2zM563.2 870.4l-153.6-102.4-307.2-51.2L102.4 307.2l307.2-51.2 153.6-102.4L563.2 870.4z" p-id="2274" fill="#FF0000"></path><path d="M1049.6 537.6l112.64-112.64c20.48-20.48 20.48-56.32 0-76.8-20.48-20.48-56.32-20.48-76.8 0L972.8 460.8l-112.64-112.64c0 0 0 0 0 0-20.48-20.48-56.32-20.48-76.8 0 0 0 0 0 0 0-20.48 20.48-20.48 56.32 0 76.8l112.64 112.64-112.64 112.64c-20.48 20.48-20.48 56.32 0 76.8 20.48 20.48 56.32 20.48 76.8 0L972.8 614.4l112.64 112.64c20.48 20.48 56.32 20.48 76.8 0s20.48-56.32 0-76.8L1049.6 537.6z" p-id="2275" fill="#FF0000"></path></svg>',D.onclick=function(){s.openSound(0),D.setAttribute("class","hide"),T.setAttribute("class","")};var T=document.createElement("span");D.setAttribute("id","ezuikit-close-sound"),T.setAttribute("class","hide"),T.setAttribute("title","关闭声音"),T.setAttribute("style","vertical-align: top;"),T.innerHTML='<svg t="1590414410633" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="20545" width="16" height="16"><path d="M840.533333 98.133333c-17.066667-17.066667-42.666667-17.066667-59.733333 0-17.066667 17.066667-17.066667 42.666667 0 59.733334C883.2 256 938.666667 392.533333 938.666667 533.333333c0 140.8-55.466667 277.333333-157.866667 375.466667-17.066667 17.066667-17.066667 42.666667 0 59.733333 8.533333 8.533333 21.333333 12.8 29.866667 12.8 8.533333 0 21.333333-4.266667 29.866666-12.8 115.2-110.933333 183.466667-268.8 183.466667-435.2 0-166.4-68.266667-324.266667-183.466667-435.2zM571.733333 12.8c-17.066667-8.533333-34.133333-4.266667-46.933333 8.533333L281.6 256H42.666667c-25.6 0-42.666667 17.066667-42.666667 42.666667v426.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h238.933333l243.2 234.666667c8.533333 8.533333 17.066667 12.8 29.866667 12.8 4.266667 0 12.8 0 17.066666-4.266667 17.066667-8.533333 25.6-21.333333 25.6-38.4V51.2c0-17.066667-8.533333-34.133333-25.6-38.4zM512 870.4l-183.466667-179.2c-8.533333-4.266667-17.066667-8.533333-29.866666-8.533333H85.333333V341.333333h213.333334c12.8 0 21.333333-4.266667 29.866666-12.8L512 153.6v716.8z" p-id="20546" fill="#ffffff"></path><path d="M759.466667 349.866667c-12.8-21.333333-38.4-25.6-59.733334-8.533334-21.333333 12.8-25.6 38.4-8.533333 59.733334 21.333333 29.866667 34.133333 76.8 34.133333 123.733333 0 46.933333-12.8 93.866667-34.133333 123.733333-12.8 21.333333-8.533333 46.933333 8.533333 59.733334 8.533333 4.266667 17.066667 8.533333 25.6 8.533333 12.8 0 25.6-4.266667 34.133334-17.066667 34.133333-46.933333 51.2-106.666667 51.2-174.933333 0-68.266667-17.066667-128-51.2-174.933333z" p-id="20547" fill="#ffffff"></path></svg>',T.onclick=function(){s.closeSound(0),D.setAttribute("class",""),T.setAttribute("class","hide")},S.appendChild(D),S.appendChild(T)}if(1==s.opt.audio?T.setAttribute("class",""):(D.setAttribute("class",""),s.closeSound(0)),g().fullScreenModule){var k=document.createElement("span");k.setAttribute("title","全屏"),k.setAttribute("style","vertical-align: top;"),k.innerHTML='<svg id="fullScreen" t="1578020167938" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5035" width="16" height="16"> <path d="M348.373333 625.706667l-128 128-64 64v-128a33.28 33.28 0 0 0-35.413333-35.413334A33.493333 33.493333 0 0 0 85.333333 689.706667v213.333333A33.706667 33.706667 0 0 0 120.96 938.666667h213.333333a35.626667 35.626667 0 0 0 0-71.04h-128l64-64 128-128a35.2 35.2 0 0 0-49.92-49.92zM206.293333 156.373333h128a33.28 33.28 0 0 0 35.413334-35.413333A33.493333 33.493333 0 0 0 334.293333 85.333333H113.706667c-7.04 0-14.08 7.04-21.333334 14.293334a26.026667 26.026667 0 0 0-7.04 21.333333v213.333333a33.493333 33.493333 0 0 0 35.626667 35.413334 33.28 33.28 0 0 0 35.413333-35.413334v-128l192 192a35.2 35.2 0 0 0 49.92-49.92zM903.04 85.333333h-213.333333a33.493333 33.493333 0 0 0-35.413334 35.626667 33.28 33.28 0 0 0 35.413334 35.413333h128l-64 64-128 128a35.2 35.2 0 0 0 49.92 49.92l128-128 64-64v128a35.626667 35.626667 0 0 0 71.04 0v-213.333333A33.706667 33.706667 0 0 0 903.04 85.333333zM903.04 654.293333a33.28 33.28 0 0 0-35.413333 35.413334v128l-64-64-128-128a35.2 35.2 0 0 0-49.92 49.92l128 128 64 64h-128a35.626667 35.626667 0 0 0 0 71.04h213.333333A33.706667 33.706667 0 0 0 938.666667 903.04v-213.333333a33.493333 33.493333 0 0 0-35.626667-35.413334z" p-id="5036" fill="#ffffff"></path></svg>',k.onclick=function(){s.fullScreen()},S.appendChild(k)}}if(g().talkModule){var _=document.createElement("div"),I=document.createElement("div");_.setAttribute("class","ptp-talk off"),_.innerHTML='<span title="对讲"><svg t="1581930496966" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"  p-id="1641" width="16" height="16">  <path    d="M715.648 647.872c-30.208-22.336-61.568 39.36-100.992 77.44-39.36 38.08-34.112 31.488-123.392-17.088S311.488 540.224 280 491.648C248.448 443.072 265.472 424.704 265.472 424.704s78.72-62.976 97.152-81.344c18.368-18.368 13.12-30.208 13.12-30.208l-128.64-190.144c-23.616-5.184-64.32 5.12-128.576 57.6C54.208 233.088 30.592 353.856 151.296 575.68c120.768 221.824 347.84 330.752 485.568 374.08 137.856 43.328 228.416-61.696 249.408-103.68 21.056-41.984 13.12-85.312 13.12-85.312S745.856 670.208 715.648 647.872z"    p-id="1642" fill="#ffffff"></path>  <path    d="M715.328 64C580.992 64 472.192 172.864 472.192 307.2s108.8 243.2 243.136 243.2 243.2-108.864 243.2-243.2S849.6 64 715.328 64zM715.328 461.056c-84.992 0-153.856-68.864-153.856-153.856s68.864-153.856 153.856-153.856 153.856 68.928 153.856 153.856S800.32 461.056 715.328 461.056z"    p-id="1643" fill="#ffffff"></path>  <path    d="M777.472 277.376c-18.176 0-32.96-14.784-32.96-33.024 0-8.448 3.136-16.064 8.32-21.888-11.52-5.12-24.128-8-37.568-8-51.2 0-92.672 41.472-92.672 92.736s41.472 92.736 92.672 92.736S808.064 358.4 808.064 307.2c0-13.696-3.072-26.688-8.384-38.4C793.728 274.112 786.048 277.376 777.472 277.376zM715.328 340.928c-18.624 0-33.664-15.104-33.664-33.728 0-18.624 15.04-33.728 33.664-33.728 18.688 0 33.728 15.104 33.728 33.728C749.056 325.824 734.016 340.928 715.328 340.928z"    p-id="1644" fill="#ffffff"></path> </svg> </span> <span>开启对讲</span>',_.onclick=function(){if(r.state.countTimer,r.state.countTimer)return e.layer.msg("语音设备正忙，请稍后重试"),!1;j("add",0),s.closeSound(0),s.opt,s.startTalk(),this.setAttribute("class","ptp-talk off hide"),I.setAttribute("class","ptp-talk on")},I.setAttribute("class","ptp-talk on hide"),I.innerHTML='<span title="对讲"> <svg t="1581930496966" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1641" width="16" height="16">    <path      d="M715.648 647.872c-30.208-22.336-61.568 39.36-100.992 77.44-39.36 38.08-34.112 31.488-123.392-17.088S311.488 540.224 280 491.648C248.448 443.072 265.472 424.704 265.472 424.704s78.72-62.976 97.152-81.344c18.368-18.368 13.12-30.208 13.12-30.208l-128.64-190.144c-23.616-5.184-64.32 5.12-128.576 57.6C54.208 233.088 30.592 353.856 151.296 575.68c120.768 221.824 347.84 330.752 485.568 374.08 137.856 43.328 228.416-61.696 249.408-103.68 21.056-41.984 13.12-85.312 13.12-85.312S745.856 670.208 715.648 647.872z"      p-id="1642" fill="#ff0000"></path>    <path      d="M715.328 64C580.992 64 472.192 172.864 472.192 307.2s108.8 243.2 243.136 243.2 243.2-108.864 243.2-243.2S849.6 64 715.328 64zM715.328 461.056c-84.992 0-153.856-68.864-153.856-153.856s68.864-153.856 153.856-153.856 153.856 68.928 153.856 153.856S800.32 461.056 715.328 461.056z"      p-id="1643" fill="#ff0000"></path>    <path      d="M777.472 277.376c-18.176 0-32.96-14.784-32.96-33.024 0-8.448 3.136-16.064 8.32-21.888-11.52-5.12-24.128-8-37.568-8-51.2 0-92.672 41.472-92.672 92.736s41.472 92.736 92.672 92.736S808.064 358.4 808.064 307.2c0-13.696-3.072-26.688-8.384-38.4C793.728 274.112 786.048 277.376 777.472 277.376zM715.328 340.928c-18.624 0-33.664-15.104-33.664-33.728 0-18.624 15.04-33.728 33.664-33.728 18.688 0 33.728 15.104 33.728 33.728C749.056 325.824 734.016 340.928 715.328 340.928z"      p-id="1644" fill="#ff0000"></path>  </svg> </span><span>关闭对讲</span>',I.onclick=function(){s.opt,s.stopTalk(),j("destory",0),s.openSound(0),this.setAttribute("class","ptp-talk on hide"),_.setAttribute("class","ptp-talk off")},C.appendChild(_),C.appendChild(I)}if(g().broadcastModule){var P=document.createElement("div"),N=document.createElement("div");function V(e){a(o+"/api/lapp/voice/query","POST",{accessToken:s.opt.accessToken,pageStart:e,pageSize:r.state.pageSize,default:r.state.fetchDefaultList?"true":"false"},0,function(t){200==t.code&&(function(e){if(e&&e.length>0){for(var t=0;t<e.length;t++){var i=document.createElement("li");i.innerHTML="<li class='voice-item' id='voice-item-"+t+"' data-time="+(e[t].duration||20)+" data-url="+e[t].fileUrl+">"+(e[t].voiceName.length>10?e[t].voiceName.substr(0,10)+"...":e[t].voiceName)+"</li>",document.getElementsByClassName("voice-list-ul")[0].append(i),i.onclick=function(e){e.target,e.target.dataset.url;var t=e.target.dataset.url,i=e.target.dataset.time;L(t,i)}}e.length===r.state.pageSize?document.getElementById("voice-list-end").innerHTML="向下滚动加载更多":document.getElementById("voice-list-end").innerHTML="没有更多数据了"}}(t.data),r.state.page=t.page.page,0!=e||0!=t.data.length||r.state.fetchDefaultList||(r.state.fetchDefaultList=!0,V(0)))})}function L(t,i){a(o+"/api/lapp/voice/send","POST",{accessToken:s.opt.accessToken,deviceSerial:s.opt.deviceSerial,channelNo:s.opt.channelNo,fileUrl:t},0,function(t){t.data,200==t.code?j("sub",parseInt(i)):"10001"==t.code?e.layer.msg("未找到当前语音"):e.layer.msg(t.msg||"发送失败，请稍后再试")})}P.setAttribute("class","broadcast off"),N.setAttribute("class","broadcast on hide"),P.innerHTML=' <span title="语音播报">  <svg t="1583561695846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1126" width="16" height="16">    <path      d="M513.82044445 964.38044445c-8.192 0-15.47377778-2.73066667-21.84533334-8.192 0 0-46.42133333-41.87022222-99.21422222-86.47111112-89.20177778-73.728-117.41866667-88.29155555-123.79022222-90.112H35.04355555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666V271.70133333c0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666666H246.21511111c7.28177778-2.73066667 37.31911111-15.47377778 137.44355556-91.02222222 58.25422222-43.69066667 111.04711111-86.47111111 111.04711111-86.47111112 5.46133333-4.55111111 12.74311111-7.28177778 20.02488889-7.28177778 4.55111111 0 10.01244445 0.91022222 14.56355555 3.6408889 10.92266667 5.46133333 18.20444445 17.29422222 18.20444445 30.03733333v837.40444444c0 12.74311111-7.28177778 25.48622222-19.11466667 30.94755556-5.46133333 1.82044445-10.01244445 2.73066667-14.56355555 2.73066667zM270.79111111 724.992c19.11466667 0 48.24177778 8.192 167.48088889 106.496 16.384 13.65333333 33.67822222 28.21688889 51.88266667 43.69066667l5.46133333 4.55111111V139.71911111l-5.46133333 3.64088889c-22.75555555 17.29422222-44.60088889 34.58844445-65.536 50.06222222C293.54666667 291.72622222 264.41955555 299.008 245.30488889 299.008H82.37511111c-20.02488889 0-21.84533333 12.74311111-21.84533333 26.39644445V694.04444445c0 23.66577778 6.37155555 30.03733333 28.21688889 30.03733333h180.224l1.82044444 0.91022222z m520.64711111 162.01955555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666 0-11.83288889 8.192-20.02488889 16.384-24.576 112.86755555-67.35644445 182.04444445-191.14666667 182.04444444-324.03911111 0-132.89244445-70.08711111-256.68266667-182.04444444-324.03911111-10.01244445-5.46133333-15.47377778-14.56355555-15.47377778-24.576 0-14.56355555 11.83288889-27.30666667 26.39644445-27.30666667 5.46133333 0 10.01244445 1.82044445 16.384 5.46133333 128.34133333 76.45866667 207.53066667 218.45333333 207.53066666 369.55022222 0 152.00711111-80.09955555 293.09155555-208.44088889 369.55022223-6.37155555 5.46133333-10.92266667 7.28177778-16.384 7.28177777z m-90.112-152.91733333c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666667 0-10.01244445 4.55111111-18.20444445 12.74311111-23.66577777 61.89511111-34.58844445 100.12444445-100.12444445 100.12444444-171.12177778 0-70.08711111-37.31911111-134.71288889-96.48355555-170.21155555-8.192-4.55111111-12.74311111-13.65333333-12.74311111-23.66577778 0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666667 4.55111111 0 11.83288889 2.73066667 15.47377778 4.55111111 74.63822222 44.60088889 121.96977778 127.43111111 121.96977778 215.72266667 0 90.112-48.24177778 173.85244445-125.61066667 218.45333333-1.82044445 0-9.10222222 4.55111111-15.47377778 4.55111111z"      fill="#ffffff" p-id="1127"></path>  </svg></span><span>语音播报</span>',P.onclick=function(){this.setAttribute("class","broadcast off hide"),N.setAttribute("class","broadcast on")},N.innerHTML='<div class="pop-hover">  <div class="pop-hover-content">    <div class="vioce-list" id="voice-list">      <ul class="voice-list-ul">      </ul>      <div id="voice-list-end"></div>    </div>    <div id="voice-custom" style="text-align: center;">自定义语音</div>  </div></div><span title="语音播报">  <svg t="1583561695846" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1126" width="16" height="16">    <path      d="M513.82044445 964.38044445c-8.192 0-15.47377778-2.73066667-21.84533334-8.192 0 0-46.42133333-41.87022222-99.21422222-86.47111112-89.20177778-73.728-117.41866667-88.29155555-123.79022222-90.112H35.04355555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666V271.70133333c0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666666H246.21511111c7.28177778-2.73066667 37.31911111-15.47377778 137.44355556-91.02222222 58.25422222-43.69066667 111.04711111-86.47111111 111.04711111-86.47111112 5.46133333-4.55111111 12.74311111-7.28177778 20.02488889-7.28177778 4.55111111 0 10.01244445 0.91022222 14.56355555 3.6408889 10.92266667 5.46133333 18.20444445 17.29422222 18.20444445 30.03733333v837.40444444c0 12.74311111-7.28177778 25.48622222-19.11466667 30.94755556-5.46133333 1.82044445-10.01244445 2.73066667-14.56355555 2.73066667zM270.79111111 724.992c19.11466667 0 48.24177778 8.192 167.48088889 106.496 16.384 13.65333333 33.67822222 28.21688889 51.88266667 43.69066667l5.46133333 4.55111111V139.71911111l-5.46133333 3.64088889c-22.75555555 17.29422222-44.60088889 34.58844445-65.536 50.06222222C293.54666667 291.72622222 264.41955555 299.008 245.30488889 299.008H82.37511111c-20.02488889 0-21.84533333 12.74311111-21.84533333 26.39644445V694.04444445c0 23.66577778 6.37155555 30.03733333 28.21688889 30.03733333h180.224l1.82044444 0.91022222z m520.64711111 162.01955555c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666666 0-11.83288889 8.192-20.02488889 16.384-24.576 112.86755555-67.35644445 182.04444445-191.14666667 182.04444444-324.03911111 0-132.89244445-70.08711111-256.68266667-182.04444444-324.03911111-10.01244445-5.46133333-15.47377778-14.56355555-15.47377778-24.576 0-14.56355555 11.83288889-27.30666667 26.39644445-27.30666667 5.46133333 0 10.01244445 1.82044445 16.384 5.46133333 128.34133333 76.45866667 207.53066667 218.45333333 207.53066666 369.55022222 0 152.00711111-80.09955555 293.09155555-208.44088889 369.55022223-6.37155555 5.46133333-10.92266667 7.28177778-16.384 7.28177777z m-90.112-152.91733333c-14.56355555 0-26.39644445-11.83288889-26.39644444-27.30666667 0-10.01244445 4.55111111-18.20444445 12.74311111-23.66577777 61.89511111-34.58844445 100.12444445-100.12444445 100.12444444-171.12177778 0-70.08711111-37.31911111-134.71288889-96.48355555-170.21155555-8.192-4.55111111-12.74311111-13.65333333-12.74311111-23.66577778 0-14.56355555 11.83288889-27.30666667 26.39644444-27.30666667 4.55111111 0 11.83288889 2.73066667 15.47377778 4.55111111 74.63822222 44.60088889 121.96977778 127.43111111 121.96977778 215.72266667 0 90.112-48.24177778 173.85244445-125.61066667 218.45333333-1.82044445 0-9.10222222 4.55111111-15.47377778 4.55111111z"      fill="#ff0000" p-id="1127"></path>  </svg></span><span>语音播报</span>',N.onclick=function(){this.setAttribute("class","broadcast on hide"),P.setAttribute("class","broadcast off")},C.appendChild(P),C.appendChild(N),document.getElementById("voice-custom").onclick=function(){$.setAttribute("class","speak off")},V(0);var $=document.createElement("div"),E=document.createElement("div");$.setAttribute("class","speak off hide"),E.setAttribute("class","speak on hide"),$.setAttribute("id","startSpeak"),E.setAttribute("id","stopSpeak"),$.innerHTML='<span title="按住说话">  <svg t="1581994757678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"    p-id="1639" width="16" height="16">    <path      d="M757.059829 393.846154v-52.512821h262.564103v52.512821H757.059829z m-420.102564 481.367521v96.273504h175.042735a8.752137 8.752137 0 0 1 8.752137 8.752137v35.008547a8.752137 8.752137 0 0 1-8.752137 8.752137H109.401709a8.752137 8.752137 0 0 1-8.752136-8.752137v-35.008547a8.752137 8.752137 0 0 1 8.752136-8.752137h175.042735v-96.273504C129.767932 875.213675 4.376068 749.821812 4.376068 595.145299V463.863248a26.25641 26.25641 0 1 1 52.512821 0v113.777778c0 140.174222 113.637744 253.811966 253.811966 253.811965s253.811966-113.637744 253.811966-253.811965V463.863248a26.25641 26.25641 0 1 1 52.51282 0v131.282051c0 154.676513-125.391863 280.068376-280.068376 280.068376z m-26.25641-96.273504c-111.178393 0-201.299145-90.120752-201.299146-201.299145V201.299145C109.401709 90.120752 199.522462 0 310.700855 0s201.299145 90.120752 201.299145 201.299145v376.341881c0 111.178393-90.120752 201.299145-201.299145 201.299145z m691.418803-280.068376H757.059829v-52.512821h245.059829v52.512821z m-17.504273 105.025641H757.059829v-52.512821h227.555556v52.512821z m-17.504274 105.025641H757.059829v-52.512821h210.051282v52.512821z m-8.752137 105.025641H757.059829v-52.512821h201.299145v52.512821z m-17.504273 105.025641H757.059829v-52.512821h183.794872v52.512821z m-26.25641 105.025641H757.059829v-52.512821h157.538462v52.512821z"      p-id="1640" fill="#ffffff"></path>  </svg></span><span>按住说话</span>',E.innerHTML='<span title="按住说话"><svg t="1581994757678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"  p-id="1639" width="16" height="16">  <path    d="M757.059829 393.846154v-52.512821h262.564103v52.512821H757.059829z m-420.102564 481.367521v96.273504h175.042735a8.752137 8.752137 0 0 1 8.752137 8.752137v35.008547a8.752137 8.752137 0 0 1-8.752137 8.752137H109.401709a8.752137 8.752137 0 0 1-8.752136-8.752137v-35.008547a8.752137 8.752137 0 0 1 8.752136-8.752137h175.042735v-96.273504C129.767932 875.213675 4.376068 749.821812 4.376068 595.145299V463.863248a26.25641 26.25641 0 1 1 52.512821 0v113.777778c0 140.174222 113.637744 253.811966 253.811966 253.811965s253.811966-113.637744 253.811966-253.811965V463.863248a26.25641 26.25641 0 1 1 52.51282 0v131.282051c0 154.676513-125.391863 280.068376-280.068376 280.068376z m-26.25641-96.273504c-111.178393 0-201.299145-90.120752-201.299146-201.299145V201.299145C109.401709 90.120752 199.522462 0 310.700855 0s201.299145 90.120752 201.299145 201.299145v376.341881c0 111.178393-90.120752 201.299145-201.299145 201.299145z m691.418803-280.068376H757.059829v-52.512821h245.059829v52.512821z m-17.504273 105.025641H757.059829v-52.512821h227.555556v52.512821z m-17.504274 105.025641H757.059829v-52.512821h210.051282v52.512821z m-8.752137 105.025641H757.059829v-52.512821h201.299145v52.512821z m-17.504273 105.025641H757.059829v-52.512821h183.794872v52.512821z m-26.25641 105.025641H757.059829v-52.512821h157.538462v52.512821z"    p-id="1640" fill="#ff0000"></path></svg></span><span>松开发送</span>',C.appendChild($),C.appendChild(E),document.getElementById("voice-list").onscroll=function(e){var t=this.scrollHeight;this.scrollTop,document.getElementById("voice-list").clientHeight,t<=this.scrollTop+this.clientHeight&&(r.state.page,V(++r.state.page))};var A,O=document.createElement("div");O.setAttribute("class","time-area"),O.setAttribute("id","time-area"),O.innerHTML="00:00",C.appendChild(O),document.getElementById("startSpeak").onmousedown=function(){if(r.state.countTimer)return e.layer.msg("语音设备正忙，请稍后重试"),!1;var t;function i(i){var a=t.createMediaStreamSource(i);A=new e.Recorder(a)}$.setAttribute("class","speak off hide"),E.setAttribute("class","speak on"),function(){try{e.AudioContext=e.AudioContext||e.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia,e.URL=e.URL||e.webkitURL,t=new AudioContext,navigator.getUserMedia}catch(t){e.layer.msg("No web audio support in this browser!")}navigator.getUserMedia({audio:!0},i,function(e){})}(),j("add",0),setTimeout(function(){r.state.recodeTime=0,A&&A.record()},1e3),r.state.recodeTimer&&clearInterval(r.state.recodeTimer),r.state.recodeTimer=setInterval(function(){r.state.recodeTime>=59?(s.stopTalk(),j("destory",0),this.setAttribute("class","ptp-talk on hide"),_.setAttribute("class","ptp-talk off"),e.layer.msg("不超过1分钟")):r.state.recodeTime=r.state.recodeTime+1},1e3)},document.getElementById("stopSpeak").onmouseup=function(){E.setAttribute("class","speak on hide"),function(){if(j("destory",0),r.state.recodeTime<1)return e.layer.msg("说话时间过短"),clearInterval(r.state.recodeTimer),!1;clearInterval(r.state.recodeTimer),function(){try{A&&A.stop(),A&&A.exportWAV(function(t){if(t.size<1e3)return e.layer.msg("录音失败，请重试"),r.state.recodeTime=0,!1;j("sub",r.state.recodeTime+2);var i=new FormData;i.append("voiceFile",t),i.append("accessToken",s.opt.accessToken),i.append("deviceSerial",s.opt.deviceSerial),i.append("channelNo",s.opt.channelNo),a(o+"/api/lapp/voice/sendonce","POST",{voiceFile:t,accessToken:s.opt.accessToken,deviceSerial:s.opt.deviceSerial,channelNo:s.opt.channelNo},0,function(t){t.data,200==t.code?j("sub",r.state.recodeTime+2):"10001"==t.code?e.layer.msg("未找到当前语音"):e.layer.msg(t.msg||"发送失败，请稍后再试")})}),A&&A.clear()}catch(e){}}()}()}}function j(e,t){if(clearInterval(r.state.countTimer),"add"===e){var i=t;r.state.countTimer=setInterval(function(){++i,document.getElementById("time-area").innerHTML=a(i)},1e3)}else if("sub"===e){i=t;r.state.countTimer=setInterval(function(){i>0?(i--,document.getElementById("time-area").innerHTML=a(i)):(clearInterval(r.state.countTimer),r.state.countTimer=void 0)},1e3)}else"destory"===e&&(clearInterval(r.state.countTimer),r.state.countTimer=void 0,document.getElementById("time-area").innerHTML="00:00");function a(e){var t,i,a,r=parseInt(e),o=0,n=0;return r>59&&(o=parseInt(r/60),r=parseInt(r%60),o>59&&(n=parseInt(o/60),o=parseInt(o%60))),t=parseInt(r)>9?parseInt(r):"0"+parseInt(r),i=parseInt(o)>9?parseInt(o):"0"+parseInt(o),a=parseInt(n)>9?parseInt(n):"0"+parseInt(n),n>0?a+":"+i+":"+t:o>0?i+":"+t:"00:"+t}}}}})});s=this;e.addEventListener("message",function(e){e.origin;var i=s.opt.id;if(e.data.type)switch(e.data.type){case"openSound":i==e.data.id&&t.openSoundCallBack&&t.openSoundCallBack(e.data);break;case"closeSound":i==e.data.id&&t.closeSoundCallBack&&t.closeSoundCallBack(e.data);break;case"capturePicture":i==e.data.id&&t.capturePictureCallBack&&t.capturePictureCallBack(e.data);break;case"startSave":i==e.data.id&&t.startSaveCallBack&&t.startSaveCallBack(e.data);break;case"stopSave":i==e.data.id&&t.stopSaveCallBack&&t.stopSaveCallBack(e.data);break;case"fullScreen":i==e.data.id&&t.fullScreenCallBack&&t.fullScreenCallBack(e.data);break;case"getOSDTime":i==e.data.id&&t.getOSDTimeCallBack&&t.getOSDTimeCallBack(e.data);break;case"handleSuccess":i==e.data.id&&t.handleSuccess&&t.handleSuccess(e.data);break;case"handleError":i==e.data.id&&t.handleError&&t.handleError(e.data);break;case"dblclick":i==e.data.id&&s.opt.bSupporDoubleClickFull&&(0===s.opt.fullScreenStatus?s.fullScreen():s.cancelFullScreen())}})};return s.prototype.play=function(t){var i="EZUIKitPlayer-"+this.opt.id,a=document.getElementById(i).contentWindow;"object"==typeof t&&t.url&&(this.opt.url=t.url),"object"==typeof t&&t.accessToken&&(this.opt.accessToken=t.accessToken),"string"==typeof t&&(this.opt.url=t),a.postMessage({action:"play",accessToken:this.opt.accessToken,url:this.opt.url},o+"/ezopen/h5/iframe");var r=this;return this.opt.videoLoading=!0,new Promise(function(t,i){e.addEventListener("message",function(e){r.opt.id==e.data.id&&"handleSuccess"===e.data.type&&(setTimeout(()=>{r.opt.videoLoading=!1},1e3),t(e.data))})})},s.prototype.stop=function(){var t="EZUIKitPlayer-"+this.opt.id;document.getElementById(t).contentWindow.postMessage("stop",o+"/ezopen/h5/iframe");var i=this;return new Promise(function(t,a){e.addEventListener("message",function(e){i.opt.id==e.data.id&&"stop"===e.data.type&&t(e.data)})})},s.prototype.openSound=function(){var t="EZUIKitPlayer-"+this.opt.id;document.getElementById(t).contentWindow.postMessage("openSound",o+"/ezopen/h5/iframe");var i=this;return new Promise(function(t,a){e.addEventListener("message",function(e){i.opt.id==e.data.id&&"openSound"===e.data.type&&t(e.data)})})},s.prototype.closeSound=function(){var t="EZUIKitPlayer-"+this.opt.id;document.getElementById(t).contentWindow.postMessage("closeSound",o+"/ezopen/h5/iframe");var i=this;return new Promise(function(t,a){e.addEventListener("message",function(e){i.opt.id==e.data.id&&"closeSound"===e.data.type&&t(e.data)})})},s.prototype.startSave=function(t){var i="EZUIKitPlayer-"+this.opt.id;document.getElementById(i).contentWindow.postMessage({action:"startSave",fileName:t||"default"},o+"/ezopen/h5/iframe");var a=this;return new Promise(function(t,i){e.addEventListener("message",function(e){a.opt.id==e.data.id&&"startSave"===e.data.type&&t(e.data)})})},s.prototype.stopSave=function(){var t="EZUIKitPlayer-"+this.opt.id;document.getElementById(t).contentWindow.postMessage("stopSave",o+"/ezopen/h5/iframe");var i=this;return new Promise(function(t,a){e.addEventListener("message",function(e){i.opt.id==e.data.id&&"stopSave"===e.data.type&&t(e.data)})})},s.prototype.fullScreen=function(){if(1===this.opt.fullScreenStatus)return!1;var t=this,i="EZUIKitPlayer-"+this.opt.id,a=document.getElementById(i).contentWindow;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var r=document.documentElement.clientWidth,n=document.documentElement.clientHeight,s=(document.body,"");s+="width:"+n+"px;",s+="height:"+r+"px;",s+="-webkit-transform: rotate(90deg); transform: rotate(90deg);",s+="-webkit-transform-origin: "+r/2+"px "+r/2+"px;",s+="transform-origin: "+r/2+"px "+r/2+"px;",s+="position: fixed;top: 0;left: 0;z-index:10",document.getElementById(i).style.cssText=s;var l=document.createElement("div");l.id=i+"cancel-full-screen";var c="width:30px;height:"+n+"px;z-index:1000;position:fixed;top:0px;right:0px;";c+="background-image: url(https://resource.ys7cloud.com/group1/M00/00/7E/CtwQE1-01qeAH2wAAAABOliqQ5g167.png);",c+="background-size: contain;background-repeat:no-repeat;background-color:rgba(0,0,0,0.2)",l.style=c,l.onclick=function(){t.cancelFullScreen()},document.body.appendChild(l),setTimeout(function(){a.postMessage("autoResize",o+"/ezopen/h5/iframe")},200)}else{!function(t){var i=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen;if(i)i.call(t);else if(void 0!==e.ActiveXObject){var a=new ActiveXObject("WScript.Shell");null!==a&&a.SendKeys("{F11}")}}(document.getElementById(i)),setTimeout(function(){a.postMessage("autoResize",o+"/ezopen/h5/iframe")},200)}this.params.fullScreenCallBack&&this.params.fullScreenCallBack(this.opt.id),this.opt.fullScreenStatus=1},s.prototype.cancelFullScreen=function(){if(0===this.opt.fullScreenStatus)return!1;var e="EZUIKitPlayer-"+this.opt.id,t=document.getElementById(e).contentWindow;if(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)){var i=document.getElementById(e).width,a=document.getElementById(e).height,r=(document.body,"");r+="width:"+i+"px;",r+="height:"+a+"px;",r+="-webkit-transform: rotate(0); transform: rotate(0);",r+="-webkit-transform-origin: 0 0;",r+="transform-origin: 0 0;",document.getElementById(e).style.cssText=r,setTimeout(function(){t.postMessage("autoResize",o+"/ezopen/h5/iframe")},200);var n=e+"cancel-full-screen",s=document.getElementById(n);s&&document.body.removeChild(s)}else document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen();this.params.cancelFullScreenCallBack&&this.params.cancelFullScreenCallBack(this.opt.id),this.opt.fullScreenStatus=0},s.prototype.capturePicture=function(t,i){var a="EZUIKitPlayer-"+this.opt.id;document.getElementById(a).contentWindow.postMessage({action:"capturePicture",fileName:t||"default",isUndownload:i},o+"/ezopen/h5/iframe");var r=this;return new Promise(function(t,i){e.addEventListener("message",function(e){r.opt.id==e.data.id&&"capturePicture"===e.data.type&&t(e.data)})})},s.prototype.enableZoom=function(){var e="EZUIKitPlayer-"+this.opt.id;document.getElementById(e).contentWindow.postMessage("enableZoom",o+"/ezopen/h5/iframe")},s.prototype.closeZoom=function(){var e="EZUIKitPlayer-"+this.opt.id;document.getElementById(e).contentWindow.postMessage("closeZoom",o+"/ezopen/h5/iframe")},s.prototype.getOSDTime=function(){var t="EZUIKitPlayer-"+this.opt.id;document.getElementById(t).contentWindow.postMessage("getOSDTime",o+"/ezopen/h5/iframe");var i=this;return new Promise(function(t,a){e.addEventListener("message",function(e){i.opt.id==e.data.id&&"getOSDTime"===e.data.type&&t(e.data)})})},s.prototype.autoResize=function(){var e="EZUIKitPlayer-"+this.opt.id;document.getElementById(e).contentWindow.postMessage("autoResize",o+"/ezopen/h5/iframe")},s.prototype.reSize=function(e,t){var i="EZUIKitPlayer-"+this.opt.id,a=document.getElementById(i).contentWindow,r=document.getElementById(this.opt.id);r.style.width=e+"px",r.style.height=t+"px";var n=document.getElementById(i);n.setAttribute("width",e),n.setAttribute("height",t),setTimeout(function(){a.postMessage({action:"autoResize"},o+"/ezopen/h5/iframe")},200)},s.prototype.startTalk=function(){this.opt;var t=this;r.opt=this.opt;a(t.opt.apiDomain,"POST",{accessToken:t.opt.accessToken,deviceSerial:t.opt.deviceSerial,channelNo:t.opt.channelNo},0,function(i){if(200==i.code){var a=i.data;if(a){var r=a.rtcUrl;-1===r.indexOf("ws")&&(r=r.replace("https","wss").replace("rtcgw","rtcgw-ws")),t.opt.rtcUrl=r,t.opt.ttsUrl="tts://"+a.ttsUrl;var o="talk://"+t.opt.deviceSerial+":0:"+t.opt.channelNo+":cas.ys7.com:6500";t.opt.talkLink=t.opt.ttsUrl+"/"+o,t.opt.stream=a.stream,e.startTalk()}}})},s.prototype.stopTalk=function(){e.stopTalk()},r.EZUIKitPlayer=s,e.EZUIKit=r,t||(e.EZUIKit=r),r},"object"==typeof e.exports?e.exports=a.document?r(a,!0):function(e){if(!e.document)throw new Error("EZUIPlayer requires a window with a document");return r(e)}:r(a)},"3b50":function(e,t,i){},"3c38":function(e,t,i){"use strict";i("4386")},4117:function(e,t,i){"use strict";i.r(t);i("1d43"),i("5b12"),i("9b5f"),i("e3b5");var a=i("3de1"),r=i("2a6f"),o=i("6abc"),n=i("7dd6"),s=(i("27ae"),i("d447"),i("3bae"),i("3337"),i("5d08"),i("fc13"),i("62f9"),i("8c2f"),i("3335")),l={components:{draggable:i.n(s).a},data:function(){var e;return e={orderVarsArr:[],orderVarsDialogVisible:!1,orderType:1,orderTitle:"",currSelDevGuid:"",leftDialogVisible:!1,rightDialogVisible:!1,frontDialogVisible:!1,backDialogVisible:!1,dialogVisible:!1,dialogWidth:"6rem",title:"选择变量",sideConfigType:1,dialogParamList:[],paramSelectRadio:{varName:"",varGuid:"",varUnit:"",isOnOff:0,bigImage:"",smallImage:"",number:""},devList:[],dialogSearch:""},Object(n.a)(e,"devList",[]),Object(n.a)(e,"station",{id:"",name:""}),Object(n.a)(e,"varList",[]),Object(n.a)(e,"configDevice",{leftSide:"",rightSide:"",frontSide:[],frontVarsJson:{},backSide:[],backVarsJson:{},goSide:{varGuid:"",varName:""},comeSide:{varGuid:"",varName:""}}),Object(n.a)(e,"oldConfigDevice",{leftSide:"",rightSide:"",frontSide:[],frontVarsJson:{},backSide:[],backVarsJson:{},goSide:{varGuid:"",varName:""},comeSide:{varGuid:"",varName:""}}),Object(n.a)(e,"defaultConfigDevice",{leftSide:"",rightSide:"",frontSide:[],frontVarsJson:{},backSide:[],backVarsJson:{},goSide:{varGuid:"",varName:""},comeSide:{varGuid:"",varName:""}}),Object(n.a)(e,"leftValveData",[]),Object(n.a)(e,"rightValveData",[]),Object(n.a)(e,"frontTemperatureData",[]),Object(n.a)(e,"backTemperatureData",[]),Object(n.a)(e,"goTemperature",{data:{v:"0.00"}}),Object(n.a)(e,"comeTemperature",{data:{v:"0.00"}}),Object(n.a)(e,"temperatureChart",null),Object(n.a)(e,"frontUpImageUrl",""),Object(n.a)(e,"backUpImageUrl",""),Object(n.a)(e,"frontShowImageUrl",""),Object(n.a)(e,"backShowImageUrl",""),Object(n.a)(e,"fileFrontList",[]),Object(n.a)(e,"fileBackList",[]),Object(n.a)(e,"chart",null),Object(n.a)(e,"temperatureChart",null),e},created:function(){},props:{currItem:Object},computed:{},watch:{"configDevice.leftSide":function(e){this.doPreConfig(null,"2")},"configDevice.rightSide":function(e){this.doPreConfig(null,"3")},"configDevice.frontSide":function(e){this.doPreConfig(null,"4")},"configDevice.backSide":function(e){this.doPreConfig(null,"5")},configDevice:function(e){this.doPreConfig(null,"6")},currItem:function(e,t){this.changeCurrItem()}},mounted:function(){this.changeCurrItem()},methods:{doOrderConfig:function(){for(var e=[],t=0;t<this.leftValveData.length;t++)e.push(this.leftValveData[t].varGuid);this.configDevice.leftVarsArr=e;for(var i=[],a=0;a<this.rightValveData.length;a++)i.push(this.rightValveData[a].varGuid);this.configDevice.rightVarsArr=i;for(var r={},o=0;o<this.frontTemperatureData.length;o++)for(var n=this.frontTemperatureData[o].varData,s=0;s<n.length;s++){var l=n[s].devGuid.toString(),c=n[s].varGuid.toString();r[l]?r[l].push(c):r[l]=[c]}this.configDevice.frontVarsJson=r;for(var d={},u=0;u<this.backTemperatureData.length;u++)for(var h=this.backTemperatureData[u].varData,p=0;p<h.length;p++){var f=h[p].devGuid.toString(),m=h[p].varGuid.toString();d[f]?d[f].push(m):d[f]=[m]}this.configDevice.backVarsJson=d},confirmOrderDialog:function(){if(5==this.orderType||6==this.orderType)return this.doPreConfig(this.orderVarsArr,"7"),void(this.orderVarsDialogVisible=!1);var e="";if(this.orderVarsArr.length>0&&(e=this.orderVarsArr[0].devGuid),e){for(var t=0,i=0;i<this.dialogParamList.length;i++){if(this.dialogParamList[i].devGuid==e)t<this.orderVarsArr.length?(this.dialogParamList[i]=this.orderVarsArr[t],t++):console.error("变量排序的变量少了。。。。")}t<this.orderVarsArr.length&&console.error("变量未排完！"),this.doPreConfig(null,"8"),this.orderVarsDialogVisible=!1}},orderDialogClose:function(){this.orderVarsDialogVisible=!1},saveConfirm:function(){var e=this,t=document.querySelectorAll(".list-group-item"),i=[],a="";t.forEach(function(e){var t={};"设备"==e.dataset.type?(t.devGuid=e.dataset.guid,t.aliasDevName=e.innerText):(t.varGuid=e.dataset.guid,t.aliasVarName=e.innerText),i.push(t)}),a="设备"==t[0].dataset.type?"/web/virdev/batchUpdateVirDevAliasName":"/web/virdev/batchUpdateVirVarAliasName",this.$axios({method:"post",headers:{},url:a,data:i}).then(function(t){var i=t.data;0==i.code||e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t)})},editInput:function(e){this.orderVarsArr=this.orderVarsArr.map(function(t){return e==t.varGuid&&(t.edit=!0),t})},editCloseInput:function(e){this.orderVarsArr=this.orderVarsArr.map(function(t){return e==t.varGuid&&(t.edit=!1),t})},getDeviceName:function(e){if(!e)return"";for(var t="",i=0;i<this.devList.length;i++)if(this.devList[i].devGuid==e){t=this.devList[i].devName;break}return t},getDeviceGuid:function(e){if(!e)return"";for(var t="",i=0;i<this.devList.length;i++)if(this.devList[i].devName==e){t=this.devList[i].devGuid;break}return t},showOrderVars:function(e,t){this.orderType=e;var i="";switch(e){case 1:this.orderTitle="左阀";var a=this.getDeviceName(this.configDevice.leftSide);a&&(this.orderTitle+="-"+a),this.orderTitle+="的顺序更改",i=this.configDevice.leftSide;break;case 2:this.orderTitle="右阀",(r=this.getDeviceName(this.configDevice.rightSide))&&(this.orderTitle+="-"+r),this.orderTitle+="的顺序更改",i=this.configDevice.rightSide;break;case 3:this.orderTitle="正面";var r=t.devName;i=this.getDeviceGuid(r),r&&(this.orderTitle+="-"+r),this.orderTitle+="的顺序更改";break;case 4:this.orderTitle="反面",(r=t.devName)&&(this.orderTitle+="-"+r),this.orderTitle+="的顺序更改",i=this.getDeviceGuid(r);break;case 5:this.orderTitle="正面绑定设备的顺序更改";var o=[];for(var n in this.configDevice.frontVarsJson){(c={}).varGuid=n;for(var s=0;s<this.devList.length;s++)if(this.devList[s].devGuid==n){r=this.devList[s].devName;var l=this.devList[s].aliasDevName?this.devList[s].aliasDevName:this.devList[s].devName;c.varName=r,c.showName=l,o.push(c);break}}o.length<=1?this.$showMessage("warning","只有一个设备不用排序"):(this.orderVarsArr=o,this.orderVarsDialogVisible=!0);break;case 6:this.orderTitle="反面绑定设备的顺序更改";o=[];for(var n in this.configDevice.backVarsJson){var c;(c={}).varGuid=n;for(s=0;s<this.devList.length;s++)if(this.devList[s].devGuid==n){r=this.devList[s].devName,l=this.devList[s].aliasDevName?this.devList[s].aliasDevName:this.devList[s].devName;c.varName=r,c.showName=l,o.push(c);break}}o.length<=1?this.$showMessage("warning","只有一个设备不用排序"):(this.orderVarsArr=o,this.orderVarsDialogVisible=!0)}if(i){var d=[];for(s=0;s<this.dialogParamList.length;s++){var u=this.dialogParamList[s];u.devGuid==i&&(u.showName=u.aliasVarName?u.aliasVarName:u.varName,d.push(u))}this.orderVarsArr=d,this.orderVarsArr.length>0&&(this.orderVarsDialogVisible=!0)}else console.error("不能获取选中的设备")},changeCurrItem:function(){if(this.leftValveData=[],this.rightValveData=[],this.frontTemperatureData=[],this.backTemperatureData=[],this.configDevice=this.defaultConfigDevice,this.oldConfigDevice=this.defaultConfigDevice,this.devList=[],this.dialogParamList=[],this.frontShowImageUrl="",this.backShowImageUrl="",this.fileFrontList=[],this.fileBackList=[],2==this.currItem.type){this.currItem.stationGuid;this.getSingleParamList();var e=this.currItem.id.split("-");this.frontUpImageUrl="web/project/uploadPicture?projectId="+e[1]+"&type=front",this.backUpImageUrl="web/project/uploadPicture?projectId="+e[1]+"&type=back",this.frontShowImageUrl="/uploadFile/"+e[1]+"/img/front.jpg?"+(new Date).getTime(),this.backShowImageUrl="/uploadFile/"+e[1]+"/img/back.jpg?"+(new Date).getTime()}},handleBackChange:function(e,t){this.fileBackList=t.slice(-1)},handleFrontChange:function(e,t){this.fileFrontList=t.slice(-1)},handleSuccessUPload:function(){if(2==this.currItem.type){var e=this.currItem.id.split("-");this.frontShowImageUrl="/uploadFile/"+e[1]+"/img/front.jpg?"+(new Date).getTime(),this.backShowImageUrl="/uploadFile/"+e[1]+"/img/back.jpg?"+(new Date).getTime()}},handleErrorUpload:function(e,t,i){this.$showMessage("error","上传图片失败："+e)},onBeforeUploadImage:function(e){if(1==this.currItem.type)return this.$showMessage("warning","请选择项目！"),!1;var t=e.name.replace(/.+\./,"");return-1!==["png","jpg","jpeg"].indexOf(t.toLowerCase())||(this.$showMessage("warning","请上传后缀名为png、jpg、jpeg的附件!"),!1)},dialogClose:function(){this.dialogVisible=!1},selecDevShowParam:function(e){for(var t=0;t<this.devList.length;t++)this.devList[t].isActive=!1;e.isActive=!0,this.currSelDevGuid=e.devGuid},showParamDialogClick:function(e){1!=this.currItem.type?(this.sideConfigType=e,this.dialogVisible=!0,this.$nextTick(function(){var e="";switch(this.sideConfigType){case 1:e=this.configDevice.goSide.varGuid;break;case 2:e=this.configDevice.comeSide.varGuid}e&&(this.paramSelectRadio.varGuid=e),this.selecDevShowParam(this.devList[0])})):this.$showMessage("warning","请选择项目!")},getSingleParamList:function(){var e=this;if(1!=this.currItem.type&&this.currItem.stationGuid){var t={stationGuid:this.currItem.stationGuid};this.$axios({method:"get",headers:{},url:"/web/station/queryVirDevsVirVars",params:t}).then(function(t){var i=t.data;if(0==i.code){var a=[{devGuid:"",devName:"所有设备",isActive:!0}],r=i.info.virDevs;r=r.map(function(e){return e.devName=e.aliasDevName?e.aliasDevName:e.devName,e.edit=!1,e.virVars.forEach(function(e){e.varName=e.aliasVarName?e.aliasVarName:e.varName,e.edit=!1}),e});for(var o=[],n=0;n<r.length;n++){a.push(r[n]);for(var s=0;s<r[n].virVars.length;s++)r[n].virVars[s].devName=r[n].devName,o.push(r[n].virVars[s])}e.devList=a,e.dialogParamList=o,e.dialogParamList.length>0&&e.getProjectConfig()}else e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t)})}},confirmParamBtn:function(){if(""!=this.paramSelectRadio.varGuid){for(var e=0;e<this.dialogParamList.length;e++)if(this.dialogParamList[e].varGuid==this.paramSelectRadio.varGuid){this.paramSelectRadio.varName=this.dialogParamList[e].varName;break}switch(this.sideConfigType){case 1:this.configDevice.goSide.varGuid=this.paramSelectRadio.varGuid,this.configDevice.goSide.varName=this.paramSelectRadio.varName;break;case 2:this.configDevice.comeSide.varGuid=this.paramSelectRadio.varGuid,this.configDevice.comeSide.varName=this.paramSelectRadio.varName}this.dialogVisible=!1}else this.$showMessage("warning","请选中变量")},configureProjectTemplate:function(e,t,i){var a=this,r={projectId:e,type:i,content:JSON.stringify(t)};this.fullscreenLoading=!0,this.$axios({method:"post",headers:{},url:"/web/project/configureProjectConfig",data:r}).then(function(e){var t=e.data;0==t.code?(a.$parent.nosaveData(),a.oldConfigDevice=Object(o.a)({},a.configDevice),a.$showMessage("success","修改成功！")):a.$showMessage("error",t.msg),a.fullscreenLoading=!1}).catch(function(e){a.$showMessage("error",e),a.fullscreenLoading=!1})},saveTemperatureConfig:function(){if(1!=this.currItem.type){var e=this.currItem.id.split("-")[1],t=this.configDevice;this.configureProjectTemplate(e,t,1)}else this.$showMessage("warning","请选择项目！")},doPreConfig:function(e,t){var i=this.configDevice.frontSide,a=this.configDevice.backSide;this.frontTemperatureData=[],this.backTemperatureData=[],this.leftValveData=[],this.rightValveData=[];for(var r=[],n=[],s={},l={},c=this.dialogParamList.length,d=0;d<c;d++){var u=this.dialogParamList[d],h=u.devGuid,p=u.devName,f={devGuid:h,varName:u.varName,varGuid:u.varGuid,mapVarGuid:u.mapVarGuid,data:{commState:0,commStateTime:0,v:"0.00",vtime:0}};h==this.configDevice.leftSide&&r.push(f),h==this.configDevice.rightSide&&n.push(f),i.indexOf(h)>-1&&(s[p]?s[p].push(f):s[p]=[f]),a.indexOf(h)>-1&&(l[p]?l[p].push(f):l[p]=[f])}this.leftValveData=r,this.rightValveData=n;for(var m={},g=[],v=Object.keys(this.configDevice.frontVarsJson),b=0;b<v.length;b++)for(var w=0;w<this.devList.length;w++)if(this.devList[w].devGuid==v[b]){var y=this.devList[w].devName;s&&s[y]&&(g.push(y),m[y]=s[y])}for(var C in s)-1==g.indexOf(C)&&(m[C]=s[C]);s=m;for(var S={},x=[],D=Object.keys(this.configDevice.backVarsJson),T=0;T<D.length;T++)for(var k=0;k<this.devList.length;k++)if(this.devList[k].devGuid==D[T]){var _=this.devList[k].devName;l&&l[_]&&(x.push(_),S[_]=l[_])}for(var C in l)-1==x.indexOf(C)&&(S[C]=l[C]);l=S;var I=[],P=[];if(e){var N={};if(5==this.orderType){for(var V=0;V<e.length;V++){N[p=e[V].varName]=s[p]}s=N}if(6==this.orderType){for(var L=0;L<e.length;L++){N[p=e[L].varName]=l[p]}l=N}}for(var $ in s){var E=s[$];if(E.length>0){var A={devGuid:E[0].devGuid,devName:$,varData:[]};for(V=0;V<E.length;V++)if(A.varData.length<3){if(A.varData.push(E[V]),V==E.length-1){var O=Object(o.a)({},A);I.push(O)}}else{var j=Object(o.a)({},A);if(I.push(j),A.varData=[],A.varData.push(E[V]),V==E.length-1){O=Object(o.a)({},A);I.push(A)}}}else N={devGuid:"",devName:$,varData:[]}}for(var C in this.frontTemperatureData=I,l){var F=l[C];if(F.length>0){var B={devGuid:F[0].devGuid,devName:C,varData:[]};for(V=0;V<F.length;V++)if(B.varData.length<3){if(B.varData.push(F[V]),V==F.length-1){O=Object(o.a)({},B);P.push(O)}}else{j=Object(o.a)({},B);if(P.push(j),B.varData=[],B.varData.push(F[V]),V==F.length-1){O=Object(o.a)({},B);P.push(B)}}}else N={devGuid:"",devName:C,varData:[]}}this.backTemperatureData=P,this.doOrderConfig()},isChange:function(){return Object(a.h)(this.oldConfigDevice,this.configDevice)},changeDialogParam:function(e,t){if(e&&t)for(var i=e.length,a=0,r=0;r<this.dialogParamList.length;r++){this.dialogParamList[r].devGuid==t&&(a<i?(e[a]&&(this.dialogParamList[r]=e[a]),a++):console.error("<changeDialogParam>变量排序的变量少了。。。。"))}},changeOrderByParam:function(){var e=this.configDevice.leftVarsArr,t=this.configDevice.rightVarsArr,i=this.configDevice.frontVarsJson,a=this.configDevice.backVarsJson,r=e.length,o=t.length,n=new Array(r).fill(0),s=new Array(o).fill(0),l={},c={};for(var d in i){var u=i[d].length;l[d]=new Array(u).fill(0)}for(var d in a){u=a[d].length;c[d]=new Array(u).fill(0)}for(var h=0;h<this.dialogParamList.length;h++){var p,f,m=this.dialogParamList[h];if(m.devGuid==this.configDevice.leftSide&&e.length>0)(f=e.indexOf(m.varGuid))>-1?n[f]=m:n.push(m);if(m.devGuid==this.configDevice.rightSide&&t.length>0)(f=t.indexOf(m.varGuid))>-1?s[f]=m:s.push(m);if(this.configDevice.frontSide.indexOf(m.devGuid)>-1&&i)if((p=i[m.devGuid])&&p.length>0)(f=p.indexOf(m.varGuid))>-1?l[m.devGuid][f]=m:l[m.devGuid].push(m);if(this.configDevice.backSide.indexOf(m.devGuid)>-1&&a)if((p=a[m.devGuid])&&p.length>0)(f=p.indexOf(m.varGuid))>-1?c[m.devGuid][f]=m:c[m.devGuid].push(m)}var g=[];for(var d in this.configDevice.leftSide&&n.length>0&&(this.changeDialogParam(n,this.configDevice.leftSide),g.push(this.configDevice.leftSide)),this.configDevice.rightSide&&-1==g.indexOf(this.configDevice.rightSide)&&s.length>0&&(this.changeDialogParam(s,this.configDevice.rightSide),g.push(this.configDevice.leftSide)),l)d&&-1==g.indexOf(d)&&i[d].length>0&&(this.changeDialogParam(l[d],d),g.push(d));for(var d in c)d&&-1==g.indexOf(d)&&a[d].length>0&&(this.changeDialogParam(c[d],d),g.push(d))},getProjectConfig:function(){var e=this,t=this.currItem.id.split("-");this.$axios({method:"get",headers:{},url:"web/project/queryProjectConfig",params:{projectId:t[1],type:1}}).then(function(t){var i=t.data;if(0==i.code&&i.info)try{var a=JSON.parse(i.info);e.configDevice=a,e.oldConfigDevice=Object(o.a)({},e.configDevice),e.changeOrderByParam(),e.doPreConfig(null,1)}catch(e){}else e.leftValveData=[],e.rightValveData=[],e.frontTemperatureData=[],e.backTemperatureData=[],e.configDevice=e.defaultConfigDevice}).catch(function(e){})},getVarList:function(e,t){var i=this,a={devGuid:t};this.$axios({method:"get",headers:{},url:"/web/virdev/queryVirVars",params:a}).then(function(a){var r=a.data;if(0==r.code)for(var o=r.info,n=0;n<o.length;n++){var s={devGuid:t,varName:o[n].varName,varGuid:o[n].varGuid,mapVarGuid:o[n].mapVarGuid,data:{commState:0,commStateTime:0,v:"0.00",vtime:0}};e.push(s)}else i.$showMessage("error",r.msg)}).catch(function(e){i.$showMessage("error",e)})},initChart:function(){this.chart||(this.chart=this.$echarts.init(document.getElementById("temperatureChart"))),this.chart.setOption({xAxis:{data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},tooltip:{show:!0,trigger:"axis"},legend:{left:"right",data:[{name:"去路温度"},{name:"回路温度"}]},series:[{name:"去路温度",data:[820,932,901,934,1290,1330,1320],type:"line",smooth:!0,itemStyle:{color:"rgb(145, 227, 247)"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:.5,colorStops:[{offset:0,color:"rgb(145, 227, 247)"},{offset:1,color:"rgba(255,255,255,.1)"}],global:!1}}},{name:"回路温度",data:[660,1033,700,1e3,1500,600,800],type:"line",smooth:!0,itemStyle:{color:"rgb(34, 145, 227)"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:.5,colorStops:[{offset:0,color:"rgb(34, 145, 227)"},{offset:1,color:"rgba(255,255,255,.1)"}],global:!1}}}]})}}},c=(i("7b81"),i("5d22")),d=Object(c.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"realDataTemplate"},[i("div",{staticClass:"leftContent"},[i("div",{staticClass:"leftTopDiv"},[i("div",{staticClass:"leftTitle"},[i("span",[e._v("冻结回水阀门")]),i("div",{staticClass:"titleIcon"}),i("div",{staticClass:"config-title"},[i("label",[e._v("左阀绑定：")]),i("el-select",{ref:"leftSideSel",attrs:{placeholder:"请选择"},model:{value:e.configDevice.leftSide,callback:function(t){e.$set(e.configDevice,"leftSide",t)},expression:"configDevice.leftSide"}},e._l(e.devList,function(e){return i("el-option",{key:e.devGuid,attrs:{label:e.devName,value:e.devGuid}})}),1),i("label",{staticStyle:{"margin-left":"20px"}},[e._v("右阀绑定：")]),i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.configDevice.rightSide,callback:function(t){e.$set(e.configDevice,"rightSide",t)},expression:"configDevice.rightSide"}},e._l(e.devList,function(e){return i("el-option",{key:e.devGuid,attrs:{label:e.devName,value:e.devGuid}})}),1)],1)]),i("div",{staticClass:"leftContentDiv"},[i("div",{staticClass:"valveDiv",staticStyle:{"background-color":"rgb(50, 116, 251)"},on:{click:function(t){return e.showOrderVars(1)}}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"单击修改变量顺序",placement:"top-start"}},[i("div",{staticClass:"title"},[e._v("左阀")])])],1),e._l(e.leftValveData,function(t){return i("div",{key:t.varGuid,staticClass:"varDiv"},[i("div",{staticClass:"varTitle",staticStyle:{"background-color":"rgb(50, 116, 251)","border-right":"1px solid rgb(50, 116, 251)"}},[e._v(" "+e._s(t.varName)+" ")]),i("div",{staticClass:"varValue leftValBorder",class:t.data.commStateClass},[e._v(" "+e._s(t.data.v)+"℃ ")])])}),i("div",{staticClass:"valveDiv",staticStyle:{"background-color":"rgb(50, 192, 251)","margin-left":"15px"},on:{click:function(t){return e.showOrderVars(2)}}},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"单击修改变量顺序",placement:"top-start"}},[i("div",{staticClass:"title"},[e._v("右阀")])])],1),e._l(e.rightValveData,function(t){return i("div",{key:t.varGuid,staticClass:"varDiv"},[i("div",{staticClass:"varTitle",staticStyle:{"background-color":"rgb(13, 169, 234)","border-right":"1px solid rgb(50, 192, 251)"}},[e._v(" "+e._s(t.varName)+" ")]),i("div",{staticClass:"varValue rightValBorder",class:t.data.commStateClass},[e._v(" "+e._s(t.data.v)+"℃ ")])])})],2)]),i("div",{staticClass:"leftBottomDiv"},[i("div",{staticClass:"leftTitle"},[i("span",[e._v("测温孔温度")]),i("div",{staticClass:"titleIcon"}),i("div",{staticClass:"config-title"},[i("label",[e._v("正面绑定：")]),i("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.configDevice.frontSide,callback:function(t){e.$set(e.configDevice,"frontSide",t)},expression:"configDevice.frontSide"}},e._l(e.devList,function(e){return i("el-option",{key:e.devGuid,attrs:{label:e.devName,value:e.devGuid}})}),1),i("label",{staticStyle:{"margin-left":"20px"}},[e._v("背面绑定：")]),i("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.configDevice.backSide,callback:function(t){e.$set(e.configDevice,"backSide",t)},expression:"configDevice.backSide"}},e._l(e.devList,function(e){return i("el-option",{key:e.devGuid,attrs:{label:e.devName,value:e.devGuid}})}),1)],1)]),i("div",{staticClass:"leftBottomContent"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"单击修改变设备顺序",placement:"top-start"}},[i("div",{staticClass:"temperatureTitle",on:{click:function(t){return e.showOrderVars(5)}}},[i("div",{staticClass:"title"},[e._v("正面测温孔")])])]),e._l(e.frontTemperatureData,function(t,a){return i("div",{key:"front"+a,staticClass:"teperatureDataDiv"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"单击修改变量顺序",placement:"top-start"}},[i("div",{staticClass:"temperatureDev",on:{click:function(i){return e.showOrderVars(3,t)}}},[e._v(" "+e._s(t.devName)+" ")])]),i("div",{staticClass:"temperatureVar",class:t.varData[0]?t.varData[0].data.commStateClass:""},[e._v(" "+e._s(t.varData[0]?t.varData[0].varName:"")+" ")]),i("div",{staticClass:"temperatureVar temperatureVarBack",class:t.varData[0]?t.varData[0].data.commStateClass:""},[e._v(" "+e._s(t.varData[0]?t.varData[0].data.v+"℃":"")+" ")]),i("div",{staticClass:"temperatureVar",class:t.varData[1]?t.varData[1].data.commStateClass:""},[e._v(" "+e._s(t.varData[1]?t.varData[1].varName:"")+" ")]),i("div",{staticClass:"temperatureVar temperatureVarBack",class:t.varData[1]?t.varData[1].data.commStateClass:""},[e._v(" "+e._s(t.varData[1]?t.varData[1].data.v+"℃":"")+" ")]),i("div",{staticClass:"temperatureVar",class:t.varData[2]?t.varData[2].data.commStateClass:""},[e._v(" "+e._s(t.varData[2]?t.varData[2].varName:"")+" ")]),i("div",{staticClass:"temperatureVar temperatureVarBack",class:t.varData[2]?t.varData[2].data.commStateClass:""},[e._v(" "+e._s(t.varData[2]?t.varData[2].data.v+"℃":"")+" ")])],1)}),i("div",{staticStyle:{width:"100%"}}),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"单击修改变设备顺序",placement:"top-start"}},[i("div",{staticClass:"temperatureTitle",on:{click:function(t){return e.showOrderVars(6)}}},[i("div",{staticClass:"title"},[e._v("背面测温孔")])])]),e._l(e.backTemperatureData,function(t,a){return i("div",{key:"back"+a,staticClass:"teperatureDataDiv"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"单击修改变量顺序",placement:"top-start"}},[i("div",{staticClass:"temperatureDev",on:{click:function(i){return e.showOrderVars(4,t)}}},[e._v(" "+e._s(t.devName)+" ")])]),i("div",{staticClass:"temperatureVar",class:t.varData[0]?t.varData[0].data.commStateClass:""},[e._v(" "+e._s(t.varData[0]?t.varData[0].varName:"")+" ")]),i("div",{staticClass:"temperatureVar temperatureVarBack",class:t.varData[0]?t.varData[0].data.commStateClass:""},[e._v(" "+e._s(t.varData[0]?t.varData[0].data.v+"℃":"")+" ")]),i("div",{staticClass:"temperatureVar",class:t.varData[1]?t.varData[1].data.commStateClass:""},[e._v(" "+e._s(t.varData[1]?t.varData[1].varName:"")+" ")]),i("div",{staticClass:"temperatureVar temperatureVarBack",class:t.varData[1]?t.varData[1].data.commStateClass:""},[e._v(" "+e._s(t.varData[1]?t.varData[1].data.v+"℃":"")+" ")]),i("div",{staticClass:"temperatureVar",class:t.varData[2]?t.varData[2].data.commStateClass:""},[e._v(" "+e._s(t.varData[2]?t.varData[2].varName:"")+" ")]),i("div",{staticClass:"temperatureVar temperatureVarBack",class:t.varData[2]?t.varData[2].data.commStateClass:""},[e._v(" "+e._s(t.varData[2]?t.varData[2].data.v+"℃":"")+" ")])],1)})],2)])]),i("div",{staticClass:"rightContent"},[i("div",{staticClass:"rightBack rightTop"},[i("div",{directives:[{name:"preventClick",rawName:"v-preventClick"}],staticClass:"rightTopContent hand-css",staticStyle:{background:"rgb(13, 128, 213)"},on:{click:function(t){return e.showParamDialogClick(1)}}},[i("ul",[i("li",[e._v("去路绑定")]),i("li",[i("el-input",{staticStyle:{width:"80%"},attrs:{type:"text"},model:{value:e.configDevice.goSide.varName,callback:function(t){e.$set(e.configDevice.goSide,"varName",t)},expression:"configDevice.goSide.varName"}})],1)])]),i("div",{staticClass:"rightTopContent",staticStyle:{color:"rgb(13, 128, 213)"}},[e._v(" "+e._s(e.goTemperature.data.v)+"℃ ")]),i("div",{directives:[{name:"preventClick",rawName:"v-preventClick"}],staticClass:"rightTopContent hand-css",staticStyle:{background:"rgb(13, 128, 213)"},on:{click:function(t){return e.showParamDialogClick(2)}}},[i("ul",[i("li",[e._v("回路绑定")]),i("li",[i("el-input",{staticStyle:{width:"80%"},attrs:{type:"text"},model:{value:e.configDevice.comeSide.varName,callback:function(t){e.$set(e.configDevice.comeSide,"varName",t)},expression:"configDevice.comeSide.varName"}})],1)])]),i("div",{staticClass:"rightTopContent",staticStyle:{color:"rgb(15, 184, 225)"}},[e._v(" "+e._s(e.comeTemperature.data.v)+"℃ ")])]),i("div",{staticClass:"rightBack rightMiddle"},[e._m(0),i("div",{staticClass:"rightMiddleContent"},[i("div",{staticClass:"chart",style:{height:"100%",width:"100%"},attrs:{id:"temperatureChart"}})])]),i("div",{staticClass:"rightBottom"},[i("div",{staticClass:"rightBack rightBottomContent"},[e._m(1),i("img",{attrs:{src:e.frontShowImageUrl,alt:""}}),i("el-upload",{staticClass:"upload-demo",attrs:{action:e.frontUpImageUrl,"before-upload":e.onBeforeUploadImage,"on-change":e.handleFrontChange,"file-list":e.fileFrontList,"on-error":e.handleErrorUpload,"on-success":e.handleSuccessUPload,disabled:1==e.currItem.type,limit:2}},[i("el-button",{attrs:{size:"small",type:"primary",disabled:1==e.currItem.type}},[e._v("点击上传")])],1)],1),i("div",{staticClass:"rightBack rightBottomContent",staticStyle:{"margin-left":"10px"}},[e._m(2),i("img",{attrs:{src:e.backShowImageUrl,alt:""}}),i("el-upload",{staticClass:"upload-demo",attrs:{action:e.backUpImageUrl,"before-upload":e.onBeforeUploadImage,"on-change":e.handleBackChange,"file-list":e.fileBackList,"on-error":e.handleErrorUpload,"on-success":e.handleSuccessUPload,disabled:1==e.currItem.type,limit:2}},[i("el-button",{attrs:{size:"small",type:"primary",disabled:1==e.currItem.type}},[e._v("点击上传")])],1)],1)]),i("div",{staticClass:"rightBottomBtn"},[i("el-button",{staticClass:"btn",attrs:{type:"primary",disabled:1==e.currItem.type},on:{click:e.saveTemperatureConfig}},[e._v("保存模板配置")])],1)]),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"single-dialog",attrs:{title:e.title,visible:e.dialogVisible,width:e.dialogWidth},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClose}},[[i("div",{staticClass:"param-dialog-dev"},[i("ul",e._l(e.devList,function(t,a){return i("li",{key:t.devGuid,class:{active:t.isActive},on:{click:function(i){return e.selecDevShowParam(t)}}},[i("span",[e._v(e._s(a+1))]),i("span",[e._v(e._s(t.devName))])])}),0)]),i("div",{staticClass:"param-dialog-param"},[i("div",{staticClass:"search"},[i("el-input",{attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search"},model:{value:e.dialogSearch,callback:function(t){e.dialogSearch=t},expression:"dialogSearch"}})],1),i("div",{staticClass:"bottom-select"},[i("el-radio-group",{model:{value:e.paramSelectRadio.varGuid,callback:function(t){e.$set(e.paramSelectRadio,"varGuid",t)},expression:"paramSelectRadio.varGuid"}},e._l(e.dialogParamList.filter(function(t){return(!e.dialogSearch||t.varName.toLowerCase().includes(e.dialogSearch.toLowerCase()))&&(!e.currSelDevGuid||t.devGuid==e.currSelDevGuid)}),function(t){return i("el-radio",{key:t.varGuid,attrs:{label:t.varGuid}},[e._v(e._s(t.devName)+"-"+e._s(t.varName))])}),1)],1)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticStyle:{display:"flex","justify-content":"center","padding-top":"10px",width:"6rem"}},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary"},on:{click:e.confirmParamBtn}},[e._v("确定新增")])],1)])]],2),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"single-dialog",attrs:{title:e.orderTitle,visible:e.orderVarsDialogVisible,width:e.dialogWidth},on:{"update:visible":function(t){e.orderVarsDialogVisible=t},close:e.orderDialogClose}},[[i("draggable",{staticClass:"list-group",model:{value:e.orderVarsArr,callback:function(t){e.orderVarsArr=t},expression:"orderVarsArr"}},[i("transition-group",e._l(e.orderVarsArr,function(t){return i("div",{key:t.varGuid,staticClass:"list-group-item",attrs:{"data-Guid":t.varGuid,"data-type":t.devGuid?"变量":"设备"}},[e._v(" "+e._s(t.showName)+" ")])}),0)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticStyle:{display:"flex","justify-content":"center","padding-top":"10px",width:"6rem"}},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.orderVarsDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary"},on:{click:e.confirmOrderDialog}},[e._v("确定")])],1)])]],2)],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rightMiddleTitle"},[t("span",[this._v("温度曲线")]),t("div",{staticClass:"titleIcon"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rightMiddleTitle"},[t("span",[this._v("正面展示")]),t("div",{staticClass:"titleIcon"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rightMiddleTitle"},[t("span",[this._v("背面展示")]),t("div",{staticClass:"titleIcon"})])}],!1,null,null,null).exports,u=i("58c8"),h=(i("16ca"),{data:function(){return{operateName:"绑定站点",btnClass:"success",showDiv:1,tableLoading:!1,loading:!1,unbindLoading:!1,deviceList:[],oldCurrItem:{},deviceTableData:{tableData:[],currentPage:1,pageSize:10,tableHeight:0},varParamSearch:"",initParamList:{aios:[],dios:[],sios:[],maios:[],mdios:[],msios:[]},paramList:{aios:[],dios:[],sios:[],maios:[],mdios:[],msios:[]},currParamTableData:{tableData:[],currentPage:1,pageSize:10,tableHeight:0},stationList:[]}},props:{currItem:Object},watch:{currItem:function(e,t){this.changeCurrItem()}},mounted:function(){this.getTableHeight(),this.queryAllStation(),this.changeCurrItem()},methods:Object(n.a)({changeCurrItem:function(){this.oldCurrItem=this.currItem,this.deviceTableData.currentPage=1,this.oldCurrItem.stationDevList=[],this.deviceTableData.tableData=[],this.devList=[],1==this.oldCurrItem.type?this.oldCurrItem.stationGuid="":(this.queryDevsByStationGuid(this.oldCurrItem),this.oldCurrItem.stationGuid?(this.operateName="解绑站点",this.btnClass="warning"):(this.operateName="绑定站点",this.btnClass="success"))},changeParamsNav:function(e){this.paramsTypeNav=e,this.currParamTableData.tableData=this.paramList[e],this.currParamTableData.currentPage=1},operateStation:function(){"绑定站点"==this.operateName?this.bindStation():this.unBindStation()},bindStation:function(){var e=this;if(1!=this.currItem.type&&""!=this.currItem.stationGuid){this.loading=!0;var t={projectId:this.currItem.id.split("-")[1],stationGuid:this.currItem.stationGuid};this.$axios({method:"get",headers:{},url:"/web/project/bindStation",params:t}).then(function(t){var i=t.data;e.loading=!1,0==i.code?(e.$showMessage("success","绑定站点成功！"),e.oldCurrItem.stationGuid=e.currItem.stationGuid,e.queryAllStation(),e.operateName="解绑站点",e.btnClass="warning",e.queryDevsByStationGuid(e.oldCurrItem)):e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t),e.loading=!1})}else this.$showMessage("warning","请选择绑定站点！")},unBindStation:function(){var e=this;this.unbindLoading=!0;var t={projectId:this.currItem.id.split("-")[1]};this.$axios({method:"get",headers:{},url:"/web/project/unbindStation",params:t}).then(function(t){var i=t.data;e.unbindLoading=!1,0==i.code?(e.$showMessage("success","解除绑定站点成功！"),e.oldCurrItem.stationGuid="",e.queryAllStation(),e.operateName="绑定站点",e.btnClass="success"):e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t),e.unbindLoading=!1})},getTableHeight:function(){this.$nextTick(function(){this.deviceTableData.tableHeight=window.getComputedStyle(this.$refs.deviceTable).height.split("px")[0]-0,this.currParamTableData.tableHeight=this.deviceTableData.tableHeight,this.currParamTableData.tableHeight})},queryAllStation:function(){var e=this;this.$axios({method:"get",headers:{},url:"/web/station/queryAllStation",data:{}}).then(function(t){var i=t.data;if(0==i.code){e.stationList=[{name:"未选择",guid:""}].concat(Object(u.a)(i.info)),e.stationList}else e.stationList=[],e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t),e.stationList=[]})},queryDevsByStationGuid:function(e){var t=this,i=e.stationGuid;this.$axios({method:"get",headers:{},url:"/web/station/queryVirDevsByStationGuid",params:{stationGuid:i}}).then(function(i){var a=i.data;0==a.code?(e.stationDevList=a.info,t.deviceTableData.tableData=a.info,t.deviceTableData.currentPage=1,t.devList=a.info):(e.stationDevList=[],t.$showMessage("error",a.msg))}).catch(function(i){e.stationDevList=[],t.$showMessage("error",i)})},showParams:function(e){var t=this;this.currDev=e,this.paramList={aios:[],dios:[],sios:[],maios:[],mdios:[],msios:[]},this.paramList;var i={devGuid:e.devGuid};this.$axios({method:"get",headers:{},url:"/web/virdev/queryVirVars",params:i}).then(function(e){var i=e.data;if(0==i.code){for(var a={1:"只读",2:"只写",3:"读写"},r=i.info,o=0;o<r.length;o++){var n=r[o];for(var s in n)n[s]||(n[s]="");switch(r[o].rwModeText=a[r[o].rwMode],r[o].type){case 1:t.paramList.aios.push(r[o]);break;case 2:t.paramList.dios.push(r[o]);break;case 3:t.paramList.sios.push(r[o]);break;case 4:t.paramList.maios.push(r[o]);break;case 5:t.paramList.mdios.push(r[o]);break;case 6:t.paramList.msios.push(r[o])}}t.paramsTypeNav="aios",t.currParamTableData.tableData=t.paramList.aios,t.currParamTableData.currentPage=1,t.showDiv=2}else t.$showMessage("error",i.msg)}).catch(function(e){t.$showMessage("error",e)})},paramsTableHandleSizeChange:function(e){this.currParamTableData.pageSize=e},paramsTableHandleCurrentChange:function(e){this.currParamTableData.currentPage=e},devTableHandleSizeChange:function(e){this.deviceTableData.pageSize=e},devTableHandleCurrentChange:function(e){this.deviceTableData.currentPage=e}},"queryDevsByStationGuid",function(e){var t=this,i=e.stationGuid;this.$axios({method:"get",headers:{},url:"/web/station/queryVirDevsByStationGuid",params:{stationGuid:i}}).then(function(i){var a=i.data;0==a.code?(e.stationDevList=a.info,t.deviceTableData.tableData=a.info,t.deviceTableData.currentPage=1,t.devList=a.info):(e.stationDevList=[],t.$showMessage("error",a.msg))}).catch(function(i){e.stationDevList=[],t.$showMessage("error",i)})})}),p=(i("9eaa"),Object(c.a)(h,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{height:"100%"}},[1==e.showDiv?i("div",{staticClass:"station-bind-div"},[i("div",{staticClass:"top-div"},[i("label",{staticStyle:{"padding-left":"15px"},attrs:{for:""}},[e._v("绑定站点：")]),i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.currItem.stationGuid,callback:function(t){e.$set(e.currItem,"stationGuid",t)},expression:"currItem.stationGuid"}},e._l(e.stationList.filter(function(t){return t.guid==e.currItem.stationGuid||0==t.binded}),function(e){return i("el-option",{key:e.guid,attrs:{label:e.name,value:e.guid}})}),1),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"ml20",attrs:{type:e.btnClass,disabled:1==e.currItem.type},on:{click:function(t){return e.operateStation()}}},[e._v(e._s(e.operateName))])],1),i("div",{staticClass:"interval-div"}),i("div",{ref:"deviceTable",staticClass:"bottom-table-div"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.deviceTableData.tableData.slice((e.deviceTableData.currentPage-1)*e.deviceTableData.pageSize,e.deviceTableData.currentPage*e.deviceTableData.pageSize),stripe:"",height:e.deviceTableData.tableHeight,"row-style":{height:"45px"},"cell-style":{padding:"0px"},"highlight-current-row":""}},[i("el-table-column",{attrs:{type:"selection",width:"50"}}),i("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.deviceTableData.currentPage-1)*e.deviceTableData.pageSize+1))]}}],null,!1,3010494793)}),i("el-table-column",{attrs:{label:"设备名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.devName))]}}],null,!1,3788988845)}),i("el-table-column",{attrs:{label:"设备类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.devType))]}}],null,!1,1145627794)}),i("el-table-column",{attrs:{label:"设备别名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.aliasDevName))]}}],null,!1,1027393627)}),i("el-table-column",{attrs:{label:"设备描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.devDesc))]}}],null,!1,3405331131)}),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.showParams(t.row)}}},[e._v("查看变量")])]}}],null,!1,3920818485)})],1)],1),i("div",{staticClass:"tableBottom"},[i("el-pagination",{staticClass:"page",attrs:{"current-page":e.deviceTableData.currentPage,"page-sizes":[10,20,30,40],"page-size":e.deviceTableData.pageSize,layout:"total, sizes, prev, pager, next",total:e.deviceTableData.tableData.length},on:{"size-change":e.devTableHandleSizeChange,"current-change":e.devTableHandleCurrentChange}})],1)]):e._e(),2==e.showDiv?i("div",{staticClass:"param-div"},[i("div",{staticClass:"top-div"},[i("i",{staticClass:"el-icon-arrow-left backbtn",on:{click:function(t){e.showDiv=1}}}),i("i",{staticClass:"dev-name"},[e._v("当前设备："+e._s(e.currDev.devName))]),i("el-button",{staticClass:"nav-button",class:{active:"aios"==e.paramsTypeNav},on:{click:function(t){return e.changeParamsNav("aios")}}},[e._v("AIO["+e._s(e.paramList.aios.length)+"]")]),i("el-button",{staticClass:"nav-button",class:{active:"dios"==e.paramsTypeNav},on:{click:function(t){return e.changeParamsNav("dios")}}},[e._v("DIO["+e._s(e.paramList.dios.length)+"]")]),i("el-button",{staticClass:"nav-button",class:{active:"sios"==e.paramsTypeNav},on:{click:function(t){return e.changeParamsNav("sios")}}},[e._v("SIO["+e._s(e.paramList.sios.length)+"]")]),i("el-button",{staticClass:"nav-button",class:{active:"maios"==e.paramsTypeNav},on:{click:function(t){return e.changeParamsNav("maios")}}},[e._v("MAIO["+e._s(e.paramList.maios.length)+"]")]),i("el-button",{staticClass:"nav-button",class:{active:"mdios"==e.paramsTypeNav},on:{click:function(t){return e.changeParamsNav("mdios")}}},[e._v("MAIO["+e._s(e.paramList.mdios.length)+"]")]),i("el-button",{staticClass:"nav-button",class:{active:"msios"==e.paramsTypeNav},on:{click:function(t){return e.changeParamsNav("msios")}}},[e._v("MSIO["+e._s(e.paramList.msios.length)+"]")])],1),i("div",{ref:"paramTable",staticClass:"bottom-div"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.currParamTableData.tableData.filter(function(t){return!e.varParamSearch||t.varName.toLowerCase().includes(e.varParamSearch.toLowerCase())||t.aliasVarName.toLowerCase().includes(e.varParamSearch.toLowerCase())||t.rwModeText.toLowerCase().includes(e.varParamSearch.toLowerCase())}).slice((e.currParamTableData.currentPage-1)*e.currParamTableData.pageSize,e.currParamTableData.currentPage*e.currParamTableData.pageSize),stripe:"",height:e.currParamTableData.tableHeight,"row-style":{height:"45px"},"cell-style":{padding:"0px"}}},[i("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.currParamTableData.currentPage-1)*e.currParamTableData.pageSize+1))]}}],null,!1,2279478761)}),i("el-table-column",{attrs:{label:"变量名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.varName))]}}],null,!1,2956254527)}),i("el-table-column",{attrs:{label:"变量别名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.aliasVarName))]}}],null,!1,1818904713)}),i("el-table-column",{attrs:{label:"读写模式",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.rwModeText))]}}],null,!1,2781475942)}),i("el-table-column",{attrs:{align:"right"}},[i("template",{slot:"header"},[i("el-input",{attrs:{size:"mini",placeholder:"模糊过滤"},model:{value:e.varParamSearch,callback:function(t){e.varParamSearch=t},expression:"varParamSearch"}})],1)],2)],1)],1),i("div",{staticClass:"tableBottom"},[i("el-pagination",{staticClass:"page",attrs:{"current-page":e.currParamTableData.currentPage,"page-sizes":[10,20,30,40],"page-size":e.currParamTableData.pageSize,layout:"total, sizes, prev, pager, next",total:e.currParamTableData.tableData.length},on:{"size-change":e.paramsTableHandleSizeChange,"current-change":e.paramsTableHandleCurrentChange}})],1)]):e._e()])},[],!1,null,null,null).exports),f=(i("9dfd"),i("591f"),i("feb3"),{data:function(){return{fullscreenLoading:!1,previewExcelUrl:"",excelUrl:"",loading:!1,fileList:[],downLoading:!1}},props:{currItem:Object},watch:{currItem:function(e,t){this.changeCurrItem()}},mounted:function(){this.changeCurrItem()},methods:{changeCurrItem:function(){if(1==this.currItem.type);else{this.fileList=[];var e=this.currItem.id.split("-");this.previewExcelUrl="",this.excelUrl="web/project/uploadExcel?projectId="+e[1]}},configSurveyShow:function(){if(1==this.currItem.type)return this.$showMessage("warning","请选择项目！"),!1;var e=Object(o.a)({},this.isShowConfig);e.isSurvey=this.isSurvey;var t=this.currItem.id.split("-");this.configureProjectShow(t[1],e)},downExcel:function(){var e=this;this.downLoading=!0;var t={projectId:this.currItem.id.split("-")[1]};this.$axios({method:"get",url:"/web/project/downloadExcel",responseType:"blob",headers:{"Content-Type":"application/json;application/octet-stream"},params:t}).then(function(t){t.data;var i=t.data,a=new Blob([i]),r=(new Date).getFullYear()+""+((new Date).getMonth()+1)+(new Date).getDate()+name+".xls";if("download"in document.createElement("a")){var o=document.createElement("a");o.download=r,o.style.display="none",o.href=URL.createObjectURL(a),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(a,r);e.downLoading=!1}).catch(function(t){e.$showMessage("error",t),e.downLoading=!1})},previewExcel:function(){var e=this;this.loading=!0;var t={projectId:this.currItem.id.split("-")[1]};this.$axios({method:"get",headers:{},url:"/web/project/previewExcel",params:t}).then(function(t){t.data;var i=t.data;if(0==i.code){var a=i.info;e.previewExcelUrl=a,e.loading=!1}else e.$showMessage("error","预览失败："+i.msg),e.loading=!1}).catch(function(t){e.$showMessage("error",t),e.loading=!1})},uploadError:function(e){var t=JSON.parse(e.message);this.$message({message:"上传文件失败："+t.message,type:"error",showClose:!0})},handleChange:function(e,t){this.fileList=t.slice(-1)},handleRemove:function(e,t){},handlePreview:function(e){},handleExceed:function(e,t){this.$message.warning("本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.fileList=[],!0},uploadSuccess:function(){this.$showMessage("success","上传成功")},beforeUpload:function(e){var t=e.name.replace(/.+\./,"");return-1!==["xls","xlsx"].indexOf(t.toLowerCase())||(this.$showMessage("warning","请上传后缀名为xls、xlsx的附件!"),!1)}}}),m=(i("cee3"),Object(c.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"survey-div"},[i("div",{staticClass:"top-div"},[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"success",disabled:1==e.currItem.type},on:{click:function(t){return e.previewExcel()}}},[e._v("预览数据")]),i("el-upload",{staticClass:"upload-demo",attrs:{action:e.excelUrl,"before-upload":e.beforeUpload,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-change":e.handleChange,"before-remove":e.beforeRemove,"on-error":e.uploadError,"on-success":e.uploadSuccess,limit:2,"on-exceed":e.handleExceed,"file-list":e.fileList}},[i("el-button",{attrs:{type:"primary",disabled:1==e.currItem.type}},[e._v("点击上传")])],1),i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.downLoading,expression:"downLoading"}],staticStyle:{"margin-left":"20px"},attrs:{type:"primary",disabled:1==e.currItem.type},on:{click:function(t){return e.downExcel()}}},[e._v("下载")])],1),i("div",{staticClass:"bottom-div"},[i("iframe",{staticStyle:{width:"100%",height:"99%",overflow:"auto"},attrs:{src:e.previewExcelUrl,frameborder:"0"}})])])},[],!1,null,null,null).exports),g={data:function(){return{fullscreenLoading:!1,tableLoading:!1,videoTableData:{tableData:[],userName:"",userPasswd:"",currentPage:1,pageSize:10,tableHeight:"100%"},videoDialogForm:{videoId:"",videoName:"",httpAddress:"",cloudSupport:0,voiceSupport:0,serialNum:"",channelNum:"",ezopeanAddress:""},videoDialogRules:{videoName:[{required:!0,message:"请输入摄像头名称",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30个字符",trigger:"blur"}],serialNum:[{required:!0,message:"请输入序列号",trigger:"blur"}],channelNum:[{required:!0,message:"请输入通道号",trigger:"blur"}],httpAddress:[{required:!0,message:"请输入地址",trigger:"blur"}],ezopeanAddress:[{required:!0,message:"请输入地址",trigger:"blur"}]},videoDialogVisible:!1,videoDialogWidth:"500px",videoDialogTitle:"增加摄像头",accessToken:"",osd:{name:"",deviceSerial:"",channelNo:""},OSDDialogVisible:!1}},props:{currItem:Object},watch:{currItem:function(e,t){this.changeCurrItem()}},mounted:function(){this.changeCurrItem(),this.getTableHeight(),this.getAccessToken()},methods:{getTableHeight:function(){this.$nextTick(function(){this.videoTableData.tableHeight=window.getComputedStyle(this.$refs.videoTable).height.split("px")[0]-0,this.videoTableData.tableHeight})},videoTableSizeChange:function(e){this.videoTableData.pageSize=e},videoTableCurrentChange:function(e){this.videoTableData.currentPage=e},changeCurrItem:function(){this.videoDialogForm={videoId:"",videoName:"",httpAddress:"",cloudSupport:0,voiceSupport:0,serialNum:"",channelNum:"",ezopeanAddress:""},this.videoTableData.tableData=[],this.videoTableData.currentPage=1,1==this.currItem.type||this.getVideoList()},setVideoUserNamePass:function(){var e=this,t=this.currItem.id.split("-"),i={userName:this.videoTableData.userName,userPasswd:this.videoTableData.userPasswd,projectId:t[1]};this.fullscreenLoading=!0,this.$axios({method:"post",headers:{},url:"/web/video/updataVideoPass",data:i}).then(function(t){var i=t.data;0==i.code?e.$showMessage("success","操作成功！"):e.$showMessage("error",i.msg),e.fullscreenLoading=!1}).catch(function(t){e.$showMessage("error",t),e.fullscreenLoading=!1})},videoDialogClose:function(){this.videoDialogVisible=!1},editVideo:function(e){this.videoDialogForm=e,this.videoDialogShow(1)},delVideo:function(e){var t=this,i=e.videoId,a={projectId:e.projectId,videoId:i};this.$axios({method:"get",headers:{},url:"/web/video/deleteVideo",params:a}).then(function(e){var i=e.data;0==i.code?(t.$showMessage("success","删除成功"),t.getVideoList()):t.$showMessage("error",i.msg)}).catch(function(e){t.$showMessage("error",e)})},confirmVideoDialogBtn:function(){var e=this,t="/web/video/addVideo",i=this.currItem.id.split("-")[1];this.videoDialogForm.projectId=i,"增加摄像头"==this.videoDialogTitle||(t="/web/video/updateVideo"),this.fullscreenLoading=!0,this.$axios({method:"post",headers:{},url:t,data:this.videoDialogForm}).then(function(t){var i=t.data;0==i.code?(e.$showMessage("success","操作成功！"),e.videoDialogVisible=!1,e.getVideoList()):e.$showMessage("error",i.msg),e.fullscreenLoading=!1}).catch(function(t){e.$showMessage("error",t),e.fullscreenLoading=!1})},videoDialogShow:function(e){1!=this.currItem.type?(0==e?(this.videoDialogTitle="增加摄像头",this.videoDialogForm={videoId:"",videoName:"",videoBrand:"",httpAddress:"",userName:"",userPasswd:"",cloudSupport:0,voiceSupport:0,ezopeanAddress:""}):this.videoDialogTitle="编辑摄像头",this.videoDialogVisible=!0):this.$showMessage("warning","请选择项目")},getVideoList:function(){var e=this,t={projectId:this.currItem.id.split("-")[1]};this.videoTableData.userName="",this.videoTableData.userPasswd="",this.$axios({method:"get",headers:{},url:"/web/video/queryVideos",params:t}).then(function(t){var i=t.data;if(0==i.code){var a=i.info;if(a&&a.length>0){e.videoTableData.userName=a[0].userName;for(var r=0;r<a.length;r++)a[r].cloudSupportTxt="否",a[r].cloudSupport&&(a[r].cloudSupportTxt="是"),a[r].voiceSupportTxt="否",a[r].voiceSupport&&(a[r].voiceSupportTxt="是")}e.videoTableData.tableData=a,e.videoTableData.currentPage=1}else e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t)})},onConfirm:function(e){this.delVideo(e)},onCancel:function(e){},getAccessToken:function(){var e=this,t=this.currItem.id.split("-");this.$axios({method:"get",headers:{},params:{projectId:t[1]},url:"/web/video/getAccessToken"}).then(function(t){var i=t.data;0==i.code&&(e.accessToken=i.info)}).catch(function(e){})},editOsd:function(){this.osd={name:"",deviceSerial:"",channelNo:""},this.OSDDialogVisible=!0},modifyOSD:function(){var e=this;if(this.osd.name){var t={accessToken:this.accessToken,deviceSerial:this.osd.deviceSerial,channelNo:this.osd.channelNo,osdName:this.osd.name};this.$axios({method:"post",url:"https://open.ys7.com/api/lapp/device/update/osd/name",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$qs.stringify(t)}).then(function(t){switch(t.data.code){case"200":Object(a.j)("success","设置成功");break;case"10002":Object(a.j)("error","accessToken异常或过期"),e.getAccessToken();break;case"1005":Object(a.j)("error","appKey异常");break;case"20002":Object(a.j)("error","设备不存在");break;case"20006":Object(a.j)("error","网络异常");break;case"20007":Object(a.j)("error","设备不在线");break;default:Object(a.j)("error","设置失败")}}).catch(function(e){Object(a.j)("error",e)})}else Object(a.j)("error","OSD名称不能为空")}}},v=(i("198b"),Object(c.a)(g,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"video-div"},[i("div",{staticClass:"top-div"},[i("el-button",{attrs:{type:"success",disabled:1==e.currItem.type},on:{click:function(t){return e.videoDialogShow(0)}}},[e._v("+增加摄像头")]),i("label",{staticClass:"ml20",attrs:{for:""}},[e._v("用户名：")]),i("el-input",{staticStyle:{width:"150px"},attrs:{max:"32",type:"text"},model:{value:e.videoTableData.userName,callback:function(t){e.$set(e.videoTableData,"userName",t)},expression:"videoTableData.userName"}}),i("label",{staticClass:"ml20"},[e._v("密码：")]),i("el-input",{staticStyle:{width:"150px"},attrs:{max:"64",type:"password"},model:{value:e.videoTableData.userPasswd,callback:function(t){e.$set(e.videoTableData,"userPasswd",t)},expression:"videoTableData.userPasswd"}}),i("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"ml20",attrs:{type:"primary",disabled:1==e.currItem.type},on:{click:e.setVideoUserNamePass}},[e._v("设置用户名密码")]),i("el-button",{staticClass:"ml20",attrs:{type:"primary"},on:{click:function(t){return e.editOsd()}}},[e._v("OSD设置")])],1),i("div",{ref:"videoTable",staticClass:"bottom-table-div"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.videoTableData.tableData.slice((e.videoTableData.currentPage-1)*e.videoTableData.pageSize,e.videoTableData.currentPage*e.videoTableData.pageSize),stripe:"",height:e.videoTableData.tableHeight,"row-style":{height:"45px"},"cell-style":{padding:"0px"}}},[i("el-table-column",{attrs:{label:"编号",align:"center",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.videoTableData.currentPage-1)*e.videoTableData.pageSize+1))]}}])}),i("el-table-column",{attrs:{label:"摄像头名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.videoName))]}}])}),i("el-table-column",{attrs:{label:"直播地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.httpAddress))]}}])}),i("el-table-column",{attrs:{label:"监控地址：",prop:"ezopeanAddress"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.ezopeanAddress))]}}])}),i("el-table-column",{attrs:{label:"序列号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.serialNum))]}}])}),i("el-table-column",{attrs:{label:"通道号",align:"center",width:"70px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.channelNum))]}}])}),i("el-table-column",{attrs:{label:"是否控制云台",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.cloudSupportTxt))]}}])}),i("el-table-column",{attrs:{label:"是否控制语音",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.voiceSupportTxt))]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.editVideo(t.row)}}},[e._v("编辑")]),i("el-popconfirm",{attrs:{title:"确定删除该摄像头吗？",iconColor:"#F56C6C",icon:"el-icon-info"},on:{onConfirm:function(i){return e.onConfirm(t.row)},confirm:function(i){return e.onConfirm(t.row)},cancel:function(i){return e.onCancel(t.row)},onCancel:function(i){return e.onCancel(t.row)}}},[i("el-button",{staticStyle:{margin:"0 0 0 10px"},attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete-solid"},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1),i("div",{staticClass:"tableBottom"},[i("el-pagination",{staticClass:"page",attrs:{"current-page":e.videoTableData.currentPage,"page-sizes":[10,20,30,40],"page-size":e.videoTableData.pageSize,layout:"total, sizes, prev, pager, next",total:e.videoTableData.tableData.length},on:{"size-change":e.videoTableSizeChange,"current-change":e.videoTableCurrentChange}})],1),i("el-dialog",{attrs:{title:e.videoDialogTitle,visible:e.videoDialogVisible,width:e.videoDialogWidth},on:{"update:visible":function(t){e.videoDialogVisible=t},close:e.videoDialogClose}},[[i("el-form",{ref:"videoRuleForm",staticClass:"demo-ruleForm",attrs:{model:e.videoDialogForm,rules:e.videoDialogRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"摄像头名称：",prop:"videoName"}},[i("el-input",{model:{value:e.videoDialogForm.videoName,callback:function(t){e.$set(e.videoDialogForm,"videoName",t)},expression:"videoDialogForm.videoName"}})],1),i("el-form-item",{attrs:{label:"直播地址：",prop:"httpAddress"}},[i("el-input",{model:{value:e.videoDialogForm.httpAddress,callback:function(t){e.$set(e.videoDialogForm,"httpAddress",t)},expression:"videoDialogForm.httpAddress"}})],1),i("el-form-item",{attrs:{label:"监控地址：",prop:"ezopeanAddress"}},[i("el-input",{model:{value:e.videoDialogForm.ezopeanAddress,callback:function(t){e.$set(e.videoDialogForm,"ezopeanAddress",t)},expression:"videoDialogForm.ezopeanAddress"}})],1),i("el-form-item",{attrs:{label:"序列号：",prop:"serialNum"}},[i("el-input",{model:{value:e.videoDialogForm.serialNum,callback:function(t){e.$set(e.videoDialogForm,"serialNum",t)},expression:"videoDialogForm.serialNum"}})],1),i("el-form-item",{attrs:{label:"通道号：",prop:"channelNum"}},[i("el-input",{model:{value:e.videoDialogForm.channelNum,callback:function(t){e.$set(e.videoDialogForm,"channelNum",t)},expression:"videoDialogForm.channelNum"}})],1),i("el-form-item",{attrs:{label:"是否控制云台：",prop:"cloudSupport"}},[i("el-radio",{attrs:{label:1},model:{value:e.videoDialogForm.cloudSupport,callback:function(t){e.$set(e.videoDialogForm,"cloudSupport",t)},expression:"videoDialogForm.cloudSupport"}},[e._v("是")]),i("el-radio",{attrs:{label:0},model:{value:e.videoDialogForm.cloudSupport,callback:function(t){e.$set(e.videoDialogForm,"cloudSupport",t)},expression:"videoDialogForm.cloudSupport"}},[e._v("否")])],1),i("el-form-item",{attrs:{label:"是否控制语音：",prop:"voiceSupport"}},[i("el-radio",{attrs:{label:1},model:{value:e.videoDialogForm.voiceSupport,callback:function(t){e.$set(e.videoDialogForm,"voiceSupport",t)},expression:"videoDialogForm.voiceSupport"}},[e._v("是")]),i("el-radio",{attrs:{label:0},model:{value:e.videoDialogForm.voiceSupport,callback:function(t){e.$set(e.videoDialogForm,"voiceSupport",t)},expression:"videoDialogForm.voiceSupport"}},[e._v("否")])],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.videoDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"diglogBtn",attrs:{type:"primary"},on:{click:e.confirmVideoDialogBtn}},[e._v("确定")])],1)]],2),i("el-dialog",{attrs:{title:"OSD设置",visible:e.OSDDialogVisible,width:"30%"},on:{"update:visible":function(t){e.OSDDialogVisible=t},close:function(t){e.OSDDialogVisible=!1}}},[[i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"序列号"}},[i("el-input",{model:{value:e.osd.deviceSerial,callback:function(t){e.$set(e.osd,"deviceSerial",t)},expression:"osd.deviceSerial"}})],1),i("el-form-item",{attrs:{label:"通道号"}},[i("el-input",{model:{value:e.osd.channelNo,callback:function(t){e.$set(e.osd,"channelNo",t)},expression:"osd.channelNo"}})],1),i("el-form-item",{attrs:{label:"OSD名称"}},[i("el-input",{model:{value:e.osd.name,callback:function(t){e.$set(e.osd,"name",t)},expression:"osd.name"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.OSDDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary"},on:{click:e.modifyOSD}},[e._v("确定")])],1)]],2)],1)},[],!1,null,null,null).exports),b=(i("b3b0"),i("a5f8"),{components:{freezeTemplate1:r.a},data:function(){var e;return e={dialogVisible:!1,dialogWidth:"6rem",title:"选择变量",dialogParamList:[],paramSelectRadio:{varName:"",varGuid:"",varUnit:"",isOnOff:0,bigImage:"",smallImage:"",number:""},devList:[],dialogSearch:"",freezeConfigArr:[],oldFreezeConfigArr:[],oldFreezeTableConfig:{isShow:"true",tableData:[]},freezeTableConfig:{isShow:"true",tableData:[]},configFreezeTemplate:1,configVarIndex:0,configStatus:1,fullscreenLoading:!1,multipleTitle:"选择表格变量",multipleDialogVisible:!1,multipleDialogWidth:"8rem",multileDialogSearch:"",multipleDialogParamList:[],mutipleTableHeight:"100%",multipleSelectionList:[],currSelDevGuid:"",varUnitList:[{value:"°C"},{value:"m"},{value:"mpa"},{value:"m³/s"},{value:"A"},{value:"V"},{value:"kV"},{value:"W"},{value:"kW"},{value:"s"},{value:"min"},{value:"h"},{value:"Hz"},{value:"%"},{value:"次"},{value:""}]},Object(n.a)(e,"dialogVisible",!1),Object(n.a)(e,"dialogWidth","6rem"),Object(n.a)(e,"title","选择变量"),Object(n.a)(e,"dialogParamList",[]),Object(n.a)(e,"paramSelectRadio",{varName:"",varGuid:"",varUnit:"",isOnOff:0,bigImage:"",smallImage:"",number:""}),Object(n.a)(e,"devList",[]),Object(n.a)(e,"dialogSearch",""),Object(n.a)(e,"freezeImageList",[]),e},props:{currItem:Object},watch:{currItem:function(e,t){this.changeCurrItem()}},mounted:function(){this.changeCurrItem(),this.freezeImageList=this.$store.state.freezeImageList},methods:{isChange:function(){var e=Object(a.h)(this.oldFreezeConfigArr,this.freezeConfigArr),t=Object(a.h)(this.oldFreezeTableConfig,this.freezeTableConfig);return e&&t},getImgSrc:function(e){return this.freezeImagIeList,Object(a.e)(e,this.freezeImageList)},getSingleParamList:function(){var e=this;if(1!=this.currItem.type&&this.currItem.stationGuid){var t={stationGuid:this.currItem.stationGuid};this.$axios({method:"get",headers:{},url:"/web/station/queryVirDevsVirVars",params:t}).then(function(t){var i=t.data;if(0==i.code){for(var a=[{devGuid:"",devName:"所有设备",isActive:!0}],r=i.info.virDevs,o=[],n=0;n<r.length;n++){a.push(r[n]);for(var s=0;s<r[n].virVars.length;s++)r[n].virVars[s].devName=r[n].devName,o.push(r[n].virVars[s])}e.devList=a,e.dialogParamList=o,e.$nextTick(function(){var e;e=this.freezeConfigArr[this.configVarIndex].varGuid,this.paramSelectRadio.varUnit=this.freezeConfigArr[this.configVarIndex].varUnit,this.paramSelectRadio.smallImage=this.freezeConfigArr[this.configVarIndex].smallImage,this.paramSelectRadio.bigImage=this.freezeConfigArr[this.configVarIndex].bigImage,this.paramSelectRadio.isOnOff=this.freezeConfigArr[this.configVarIndex].isOnOff,this.paramSelectRadio.number=this.freezeConfigArr[this.configVarIndex].number,e&&(this.paramSelectRadio.varGuid=e),this.selecDevShowParam(this.devList[0])})}else e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t)})}},confirmParamBtn:function(){if(this.paramSelectRadio,""!=this.paramSelectRadio.varGuid){for(var e=0;e<this.dialogParamList.length;e++)if(this.dialogParamList[e].varGuid==this.paramSelectRadio.varGuid){this.paramSelectRadio.varName=this.dialogParamList[e].varName;break}this.freezeConfigArr[this.configVarIndex].varGuid=this.paramSelectRadio.varGuid,this.freezeConfigArr[this.configVarIndex].varName=this.paramSelectRadio.varName,this.freezeConfigArr[this.configVarIndex].varUnit=this.paramSelectRadio.varUnit,this.freezeConfigArr[this.configVarIndex].isOnOff=this.paramSelectRadio.isOnOff,this.freezeConfigArr[this.configVarIndex].number=this.paramSelectRadio.number,this.freezeConfigArr[this.configVarIndex].bigImage=this.paramSelectRadio.bigImage,this.freezeConfigArr[this.configVarIndex].smallImage=this.paramSelectRadio.smallImage,this.dialogVisible=!1}else this.$showMessage("warning","请选中变量")},dialogClose:function(){this.dialogVisible=!1},selecDevShowParam:function(e){for(var t=0;t<this.devList.length;t++)this.devList[t].isActive=!1;e.isActive=!0,this.dialogParamList,this.currSelDevGuid=e.devGuid},changeCurrItem:function(){if(1==this.currItem.type);else{var e=this.currItem.id.split("-");this.getProjectConfig(e[1],2),this.getSingleParamList()}},getProjectConfig:function(e,t){var i=this;this.configFreezeTemplate=1,this.oldFreezeConfigArr=[],this.oldFreezeTableConfig={isShow:"true",tableData:[]},this.freezeConfigArr=[],this.freezeTableConfig={isShow:"true",tableData:[]};var a={projectId:e,type:t};this.$axios({method:"get",headers:{},url:"/web/project/queryProjectConfig",params:a}).then(function(e){var t=e.data;if(0==t.code){if(t.info){var a=t.info;if(a&&a!={}){var r=JSON.parse(a);i.configFreezeTemplate=r.configFreezeTemplate,i.freezeConfigArr=r.freezeConfigArr,i.freezeTableConfig=r.freezeTableConfig,i.oldFreezeConfigArr=JSON.parse(JSON.stringify(i.freezeConfigArr)),i.oldFreezeTableConfig=Object(o.a)({},i.freezeTableConfig)}}}else i.$showMessage("error",t.msg)}).catch(function(e){i.$showMessage("error",e)})},changeFreezeConfigArr:function(e){this.freezeConfigArr=e},changeFreezeTableConfig:function(e){this.freezeTableConfig=e},getParamClass:function(e){return"param"+(parseInt(e)+1)},freezeParamConfig:function(e){this.devList&&0!=this.devList.length?(this.configVarIndex=e,this.dialogVisible=!0,this.paramSelectRadio={varName:"",varGuid:"",varUnit:"",isOnOff:0,bigImage:"",smallImage:"",number:""},this.dialogParamList=[],this.getSingleParamList()):this.$showMessage("warning","当前项目没有设备！")},configSaveFreeze:function(){if(1!=this.currItem.type){var e=this.currItem.id.split("-")[1],t={freezeConfigArr:this.freezeConfigArr,freezeTableConfig:this.freezeTableConfig,configFreezeTemplate:this.configFreezeTemplate};this.configureProjectTemplate(e,t,2)}else this.$showMessage("warning","请选择项目！")},configureProjectTemplate:function(e,t,i){var a=this,r={projectId:e,type:i,content:JSON.stringify(t)};this.fullscreenLoading=!0,this.$axios({method:"post",headers:{},url:"/web/project/configureProjectConfig",data:r}).then(function(e){var t=e.data;0==t.code?(a.$showMessage("success","修改成功！"),a.oldFreezeTableConfig=Object(o.a)({},a.freezeTableConfig),a.oldFreezeConfigArr=JSON.parse(JSON.stringify(a.freezeConfigArr)),a.$parent.nosaveData()):a.$showMessage("error",t.msg),a.fullscreenLoading=!1}).catch(function(e){a.$showMessage("error",e),a.fullscreenLoading=!1})},configFreezeShow:function(){if(1==this.currItem.type)return this.$showMessage("warning","请选择项目！"),!1;var e=Object(o.a)({},this.isShowConfig);e.isFreeze=this.isFreeze;var t=this.currItem.id.split("-");this.configureProjectShow(t[1],e)},previewFreeze:function(){1!=this.currItem.type?1==this.configStatus?this.configStatus=0:this.configStatus=1:this.$showMessage("warning","请选择项目！")},confirmMultipleParam:function(){this.multipleSelectionList,this.freezeTableConfig.tableData=this.multipleSelectionList,this.multipleDialogVisible=!1},getMultipleParamList:function(){var e=this,t={stationGuid:this.currItem.stationGuid};this.$axios({method:"get",headers:{},url:"/web/station/queryVirDevsVirVars",params:t}).then(function(t){var i=t.data;if(0==i.code){for(var a=[{devGuid:"",devName:"所有设备",isActive:!0}],r=i.info.virDevs,o=[],n=0;n<r.length;n++){a.push(r[n]);for(var s=0;s<r[n].virVars.length;s++)r[n].virVars[s].devName=r[n].devName,r[n].virVars[s].varUnit="°C",o.push(r[n].virVars[s])}e.devList=a,e.multipleDialogParamList=o,e.$nextTick(function(){var e=this.freezeTableConfig.tableData;if(e)for(var t=0;t<e.length;t++)for(var i=0;i<this.multipleDialogParamList.length;i++)if(e[t].varGuid==this.multipleDialogParamList[i].varGuid){this.multipleDialogParamList[i].varUnit=e[t].varUnit,this.$refs.multipleParamTable.toggleRowSelection(this.multipleDialogParamList[i],!0);break}this.selectDevMultipleParam(this.devList[0])})}else e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t)})},cellClass:function(e){if(0===e.columnIndex)return"disabledCheck"},multipleDialogShow:function(){this.devList&&0!=this.devList.length?(this.multipleDialogVisible=!0,this.getMultipleParamList()):this.$showMessage("warning","当前项目没有设备！")},selectMutipleDialogChange:function(e,t){},getMultipleRowKeys:function(e){return e.varGuid},handleDialogSelectionChange:function(e){this.multipleSelectionList=e},multipleDialogClose:function(){this.multipleDialogVisible=!1},selectDevMultipleParam:function(e){for(var t=0;t<this.devList.length;t++)this.devList[t].isActive=!1;e.isActive=!0,this.currSelDevGuid=e.devGuid,this.getSelMultipleData()},getSelMultipleData:function(){var e=this;this.tableData=this.multipleDialogParamList.filter(function(t){return(!e.multileDialogSearch||t.varName.toLowerCase().includes(e.multileDialogSearch.toLowerCase()))&&(!e.currSelDevGuid||t.devGuid==e.currSelDevGuid)})},setMultipleSelect:function(e){var t=this;e&&e.forEach(function(e){t.$refs.multipleParamTable.toggleRowSelection(e,!0)})}}}),w=(i("6167"),Object(c.a)(b,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"freeze-div"},[i("div",{staticClass:"top-div"},[i("el-button",{attrs:{type:"success",disabled:1==e.currItem.type},on:{click:function(t){return e.configSaveFreeze()}}},[e._v("保存模板配置")]),i("el-button",{directives:[{name:"preventClick",rawName:"v-preventClick"}],attrs:{type:"primary",disabled:1==e.currItem.type},on:{click:function(t){return e.previewFreeze()}}},[e._v(e._s(1==e.configStatus?"预览":"退出预览"))])],1),i("div",{staticClass:"bottom-div"},[1==e.configFreezeTemplate?i("freezeTemplate1",{attrs:{freezeConfigArr:e.freezeConfigArr,configVarIndex:e.configVarIndex,configStatus:e.configStatus,freezeTableConfig:e.freezeTableConfig},on:{"update:freezeConfigArr":function(t){e.freezeConfigArr=t},"update:freeze-config-arr":function(t){e.freezeConfigArr=t},"update:freezeTableConfig":function(t){e.freezeTableConfig=t},"update:freeze-table-config":function(t){e.freezeTableConfig=t},freezeParamConfig:e.freezeParamConfig,multipleDialogShow:e.multipleDialogShow,changeFreezeConfigArr:e.changeFreezeConfigArr,changeFreezeTableConfig:e.changeFreezeTableConfig}}):e._e()],1),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"single-dialog",attrs:{title:e.title,visible:e.dialogVisible,width:e.dialogWidth},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClose}},[[i("div",{staticClass:"param-dialog-dev"},[i("ul",e._l(e.devList,function(t,a){return i("li",{key:t.devGuid,class:{active:t.isActive},on:{click:function(i){return e.selecDevShowParam(t)}}},[i("span",[e._v(e._s(a+1))]),i("span",[e._v(e._s(t.devName))])])}),0)]),i("div",{staticClass:"param-dialog-param"},[i("div",{staticClass:"search"},[i("el-input",{attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search"},model:{value:e.dialogSearch,callback:function(t){e.dialogSearch=t},expression:"dialogSearch"}})],1),i("div",{staticClass:"bottom-select"},[i("el-radio-group",{model:{value:e.paramSelectRadio.varGuid,callback:function(t){e.$set(e.paramSelectRadio,"varGuid",t)},expression:"paramSelectRadio.varGuid"}},e._l(e.dialogParamList.filter(function(t){return(!e.dialogSearch||t.varName.toLowerCase().includes(e.dialogSearch.toLowerCase()))&&(!e.currSelDevGuid||t.devGuid==e.currSelDevGuid)}),function(t){return i("el-radio",{key:t.varGuid,attrs:{label:t.varGuid}},[e._v(e._s(t.devName)+"-"+e._s(t.varName))])}),1)],1)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("div",{staticClass:"freeze-footer"},[i("div",{staticClass:"left-div"},[i("li",[i("label",{attrs:{for:""}},[e._v("变量单位：")]),i("el-select",{staticStyle:{width:"1rem"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择变量单位"},model:{value:e.paramSelectRadio.varUnit,callback:function(t){e.$set(e.paramSelectRadio,"varUnit",t)},expression:"paramSelectRadio.varUnit"}},e._l(e.varUnitList,function(e){return i("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}),1)],1),i("li",{staticStyle:{height:"0.4rem","line-height":"0.4rem"}},[i("label",{attrs:{for:""}},[e._v("是否转换显示：")]),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:e.paramSelectRadio.isOnOff,callback:function(t){e.$set(e.paramSelectRadio,"isOnOff",t)},expression:"paramSelectRadio.isOnOff"}})],1)]),e.paramSelectRadio.isOnOff?i("div",{staticClass:"swicth-freeze-div"},[i("li",{staticStyle:{height:"0.4rem","line-height":"0.4rem",position:"relative"}},[i("label",{attrs:{for:""}},[e._v("数值>=")]),i("el-input",{staticStyle:{width:"0.5rem"},attrs:{type:"numeber"},model:{value:e.paramSelectRadio.number,callback:function(t){e.$set(e.paramSelectRadio,"number",t)},expression:"paramSelectRadio.number"}}),i("label",{attrs:{for:""}},[e._v("显示图片：")]),i("div",{staticStyle:{display:"inline-block",position:"relative"}},[i("div",{staticClass:"image-select-content"},[i("el-image",{staticClass:"image",attrs:{src:e.getImgSrc(e.paramSelectRadio.bigImage)}})],1),i("el-select",{staticClass:"image-select",staticStyle:{width:"1rem"},attrs:{placeholder:"请选择"},model:{value:e.paramSelectRadio.bigImage,callback:function(t){e.$set(e.paramSelectRadio,"bigImage",t)},expression:"paramSelectRadio.bigImage"}},e._l(e.freezeImageList,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.label}},[i("el-image",{staticStyle:{width:"0.5rem",height:"0.2rem"},attrs:{src:e.value,alt:""}})],1)}),1)],1)],1),i("li",{staticStyle:{height:"0.4rem","line-height":"0.4rem"}},[i("label",{attrs:{for:""}},[e._v("数值<")]),i("el-input",{staticStyle:{width:"0.5rem"},attrs:{type:"numeber"},model:{value:e.paramSelectRadio.number,callback:function(t){e.$set(e.paramSelectRadio,"number",t)},expression:"paramSelectRadio.number"}}),i("label",{attrs:{for:""}},[e._v("显示图片：")]),i("div",{staticStyle:{display:"inline-block",position:"relative"}},[i("div",{staticClass:"image-select-content"},[i("el-image",{staticClass:"image",attrs:{src:e.getImgSrc(e.paramSelectRadio.smallImage)}})],1),i("el-select",{staticClass:"image-select",staticStyle:{width:"1rem"},attrs:{placeholder:"请选择"},model:{value:e.paramSelectRadio.smallImage,callback:function(t){e.$set(e.paramSelectRadio,"smallImage",t)},expression:"paramSelectRadio.smallImage"}},e._l(e.freezeImageList,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.label}},[i("el-image",{staticStyle:{width:"0.5rem",height:"0.2rem"},attrs:{src:e.value,alt:""}})],1)}),1)],1)],1)]):e._e()]),i("div",{staticStyle:{display:"flex","justify-content":"center","padding-top":"10px",width:"6rem"}},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary"},on:{click:e.confirmParamBtn}},[e._v("确定新增")])],1)])]],2),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:e.multipleTitle,visible:e.multipleDialogVisible,width:e.multipleDialogWidth},on:{"update:visible":function(t){e.multipleDialogVisible=t},close:e.multipleDialogClose}},[[i("div",{staticClass:"param-dialog-dev"},[i("ul",e._l(e.devList,function(t,a){return i("li",{key:t.devGuid,class:{active:t.isActive},on:{click:function(i){return e.selectDevMultipleParam(t)}}},[i("span",[e._v(e._s(a+1))]),i("span",[e._v(e._s(t.devName))])])}),0)]),i("div",{staticClass:"param-dialog-param"},[i("div",{staticClass:"search"},[i("el-input",{attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search"},model:{value:e.multileDialogSearch,callback:function(t){e.multileDialogSearch=t},expression:"multileDialogSearch"}})],1),i("div",{staticClass:"bottom-select"},[i("el-table",{ref:"multipleParamTable",staticStyle:{width:"100%"},attrs:{data:e.multipleDialogParamList.filter(function(t){return(!e.multileDialogSearch||t.varName.toLowerCase().includes(e.multileDialogSearch.toLowerCase()))&&(!e.currSelDevGuid||t.devGuid==e.currSelDevGuid)}),stripe:"",height:e.mutipleTableHeight,"row-key":e.getMultipleRowKeys,Mul:""},on:{"selection-change":e.handleDialogSelectionChange,select:e.selectMutipleDialogChange}},[i("el-table-column",{attrs:{type:"selection",width:"50","reserve-selection":!0}}),i("el-table-column",{attrs:{align:"center",label:"设备名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.devName))]}}])}),i("el-table-column",{attrs:{align:"center",label:"变量名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.varName))]}}])}),i("el-table-column",{attrs:{align:"center",label:"变量单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-select",{staticStyle:{width:"1rem"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择变量单位"},model:{value:t.row.varUnit,callback:function(i){e.$set(t.row,"varUnit",i)},expression:"scope.row.varUnit"}},e._l(e.varUnitList,function(e){return i("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})}),1)]}}])})],1)],1)]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.multipleDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",on:{click:function(t){return e.confirmMultipleParam()}}},[e._v("确定新增")])],1)]],2)],1)},[],!1,null,null,null).exports),y={data:function(){return{loading:!1,fullscreenLoading:!1,isShowConfig:{isSurvey:!1,isVideo:!1,isTemperature:!1,isFreeze:!1,isFreezeAnalog:!1,isProjectExhibition:!1,isGraphPage:!1},oldIsShowConfig:{isSurvey:!1,isVideo:!1,isTemperature:!1,isFreeze:!1,isFreezeAnalog:!1,isProjectExhibition:!1,isGraphPage:!1}}},props:{currItem:Object},watch:{currItem:function(e,t){this.changeCurrItem()}},mounted:function(){this.changeCurrItem()},methods:{changeShowProject:function(){var e=this;if(!Object(a.h)(this.oldIsShowConfig,this.isShowConfig)){var t={projectId:this.currItem.id.split("-")[1],type:"1",projectRight:JSON.stringify(this.isShowConfig)};this.fullscreenLoading=!0,this.$axios({method:"post",headers:{},url:"/web/project/configureProjectRight",data:t}).then(function(t){var i=t.data;0==i.code?(e.oldIsShowConfig=Object(o.a)({},e.isShowConfig),e.$emit("changeShowProject",e.isShowConfig)):(e.$showMessage("error",i.msg),e.isShowConfig=Object(o.a)({},e.oldIsShowConfig)),e.fullscreenLoading=!1}).catch(function(t){e.$showMessage("error",t),e.isShowConfig=Object(o.a)({},e.oldIsShowConfig),e.fullscreenLoading=!1})}},saveConfigShow:function(){var e=this.currItem.id.split("-")[1];this.configureProjectShow(e,this.isShowConfig)},configureProjectShow:function(e,t){var i=this,a={projectId:e,type:"1",projectRight:JSON.stringify(t)};this.fullscreenLoading=!0,this.$axios({method:"post",headers:{},url:"/web/project/configureProjectRight",data:a}).then(function(e){var a=e.data;0==a.code?(i.$parent.nosaveData(),i.$showMessage("success","修改成功！"),i.isShowConfig=t,i.oldIsShowConfig=Object(o.a)({},t)):i.$showMessage("error",a.msg),i.fullscreenLoading=!1}).catch(function(e){i.$showMessage("error",e),i.fullscreenLoading=!1})},getIsShowConfig:function(e){var t=this;this.isShowConfig={isSurvey:!1,isVideo:!1,isTemperature:!1,isFreeze:!1,isFreezeAnalog:!1,isProjectExhibition:!1,isGraphPage:!1},this.oldIsShowConfig={isSurvey:!1,isVideo:!1,isTemperature:!1,isFreeze:!1,isFreezeAnalog:!1,isProjectExhibition:!1,isGraphPage:!1};var i={projectId:e,type:"1"};this.$axios({method:"get",headers:{},url:"/web/project/queryProjectRight",params:i}).then(function(e){var i=e.data;0==i.code?i.info&&i.info.length>0&&(t.isShowConfig=JSON.parse(i.info[0].value),t.oldIsShowConfig=Object(o.a)({},t.isShowConfig)):t.$showMessage("error",i.msg)}).catch(function(e){t.$showMessage("error",e)})},changeCurrItem:function(){if(1==this.currItem.type);else{var e=this.currItem.id.split("-");this.getIsShowConfig(e[1])}}}},C=(i("7692"),Object(c.a)(y,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"show-project"},[i("div",{staticClass:"bottom-div"},[i("ul",[i("li",[i("label",[e._v("是否显示项目看板：")]),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{click:function(t){return e.changeShowProject()}},model:{value:e.isShowConfig.isProjectExhibition,callback:function(t){e.$set(e.isShowConfig,"isProjectExhibition",t)},expression:"isShowConfig.isProjectExhibition"}})],1),i("li",[i("label",[e._v("是否显示测斜模块：")]),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.isShowConfig.isSurvey,callback:function(t){e.$set(e.isShowConfig,"isSurvey",t)},expression:"isShowConfig.isSurvey"}})],1),i("li",[i("label",[e._v("是否显示测温模块：")]),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.isShowConfig.isTemperature,callback:function(t){e.$set(e.isShowConfig,"isTemperature",t)},expression:"isShowConfig.isTemperature"}})],1),i("li",[i("label",[e._v("是否显示视频模块：")]),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",change:e.changeShowProject()},model:{value:e.isShowConfig.isVideo,callback:function(t){e.$set(e.isShowConfig,"isVideo",t)},expression:"isShowConfig.isVideo"}})],1),i("li",[i("label",[e._v("是否显示站内设备：")]),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{click:function(t){return e.changeShowProject()}},model:{value:e.isShowConfig.isFreeze,callback:function(t){e.$set(e.isShowConfig,"isFreeze",t)},expression:"isShowConfig.isFreeze"}})],1),i("li",[i("label",[e._v("是否显示组态画面：")]),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{click:function(t){return e.changeShowProject()}},model:{value:e.isShowConfig.isGraphPage,callback:function(t){e.$set(e.isShowConfig,"isGraphPage",t)},expression:"isShowConfig.isGraphPage"}})],1)])])])},[],!1,null,null,null).exports),S={data:function(){return{childNodeArr:[],projectTableData:{tableData:[],tableHeight:0,currentPage:1,pageSize:10},allProject:[],orgGroupJson:{},orgdataInfo:!0,defaultProps:{children:"children",label:"name"}}},created:function(){this.queryGroupsProjects()},mounted:function(){this.getTableHeight()},props:{currItem:Object},watch:{currItem:function(e,t){this.changeCurrItem()}},methods:{projectTableHandleSizeChange:function(e){this.projectTableData.pageSize=e},projectTableHandleCurrentChange:function(e){this.projectTableData.currentPage=e},getTableHeight:function(){this.$nextTick(function(){this.projectTableData.tableHeight=window.getComputedStyle(this.$refs.configTable).height.split("px")[0]-0,this.projectTableData.tableHeight})},getAllChildren:function(e){if(e&&(this.childNodeArr.push(e.id),this.childNodeArr,e.children))for(var t=0;t<e.children.length;t++)this.getAllChildren(e.children[t])},changeCurrItem:function(){if(1==this.currItem.id)return this.projectTableData.tableData=this.allProject,void(this.projectTableData.currentPage=1);this.childNodeArr=[],this.getAllChildren(this.currItem);var e=[];this.orgGroupJson;for(var t=0;t<this.childNodeArr.length;t++){var i=this.childNodeArr[t],a=this.orgGroupJson[i];a&&(e=e.concat(a))}this.projectTableData.tableData=e,this.projectTableData.currentPage=1},queryGroupsProjects:function(){var e=this;this.$axios({method:"get",headers:{},url:"/web/project/queryGroupsProjects",data:{}}).then(function(t){var i=t.data;if(0==i.code){var a=[];e.orgGroupJson={};for(var r=0;r<i.info.length;r++)if(1==i.info[r].type)a.push(i.info[r]);else{i.info[r].biaoqian="el-tree-project";var o=i.info[r].pId;i.info[r].right?(i.info[r].rightInfo=JSON.parse(i.info[r].right),i.info[r].rightInfo.isSurvey?i.info[r].rightInfo.isSurveyTxt="el-icon-success green":i.info[r].rightInfo.isSurveyTxt="el-icon-error danger",i.info[r].rightInfo.isTemperature?i.info[r].rightInfo.isTemperatureTxt="el-icon-success green":i.info[r].rightInfo.isTemperatureTxt="el-icon-error danger",i.info[r].rightInfo.isFreeze?i.info[r].rightInfo.isFreezeTxt="el-icon-success green":i.info[r].rightInfo.isFreezeTxt="el-icon-error danger",i.info[r].rightInfo.isFreezeAnalog?i.info[r].rightInfo.isFreezeAnalogTxt="el-icon-success green":i.info[r].rightInfo.isFreezeAnalogTxt="el-icon-error danger",i.info[r].rightInfo.isVideo?i.info[r].rightInfo.isVideoTxt="el-icon-success green":i.info[r].rightInfo.isVideoTxt="el-icon-error danger",i.info[r].rightInfo.isGraphPage?i.info[r].rightInfo.isGraphPageTxt="el-icon-success green":i.info[r].rightInfo.isGraphPageTxt="el-icon-error danger"):i.info[r].rightInfo={isSurveyTxt:"el-icon-error danger",isVideoTxt:"el-icon-error danger",isTemperatureTxt:"el-icon-error danger",isFreezeTxt:"el-icon-error danger",isFreezeAnalogTxt:"el-icon-error danger",isGraphPageTxt:"el-icon-error danger"},e.allProject.push(i.info[r]),e.orgGroupJson[o]?e.orgGroupJson[o].push(i.info[r]):e.orgGroupJson[o]=[i.info[r]]}e.changeCurrItem()}}).catch(function(t){e.$showMessage("error",t)})}}},x=(i("6e0c"),Object(c.a)(S,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"config-overview"},[i("div",{ref:"configTable",staticClass:"right-bottom-div"},[i("el-table",{attrs:{data:e.projectTableData.tableData.slice((e.projectTableData.currentPage-1)*e.projectTableData.pageSize,e.projectTableData.currentPage*e.projectTableData.pageSize),stripe:"",height:e.projectTableData.tableHeight,"row-style":{height:"45px"},"cell-style":{padding:"0px"}}},[i("el-table-column",{attrs:{label:"序号",align:"center",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.projectTableData.currentPage-1)*e.projectTableData.pageSize+1))]}}])}),i("el-table-column",{attrs:{label:"项目名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),i("el-table-column",{attrs:{label:"测斜数据",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("i",{class:e.row.rightInfo.isSurveyTxt})]}}])}),i("el-table-column",{attrs:{label:"显示视频",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("i",{class:e.row.rightInfo.isVideoTxt})]}}])}),i("el-table-column",{attrs:{label:"测温数据",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("i",{class:e.row.rightInfo.isTemperatureTxt})]}}])}),i("el-table-column",{attrs:{label:"冻结站设备页面",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("i",{class:e.row.rightInfo.isFreezeTxt})]}}])}),i("el-table-column",{attrs:{label:"冻结分析",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("i",{class:e.row.rightInfo.isFreezeAnalogTxt})]}}])}),i("el-table-column",{attrs:{label:"组态画面",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("i",{class:e.row.rightInfo.isGraphPageTxt})]}}])})],1)],1),i("div",{staticClass:"tableBottom"},[i("el-pagination",{staticClass:"page",attrs:{"current-page":e.projectTableData.currentPage,"page-sizes":[10,20,30,40],"page-size":e.projectTableData.pageSize,layout:"total, sizes, prev, pager, next",total:e.projectTableData.tableData.length},on:{"size-change":e.projectTableHandleSizeChange,"current-change":e.projectTableHandleCurrentChange}})],1)])},[],!1,null,null,null).exports),D=i("a293"),T=i("60b5"),k=(i("6a61"),i("01e5"),i("e487"),i("6cd0"),i("a593"));i("529f");var _=function(e){return e?'<div style="width:100%;display:flex;justify-content:center;align-items:center;"><div style="width:25%;height:15px;background-color:'+e.border+';"></div><div style="width:25%;height:15px;background-color:'+e.fill+';"></div><div style="width:25%;height:15px;background-color:'+e.fill2+';"></div><div style="width:25%;height:15px;background-color:'+e.font+';"></div></div>':"不允许"},I=function(e){return e?'<div style="width:100%;display:flex;justify-content:center;align-items:center;"><div style="width:33%;height:15px;background-color:'+e.border+';"></div><div style="width:33%;height:15px;background-color:'+e.fill+';"></div><div style="width:33%;height:15px;background-color:'+e.font+';"></div></div>':"不允许"},P=function(e){return e?'<div style="width:100%;display:flex;justify-content:center;align-items:center;"><div style="width:50%;height:15px;background-color:'+e.fill+';"></div><div style="width:50%;height:15px;background-color:'+e.line+';"></div></div>':"不允许"},N=function(e){return e?'<div style="width:100%;display:flex;justify-content:center;align-items:center;"><div style="width:100%;height:15px;background-color:'+e+';"></div>':"不允许"},V={"普通":function(e,t,i){},"变量":{"指针表1":function(e,t,i){i["量程起始值"]=t.bindProperties.mr0,i["量程满幅值"]=t.bindProperties.mr1,i["报警状态"]=I(t.bindProperties.color.alarm),i["通信错误"]=I(t.bindProperties.color.commErr)},"风扇1":function(e,t,i){var a=t.bindProperties;if(a.varGuid&&a.varGuid.length>0){var r=e.$coreData.g.getVarDescription(a.varGuid);r&&(i["旋转值"]=r[a.rotateValue])}else i["旋转值"]=a.rotateValue},"文本1":function(e,t,i){i["报警状态"]=_(t.bindProperties.color.alarm),i["通信错误"]=_(t.bindProperties.color.commErr)},"水浸绳1":function(e,t,i){i["报警状态"]=P(t.bindProperties.color.alarm),i["通信错误"]=P(t.bindProperties.color.commErr);var a=t.bindProperties.lens;if(a){for(var r="<table>",o=0;o<a.length;o++)r+="<tr><td>第"+(o+1)+"转折点："+parseFloat(a[o]).toFixed(2)+"米</td></tr>";r+="</table>",i["实际长度"]=r}},"流动1":function(e,t,i){var a=t.bindProperties;if(a.varGuid&&a.varGuid.length>0){if(a.varGuid.startsWith("@")){var r=e.$coreData.g.getVarDescription(a.varGuid);r&&(i["流动值"]=r[a.flowValue])}}else i["流动值"]=a.flowValue;i["报警状态"]=N(t.bindProperties.color.alarm),i["通信错误"]=N(t.bindProperties.color.commErr),i["流动速度"]=t.bindProperties.speed},"流动2":function(e,t,i){var a=t.bindProperties;if(a.varGuid&&a.varGuid.length>0){if(a.varGuid.startsWith("@")){var r=e.$coreData.g.getVarDescription(a.varGuid);r&&(i["流动值"]=r[a.flowValue])}}else i["流动值"]=a.flowValue;i["报警状态"]=P(t.bindProperties.color.alarm),i["通信错误"]=P(t.bindProperties.color.commErr),i["流动速度"]=t.bindProperties.speed},"遥控1":function(e,t,i){var a=t.bindProperties;if(a.varGuid&&a.varGuid.length>0){var r=e.$coreData.g.getVarDescription(a.varGuid);i["遥控值"]=r?r[a.ykValue]:a.ykValue}},"进度条1":function(e,t,i){i["进度起始值"]=t.bindProperties.mr0,i["进度满幅值"]=t.bindProperties.mr1}},"外部扩展":function(e,t,i){i["图元名"]=t.bindProperties.name.length>0?t.bindProperties.name:"未定义"}},L=(i("4cd5"),i("7446"),i("7a3a"),{props:["cell"],data:function(){return{bp:{type:0,jumpToPage:"",onClickPara:"",operate:"弹出表格",dialogTitle:""},originBp:{type:0,jumpToPage:"",onClickPara:"",operate:"",dialogTitle:""},operateOptions:[{label:"弹出表格"}],allVarslist:[],allDevNameslist:[],alldevsVars:[],devAllvars:[],tree:null,treeAllSel:[],rwMode:1,varType:0}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{init:function(){if(this.cell.bindProperties&&this.cell.bindProperties.custom){var e=this.cell.bindProperties.custom;this.bp.type=e.type,1===this.bp.type?this.bp.jumpToPage=e.jumpToPage:2===this.bp.type&&(this.bp.operate=e.operate,this.bp.dialogTitle=e.dialogTitle,this.bp.onClickPara=e.onClickPara,e.onClickPara.length>0&&(this.allVarslist=e.onClickPara.split(",")))}else this.bp.type=0,this.bp.dialogTitle="",this.bp.onClickPara="",this.allVarslist=[];this.originBp=this.$pubFunc.deepClone(this.bp),this.createVarTree()},isChanged:function(){if(this.bp.type!==this.originBp.type)return!0;if(1===this.bp.type){if(this.bp.jumpToPage!==this.originBp.jumpToPage)return!0}else if(2===this.bp.type){if(this.bp.operate!==this.originBp.operate)return!0;if(this.bp.dialogTitle!==this.originBp.dialogTitle)return!0;if(this.bp.onClickPara!==this.originBp.onClickPara)return!0}return!1},get:function(e){switch(this.bp.type){case 0:return!0;case 1:return 0===this.bp.jumpToPage.length?(this.$message.error("没有输入跳转的目标页面名！"),!1):(e.custom={type:1,jumpToPage:this.bp.jumpToPage},!0);case 2:return""===this.bp.operate?(this.$message.error("没有选择鼠标点击后要执行的操作！"),!1):""===this.bp.dialogTitle?(this.$message.error("没有输入弹窗标题！"),!1):0===this.bp.onClickPara.length?(this.$message.error("没有选择绑定的变量！"),!1):(e.custom={type:2,operate:this.bp.operate,dialogTitle:this.bp.dialogTitle,onClickPara:this.bp.onClickPara},!0)}return!1},createVarTree:function(){var e=this;if(this.$refs.varTree){if(this.tree&&this.rwMode===this.tree.rwMode&&this.varType===this.tree.varType)return this.treeAllSel.forEach(function(e){e.textNode&&(e.textNode.style.color="#000",e.textNode.style.fontWeight="normal")}),this.treeAllSel=[],void(this.allVarslist.length>0&&this.allVarslist.forEach(function(t){var i=e.tree.get(t);if(e.treeAllSel.push(i),i){if(!i.textNode)return;i.textNode.style.color="#00F",i.textNode.style.fontWeight="bold"}}));this.$refs.varTree.innerHTML="",this.alldevsVars=[],this.devAllvars=[],this.tree=this.$coreData.createVarTree(this.$refs.varTree,this.rwMode,this.varType,function(t){e.tree=t,e.tree.rwMode=e.rwMode,e.tree.varType=e.varType,e.treeAllSel.forEach(function(e){e.textNode.style.color="#000",e.textNode.style.fontWeight="normal"}),e.allVarslist.length>0&&e.allVarslist.forEach(function(t){var i=e.tree.get(t);i&&(i.textNode.style.color="#00F",i.textNode.style.fontWeight="bold")})},function(t,i,a){i.id=a.guid,e.allVarslist.forEach(function(t){i.id===t&&(e.treeAllSel.push(i),i.textNode.style.color="#00F",i.textNode.style.fontWeight="bold")}),i.onmousedown=function(t,i){e.allVarslist.some(function(e){return e==t.id})?(t.textNode.style.color="#000",t.textNode.style.fontWeight="normal",e.allVarslist=e.allVarslist.filter(function(e){return e!=t.id}),e.treeAllSel=e.treeAllSel.filter(function(e){return e.id!=t.id})):(e.treeAllSel.push(t),t.textNode.style.color="#00F",t.textNode.style.fontWeight="bold",t.id&&e.allVarslist.push(t.id)),e.bp.onClickPara=e.allVarslist.toString(),e.alldevsVars.find(function(i){i.variables.some(function(e){return e.guid==t.id})&&(e.devAllvars=i.variables,e.selectSwitch(i))})}},function(t,i,a){e.alldevsVars.push(a),e.devAllvars=a.variables,e.selectSwitch(a),i.onmousedown=function(t,i){e.allDevNameslist.some(function(e){return e==t.name})?(t.childs.forEach(function(t){t.textNode.style.color="#000",t.textNode.style.fontWeight="normal",e.allVarslist=e.allVarslist.filter(function(e){return e!=t.id}),e.treeAllSel=e.treeAllSel.filter(function(e){return e.id!=t.id})}),e.allDevNameslist=e.allDevNameslist.filter(function(e){return e!=t.name})):(e.allDevNameslist.push(t.name),t.childs.forEach(function(t){e.treeAllSel.push(t),t.textNode.style.color="#00F",t.textNode.style.fontWeight="bold",e.allVarslist.some(function(e){return e==t.id})||e.allVarslist.push(t.id)}));var a=new Set(e.allVarslist);e.allVarslist=Array.from(a),e.bp.onClickPara=e.allVarslist.toString()}},null),this.tree.rwMode=this.rwMode,this.tree.varType=this.varType}},selectSwitch:function(e){var t=this,i=0;this.devAllvars.forEach(function(e){t.allVarslist.forEach(function(t){e.guid==t&&(i+=1)})}),this.devAllvars.length==i?this.allDevNameslist.push(e.name):this.allDevNameslist=this.allDevNameslist.filter(function(t){return t!=e.name})}}}),$=(i("9bb5"),Object(c.a)(L,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[e.cell.type1?e._e():i("div",{staticClass:"ordinary"},[i("el-divider"),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"定制功能：","label-width":"100px"}},[i("el-select",{class:{changed:e.bp.type!==e.originBp.type},attrs:{size:"small"},model:{value:e.bp.type,callback:function(t){e.$set(e.bp,"type",t)},expression:"bp.type"}},[i("el-option",{attrs:{label:"无功能",value:0}}),i("el-option",{attrs:{label:"响应鼠标点击",value:2}})],1)],1)],1),i("el-col",{directives:[{name:"show",rawName:"v-show",value:1==e.bp.type,expression:"bp.type == 1"}],attrs:{span:24}},[i("el-form-item",{attrs:{label:"目标页面名：","label-width":"100px"}},[i("el-input",{class:{changed:e.bp.jumpToPage!=e.originBp.jumpToPage},attrs:{size:"small"},model:{value:e.bp.jumpToPage,callback:function(t){e.$set(e.bp,"jumpToPage","string"==typeof t?t.trim():t)},expression:"bp.jumpToPage"}})],1)],1),i("el-col",{directives:[{name:"show",rawName:"v-show",value:2==e.bp.type,expression:"bp.type == 2"}],attrs:{span:24}},[i("el-form-item",{attrs:{label:"执行操作：","label-width":"100px"}},[i("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.bp.operate,callback:function(t){e.$set(e.bp,"operate",t)},expression:"bp.operate"}},e._l(e.operateOptions,function(e){return i("el-option",{key:e.label,attrs:{label:e.label,value:e.label}})}),1)],1),i("el-form-item",{attrs:{label:"弹窗标题：","label-width":"100px"}},[i("el-input",{attrs:{size:"small"},model:{value:e.bp.dialogTitle,callback:function(t){e.$set(e.bp,"dialogTitle","string"==typeof t?t.trim():t)},expression:"bp.dialogTitle"}})],1),i("el-form-item",{attrs:{label:"添加变量：","label-width":"100px"}},[i("div",{ref:"varTree",staticClass:"tree",staticStyle:{width:"3rem"}})])],1)],1)])},[],!1,null,"6258af9e",null).exports),E={components:{customBindProperties:$},data:function(){return{dialogVisible:!1,cell:null}},mounted:function(){},methods:{open:function(e){this.cell=e,this.dialogVisible=!0},onDialogOpened:function(){this.$refs.customComponent.init()},isChanged:function(){return!!this.$refs.customComponent.isChanged()},handleOk:function(){if(this.isChanged()){var e={};if(!this.$refs.customComponent.get(e))return;0===Object.keys(e).length&&(e=null),this.$editorUi.updateBindProperties(this.cell,e)}this.dialogVisible=!1},handleClose:function(e){this.isChanged()?this.$msgBox.confirm("参数已经被修改，确认关闭？").then(function(t){e()}).catch(function(e){}):e()}}},A=Object(c.a)(E,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"800px",center:"",title:"普通绑定属性",visible:e.dialogVisible,"before-close":e.handleClose,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t},opened:e.onDialogOpened}},[i("el-form",[i("customBindProperties",{ref:"customComponent",attrs:{cell:e.cell}})],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("确 定")])],1)],1)},[],!1,null,"15f0d858",null).exports,O={props:["title","color"],methods:{changeColor:function(e){switch(e){case 1:this.$editorUi.pickColor(this.color.border,mxUtils.bind(this,function(e){this.$set(this.color,"border",e)}));break;case 2:this.$editorUi.pickColor(this.color.fill,mxUtils.bind(this,function(e){this.$set(this.color,"fill",e)}));break;case 3:this.$editorUi.pickColor(this.color.font,mxUtils.bind(this,function(e){"none"!==e&&(this.color.font=e)}))}}}},j=(i("9df0"),{components:{colorBorderFillFont:Object(c.a)(O,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:e.title,"label-width":"100px"}},[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"边框","label-width":"60px"}},[i("el-button",{style:{backgroundColor:"none"!=e.color.border&&e.color.border?e.color.border:"",color:"none"!=e.color.border&&e.color.border?"transparent":"#666"},on:{click:function(t){return e.changeColor(1)}}},[e._v(" X ")])],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"背景","label-width":"60px"}},[i("el-button",{style:{backgroundColor:"none"!=e.color.fill&&e.color.fill?e.color.fill:"",color:"none"!=e.color.fill&&e.color.fill?"transparent":"#666"},on:{click:function(t){return e.changeColor(2)}}},[e._v(" X ")])],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"文字","label-width":"60px"}},[i("el-button",{style:{backgroundColor:e.color.font,color:"transparent"},on:{click:function(t){return e.changeColor(3)}}},[e._v("X ")])],1)],1)],1)],1)],1)},[],!1,null,"2ad2186e",null).exports},props:["cell"],data:function(){return{bp:{mr0:0,mr1:100,color:{alarm:{border:"#000",fill:"#F00",font:"#FF0"},commErr:{border:"#000",fill:"#F0F",font:"#000"}}},originBp:null}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{init:function(){var e=this.cell.bindProperties;this.bp.mr0="mr0"in e?e.mr0:0,this.bp.mr1="mr1"in e?e.mr1:100,this.bp.color="color"in e?this.$pubFunc.deepClone(e.color):{alarm:{border:"#000",fill:"#F00",font:"#FF0"},commErr:{border:"#000",fill:"#F0F",font:"#000"}},this.originBp=this.$pubFunc.deepClone(this.bp)},isChanged:function(){return this.bp.mr0!==this.originBp.mr0||(this.bp.mr1!==this.originBp.mr1||(this.bp.color.alarm.border!==this.originBp.color.alarm.border||(this.bp.color.alarm.fill!==this.originBp.color.alarm.fill||(this.bp.color.alarm.font!==this.originBp.color.alarm.font||(this.bp.color.commErr.border!==this.originBp.color.commErr.border||(this.bp.color.commErr.fill!==this.originBp.color.commErr.fill||this.bp.color.commErr.font!==this.originBp.color.commErr.font))))))},get:function(e){return e.mr0=this.bp.mr0,e.mr1=this.bp.mr1,e.color=this.$pubFunc.deepClone(this.bp.color),!0}}}),F=Object(c.a)(j,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"量程起始值","label-width":"100px"}},[i("el-input",{class:{changed:e.bp.mr0!=e.originBp.mr0},model:{value:e.bp.mr0,callback:function(t){e.$set(e.bp,"mr0",e._n(t))},expression:"bp.mr0"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"量程满幅值","label-width":"100px"}},[i("el-input",{class:{changed:e.bp.mr1!=e.originBp.mr1},model:{value:e.bp.mr1,callback:function(t){e.$set(e.bp,"mr1",e._n(t))},expression:"bp.mr1"}})],1)],1)],1),i("colorBorderFillFont",{attrs:{title:"报警状态：",color:e.bp.color.alarm}}),i("colorBorderFillFont",{attrs:{title:"通信错误：",color:e.bp.color.commErr}})],1)},[],!1,null,"35da7810",null).exports,B={props:["title","color","label1","label2"],methods:{changeColor:function(e){switch(e){case 1:this.$editorUi.pickColor(this.color.fill,mxUtils.bind(this,function(e){"none"!==e&&(this.color.fill=e)}));break;case 2:this.$editorUi.pickColor(this.color.line,mxUtils.bind(this,function(e){"none"!==e&&(this.color.line=e)}))}}}},M=Object(c.a)(B,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:e.title,"label-width":"100px"}})],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:e.label1,"label-width":"60px"}},[i("el-button",{style:{backgroundColor:e.color.fill},on:{click:function(t){return e.changeColor(1)}}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:e.label2,"label-width":"60px"}},[i("el-button",{style:{backgroundColor:e.color.line},on:{click:function(t){return e.changeColor(2)}}})],1)],1)],1)},[],!1,null,"3fc1b832",null).exports,z={components:{colorFillLine:M},props:["cell"],data:function(){return{changed:!1,bp:{color:{alarm:{fill:"#FF0",line:"#F00"},commErr:{fill:"#000",line:"#F0F"}},lens:[]},originBp:null}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{init:function(){var e=this.cell.bindProperties;this.bp.color="color"in e?this.$pubFunc.deepClone(e.color):{alarm:{fill:"#FF0",line:"#F00"},commErr:{fill:"#000",line:"#F0F"}};var t=(this.cell.geometry.points?this.cell.geometry.points.length:0)+1,i=this.bp.lens.length;if(t<i)this.changed=!0,this.bp.lens[t-1]=this.bp.lens[i-1],this.bp.lens.length=t;else if(t>i){this.changed=!0;for(var a=i;a<t-1;a++)this.bp.lens.push(0);i>0?(this.bp.lens.push(this.bp.lens[i-1]),this.bp.lens[i-1]=0):this.bp.lens.push(0)}this.originBp=this.$pubFunc.deepClone(this.bp)},isChanged:function(){if(this.changed)return!0;if(this.bp.color.alarm.fill!==this.originBp.color.alarm.fill)return!0;if(this.bp.color.alarm.line!==this.originBp.color.alarm.line)return!0;if(this.bp.color.commErr.fill!==this.originBp.color.commErr.fill)return!0;if(this.bp.color.commErr.line!==this.originBp.color.commErr.line)return!0;if(this.bp.lens.length!==this.originBp.lens.length)return!0;for(var e=0;e<this.bp.lens.length;e++)if(parseFloat(this.bp.lens[e])!==parseFloat(this.originBp.lens[e]))return!0;return!1},get:function(e){for(var t=0,i=0;i<this.bp.lens.length;i++){var a=parseFloat(this.bp.lens[i]);if(a<=0)return this.$message.error("转折点长度必须大于0！请检查"),!1;if(a<=t)return this.$message.error("转折点长度必须递增！请检查"),!1;t=a}return e.lens=this.$pubFunc.deepClone(this.bp.lens),e.color=this.$pubFunc.deepClone(this.bp.color),!0}}},G=(i("fbce"),Object(c.a)(z,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("colorFillLine",{attrs:{title:"报警状态：",color:e.bp.color.alarm,label1:"间隔",label2:"线"}}),i("colorFillLine",{attrs:{title:"通信错误：",color:e.bp.color.commErr,label1:"间隔",label2:"线"}}),e.bp.lens?i("el-row",e._l(e.bp.lens,function(t,a){return i("el-col",{key:a,attrs:{span:12}},[i("el-form-item",{attrs:{label:"第"+(a+1)+"转折点：","label-width":"100px"}},[i("el-input-number",{staticClass:"short-input",class:{changed:e.bp.lens[a]!=e.originBp.lens[a]},attrs:{size:"mini","controls-position":"right",type:"number",min:0,step:.01},model:{value:e.bp.lens[a],callback:function(t){e.$set(e.bp.lens,a,t)},expression:"bp.lens[index]"}}),e._v("米 ")],1)],1)}),1):e._e()],1)},[],!1,null,"3c8a5712",null).exports),R={props:["title","color"],methods:{changeColor:function(e){switch(e){case 1:this.$editorUi.pickColor(this.color.border,mxUtils.bind(this,function(e){this.$set(this.color,"border",e)}));break;case 2:this.$editorUi.pickColor(this.color.fill,mxUtils.bind(this,function(e){this.$set(this.color,"fill",e)}));break;case 3:this.$editorUi.pickColor(this.color.font,mxUtils.bind(this,function(e){"none"!==e&&(this.color.font=e)}));break;case 4:this.$editorUi.pickColor(this.color.fill2,mxUtils.bind(this,function(e){this.$set(this.color,"fill2",e)}))}}}},U=(i("4321"),{components:{colorBorderFill2Font:Object(c.a)(R,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:e.title,"label-width":"100px"}},[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"边框","label-width":"60px"}},[i("el-button",{style:{backgroundColor:"none"!=e.color.border&&e.color.border?e.color.border:"",color:"none"!=e.color.border&&e.color.border?"transparent":"#666"},on:{click:function(t){return e.changeColor(1)}}},[e._v(" X ")])],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"背景1","label-width":"60px"}},[i("el-button",{style:{backgroundColor:"none"!=e.color.fill&&e.color.fill?e.color.fill:"",color:"none"!=e.color.fill&&e.color.fill?"transparent":"#666"},on:{click:function(t){return e.changeColor(2)}}},[e._v(" X ")])],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"背景2","label-width":"60px"}},[i("el-button",{style:{backgroundColor:"none"!=e.color.fill2&&e.color.fill2?e.color.fill2:"",color:"none"!=e.color.fill2&&e.color.fill2?"transparent":"#666"},on:{click:function(t){return e.changeColor(4)}}},[e._v(" X ")])],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"文字","label-width":"60px"}},[i("el-button",{style:{backgroundColor:e.color.font,color:"transparent"},on:{click:function(t){return e.changeColor(3)}}},[e._v("X ")])],1)],1)],1)],1)],1)},[],!1,null,"510204e4",null).exports},props:["cell"],data:function(){return{bp:{color:{alarm:{border:"#000",fill:"#F00",fill2:"#800",font:"#FF0"},commErr:{border:"#000",fill:"#F0F",fill2:"#808",font:"#000"}}},originBp:null}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{init:function(){var e=this.cell.bindProperties;this.bp.color="color"in e?this.$pubFunc.deepClone(e.color):{alarm:{border:"#000",fill:"#F00",fill2:"#800",font:"#FF0"},commErr:{border:"#000",fill:"#F0F",fill2:"#808",font:"#000"}},this.originBp=this.$pubFunc.deepClone(this.bp)},isChanged:function(){return this.bp.color.alarm.border!==this.originBp.color.alarm.border||(this.bp.color.alarm.fill!==this.originBp.color.alarm.fill||(this.bp.color.alarm.fill2!==this.originBp.color.alarm.fill2||(this.bp.color.alarm.font!==this.originBp.color.alarm.font||(this.bp.color.commErr.border!==this.originBp.color.commErr.border||(this.bp.color.commErr.fill!==this.originBp.color.commErr.fill||(this.bp.color.commErr.fill2!==this.originBp.color.commErr.fill2||this.bp.color.commErr.font!==this.originBp.color.commErr.font))))))},get:function(e){return e.color=this.$pubFunc.deepClone(this.bp.color),!0}}}),H=Object(c.a)(U,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("colorBorderFill2Font",{attrs:{title:"报警状态：",color:this.bp.color.alarm}}),t("colorBorderFill2Font",{attrs:{title:"通信错误：",color:this.bp.color.commErr}})],1)},[],!1,null,"6dab0e11",null).exports,W={props:["cell","varGuid","isPageVar"],data:function(){return{description:[{value:0,label:"断开"},{value:1,label:"闭合"}],bp:{ykValue:1},originBp:null}},watch:{varGuid:function(e){this.getDescription(e)}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{getDescription:function(e){var t=this.$coreData.g.getVarDescription(e);t&&(this.description[0].label=t[0],this.description[1].label=t[1])},init:function(){this.getDescription(this.varGuid);var e=this.cell.bindProperties;this.bp.ykValue="ykValue"in e?e.ykValue:1,this.originBp=this.$pubFunc.deepClone(this.bp)},isChanged:function(){return this.bp.ykValue!==this.originBp.ykValue},get:function(e){return e.ykValue=this.bp.ykValue,!0}}},q=Object(c.a)(W,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"遥控值：","label-width":"100px"}},[e.isPageVar?i("el-input",{class:{changed:e.bp.ykValue!==e.originBp.ykValue},model:{value:e.bp.ykValue,callback:function(t){e.$set(e.bp,"ykValue",t)},expression:"bp.ykValue"}}):i("el-select",{class:{changed:e.bp.ykValue!==e.originBp.ykValue},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.bp.ykValue,callback:function(t){e.$set(e.bp,"ykValue",t)},expression:"bp.ykValue"}},e._l(e.description,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1)},[],!1,null,"0cdaf114",null).exports,J={props:["cell","varGuid","isPageVar"],data:function(){return{description:[{value:0,label:"断开"},{value:1,label:"闭合"}],bp:{flowValue:1,color:{alarm:"#F00",commErr:"#F0F"},speed:20},originBp:null}},watch:{varGuid:function(e){this.getDescription(e)}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{changeColor:function(e){switch(e){case 1:this.$editorUi.pickColor(this.bp.color.alarm,mxUtils.bind(this,function(e){this.bp.color.alarm=e}));break;case 2:this.$editorUi.pickColor(this.bp.color.commErr,mxUtils.bind(this,function(e){this.bp.color.commErr=e}))}},getDescription:function(e){if(!e.startsWith("@")){var t=this.$coreData.g.getVarDescription(e);t&&(this.description[0].label=t[0],this.description[1].label=t[1])}},init:function(){this.getDescription(this.varGuid);var e=this.cell.bindProperties;this.bp.flowValue="flowValue"in e?e.flowValue:1,"color"in e?this.bp.color=this.$pubFunc.deepClone(e.color):(this.bp.color.alarm="#F00",this.bp.color.commErr="#F0F"),this.bp.speed="speed"in e?e.speed:20,this.originBp=this.$pubFunc.deepClone(this.bp)},isChanged:function(){return!this.isPageVar&&this.bp.flowValue!==this.originBp.flowValue||(this.bp.color.alarm!==this.originBp.color.alarm||(this.bp.color.commErr!==this.originBp.color.commErr||this.bp.speed!==this.originBp.speed))},get:function(e){return this.isPageVar||(e.flowValue=this.bp.flowValue),e.color={alarm:this.bp.color.alarm,commErr:this.bp.color.commErr},e.speed=this.bp.speed,!0}}},X=(i("d998"),Object(c.a)(J,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"流动值：","label-width":"100px"}},[e.isPageVar?i("div",{staticClass:"box"},[e._v("写值1开始正向流动，写值0停止流动，写值-1开始反向流动")]):i("el-select",{class:{changed:e.bp.flowValue!==e.originBp.flowValue},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.bp.flowValue,callback:function(t){e.$set(e.bp,"flowValue",t)},expression:"bp.flowValue"}},e._l(e.description,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"线条颜色：","label-width":"100px"}})],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"报警状态","label-width":"80px"}},[i("el-button",{style:{backgroundColor:e.bp.color.alarm},on:{click:function(t){return e.changeColor(1)}}})],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"通信错误","label-width":"80px"}},[i("el-button",{style:{backgroundColor:e.bp.color.commErr},on:{click:function(t){return e.changeColor(2)}}})],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"流动速度：","label-width":"100px"}},[i("el-input-number",{staticClass:"short-input",class:{changed:e.bp.speed!==e.originBp.speed},attrs:{size:"mini","controls-position":"right",min:1,max:100},model:{value:e.bp.speed,callback:function(t){e.$set(e.bp,"speed",t)},expression:"bp.speed"}})],1)],1)],1)],1)},[],!1,null,"7f4dff86",null).exports),Z={components:{colorFillLine:M},props:["cell","varGuid","isPageVar"],data:function(){return{description:[{value:0,label:"断开"},{value:1,label:"闭合"}],bp:{flowValue:1,color:{alarm:{fill:"#F0F",line:"#F00"},commErr:{fill:"#FF0",line:"#F0F"}},speed:20,sliderWidth:2,sliderLength:20},originBp:null}},watch:{varGuid:function(e){this.getDescription(e)}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{getDescription:function(e){if(!e.startsWith("@")){var t=this.$coreData.g.getVarDescription(e);t&&(this.description[0].label=t[0],this.description[1].label=t[1])}},init:function(){this.getDescription(this.varGuid);var e=this.cell.bindProperties;this.bp.flowValue="flowValue"in e?e.flowValue:1,this.bp.color="color"in e?this.$pubFunc.deepClone(e.color):{alarm:{fill:"#F0F",line:"#F00"},commErr:{fill:"#FF0",line:"#F0F"}},this.bp.speed="speed"in e?e.speed:20,this.bp.sliderWidth="sliderWidth"in e?e.sliderWidth:2,this.bp.sliderLength="sliderLength"in e?e.sliderLength:20,this.originBp=this.$pubFunc.deepClone(this.bp)},isChanged:function(){return!this.isPageVar&&this.bp.flowValue!==this.originBp.flowValue||(this.bp.color.alarm.fill!==this.originBp.color.alarm.fill||(this.bp.color.alarm.line!==this.originBp.color.alarm.line||(this.bp.color.commErr.fill!==this.originBp.color.commErr.fill||(this.bp.color.commErr.line!==this.originBp.color.commErr.line||(this.bp.speed!==this.originBp.speed||(this.bp.sliderWidth!==this.originBp.sliderWidth||this.bp.sliderLength!==this.originBp.sliderLength))))))},get:function(e){return this.isPageVar||(e.flowValue=this.bp.flowValue),e.color=this.$pubFunc.deepClone(this.bp.color),e.speed=this.bp.speed,e.sliderWidth=this.bp.sliderWidth,e.sliderLength=this.bp.sliderLength,!0}}},K=(i("048a"),Object(c.a)(Z,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"流动值：","label-width":"100px"}},[e.isPageVar?i("div",{staticClass:"box"},[e._v("写值1开始正向流动，写值0停止流动，写值-1开始反向流动")]):i("el-select",{class:{changed:e.bp.flowValue!==e.originBp.flowValue},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.bp.flowValue,callback:function(t){e.$set(e.bp,"flowValue",t)},expression:"bp.flowValue"}},e._l(e.description,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:24}},[i("colorFillLine",{attrs:{title:"报警状态：",color:e.bp.color.alarm,label1:"滑块",label2:"线"}}),i("colorFillLine",{attrs:{title:"通信错误：",color:e.bp.color.commErr,label1:"滑块",label2:"线"}})],1)],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"流动速度：","label-width":"100px"}},[i("el-input-number",{staticClass:"short-input",class:{changed:e.bp.speed!==e.originBp.speed},attrs:{size:"mini","controls-position":"right",min:1,max:1e3},model:{value:e.bp.speed,callback:function(t){e.$set(e.bp,"speed",t)},expression:"bp.speed"}})],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"滑块宽度：","label-width":"100px"}},[i("el-input-number",{staticClass:"short-input",class:{changed:e.bp.sliderWidth!==e.originBp.sliderWidth},attrs:{size:"mini","controls-position":"right",min:-20,max:20},model:{value:e.bp.sliderWidth,callback:function(t){e.$set(e.bp,"sliderWidth",t)},expression:"bp.sliderWidth"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"滑块长度：","label-width":"100px"}},[i("el-input-number",{staticClass:"short-input",class:{changed:e.bp.sliderLength!==e.originBp.sliderLength},attrs:{size:"mini","controls-position":"right",min:1,max:1e3},model:{value:e.bp.sliderLength,callback:function(t){e.$set(e.bp,"sliderLength",t)},expression:"bp.sliderLength"}})],1)],1)],1)],1)},[],!1,null,"1132dfe6",null).exports),Y={props:["cell","varGuid","isPageVar"],data:function(){return{description:[{value:0,label:"断开"},{value:1,label:"闭合"}],bp:{rotateValue:1},originBp:null}},watch:{varGuid:function(e){this.getDescription(e)}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{getDescription:function(e){if(!e.startsWith("@")){var t=this.$coreData.g.getVarDescription(e);t&&(this.description[0].label=t[0],this.description[1].label=t[1])}},init:function(){this.getDescription(this.varGuid);var e=this.cell.bindProperties;this.bp.rotateValue="rotateValue"in e?e.rotateValue:1,this.originBp=this.$pubFunc.deepClone(this.bp)},isChanged:function(){return!this.isPageVar&&this.bp.rotateValue!==this.originBp.rotateValue},get:function(e){return this.isPageVar||(e.rotateValue=this.bp.rotateValue),!0}}},Q=(i("ecdc"),Object(c.a)(Y,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"旋转值：","label-width":"100px"}},[e.isPageVar?i("div",{staticClass:"box"},[e._v("写值1开始正向转动，写值0停止转动，写值-1开始反向转动")]):i("el-select",{class:{changed:e.bp.rotateValue!==e.originBp.rotateValue},attrs:{placeholder:"请选择",size:"mini"},model:{value:e.bp.rotateValue,callback:function(t){e.$set(e.bp,"rotateValue",t)},expression:"bp.rotateValue"}},e._l(e.description,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1)},[],!1,null,"3fa544dd",null).exports),ee=(i("24a8"),{props:["cell"],data:function(){return{bp:{showType:0,mr0:0,mr1:100},originBp:null}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{init:function(){var e=this.cell.bindProperties;this.bp.showType="showType"in e?e.showType:0,this.bp.mr0="mr0"in e?e.mr0:0,this.bp.mr1="mr1"in e?e.mr1:100,this.originBp=this.$pubFunc.deepClone(this.bp)},isChanged:function(){return this.bp.showType!==this.originBp.showType||(this.bp.mr0!==this.originBp.mr0||this.bp.mr1!==this.originBp.mr1)},get:function(e){return e.showType=this.bp.showType,isNaN(Number(this.bp.mr0))?(this.$message.error("量程起始值请输入数值！"),!1):isNaN(Number(this.bp.mr1))?(this.$message.error("量程满幅值请输入数值！"),!1):(e.mr0=this.bp.mr0,e.mr1=this.bp.mr1,!0)}}}),te=Object(c.a)(ee,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"显示方式：","label-width":"100px"}},[i("el-radio-group",{model:{value:e.bp.showType,callback:function(t){e.$set(e.bp,"showType",t)},expression:"bp.showType"}},[i("el-radio-button",{attrs:{label:0}},[e._v("百分比")]),i("el-radio-button",{attrs:{label:1}},[e._v("原始值")])],1)],1)],1)],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"进度起始值：","label-width":"100px"}},[i("el-input",{class:{changed:e.bp.mr0!=e.originBp.mr0},model:{value:e.bp.mr0,callback:function(t){e.$set(e.bp,"mr0",e._n(t))},expression:"bp.mr0"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"进度满幅值：","label-width":"100px"}},[i("el-input",{class:{changed:e.bp.mr1!=e.originBp.mr1},model:{value:e.bp.mr1,callback:function(t){e.$set(e.bp,"mr1",e._n(t))},expression:"bp.mr1"}})],1)],1)],1)],1)},[],!1,null,"d8f21d50",null).exports,ie={props:["cell","varGuid"],data:function(){return{description:[{value:0,label:"0"},{value:1,label:"1"}],bp:{defaultSel:1},originBp:null}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{init:function(){this.cell.children[0].value.length>0?this.description[0].label=this.cell.children[0].value:this.description[0].label="0",this.cell.children[1].value.length>0?this.description[1].label=this.cell.children[1].value:this.description[1].label="1";var e=this.cell.bindProperties;this.bp.defaultSel="defaultSel"in e?e.defaultSel:1,this.originBp=this.$pubFunc.deepClone(this.bp)},isChanged:function(){return this.bp.defaultSel!==this.originBp.defaultSel},get:function(e){return e.defaultSel=this.bp.defaultSel,!0}}},ae=Object(c.a)(ie,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"默认选择：","label-width":"160px"}},[i("el-select",{class:{changed:e.bp.defaultSel!==e.originBp.defaultSel},attrs:{placeholder:"请选择"},model:{value:e.bp.defaultSel,callback:function(t){e.$set(e.bp,"defaultSel",t)},expression:"bp.defaultSel"}},e._l(e.description,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1)},[],!1,null,"0da67e06",null).exports,re={components:{customBindProperties:$},data:function(){return{dialogVisible:!1,intrinsicComponent:null,tree:null,rwMode:-1,varType:-1,cell:null,bp:{varGuid:"",pVarName:""},originBp:null,isPageVar:!1,varName:""}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{open:function(e){this.cell=e;var t=this.cell.bindProperties;switch(t.varGuid&&t.varGuid.startsWith("@")?(this.isPageVar=!0,this.bp.pVarName=t.varGuid.substring(1),this.bp.varGuid="",this.varName=""):(this.isPageVar=!1,this.bp.varGuid=t.varGuid,this.bp.varGuid&&(this.varName=this.$coreData.g.getVarQualifiedName(this.bp.varGuid)),this.bp.pVarName=""),this.originBp=this.$pubFunc.deepClone(this.bp),this.cell.type2){case"指针表1":this.rwMode=1,this.varType=1,this.intrinsicComponent=F;break;case"风扇1":this.rwMode=1,this.varType=2,this.intrinsicComponent=Q;break;case"文本1":this.rwMode=1,this.varType=0,this.intrinsicComponent=H;break;case"水浸绳1":this.rwMode=1,this.varType=1,this.intrinsicComponent=G;break;case"流动1":this.rwMode=1,this.varType=2,this.intrinsicComponent=X;break;case"流动2":this.rwMode=1,this.varType=2,this.intrinsicComponent=K;break;case"遥控1":this.rwMode=2,this.varType=2,this.intrinsicComponent=q;break;case"进度条1":this.rwMode=1,this.varType=1,this.intrinsicComponent=te;break;case"选项二1":this.rwMode=2,this.varType=2,this.intrinsicComponent=ae;break;default:return}this.dialogVisible=!0},onDialogOpened:function(){this.createVarTree(),this.$refs.intrinsicComponent&&this.$refs.intrinsicComponent.init(),this.$refs.customComponent.init()},isChanged:function(){return!!(!this.isPageVar&&this.bp.varGuid!==this.originBp.varGuid||this.isPageVar&&this.bp.pVarName!==this.originBp.pVarName)||(!!this.$refs.intrinsicComponent.isChanged()||!!this.$refs.customComponent.isChanged())},handleOk:function(){if(!this.isPageVar&&0===this.bp.varGuid.length||this.isPageVar&&0===this.bp.pVarName.length)return this.$message.error("没有指定变量！");if(this.isChanged()){var e={};if(e.varGuid=this.isPageVar?"@"+this.bp.pVarName:this.bp.varGuid,!this.$refs.intrinsicComponent.get(e))return;if(!this.$refs.customComponent.get(e))return;this.$editorUi.updateBindProperties(this.cell,e)}this.dialogVisible=!1},handleClose:function(e){this.isChanged()?this.$msgBox.confirm("参数已经被修改，确认关闭？").then(function(t){e()}).catch(function(e){}):e()},createVarTree:function(){var e=this;if(this.tree&&this.rwMode===this.tree.rwMode&&this.varType===this.tree.varType){if(this.bp.varGuid!==(this.tree.curSel?this.tree.curSel.id:""))if(this.tree.curSel&&(this.tree.curSel.textNode.style.color="#000",this.tree.curSel.textNode.style.fontWeight="normal"),this.bp.varGuid&&this.bp.varGuid.length>0){var t=this.tree.get(this.bp.varGuid);t&&(this.tree.curSel=t,t.textNode.style.color="#00F",t.textNode.style.fontWeight="bold"),this.varName=this.$coreData.g.getVarQualifiedName(this.bp.varGuid)}else this.varName=""}else this.bp.varGuid?this.varName=this.$coreData.g.getVarQualifiedName(this.bp.varGuid):this.varName="",this.$refs.varTree.innerHTML="",this.tree=this.$coreData.createVarTree(this.$refs.varTree,this.rwMode,this.varType,function(t){if(e.tree=t,e.tree.rwMode=e.rwMode,e.tree.varType=e.varType,e.bp.varGuid){var i=t.get(e.bp.varGuid);i&&(t.curSel=i,i.textNode.style.color="#00F",i.textNode.style.fontWeight="bold")}},function(t,i,a){i.id=a.guid,i.id===e.bp.varGuid&&(t.curSel=i,i.textNode.style.color="#00F",i.textNode.style.fontWeight="bold"),i.onmousedown=function(i,a){t.curSel&&(t.curSel.textNode.style.color="#000",t.curSel.textNode.style.fontWeight="normal"),t.curSel=i,i.textNode.style.color="#00F",i.textNode.style.fontWeight="bold",e.bp.varGuid=i.id,e.varName=e.$coreData.g.getVarQualifiedName(e.bp.varGuid)}}),this.tree.rwMode=this.rwMode,this.tree.varType=this.varType}}},oe=(i("0d74"),Object(c.a)(re,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"1000px",center:"",title:"变量绑定属性",visible:e.dialogVisible,"before-close":e.handleClose,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t},opened:e.onDialogOpened}},[i("el-form",[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-row",[i("div",{staticClass:"varclass"},[i("el-radio-group",{model:{value:e.isPageVar,callback:function(t){e.isPageVar=t},expression:"isPageVar"}},[i("el-radio",{attrs:{label:!1}},[e._v("设备/中间变量")]),i("el-radio",{attrs:{label:!0}},[e._v("页面变量")])],1)],1)]),i("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.isPageVar,expression:"!isPageVar"}]},[i("el-form-item",{attrs:{size:"mini",label:"变量GUID：","label-width":"100px"}},[i("el-input",{class:{changed:e.bp.varGuid!=e.originBp.varGuid},attrs:{readonly:"",value:e.bp.varGuid}})],1),i("el-form-item",{attrs:{size:"mini",label:"变量名称：","label-width":"100px"}},[i("el-input",{class:{changed:e.bp.varGuid!=e.originBp.varGuid},attrs:{readonly:"",value:e.varName}})],1)],1),i("el-row",{directives:[{name:"show",rawName:"v-show",value:!e.isPageVar,expression:"!isPageVar"}]},[i("div",{ref:"varTree",staticClass:"tree"})]),i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isPageVar,expression:"isPageVar"}]},[i("el-form-item",{attrs:{size:"mini",label:"页面变量：@","label-width":"100px"}},[i("el-input",{class:{changed:e.bp.pVarName!=e.originBp.pVarName},model:{value:e.bp.pVarName,callback:function(t){e.$set(e.bp,"pVarName",t)},expression:"bp.pVarName"}})],1)],1)],1),i("el-col",{attrs:{span:12}},[i(e.intrinsicComponent,{ref:"intrinsicComponent",tag:"component",attrs:{cell:e.cell,varGuid:e.bp.varGuid,isPageVar:e.isPageVar}}),i("customBindProperties",{ref:"customComponent",attrs:{cell:e.cell}})],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("确 定")])],1)],1)},[],!1,null,"9814c94e",null).exports),ne={data:function(){return{dialogVisible:!1,bp:{name:""},originBp:null,cell:null}},created:function(){this.originBp=this.$pubFunc.deepClone(this.bp)},methods:{open:function(e){this.cell=e,e.bindProperties.name?this.bp.name=e.bindProperties.name:this.bp.name="",this.originBp=this.$pubFunc.deepClone(this.bp),this.dialogVisible=!0},isChanged:function(){return this.bp.name!==this.originBp.name},handleOk:function(){this.isChanged()&&this.$editorUi.updateBindProperties(this.cell,this.bp),this.dialogVisible=!1},handleClose:function(e){this.isChanged()?this.$msgBox.confirm("参数已经被修改，确认关闭？").then(function(t){e()}).catch(function(e){}):e()}}},se=Object(c.a)(ne,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{width:"400px",center:"",title:"外部扩展图元绑定属性",visible:e.dialogVisible,"before-close":e.handleClose,"append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",[i("el-row",[i("el-form-item",{attrs:{label:"图元名：","label-width":"120px"}},[i("el-input",{class:{changed:e.bp.name!=e.originBp.name},model:{value:e.bp.name,callback:function(t){e.$set(e.bp,"name","string"==typeof t?t.trim():t)},expression:"bp.name"}})],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("确 定")])],1)],1)},[],!1,null,"df818794",null).exports,le=i("b846"),ce=i("49ca"),de=i("062d"),ue={components:{generalBindProperties:A,varBindProperties:oe,extBindProperties:se,graphPopup:le.a,graphHistoryCurve:ce.a},data:function(){return{viewMode:!1,loading:!0,zoomFactor:.6,graphShow:null,readableVarList:[],showEditorDrawer:!1,curGraph:{xml:""},images:null,timer:null,errorFlag:!1}},watch:{curGraph:{handler:function(e,t){this.showGraph()},deep:!0},showEditorDrawer:function(e,t){1==e?(this.$store.commit("set_isAutoLogin",!0),window.document.oncontextmenu=function(){return!1},history.pushState(null,null,document.URL),window.addEventListener("popstate",this.back_common)):(this.$store.commit("set_isAutoLogin",!1),window.document.oncontextmenu=function(){return!0},window.onbeforeunload=function(){},history.go(-1),window.removeEventListener("popstate",this.back_common))}},mounted:function(){var e=this;return Object(T.a)(regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.curGraph.xml=e.$store.state.curGraphXml,i=e.$store.state.graphStationGuid,e.$coreData.getAll(i),e.getGraphPic(),e.$erd.listenTo(e.$refs.graphWarp,function(t){var i=e.$refs.graphWarp.offsetWidth-4;e.graphShow.zoomWidth(i)});case 5:case"end":return t.stop()}},t)}))()},beforeDestroy:function(){this.graphShow&&this.graphShow.dispose(),k.default.prototype.$editorUi=null,this.$store.commit("set_isAutoLogin",!1)},methods:{showGraph:function(){var e=this;return Object(T.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.graphShow||(e.graphShow=new de.a(e.$refs.graphShow,e)),e.graphShow.setGraphXml(e.curGraph.xml),e.$nextTick(function(){var t=e.$refs.graphWarp.offsetWidth-4;e.graphShow.zoomWidth(t)});case 3:case"end":return t.stop()}},t)}))()},getGraphPic:function(){var e=this;return Object(T.a)(regeneratorRuntime.mark(function t(){var i,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios({method:"get",headers:{},url:"/web/pic/getAllImage"});case 2:i=t.sent,0!==(a=i.data).code?e.$message.error("获取组态图元图片失败"):0!=a.info.length?e.images=a.info:(r=["/html/cell/images/biaoti.png","/html/cell/images/dw_bg.png","/html/cell/images/gdl1.png","/html/cell/images/gdl2.png","/html/cell/images/gdl3.png","/html/cell/images/huan.png","/html/cell/images/title_icon1.png","/html/cell/images/title_icon2.png","/html/cell/images/title_icon3.png","/html/cell/images/title_icon4.png","/html/cell/images/title_icon5.png","/html/cell/images/title_icon6.png","/html/cell/images/title_icon7.png","/html/cell/images/title_icon8.png","/html/cell/images/title_icon9.png","/html/cell/images/top.png","/html/cell/images/weixuanzhong.png","/html/cell/images/xiansun.png","/html/cell/images/xuanzhong.png","/html/cell/images/11.png","/html/cell/images/12.png","/html/cell/images/13.png","/html/cell/images/14.png","/html/cell/images/15.png"],e.images=r);case 5:case"end":return t.stop()}},t)}))()},onViewMode:function(e){},addReadableVar:function(e,t){},saveGraph:function(e,t){var i=this;return Object(T.a)(regeneratorRuntime.mark(function a(){var r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=i.$store.state.graphProjectId,o=i.$store.state.graphPageId,i.$axios({method:"post",headers:{},url:"/web/projectPage/saveXml",data:{projectId:r,pageId:o,xmlContent:e.xml}}).then(function(e){var a=e.data;0===a.code?(i.$message.success(a.info),t&&(i.showEditorDrawer=!1)):i.$message.error("保存组态图失败")}).catch(function(e){if(i.errorFlag)return i.$message.error("请求失败"),!1;i.errorFlag=!0,setTimeout(function(){i.errorFlag=!1},5e3);var a=i.$store.state.userInfo.userName,r=i.$store.state.userInfo.password;i.$store.state.isAutoLogin&&i.autoLogin(a,r,t)});case 3:case"end":return a.stop()}},a)}))()},autoLogin:function(e,t,i){var a=this;e||(alert("登录超时请重新登录"),window.location.href="./index.html"),this.$axios({method:"post",headers:{},url:"/login",data:{userName:e,userPasswd:t}}).then(function(r){var o=r.data;0==o.code&&2!=o.info.source&&(a.$store.commit("set_userName",e),a.$store.commit("set_password",t),a.$store.commit("set_role",o.info.role),a.$store.commit("set_source",-2),a.saveGraph(a.curGraph,i))})},onEditorDrawerOpened:function(){var e=this;if(!this.$editorUi){var t=new GE.EditorUi(this.$refs.editorUi,function(t,i){e.$coreData.createVarTree(t,1,0,null,function(t,a,r){var o=i({guid:r.guid,value:e.$coreData.v.getVarDefaultValue(r)});a.onmousedown=function(e,i){t.curSel&&(t.curSel.textNode.style.color="#000",t.curSel.textNode.style.fontWeight="normal"),t.curSel=e,e.textNode.style.color="#00F",e.textNode.style.fontWeight="bold",o(i)}})},this.images);t.tooltip=function(t){var i,a={};t.bindProperties&&(t.type1?(i=V[t.type1],t.type2&&(i=i[t.type2])):i=V.普通,i&&"function"==typeof i&&(t.type1&&"变量"===t.type1&&(t.bindProperties.varGuid.length>0?t.bindProperties.varGuid.startsWith("@")?a.页变量=t.bindProperties.varGuid:(a.GUID=t.bindProperties.varGuid,a.变量名=""!==t.bindProperties.varGuid?e.$coreData.g.getVarQualifiedName(t.bindProperties.varGuid):"未绑定"):a.变量="未绑定"),i(e,t,a)),t.bindProperties.custom&&function(e,t,i){var a=t.bindProperties.custom;if(1===a.type)i["定制功能"]="鼠标点击该图元后跳转到目标页",i["跳转页面"]=a.jumpToPage;else if(2===a.type){i["定制功能"]="鼠标点击该图元后调用函数",i["操作"]=a.operate,i["标题"]=a.dialogTitle;var r="";a.onClickPara&&""!=a.onClickPara&&a.onClickPara.split(",").forEach(function(t){var i=e.$coreData.g.getVarQualifiedName(t);i&&(r+=i,r+="<br/>")}),i["传递参数"]=r}else i["未定义"]="未定义"}(e,t,a));return function(e){if(0===Object.keys(e).length)return"";var t='<div style="max-width:360px;"><table border="1" style="border-color:#ccc;background-color:#FFF;border-collapse:collapse;">';for(var i in e)t+="<tr><td>",t+=i,t+="</td><td>",t+=e[i],t+="</td></tr>";return t+="</table></div>"}(a)},t.save=function(){var t=Object(T.a)(regeneratorRuntime.mark(function t(i,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i?(e.curGraph.xml=i,e.saveGraph(e.curGraph,a),e.graphShow||(e.graphShow=new de.a(e.$refs.graphShow,e)),setTimeout(function(){e.graphShow.setGraphXml(i),e.graphShow.zoom(e.zoomFactor)},20)):a&&(e.showEditorDrawer=!1);case 1:case"end":return t.stop()}},t)}));return function(e,i){return t.apply(this,arguments)}}(),t.bindProperties=function(t){if(t.type1)switch(t.type1){case"变量":e.$refs.varBindProperties.open(t);break;case"日期时间":e.$refs.dateTimeBindProperties.open(t);break;case"外部扩展":e.$refs.extBindProperties.open(t)}else e.$refs.generalBindProperties.open(t)},t.insertImage=function(e,t){t(mxUtils.prompt("请输入图片链接",e))},k.default.prototype.$editorUi=t}this.$editorUi.setGraphXml(this.curGraph.xml)},back_common:function(){history.pushState(null,null,document.URL)}}},he=(i("ae62"),{components:{graphEdit:Object(c.a)(ue,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"graphWarp",staticStyle:{height:"100%",width:"100%"}},[i("el-button",{staticStyle:{float:"right","margin-bottom":"5px"},attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.showEditorDrawer=!0}}},[e._v("修改画面")]),i("table",{staticClass:"showarea"},[i("tr",[i("td",{attrs:{valign:"top"}}),i("td",{attrs:{valign:"top",width:"100%"}},[i("div",{staticStyle:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}},[i("div",{ref:"graphShow"})])])])]),i("el-drawer",{attrs:{title:"","close-on-press-escape":!1,size:"100%",visible:e.showEditorDrawer,"with-header":!1,"append-to-body":!0},on:{opened:e.onEditorDrawerOpened,"update:visible":function(t){e.showEditorDrawer=t}}},[i("div",{ref:"editorUi"})]),i("generalBindProperties",{ref:"generalBindProperties"}),i("varBindProperties",{ref:"varBindProperties"}),i("extBindProperties",{ref:"extBindProperties"}),i("graphPopup",{ref:"graphPopup"}),i("graphHistoryCurve",{ref:"graphHistoryCurve"})],1)},[],!1,null,"6671d7d0",null).exports},data:function(){return{projectId:"",tableLoading:!1,loading:!1,pageConfigTableData:{tableData:[],currentPage:1,pageSize:10,tableHeight:"100%"},searchValue:"",title:"",dialogVisible:!1,dialogWidth:"5.8rem",graphTitle:"",graphDialogVisible:!1,graphDialogWidth:"5.8rem",addBtnLoading:!1,currentRow:{name:"",description:""},ruleForm:{name:"",description:""},rules:{name:[{message:"请填画面名称",trigger:["blur","change"],required:!0}]},batchDeleteFlag:!1,ids:[]}},props:{currItem:Object},computed:{tableData:function(){var e=this;return this.pageConfigTableData.tableData.filter(function(t){return t.name.toLowerCase().includes(e.searchValue.toLowerCase())}).slice((this.pageConfigTableData.currentPage-1)*this.pageConfigTableData.pageSize,this.pageConfigTableData.currentPage*this.pageConfigTableData.pageSize)}},mounted:function(){var e=this.currItem.id.split("-");this.projectId=e[1],this.$store.commit("set_graphProjectId",e[1]),this.queryProjectPageByProjectId()},methods:{queryProjectPageByProjectId:function(){var e=this;this.$axios({method:"get",headers:{},url:"/web/projectPage/queryProjectPageByProjectId",params:{projectId:this.projectId}}).then(function(t){var i=t.data;0==i.code?e.pageConfigTableData.tableData=i.info:e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t.message)})},devTableHandleSizeChange:function(e){this.pageConfigTableData.pageSize=e},devTableHandleCurrentChange:function(e){this.pageConfigTableData.currentPage=e},dialogOpen:function(){var e=this;this.currentRow,"添加画面"==this.title?this.ruleForm={name:"",description:""}:"基本信息"==this.title&&(this.ruleForm={name:this.currentRow.name?this.currentRow.name:"",description:this.currentRow.description?this.currentRow.description:""}),this.$nextTick(function(){e.$refs.ruleForm&&e.$refs.ruleForm.clearValidate()})},dialogClose:function(){},addBtn:function(){var e=this,t="",i={};"添加画面"==this.title?(t="/web/projectPage/addProjectPage",i={projectId:this.projectId,name:this.ruleForm.name,description:this.ruleForm.description}):"基本信息"==this.title&&(t="/web/projectPage/updateProjectPage",i={id:this.currentRow.id,projectId:this.currentRow.projectId,name:this.ruleForm.name,description:this.ruleForm.description}),this.$refs.ruleForm.validate(function(a){if(!a)return!1;e.addBtnLoading=!0,e.$axios({method:"post",headers:{},url:t,data:i}).then(function(t){0==t.data.code?(e.$showMessage("success",t.data.info),e.queryProjectPageByProjectId(),e.dialogVisible=!1):e.$showMessage("error",t.data.msg),e.addBtnLoading=!1}).catch(function(t){e.$showMessage("error",t),e.addBtnLoading=!1})})},getXml:function(e){var t={projectId:this.projectId,pageId:e};return this.$axios({method:"get",headers:{},url:"/web/projectPage/getXml",params:t})},editBtn:function(e){this.dialogVisible=!0,this.currentRow=e,this.dialogWidth="5.8rem",this.title="基本信息",this.editDisabled=!0},previewBtn:function(e){var t=this;return Object(T.a)(regeneratorRuntime.mark(function i(){var a,r,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.$loading({background:"transparent"}),t.$store.commit("set_graphPageId",e.id),i.next=4,t.getXml(e.id);case 4:0==(r=i.sent).data.code?t.$store.commit("set_curGraphXml",r.data.info):(o="<mxGraphModel></mxGraphModel>",t.$store.commit("set_curGraphXml",o)),t.graphDialogVisible=!0,t.graphDialogWidth="12rem",t.graphTitle="预览画面",t.$nextTick(function(){a.close()});case 10:case"end":return i.stop()}},i)}))()},handleSelectionChange:function(e){var t,i=[],a=Object(D.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;i.push(r.id)}}catch(e){a.e(e)}finally{a.f()}this.ids=i},batchDelete:function(e){if("批量"!=e)return this.currentRow=e,this.title="删除",this.dialogWidth="5.8rem",this.dialogVisible=!0,void(this.batchDeleteFlag=!1);0!=this.ids.length?(this.title="删除",this.dialogWidth="5.8rem",this.dialogVisible=!0,this.batchDeleteFlag=!0):this.$showMessage("warning","请选择要删除的行")},deleteAioVar:function(e){var t=this,i={projectId:this.projectId,pageIds:[]};e?i.pageIds=this.ids:i.pageIds.push(this.currentRow.id),this.$axios({method:"post",headers:{},url:"/web/projectPage/deleteProjectPageByPageIds",data:i}).then(function(e){var i=e.data;0==i.code?(t.queryProjectPageByProjectId(),t.dialogVisible=!1,t.$showMessage("success",i.info)):t.$showMessage("error",i.info)}).catch(function(e){t.$showMessage("error",e)})},allDelete:function(){var e=this;this.addBtnLoading=!0;var t={projectId:this.projectId};this.$axios({method:"get",headers:{},url:"/web/project/deleteProjectPageByProjectId",params:t}).then(function(t){var i=t.data;e.addBtnLoading=!1,0==i.code?(e.queryProjectPageByProjectId(),e.dialogVisible=!1,e.$showMessage("success",i.info)):e.$showMessage("error",i.info)}).catch(function(t){e.addBtnLoading=!1,e.$showMessage("error",t)})}}}),pe=(i("bdd0"),Object(c.a)(he,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pageConfiguration"},[i("div",{staticClass:"top-div"},[i("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"success"},on:{click:function(t){e.title="添加画面",e.dialogVisible=!0}}},[e._v("+ 添加画面")]),i("el-button",{staticClass:"ml20",attrs:{type:"warning"},on:{click:function(t){return e.batchDelete("批量")}}},[e._v("- 批量删除")]),i("el-button",{staticClass:"ml20",attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){e.title="全部删除",e.dialogVisible=!0}}},[e._v("全部删除")]),i("el-input",{staticClass:"searchInput",attrs:{placeholder:"请输入筛选的名称"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),i("div",{staticClass:"interval-div"}),i("div",{ref:"pageConfigTable",staticClass:"bottom-table-div"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData,stripe:"",height:e.pageConfigTableData.tableHeight,"row-style":{height:"45px"},"cell-style":{padding:"0px"}},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),i("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.pageConfigTableData.currentPage-1)*e.pageConfigTableData.pageSize+1))]}}])}),i("el-table-column",{attrs:{label:"画面名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),i("el-table-column",{attrs:{label:"画面描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.description)+" ")]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center","min-width":"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.editBtn(t.row)}}},[e._v("基本信息")]),i("el-button",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-view"},on:{click:function(i){return e.previewBtn(t.row)}}},[e._v("预览")]),i("el-button",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete-solid"},on:{click:function(i){return e.batchDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),i("div",{staticClass:"tableBottom"},[i("el-pagination",{staticClass:"page",attrs:{"current-page":e.pageConfigTableData.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageConfigTableData.pageSize,layout:"total, sizes, prev, pager, next",total:e.pageConfigTableData.tableData.filter(function(t){return t.name.toLowerCase().includes(e.searchValue.toLowerCase())}).length},on:{"size-change":e.devTableHandleSizeChange,"current-change":e.devTableHandleCurrentChange}})],1),i("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:e.dialogWidth,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClose,open:e.dialogOpen}},["添加画面"==e.title||"基本信息"==e.title?[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{width:"4.8rem","font-size":"1.18rem"},attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"1.5rem","label-position":"right","validate-on-rule-change":!1}},[i("el-form-item",{attrs:{label:"画面名称：",prop:"name"}},[i("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),i("el-form-item",{attrs:{label:"画面描述："}},[i("el-input",{model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.addBtnLoading},on:{click:e.addBtn}},[e._v("确定")])],1)]:"删除"==e.title?[i("h2",{staticStyle:{margin:"0 auto"}},[e._v("确定要删除吗？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.addBtnLoading},on:{click:function(t){return e.deleteAioVar(e.batchDeleteFlag)}}},[e._v("确定")])],1)]:"全部删除"==e.title?[i("h2",{staticStyle:{margin:"0 auto"}},[e._v("确定要删除全部吗？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.addBtnLoading},on:{click:function(t){return e.allDelete()}}},[e._v("确定")])],1)]:e._e()],2),i("el-dialog",{attrs:{title:e.graphTitle,visible:e.graphDialogVisible,width:e.graphDialogWidth,"close-on-click-modal":!1},on:{"update:visible":function(t){e.graphDialogVisible=t}}},[e.graphDialogVisible?i("graphEdit"):e._e()],1)],1)},[],!1,null,null,null).exports),fe={components:{freezeTemplate1:r.a,temperatureTemplate:d,stationProject:p,surveyProject:m,videoProject:v,freezeAllProject:w,showProject:C,projectConfigOverview:x,pageConfiguration:pe},data:function(){return{stationNamesJson:{},dialogVisible:!1,dialogText:"",fullscreenLoading:!1,currItem:{stationGuid:""},currNavIndex:1,oldCurrNavIndex:1,filterText:"",isOrgFirst:!0,orgdata:[],defaultProps:{children:"children",label:"name"},isShowConfig:{isSurvey:!1,isVideo:!1,isTemperature:!1,isFreeze:!1,isFreezeAnalog:!1,isGraphPage:!1},currClickNavIndex:1}},mounted:function(){this.queryGroupsProjects()},methods:{setTreeStationName:function(e){if(e)if(Array.isArray(e))for(var t=0;t<e.length;t++){var i=e[t].stationGuid;if(i&&(e[t].stationName=this.stationNamesJson[i]),e[t].children&&e[t].children.length>0)for(var a=0;a<e[t].children.length;a++)this.setTreeStationName(e[t].children[a])}else if(e.stationGuid&&(e.stationName=this.stationNamesJson[e.stationGuid]),e.children&&e.children.length>0)for(t=0;t<e.children.length;t++)this.setTreeStationName(e.children[t])},getStationNames:function(e,t){var i=this;if(e){this.stationNamesJson={};var r={param:e};this.$axios({method:"get",headers:{},url:"/web/station/queryStationsByGuids",params:r}).then(function(e){var r=e.data;if(0==r.code){for(var o=0;o<r.info.length;o++){var n=r.info[o].guid,s=r.info[o].name;i.stationNamesJson[n]=s}for(var l=0;l<t.length;l++){var c=t[l].stationGuid;c&&(t[l].stationName=i.stationNamesJson[c])}i.orgdata=Object(a.a)(t),i.orgdata}else i.orgdata=Object(a.a)(t)}).catch(function(e){i.orgdata=Object(a.a)(t),console.error("queryStationsByGuids error",e)})}},getTipContent:function(e,t){var i=t.stationGuid,a=this.stationNamesJson[i];return this.stationNamesJson,"绑定的站点："+a},saveData:function(){switch(this.currNavIndex){case 4:this.$refs.temperature.saveTemperatureConfig();break;case 5:this.$refs.freeze.configSaveFreeze()}this.dialogVisible=!1},nosaveData:function(){this.currNavIndex=this.currClickNavIndex,this.dialogVisible=!1},cancelChangeNav:function(){this.dialogVisible=!1},queryGroupsProjects:function(){var e=this;this.$axios({method:"get",headers:{},url:"/web/project/queryGroupsProjects",data:{}}).then(function(t){var i=t.data;if(0==i.code){for(var r="",o=0;o<i.info.length;o++)i.info[o].stationGuid?(r.length>0&&(r+=","),r+=i.info[o].stationGuid,i.info[o].isToolTip=!0):i.info[o].isToolTip=!1,1==i.info[o].type?i.info[o].biaoqian="el-tree-city":(i.info[o].biaoqian="el-tree-project",i.info[o].id="project-"+i.info[o].id);r?e.getStationNames(r,i.info):e.orgdata=Object(a.a)(i.info)}else e.orgdata=[];e.$nextTick(function(){e.isOrgFirst?(e.$refs.orgTree.setCurrentKey(1),e.orgdata.length>0&&(e.currItem=e.orgdata[0]),e.isOrgFirst=!1):e.$refs.orgTree.setCurrentKey(e.currItem.id)})}).catch(function(t){e.$showMessage("error",t),e.orgdata=[]})},navClick:function(e){if(this.currClickNavIndex=e,2==this.currItem.type)switch(this.currNavIndex){case 4:this.$refs.temperature.isChange()?this.currNavIndex=e:(this.dialogVisible=!0,this.dialogText="是否保存【测温模板】的配置数据？");break;case 5:this.$refs.freeze.isChange()?this.currNavIndex=e:(this.dialogVisible=!0,this.dialogText="是否保存【冻结模板】的配置数据？");break;default:this.currNavIndex=e}else this.currNavIndex=e},getIsShowConfig:function(e){var t=this;this.isShowConfig={isSurvey:!1,isVideo:!1,isTemperature:!1,isFreeze:!1,isFreezeAnalog:!1,isGraphPage:!1};var i={projectId:e,type:"1"};this.$axios({method:"get",headers:{},url:"/web/project/queryProjectRight",params:i}).then(function(e){var i=e.data;0==i.code?i.info&&i.info.length>0&&(t.isShowConfig=JSON.parse(i.info[0].value),t.isShowConfig):t.$showMessage("error",i.msg)}).catch(function(e){t.$showMessage("error",e)})},handleNodeClick:function(e){if(this.currItem=e,this.currNavIndex=1,2==this.currItem.type){var t=this.currItem.id.split("-")[1];this.getIsShowConfig(t),e.stationGuid&&this.$store.commit("set_graphStationGuid",e.stationGuid)}else if(this.isShowConfig={isSurvey:!1,isVideo:!1,isTemperature:!1,isFreeze:!1,isFreezeAnalog:!1,isGraphPage:!1},e.stationGuid){var i=e.stationGuid;e.tipContent="绑定的站点："+this.stationNamesJson[i]}else e.tipContent=""},changeShowProject:function(e){this.isShowConfig=e},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)}},watch:{filterText:function(e){this.$refs.orgTree.filter(e)}}},me=(i("4463"),Object(c.a)(fe,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"project-config-info"},[i("div",{staticClass:"config-info-div"},[i("div",{staticClass:"left-div"},[i("div",{staticClass:"top-search"},[i("span",{staticClass:"el-icon-search"}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.filterText,expression:"filterText"}],attrs:{type:"text",placeholder:"搜索站点"},domProps:{value:e.filterText},on:{input:function(t){t.target.composing||(e.filterText=t.target.value)}}})]),i("div",{staticClass:"bottom-content tree-container"},[i("el-tree",{ref:"orgTree",staticClass:"tree",attrs:{data:e.orgdata,props:e.defaultProps,"node-key":"id","default-expanded-keys":[1],"highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,r=t.data;return i("span",{staticClass:"custom-tree-node"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:r.stationName,placement:"right-end",disabled:!r.isToolTip}},[i("span",[i("i",{class:r.biaoqian}),i("span",[e._v(" "+e._s(a.label)+" "),r.stationGuid?i("i",{staticClass:"green-point"}):e._e()])])])],1)}}])})],1)]),i("div",{staticClass:"right-div"},[i("div",{staticClass:"top-nav"},[1==e.currItem.type?i("div",{staticClass:"button hand-css button-active",staticStyle:{"margin-left":"30%"},on:{click:function(t){return e.navClick(1)}}},[e._v(" 配置总览 ")]):e._e(),2==e.currItem.type?i("div",{staticClass:"button hand-css",class:{"button-active":1==e.currNavIndex},on:{click:function(t){return e.navClick(1)}}},[e._v(" 站点关联 ")]):e._e(),2==e.currItem.type?i("div",{staticClass:"button"},[e._v("/")]):e._e(),2==e.currItem.type?i("div",{staticClass:"button hand-css",class:{"button-active":6==e.currNavIndex},on:{click:function(t){return e.navClick(6)}}},[e._v(" 模块显示配置 ")]):e._e(),e.isShowConfig.isSurvey?i("div",{staticClass:"button"},[e._v("/")]):e._e(),e.isShowConfig.isSurvey&&2==e.currItem.type?i("div",{staticClass:"button hand-css",class:{"button-active":2==e.currNavIndex},on:{click:function(t){return e.navClick(2)}}},[e._v(" 测斜配置 ")]):e._e(),e.isShowConfig.isVideo&&2==e.currItem.type?i("div",{staticClass:"button"},[e._v(" / ")]):e._e(),e.isShowConfig.isVideo?i("div",{staticClass:"button hand-css",class:{"button-active":3==e.currNavIndex},on:{click:function(t){return e.navClick(3)}}},[e._v(" 视频配置 ")]):e._e(),e.isShowConfig.isTemperature&&2==e.currItem.type?i("div",{staticClass:"button"},[e._v(" / ")]):e._e(),e.isShowConfig.isTemperature?i("div",{staticClass:"button hand-css",class:{"button-active":4==e.currNavIndex},on:{click:function(t){return e.navClick(4)}}},[e._v(" 测温配置 ")]):e._e(),e.isShowConfig.isFreeze&&2==e.currItem.type?i("div",{staticClass:"button"},[e._v(" / ")]):e._e(),e.isShowConfig.isFreeze?i("div",{staticClass:"button hand-css",class:{"button-active":5==e.currNavIndex},on:{click:function(t){return e.navClick(5)}}},[e._v(" 站内设备 ")]):e._e(),e.isShowConfig.isGraphPage&&2==e.currItem.type?i("div",{staticClass:"button"},[e._v(" / ")]):e._e(),e.isShowConfig.isGraphPage?i("div",{staticClass:"button hand-css",class:{"button-active":7==e.currNavIndex},on:{click:function(t){return e.navClick(7)}}},[e._v(" 组态画面 ")]):e._e()]),1==e.currItem.type?i("div",{staticStyle:{flex:"1",height:"0"}},[i("projectConfigOverview",{attrs:{currItem:e.currItem},on:{"update:currItem":function(t){e.currItem=t},"update:curr-item":function(t){e.currItem=t}}})],1):e._e(),1==e.currNavIndex&&2==e.currItem.type?i("div",{staticStyle:{flex:"1",height:"0"}},[i("stationProject",{attrs:{currItem:e.currItem},on:{"update:currItem":function(t){e.currItem=t},"update:curr-item":function(t){e.currItem=t}}})],1):e._e(),2==e.currNavIndex&&e.isShowConfig.isSurvey&&2==e.currItem.type?i("div",{staticStyle:{flex:"1",height:"0"}},[i("surveyProject",{attrs:{currItem:e.currItem},on:{"update:currItem":function(t){e.currItem=t},"update:curr-item":function(t){e.currItem=t}}})],1):e._e(),3==e.currNavIndex&&e.isShowConfig.isVideo&&2==e.currItem.type?i("div",{staticStyle:{flex:"1",height:"0"}},[i("videoProject",{attrs:{currItem:e.currItem},on:{"update:currItem":function(t){e.currItem=t},"update:curr-item":function(t){e.currItem=t}}})],1):e._e(),4==e.currNavIndex&&e.isShowConfig.isTemperature&&2==e.currItem.type?i("div",{staticStyle:{flex:"1",height:"0"}},[i("temperatureTemplate",{ref:"temperature",attrs:{currItem:e.currItem},on:{"update:currItem":function(t){e.currItem=t},"update:curr-item":function(t){e.currItem=t}}})],1):e._e(),5==e.currNavIndex&&e.isShowConfig.isFreeze&&2==e.currItem.type?i("div",{staticStyle:{flex:"1",height:"0"}},[i("freezeAllProject",{ref:"freeze",attrs:{currItem:e.currItem},on:{"update:currItem":function(t){e.currItem=t},"update:curr-item":function(t){e.currItem=t}}})],1):e._e(),6==e.currNavIndex&&2==e.currItem.type?i("div",{staticStyle:{flex:"1",height:"0"}},[i("showProject",{ref:"isShow",attrs:{currItem:e.currItem},on:{"update:currItem":function(t){e.currItem=t},"update:curr-item":function(t){e.currItem=t},changeShowProject:e.changeShowProject}})],1):e._e(),7==e.currNavIndex&&e.isShowConfig.isGraphPage&&2==e.currItem.type?i("div",{staticStyle:{flex:"1",height:"0"}},[i("pageConfiguration",{attrs:{currItem:e.currItem},on:{"update:currItem":function(t){e.currItem=t},"update:curr-item":function(t){e.currItem=t}}})],1):e._e()])]),i("el-dialog",{staticClass:"small-el-dialog",attrs:{title:"提示",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v(e._s(e.dialogText))]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"success"},on:{click:e.saveData}},[e._v("是")]),i("el-button",{attrs:{type:"warning"},on:{click:e.nosaveData}},[e._v("否")]),i("el-button",{attrs:{type:"primary"},on:{click:e.cancelChangeNav}},[e._v("取消")])],1)])],1)},[],!1,null,null,null));t.default=me.exports},4321:function(e,t,i){"use strict";i("7374")},4386:function(e,t,i){},"43e6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAaCAYAAACkVDyJAAACHUlEQVRIib3Wu2tUURDH8c/mZaLRGI1PfDRWikjARlBsLERRQRv/AbESwUoERQtrH5WFfURBUKytxMpGsYlBQfFVRCUSX3nssbhzk2Vz1riBzcBlds/vzHzvmXPn3FtJKQ3iMrZqnf3CVTyqpJTGsKKFsFo72baIMDjYtogw6O3IDD7HO2zA7oz+Am/Rj70Z/RWGMYA9ddqUNNeOpZSklPZntJRSOhH61gb6udB3ZLShXEkHwq9tUJZS39hAXxl+fU5c7D3MAsfDf28FsHxopvED3biE04rSTeA32rGsydzpX8Aps/24Pa7SuvDlP4EpbpyiQtX4PVPJEljB/ZiwDD2KlY3H2IF5QNW4qW7si7idGFVUZ1UwZoBduIcRvMSfmLgLm3FkHuAf9EWew3Flrbbxh8Kfwm0cx91MzGQNpLQK3gSwO/JWY04Fm0RZcydNe50vrdyPnki6vGasExfxJBPThWdY1wg4FX66bnw6ElzB+YBMxyq6cEHxGrqu2J5tuBFaeRhkgY2sM/ySzHgVg/H/aQ3wUH2SZoDX8FXRPksVe/lN0atnzB51v8JP1idoFjiMD3iMnzF21NwV/9OaAd4KfxY3Ff32oBkYCzu8J8LXP1QLBpZ78DOj1erjDfSyP7PxOWCfoln7GyRcEfrqBnpv+Gx8JaVUf6p/wkfFJ0buJfsZ77FG/tNyFK8jfkuddicHbKU97MDYIgJH/gKEdNg38XbnoQAAAABJRU5ErkJggg=="},4463:function(e,t,i){"use strict";i("2565")},"56b7":function(e,t,i){"use strict";i("dd47")},"600d":function(e,t,i){"use strict";i.r(t);i("1d43"),i("5b12"),i("9b5f");var a={data:function(){var e=this,t=function(e,t,i){if(!t)return i(new Error("用户名不能为空"));i()};return{tableData:[],currentPage:1,pageSize:10,tableHeight:0,title:"",dialogVisible:!1,tableLoading:!1,addBtnLoading:!1,editClickLoading:!1,ruleForm:{password:"",checkPass:"",userName:"",userRole:2},ruleForm2:{oidPassword:"",password:"",checkPass:"",userName:"",userRole:2},rules:{password:[{validator:function(t,i,a){""===i?a(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),a())},trigger:"blur",required:!0}],checkPass:[{validator:function(t,i,a){""===i?a(new Error("请再次输入密码")):i!==e.ruleForm.password?a(new Error("两次输入密码不一致")):a()},trigger:"blur",required:!0}],userName:[{validator:t,trigger:"blur",required:!0}]},rules2:{password:[{validator:function(t,i,a){""===i?a(new Error("请输入密码")):(""!==e.ruleForm2.checkPass&&e.$refs.ruleForm2.validateField("checkPass"),a())},trigger:"blur",required:!0}],checkPass:[{validator:function(t,i,a){""===i?a(new Error("请再次输入密码")):i!==e.ruleForm2.password?a(new Error("两次输入密码不一致")):a()},trigger:"blur",required:!0}],userName:[{validator:t,trigger:"blur",required:!0}]}}},created:function(){this.getList()},mounted:function(){this.getTableHeight()},methods:{editBtn:function(e){this.title="编辑账户",this.ruleForm2={oidPassword:"",password:"",checkPass:"",userName:e.name,userRole:e.role,userGuid:e.userGuid},this.dialogVisible=!0},resetPassword:function(e){this.$showMessage("error",error)},handleDelete:function(){},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},getTableHeight:function(){this.$nextTick(function(){this.tableHeight=window.getComputedStyle(this.$refs.table).height.split("px")[0]-0})},getList:function(){var e=this;this.tableLoading=!0,this.$axios({method:"get",headers:{},url:"/web/user/queryRoleUser"}).then(function(t){var i=t.data;0==i.code?(e.tableData=i.info,e.pageSize=i.info.length):e.$showMessage("error",i.msg),e.tableLoading=!1}).catch(function(t){e.$showMessage("error",t),e.tableLoading=!1})},dialogClose:function(){"新增账户"==this.title?this.$refs.ruleForm.resetFields():"编辑账户"==this.title&&this.$refs.ruleForm2.resetFields()},addBtn:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;e.addBtnLoading=!0,e.$axios({method:"post",headers:{},url:"/web/user/addRoleUser",data:{userName:e.ruleForm.userName,userPasswd:e.$md5(e.ruleForm.password+"").toUpperCase(),userConPasswd:e.$md5(e.ruleForm.checkPass+"").toUpperCase(),organizeId:-1,realName:"",role:e.ruleForm.userRole,phone:"",flag:0}}).then(function(t){0==t.data.code?(e.$showMessage("success","用户添加成功"),e.getList(),e.dialogVisible=!1):e.$showMessage("error",t.data.msg),e.addBtnLoading=!1}).catch(function(t){e.$showMessage("error",t),e.addBtnLoading=!1})})},editClick:function(){var e=this;this.$refs.ruleForm2.validate(function(t){if(!t)return!1;e.editClickLoading=!0,e.$axios({method:"post",headers:{},url:"/web/user/updateRoleUser",data:[{userGuid:e.ruleForm2.userGuid,userPasswd:e.$md5(e.ruleForm2.password+"").toUpperCase(),userConPasswd:e.$md5(e.ruleForm2.checkPass+"").toUpperCase(),organizeId:-1,realName:"",role:e.ruleForm2.userRole,phone:"",flag:0}]}).then(function(t){0==t.data.code?(e.$showMessage("success","用户更新成功"),e.getList(),e.dialogVisible=!1):e.$showMessage("error",t.data.msg),e.editClickLoading=!1}).catch(function(t){e.$showMessage("error",t),e.editClickLoading=!1})})},getRole:function(e){switch(e){case 2:return"操作管理员";case 3:return"配置管理员"}},formatDate:i("3de1").b,onConfirm:function(e,t){var i=this;e.$index,this.currentPage,this.pageSize;switch(t){case 3:this.$axios({method:"get",headers:{},url:"/web/user/resetUserPasswd",params:{userGuid:e.row.userGuid}}).then(function(e){0==e.data.code?i.$showMessage("success","密码重置成功"):i.$showMessage("error",e.data.msg)}).catch(function(e){i.$showMessage("error",e)});break;case 4:this.$axios({method:"get",headers:{},url:"/web/user/deleteUser",params:{userGuids:e.row.userGuid}}).then(function(e){0==e.data.code?(i.$showMessage("success","用户已被删除"),i.getList()):i.$showMessage("error",e.data.msg)}).catch(function(e){i.$showMessage("error",e)})}}}},r=(i("8f9d"),i("5d22")),o=Object(r.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"roleAccount"},[i("div",{staticClass:"table"},[i("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0,e.title="新增账户"}}},[e._v("+ 新增账户")]),i("div",{ref:"table",staticClass:"tableDiv"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),stripe:"",height:e.tableHeight,"row-style":{height:"45px"},"cell-style":{padding:"0px"}}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),i("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.currentPage-1)*e.pageSize+1))]}}])}),i("el-table-column",{attrs:{label:"账户名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),i("el-table-column",{attrs:{label:"角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.getRole(t.row.role)))]}}])}),i("el-table-column",{attrs:{label:"注册时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.formatDate(1e3*t.row.time)))]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center",width:"480"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.editBtn(t.row)}}},[e._v("编辑")]),[i("el-popconfirm",{attrs:{title:"确定重置密码吗？",iconColor:"#67C23A"},on:{confirm:function(i){return e.onConfirm(t,3)},cancel:function(i){return e.onCancel(t,3)},onConfirm:function(i){return e.onConfirm(t,3)},onCancel:function(i){return e.onCancel(t,3)}}},[i("el-button",{staticStyle:{margin:"0 0 0 10px"},attrs:{slot:"reference",size:"mini",type:"success",icon:"el-icon-zhongzhimima"},slot:"reference"},[e._v("重置密码")])],1)],[i("el-popconfirm",{attrs:{title:"确定删除该用户吗？",iconColor:"#F56C6C",icon:"el-icon-info"},on:{onConfirm:function(i){return e.onConfirm(t,4)},onCancel:function(i){return e.onCancel(t,4)}}},[i("el-button",{staticStyle:{margin:"0 0 0 10px"},attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete-solid"},slot:"reference"},[e._v("删除")])],1)]]}}])})],1)],1),i("div",{staticClass:"tableBottom"},[i("el-pagination",{staticClass:"page",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),i("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"5.8rem","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClose}},["新增账户"==e.title?[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{width:"390px","font-size":"18px"},attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"1.2rem","label-position":"right"}},[i("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[i("el-input",{model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),i("el-form-item",{attrs:{label:"密 码：",prop:"password"}},[i("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),i("el-form-item",{attrs:{label:"确认密码：",prop:"checkPass"}},[i("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),i("el-form-item",{attrs:{label:"","label-width":"0",prop:"userRole"}},[i("el-radio-group",{model:{value:e.ruleForm.userRole,callback:function(t){e.$set(e.ruleForm,"userRole",t)},expression:"ruleForm.userRole"}},[i("el-radio",{attrs:{label:2}},[e._v("操作管理员")]),i("el-radio",{attrs:{label:3}},[e._v("配置管理员")])],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.addBtnLoading},on:{click:e.addBtn}},[e._v("确定新增")])],1)]:"编辑账户"==e.title?[i("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm2",staticStyle:{width:"390px","font-size":"18px"},attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"1.2rem","label-position":"right"}},[i("el-form-item",{attrs:{label:"用户名：",prop:"userName"}},[i("el-input",{attrs:{disabled:""},model:{value:e.ruleForm2.userName,callback:function(t){e.$set(e.ruleForm2,"userName",t)},expression:"ruleForm2.userName"}})],1),i("el-form-item",{attrs:{label:"新密码：",prop:"password"}},[i("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm2.password,callback:function(t){e.$set(e.ruleForm2,"password",t)},expression:"ruleForm2.password"}})],1),i("el-form-item",{attrs:{label:"确认密码：",prop:"checkPass"}},[i("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.editClickLoading},on:{click:e.editClick}},[e._v("确定修改")])],1)]:e._e()],2)],1)},[],!1,null,null,null);t.default=o.exports},6167:function(e,t,i){"use strict";i("e1b4")},"6ad6":function(e,t,i){},"6e0c":function(e,t,i){"use strict";i("13cb")},7374:function(e,t,i){},"73a7":function(e,t,i){"use strict";i("221e")},7692:function(e,t,i){"use strict";i("81ed")},7882:function(e,t,i){"use strict";var a=i("f8d3"),r=i("5156"),o=i("a187");e.exports=function(e){for(var t=a(this),i=o(t.length),n=arguments.length,s=r(n>1?arguments[1]:void 0,i),l=n>2?arguments[2]:void 0,c=void 0===l?i:r(l,i);c>s;)t[s++]=e;return t}},"7b81":function(e,t,i){"use strict";i("d869")},"81ed":function(e,t,i){},"86f3":function(e,t,i){},"8c2f":function(e,t,i){var a=i("1f04"),r=i("7882"),o=i("05e7");a({target:"Array",proto:!0},{fill:r}),o("fill")},"8f9d":function(e,t,i){"use strict";i("a154")},"9bb5":function(e,t,i){"use strict";i("bc8a")},"9cf9":function(e,t,i){"use strict";i.r(t);i("bf2f"),i("1d43");var a=i("a293"),r=(i("5d08"),i("e3b5"),i("b3b0"),i("a5f8"),i("3bae"),i("3337"),{name:"StationDevConfig",data:function(){return{tableHeight:"100%",tableData:[],pageSize:10,currentPage:1,tableLoading:!1,searchValue:"",addBtnsLoading:!1,title:"",dialogVisible:!1,dialogWidth:"5.8rem",virDevsData:[],currentDev:{},currentRow:{},ruleForm3:[{devGuid:"",varName:"",varUnit:"",aliasVarName:""}],devForm:[{devName:""}],ids:[],batchDeleteFlag:!1}},props:{stationGuid:String},mounted:function(){},watch:{stationGuid:{handler:function(e){""!=e&&(this.tableData=[],this.queryVirVars("所有"))},immediate:!0}},computed:{tableVarData:function(){var e=this;return this.tableData.filter(function(t){return t.varName.toLowerCase().includes(e.searchValue.toLowerCase())}).slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},methods:{closeDevConfig:function(){this.searchValue="",this.$emit("back")},queryVirVars:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.currentDev={devGuid:t,devName:i,aliasDevName:a},this.tableLoading=!0;var r="/web/virdev/queryVirVars",o={devGuid:t};"所有"==t&&(r="/web/station/queryVirDevsVirVars",o={stationGuid:this.stationGuid}),this.$axios({method:"get",headers:{},url:r,params:o}).then(function(i){var a=i.data;if(e.tableLoading=!1,0==a.code){var r=a.info;"所有"==t?(e.tableData=[],e.virDevsData=r.virDevs,r.virDevs.forEach(function(t){t.virVars.forEach(function(i){i.showName=t.aliasDevName?t.aliasDevName:t.devName,e.tableData.push(i)})})):(e.tableData=r.map(function(t){return t.showName=e.currentDev.aliasDevName?e.currentDev.aliasDevName:e.currentDev.devName,t}),e.currentPage=1)}else e.$showMessage("error",a.msg)}).catch(function(t){e.tableLoading=!1,e.$showMessage("error",t)})},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1===t.state?"warning-row":""},handleSelectionChange:function(e){var t=[];for(var i in e)t.push(e[i].varGuid);this.ids=t},batchDelete:function(e){if("批量"!=e)return this.currentRow=e,this.title="删除",this.dialogWidth="5.8rem",this.dialogVisible=!0,void(this.batchDeleteFlag=!1);0!=this.ids.length?(this.title="删除",this.dialogWidth="5.8rem",this.dialogVisible=!0,this.batchDeleteFlag=!0):this.$showMessage("warning","请选择要删除的行")},addVarList:function(){this.ruleForm3.push({devGuid:"",varName:"",varUnit:"",aliasVarName:""})},delVarList:function(e){this.ruleForm3.splice(e,1)},addDevList:function(){this.devForm.push({devName:""})},delDevList:function(e){this.devForm.splice(e,1)},editConfig:function(e){this.dialogVisible=!0,this.currentRow=e,this.dialogWidth="13.16rem",this.title="编辑"},deleteAioVar:function(e){var t=this,i={stationGuid:this.stationGuid,varGuids:[]};e?i.varGuids=this.ids:i.varGuids.push(this.currentRow.varGuid),this.ids,this.$axios({method:"post",headers:{},url:"/web/varnew/deleteAioVars",data:i}).then(function(e){var i=e.data;0==i.code?(t.queryVirVars(t.currentDev.devGuid,t.currentDev.devName,t.currentDev.aliasDevName),t.dialogVisible=!1,t.$showMessage("success",i.info)):t.$showMessage("error",i.info)}).catch(function(e){t.$showMessage("error",e)})},devConfigBtn:function(e){},paramsTableHandleCurrentChange:function(e){this.currentPage=e},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},dialogOpen:function(){"批量添加"==this.title?this.ruleForm3=[{devGuid:"",varName:"",varUnit:"",aliasVarName:""}]:"编辑"==this.title&&(this.ruleForm3=[{devGuid:this.currentRow.devGuid?this.currentRow.devGuid:this.currentDev.devGuid,varName:this.currentRow.varName?this.currentRow.varName:"",varUnit:this.currentRow.varUnit?this.currentRow.varUnit:"",aliasVarName:this.currentRow.aliasVarName?this.currentRow.aliasVarName:""}]),"添加设备"==this.title?this.devForm=[{devName:""}]:"编辑设备"==this.title&&(this.devForm=[{devName:this.currentDev.devName,aliasDevName:this.currentDev.aliasDevName}]),this.$nextTick(function(){})},dialogClose:function(){},addBtn:function(){var e=this;this.addBtnsLoading=!0;var t,i="",r={stationGuid:this.stationGuid,vars:[]},o=Object(a.a)(this.ruleForm3);try{for(o.s();!(t=o.n()).done;){var n=t.value;if(""==n.devGuid||""==n.varName||""==n.varUnit)return this.$showMessage("error","请填写完整信息"),void(this.addBtnsLoading=!1);r.vars.push(n)}}catch(e){o.e(e)}finally{o.f()}"批量添加"==this.title?i="/web/varnew/batchAddAioVar":"编辑"==this.title&&(i="/web/varnew/updateAioVar",r={stationGuid:this.stationGuid,varGuid:this.currentRow.varGuid,newVarName:this.ruleForm3[0].varName,varUnit:this.ruleForm3[0].varUnit,newAliasVarName:this.ruleForm3[0].aliasVarName}),this.$axios({method:"post",headers:{},url:i,data:r}).then(function(t){0==t.data.code?(e.$showMessage("success",t.data.info),e.queryVirVars(e.currentDev.devGuid,e.currentDev.devName,e.currentDev.aliasDevName),e.dialogVisible=!1):e.$showMessage("error",t.data.info),e.addBtnsLoading=!1}).catch(function(t){e.$showMessage("error",t),e.addBtnsLoading=!1})},addDevs:function(){var e=this;this.addBtnsLoading=!0;var t,i="",r=[],o=Object(a.a)(this.devForm);try{for(o.s();!(t=o.n()).done;){var n=t.value;if("添加设备"==this.title){if(""==n.varName)return this.$showMessage("error","请填写完整信息"),void(this.addBtnsLoading=!1)}else if("编辑设备"==this.title&&(""==n.varName||""==n.aliasDevName))return this.$showMessage("error","请填写完整信息"),void(this.addBtnsLoading=!1);n.stationGuid=this.stationGuid,n.devType=1,r.push(n)}}catch(e){o.e(e)}finally{o.f()}"添加设备"==this.title?i="/web/dev/addDevs":"编辑设备"==this.title&&(i="/web/dev/updateDev",r={stationGuid:this.stationGuid,devName:this.devForm[0].devName,aliasDevName:this.devForm[0].aliasDevName,devGuid:this.currentDev.devGuid}),this.$axios({method:"post",headers:{},url:i,data:r}).then(function(t){0==t.data.code?(e.$showMessage("success",t.data.info),e.queryVirVars(e.currentDev.devGuid,e.currentDev.devName,e.currentDev.aliasDevName),e.dialogVisible=!1):e.$showMessage("error",t.data.info),e.addBtnsLoading=!1}).catch(function(t){e.$showMessage("error",t),e.addBtnsLoading=!1})},deleteDev:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.currentDev={devGuid:e,devName:t,aliasDevName:i},this.title="删除设备",this.dialogWidth="5.8rem",this.dialogVisible=!0,this.batchDeleteFlag="所有"==e},deleteDevBtn:function(e){var t=this,i={stationGuid:this.stationGuid,devGuids:[]};e?i.devGuids=this.virDevsData.map(function(e){return e.devGuid}):i.devGuids[0]=this.currentDev.devGuid,this.addBtnsLoading=!0,this.$axios({method:"post",headers:{},url:"/web/dev/deleteDevs",data:i}).then(function(e){var i=e.data;t.addBtnsLoading=!1,0==i.code?(t.queryVirVars(t.currentDev.devGuid,t.currentDev.devName,t.currentDev.aliasDevName),t.dialogVisible=!1,t.$showMessage("success",i.info)):t.$showMessage("error",i.info)}).catch(function(e){t.addBtnsLoading=!1,t.$showMessage("error",e)})}}}),o=(i("05fa"),i("5d22")),n=Object(o.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"StationDevConfig"},[i("div",{staticClass:"left"},[i("div",{staticClass:"leftConent"},[i("div",{staticClass:"leftTop"},[i("i",{staticClass:"el-icon-arrow-left",on:{click:function(t){return e.closeDevConfig()}}}),i("span",[e._v("设备列表")])]),i("ul",{staticClass:"leftBottom"},[0!=e.virDevsData.length?i("li",[i("span",{on:{click:function(t){return e.queryVirVars("所有")}}},[e._v("所有")]),i("i",{staticClass:"el-icon-close",on:{click:function(t){return e.deleteDev("所有")}}})]):e._e(),e._l(e.virDevsData,function(t){return i("li",{key:t.devGuid},[i("span",{on:{dblclick:function(t){e.title="编辑设备",e.dialogWidth="5.8rem",e.dialogVisible=!0},click:function(i){return e.queryVirVars(t.devGuid,t.devName,t.aliasDevName)}}},[e._v(e._s(t.aliasDevName?t.aliasDevName:t.devName))]),i("i",{staticClass:"el-icon-close",on:{click:function(i){return e.deleteDev(t.devGuid,t.devName,t.aliasDevName)}}})])}),i("li",[i("i",{staticClass:"el-icon-plus",on:{click:function(t){e.title="添加设备",e.dialogWidth="5.8rem",e.dialogVisible=!0}}})])],2)])]),i("div",{staticClass:"right"},[i("div",{staticClass:"table"},[i("div",{staticClass:"tableTop"},[i("div",[i("el-button",{staticClass:"gtr4 addBtn",attrs:{type:"primary"},on:{click:function(t){e.title="批量添加",e.dialogWidth="13.16rem",e.dialogVisible=!0}}},[e._v("+ 批量添加")]),i("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:function(t){return e.batchDelete("批量")}}},[e._v("- 批量删除")])],1),i("el-input",{staticClass:"searchInput",attrs:{placeholder:"变量名搜索"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),i("div",{ref:"table",staticClass:"tableDiv"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{"row-class-name":e.tableRowClassName,data:e.tableVarData,stripe:"",height:e.tableHeight,"row-style":{height:"45px"},"cell-style":{padding:"0px"}},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"55"}}),i("el-table-column",{attrs:{label:"序号",width:"50",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+(e.currentPage-1)*e.pageSize+1))]}}])}),i("el-table-column",{attrs:{label:"设备",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.showName?t.row.showName:e.currentDev.devName))]}}])}),i("el-table-column",{attrs:{label:"变量名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.varName))]}}])}),i("el-table-column",{attrs:{label:"变量单位",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.varUnit))]}}])}),i("el-table-column",{attrs:{label:"变量别名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.aliasVarName))]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center","min-width":"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return e.editConfig(t.row)}}},[e._v("编辑")]),i("el-button",{staticStyle:{margin:"0 10px 0 10px"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete-solid"},on:{click:function(i){return e.batchDelete(t.row)}}},[e._v("删除")])]}}])})],1)],1),i("div",{staticClass:"tableBottom"},[i("el-pagination",{staticClass:"page",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next",total:e.tableData.filter(function(t){return t.varName.toLowerCase().includes(e.searchValue.toLowerCase())}).length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])]),i("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:e.dialogWidth,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.dialogClose,open:e.dialogOpen}},["批量添加"==e.title?[i("div",{staticClass:"ruleForm3"},e._l(e.ruleForm3,function(t,a){return i("div",{key:a,staticClass:"ruleForm3Li"},[i("div",[e._v(" 所属设备： "),i("el-select",{staticStyle:{width:"1.65rem",height:"0.3rem"},attrs:{placeholder:"选择所属设备"},model:{value:t.devGuid,callback:function(i){e.$set(t,"devGuid",i)},expression:"item.devGuid"}},e._l(e.virDevsData,function(e){return i("el-option",{key:e.devGuid,attrs:{value:e.devGuid,label:e.aliasDevName?e.aliasDevName:e.devName}})}),1)],1),i("div",[e._v(" 变量名： "),i("el-input",{staticStyle:{width:"1.65rem",height:"0.3rem"},model:{value:t.varName,callback:function(i){e.$set(t,"varName",i)},expression:"item.varName"}})],1),i("div",[e._v(" 变量单位： "),i("el-input",{staticStyle:{width:"1.65rem",height:"0.3rem"},model:{value:t.varUnit,callback:function(i){e.$set(t,"varUnit",i)},expression:"item.varUnit"}})],1),i("div",[e._v(" 变量别名： "),i("el-input",{staticStyle:{width:"1.65rem",height:"0.3rem"},model:{value:t.aliasVarName,callback:function(i){e.$set(t,"aliasVarName",i)},expression:"item.aliasVarName"}})],1),i("div",[i("i",{staticClass:"el-icon-close",on:{click:function(t){return e.delVarList(a)}}})])])}),0),i("div",{staticClass:"addVarList",on:{click:e.addVarList}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"margin-right":"10px"}}),e._v("新增 ")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.addBtnsLoading},on:{click:e.addBtn}},[e._v("批量添加")])],1)]:"编辑"==e.title?[i("div",{staticClass:"ruleForm3"},e._l(e.ruleForm3,function(t,a){return i("div",{key:a,staticClass:"ruleForm3Li"},[i("div",[e._v(" 所属设备： "),i("el-select",{staticStyle:{width:"1.65rem",height:"0.3rem"},attrs:{disabled:"",placeholder:"选择所属设备"},model:{value:t.devGuid,callback:function(i){e.$set(t,"devGuid",i)},expression:"item.devGuid"}},e._l(e.virDevsData,function(e){return i("el-option",{key:e.devGuid,attrs:{value:e.devGuid,label:e.aliasDevName?e.aliasDevName:e.devName}})}),1)],1),i("div",[e._v(" 变量名： "),i("el-input",{staticStyle:{width:"1.65rem",height:"0.3rem"},model:{value:t.varName,callback:function(i){e.$set(t,"varName",i)},expression:"item.varName"}})],1),i("div",[e._v(" 变量单位： "),i("el-input",{staticStyle:{width:"1.65rem",height:"0.3rem"},model:{value:t.varUnit,callback:function(i){e.$set(t,"varUnit",i)},expression:"item.varUnit"}})],1),i("div",[e._v(" 变量别名： "),i("el-input",{staticStyle:{width:"1.65rem",height:"0.3rem"},model:{value:t.aliasVarName,callback:function(i){e.$set(t,"aliasVarName",i)},expression:"item.aliasVarName"}})],1)])}),0),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.addBtnsLoading},on:{click:e.addBtn}},[e._v("修改")])],1)]:"删除"==e.title?[i("h2",[e._v("确定要删除吗？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.addBtnsLoading},on:{click:function(t){return e.deleteAioVar(e.batchDeleteFlag)}}},[e._v("确定")])],1)]:"删除设备"==e.title?[i("h2",[e._v("确定要删除吗？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.addBtnsLoading},on:{click:function(t){return e.deleteDevBtn(e.batchDeleteFlag)}}},[e._v("确定")])],1)]:"添加设备"==e.title?[i("div",{staticClass:"ruleForm3"},e._l(e.devForm,function(t,a){return i("div",{key:a,staticClass:"ruleForm3Li"},[e.devForm.length<=1?[i("div",[e._v(" 设备名称： "),i("el-input",{staticStyle:{width:"1.65rem",height:"0.3rem"},model:{value:t.devName,callback:function(i){e.$set(t,"devName",i)},expression:"item.devName"}})],1)]:[i("div",[e._v(" 设备名称： "),i("el-input",{staticStyle:{width:"1.65rem",height:"0.3rem"},model:{value:t.devName,callback:function(i){e.$set(t,"devName",i)},expression:"item.devName"}})],1),i("div",[i("i",{staticClass:"el-icon-close",on:{click:function(t){return e.delDevList(a)}}})])]],2)}),0),i("div",{staticClass:"addVarList",on:{click:e.addDevList}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"margin-right":"10px"}}),e._v("新增 ")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.addBtnsLoading},on:{click:e.addDevs}},[e._v("确定")])],1)]:"编辑设备"==e.title?[i("div",{staticClass:"ruleForm3"},e._l(e.devForm,function(t,a){return i("div",{key:a,staticClass:"ruleForm3Li"},[i("div",[e._v(" 设备名称： "),i("el-input",{staticStyle:{width:"1.65rem",height:"0.3rem"},model:{value:t.devName,callback:function(i){e.$set(t,"devName",i)},expression:"item.devName"}})],1),i("div",[e._v(" 设备别名： "),i("el-input",{staticStyle:{width:"1.65rem",height:"0.3rem"},model:{value:t.aliasDevName,callback:function(i){e.$set(t,"aliasDevName",i)},expression:"item.aliasDevName"}})],1)])}),0),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticClass:"diglogBtn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:e.addBtnsLoading},on:{click:e.addDevs}},[e._v("确定")])],1)]:e._e()],2)],1)},[],!1,null,null,null).exports,s={data:function(){return{devConfigShow:!1,tableHeight:"100%",tableData:[],tableDataForFliter:[],pageSize:10,currentPage:1,tableLoading:!1,searchValue:"",addBtnLoading:!1,title:"",dialogVisible:!1,dialogWidth:"5.8rem",currentRow:{name:"",dataSource:""},ruleForm:{stationName:"",dataSource:""},rules:{stationName:[{message:"请填写站点名称",trigger:["blur","change"],required:!0}],dataSource:[{required:!0,message:"请选择数据来源",trigger:"change"}]},editDisabled:!1,stationGuid:""}},props:{currItem:Object},components:{StationDevConfig:n},mounted:function(){this.queryAllStation()},methods:{queryAllStation:function(){var e=this;this.$axios({method:"get",headers:{},url:"/web/station/queryAllStation",data:{}}).then(function(t){var i=t.data;0==i.code?(e.tableData=i.info,e.currentPage=1):e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t)})},tableRowClassName:function(e){var t=e.row;e.rowIndex;return 1===t.state?"warning-row":""},editBtn:function(e){this.dialogVisible=!0,this.currentRow=e,this.dialogWidth="5.8rem",this.title="编辑站点",this.editDisabled=!0},deleteStation:function(e,t){var i=this;this.$confirm("提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$axios({method:"get",headers:{},url:"/web/station/deleteStation",params:{stationGuid:t.guid}}).then(function(e){var a=e.data;0==a.code?(i.tableData.splice(i.tableData.indexOf(t),1),i.$showMessage("success",e.data.info)):i.$showMessage("error",a.msg)}).catch(function(e){i.$showMessage("error",e)})}).catch(function(){})},devConfigBtn:function(e){this.stationGuid=e.guid,this.devConfigShow=!0},paramsTableHandleCurrentChange:function(e){this.currentPage=e},handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},dialogOpen:function(){var e=this;this.currentRow,"添加站点"==this.title?this.ruleForm={stationName:"",dataSource:""}:"编辑站点"==this.title&&(this.ruleForm={stationName:this.currentRow.name?this.currentRow.name:"",dataSource:this.currentRow.dataSource?this.currentRow.dataSource:""}),this.$nextTick(function(){e.$refs.ruleForm.clearValidate()})},dialogClose:function(){},addBtn:function(){var e=this,t="",i={};"添加站点"==this.title?(t="/web/station/addStation",i={stationName:this.ruleForm.stationName,dataSource:this.ruleForm.dataSource}):"编辑站点"==this.title&&(t="/web/station/updateStation",i={newName:this.ruleForm.stationName,stationGuid:this.currentRow.guid}),this.$refs.ruleForm.validate(function(a){if(!a)return!1;e.addBtnLoading=!0,e.$axios({method:"post",headers:{},url:t,data:i}).then(function(t){0==t.data.code?(e.$showMessage("success",t.data.info),e.queryAllStation(),e.dialogVisible=!1):e.$showMessage("error",t.data.info),e.addBtnLoading=!1}).catch(function(t){e.$showMessage("error",t),e.addBtnLoading=!1})})},closeDevConfig:function(){this.devConfigShow=!1}}},l=(i("e1eb"),Object(o.a)(s,function(){var e=this,t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"StationConfig"},[a("StationDevConfig",{directives:[{name:"show",rawName:"v-show",value:t.devConfigShow,expression:"devConfigShow"}],attrs:{stationGuid:t.stationGuid},on:{back:t.closeDevConfig}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.devConfigShow,expression:"!devConfigShow"}],staticClass:"table"},[a("div",{staticClass:"tableTop"},[a("el-button",{staticClass:"gtr4 addBtn",attrs:{type:"primary"},on:{click:function(e){t.title="添加站点",t.dialogWidth="5.6rem",t.dialogVisible=!0,t.editDisabled=!1}}},[t._v("+ 添加站点")]),a("el-input",{staticClass:"searchInput",attrs:{placeholder:"请输入搜索内容"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),a("div",{ref:"deviceTable",staticClass:"tableDiv"},[a("el-table",{attrs:{data:t.tableData.filter(function(e){return e.name.toLowerCase().includes(t.searchValue.toLowerCase())}).slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),"default-sort":{prop:"name",order:"descending"},height:t.tableHeight,"row-class-name":"“tableRowClassName”",stripe:""}},[a("el-table-column",{attrs:{label:"序号",width:"50",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+(t.currentPage-1)*t.pageSize+1))]}}])}),a("el-table-column",{attrs:{label:"站点guid",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.guid))]}}])}),a("el-table-column",{attrs:{label:"站点名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.name))]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{margin:"0 0 0 10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return t.editBtn(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete-solid"},on:{click:function(i){return t.deleteStation(e.$index,e.row)}}},[t._v("删除站点配置")]),a("el-button",{staticStyle:{margin:"0 0 0 10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(i){return t.devConfigBtn(e.row)}}},[t._v("设备配置")])]}}])})],1)],1),a("div",{staticClass:"tableBottom"},[a("el-pagination",{staticStyle:{float:"right","margin-top":"0.1rem"},attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next",total:t.tableData.filter(function(t){return t.name.toLowerCase().includes(e.searchValue.toLowerCase())}).length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:t.dialogWidth,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.dialogClose,open:t.dialogOpen}},["添加站点"==t.title||"编辑站点"==t.title?[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",staticStyle:{width:"4.8rem","font-size":"1.18rem"},attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"1.5rem","label-position":"right","validate-on-rule-change":!1}},[a("el-form-item",{attrs:{label:"站点名称：",prop:"stationName"}},[a("el-input",{model:{value:t.ruleForm.stationName,callback:function(e){t.$set(t.ruleForm,"stationName",e)},expression:"ruleForm.stationName"}})],1),a("el-form-item",{attrs:{label:"数据来源：",prop:"dataSource"}},[a("el-radio-group",{attrs:{disabled:t.editDisabled},model:{value:t.ruleForm.dataSource,callback:function(e){t.$set(t.ruleForm,"dataSource",e)},expression:"ruleForm.dataSource"}},[a("el-radio",{attrs:{label:1}},[t._v("系统采集")]),a("el-radio",{attrs:{label:2}},[t._v("人工报数")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"diglogBtn",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{staticClass:"diglogBtn",attrs:{type:"primary",loading:t.addBtnLoading},on:{click:t.addBtn}},[t._v("确定")])],1)]:t._e()],2)],1)],1)},[],!1,null,null,null));t.default=l.exports},"9df0":function(e,t,i){"use strict";i("2c99")},"9eaa":function(e,t,i){"use strict";i("a296")},a154:function(e,t,i){},a296:function(e,t,i){},a756:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},ae62:function(e,t,i){"use strict";i("2380")},bc8a:function(e,t,i){},bdd0:function(e,t,i){"use strict";i("051a")},c22d:function(e,t,i){"use strict";var a=i("9194"),r=i("baa9"),o=i("4023"),n=i("a756"),s=i("1a58");a("search",1,function(e,t,i){return[function(t){var i=o(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,i):new RegExp(t)[e](String(i))},function(e){var a=i(t,e,this);if(a.done)return a.value;var o=r(e),l=String(this),c=o.lastIndex;n(c,0)||(o.lastIndex=0);var d=s(o,l);return n(o.lastIndex,c)||(o.lastIndex=c),null===d?-1:d.index}]})},c549:function(e,t,i){},c818:function(e,t,i){"use strict";i("24fa")},cee3:function(e,t,i){"use strict";i("1a4e")},d869:function(e,t,i){},d998:function(e,t,i){"use strict";i("3b50")},dd47:function(e,t,i){},dea9:function(e,t,i){},e001:function(e,t,i){"use strict";var a=i("3727"),r=i.n(a),o=i("3de1"),n={beforeDestroy:function(){this.videoPlayer&&(this.videoPlayer.stop(),this.videoPlayer=null,document.getElementById("video-container").innerHTML=null)},data:function(){return{currentStation:{name:""},videoInfo:{channelNum:"",cloudSupport:"",ezopeanAddress:"",httpAddress:"",projectId:"",serialNum:"",userName:"",userPasswd:null,videoBrand:"",videoId:"",videoName:"",voiceSupport:0},videoHls:null,videoPlayer:null,isOnThePhone:!1,phoneImg:{default:i("3547"),active:i("09a9")},showControlPanel:!1,controlImg:{default:i("43e6"),active:i("fa47")},controlPanelClass:"",ptzSpeedArr:[{name:"适中",value:1},{name:"快",value:2}],ptzSpeed:1,accessToken:"",EZTalk:null,playErrorRefresh:!0}},computed:{videoInfoChanged:function(){return this.$store.state.g_videoInfo}},watch:{videoInfoChanged:function(e){this.controlPanelClass="",this.videoInfo.cloudSupport&&this.ptzControleStop(),this.playErrorRefresh=!0,this.videoInfo=e,this.videoInfo.accessToken?this.playVideo():this.getAccessToken(!0)}},mounted:function(){},created:function(){},methods:{handleError:function(e){"10002"==e.code&&this.playErrorRefresh&&(this.getAccessToken(!0),this.playErrorRefresh=!1)},handleSuccess:function(e){},playVideo:function(){this.videoPlayer&&(this.videoPlayer.stop(),this.videoPlayer=null,document.getElementById("video-container").innerHTML=null),this.videoPlayer=new r.a.EZUIKitPlayer({autoplay:!0,id:"video-container",accessToken:this.videoInfo.accessToken,url:"ezopen://open.ys7.com/"+this.videoInfo.serialNum+"/"+this.videoInfo.channelNum+".hd.live",template:"standard",audio:0,handleSuccess:this.handleSuccess,handleError:this.handleError})},ptzControleAct:function(e){var t=this;if(1==this.videoInfo.cloudSupport){var i={accessToken:this.videoInfo.accessToken,deviceSerial:this.videoInfo.serialNum,channelNo:this.videoInfo.channelNum,direction:e,speed:this.ptzSpeed};this.$axios({method:"post",url:"https://open.ys7.com/api/lapp/device/ptz/start",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$qs.stringify(i)}).then(function(i){switch(i.data.code){case"200":setTimeout(function(){t.ptzControleStop(e)},800);break;case"10002":t.getAccessToken();break;case"20006":Object(o.j)("error","网络异常");break;case"20008":Object(o.j)("error","设备响应超时");break;case"60000":Object(o.j)("error","设备不支持云台控制");break;case"60020":Object(o.j)("error","设备不支持该命令")}}).catch(function(e){Object(o.j)("error",e)})}},ptzControleStop:function(e){var t=this,i={accessToken:this.videoInfo.accessToken,deviceSerial:this.videoInfo.serialNum,channelNo:this.videoInfo.channelNum,direction:e};this.$axios({method:"post",url:"https://open.ys7.com/api/lapp/device/ptz/stop",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.$qs.stringify(i)}).then(function(e){e.data;10002==e.data&&t.getAccessToken()})},phoneCall:function(){var e=this;this.videoInfo.ezopeanAddress&&(this.EZTalk||(this.EZTalk=new EZUITalk({accessToken:this.videoInfo.accessToken,url:this.videoInfo.ezopeanAddress,filePath:"./talk",handleError:function(e){}})),this.isOnThePhone?(this.EZTalk.stopTalk(),this.isOnThePhone=!1):setTimeout(function(){e.EZTalk.startTalk(),e.isOnThePhone=!0},800))},controlFuncPanelClick:function(){this.showControlPanel=!this.showControlPanel,this.controlPanelClass=this.showControlPanel?"show":"hide"},getAccessToken:function(e){var t=this;this.$axios({method:"get",params:{projectId:this.videoInfo.projectId},url:"/web/video/getAccessToken"}).then(function(i){var a=i.data;0==a.code&&(t.videoInfo.accessToken=a.info,e&&t.playVideo())}).catch(function(e){Object(o.j)("error",e)})}}},s=(i("3c38"),i("5d22")),l=Object(s.a)(n,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"video"},[t("div",{staticClass:"videoDiv"},[t("div",{staticClass:"screen1",attrs:{id:"video-container"}})])])}],!1,null,null,null);t.a=l.exports},e1b4:function(e,t,i){},e1eb:function(e,t,i){"use strict";i("2210")},e66c:function(e,t,i){},ecdc:function(e,t,i){"use strict";i("dea9")},ef37:function(e,t,i){},f68c:function(e,t,i){"use strict";i.r(t);i("fc13"),i("9b5f"),i("1d43"),i("5d08"),i("16ca");var a={components:{},data:function(){return{excelData:null,upAndroidUrl:"/web/system/uploadQRCode?type=1",androidUrl:"/system/Android.jpg",androidFileList:[],upIosUrl:"/web/system/uploadQRCode?type=2",iosUrl:"/system/ios.jpg",iosFileList:[],systemInfo:{},userRole:null,srcAndroid:["/system/Android.jpg"],srcIos:["/system/ios.jpg"]}},mounted:function(){this.querySystem(),this.$store.state.userInfo&&(this.userRole=this.$store.state.userInfo.role)},methods:{modifyCompanyName:function(){var e=this;if(this.systemInfo.companyName){this.$axios({method:"get",headers:{},url:"/web/system/updateCompanyName",params:{companyName:this.systemInfo.companyName}}).then(function(t){var i=t.data;0==i.code?e.$showMessage("success","操作成功！"):e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t)})}else this.$showMessage("warning","请填写公司名字！")},modifyPlatformName:function(){var e=this;if(this.systemInfo.platformName){this.$axios({method:"get",headers:{},url:"/web/system/updatePlatformName",params:{platformName:this.systemInfo.platformName}}).then(function(t){var i=t.data;0==i.code?e.$showMessage("success","操作成功！"):e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t)})}else this.$showMessage("warning","请填写公司名字！")},querySystem:function(){var e=this;this.$axios({method:"get",headers:{},url:"/web/system/querySystem",params:{}}).then(function(t){var i=t.data;0==i.code?(e.systemInfo=i.info,e.androidUrl=e.systemInfo.android+"?t="+(new Date).getTime(),e.iosUrl=e.systemInfo.ios+"?t="+(new Date).getTime(),e.srcAndroid=[e.androidUrl],e.srcIos=[e.iosUrl]):e.$showMessage("error",i.msg)}).catch(function(t){e.$showMessage("error",t)})},uploadError:function(e){var t=JSON.parse(e.message);this.$message({message:"上传文件失败："+t.message,type:"error",showClose:!0})},beforeUpload:function(e){var t=e.name.replace(/.+\./,"");return-1!=["png","jpg","jpeg"].indexOf(t.toLowerCase())||(this.$showMessage("warning","请上传后缀名为png、jpg、jpeg的附件!"),!1)},androidHandleChange:function(e,t){this.androidFileList=t.slice(-1),this.androidFileList},iosHandleChange:function(e,t){this.iosFileList=t.slice(-1),this.iosFileList},handleExceed:function(e,t){this.$message.warning("本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},uploadSuccess:function(){this.querySystem()}}},r=(i("c818"),i("5d22")),o=Object(r.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"system-info"},[i("div",{staticClass:"top-title"}),i("div",{staticClass:"bottom-div"},[i("div",{staticClass:"left-div"},[i("div",{staticClass:"top-title"},[e._v("APP下载二维码")]),i("div",[i("dd",{staticClass:"upload-dd"},[i("label",{staticClass:"upload-label"},[e._v("Android二维码：")]),i("el-image",{staticClass:"android-code",attrs:{src:e.androidUrl,"preview-src-list":e.srcAndroid}}),i("el-upload",{staticClass:"upload-demo",attrs:{action:e.upAndroidUrl,"on-change":e.androidHandleChange,"on-error":e.uploadError,"on-success":e.uploadSuccess,"before-upload":e.beforeUpload,limit:2,"on-exceed":e.handleExceed,"file-list":e.androidFileList}},[3==e.userRole?i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]):e._e()],1),i("br")],1),i("br"),i("dd",{staticClass:"upload-dd"},[i("label",{staticClass:"upload-label"},[e._v("iOS二维码：")]),i("el-image",{staticClass:"android-code",attrs:{src:e.iosUrl,"preview-src-list":e.srcIos}}),i("el-upload",{staticClass:"upload-demo",attrs:{action:e.upIosUrl,"on-change":e.iosHandleChange,"on-error":e.uploadError,"on-success":e.uploadSuccess,"before-upload":e.beforeUpload,limit:2,"on-exceed":e.handleExceed,"file-list":e.iosFileList}},[3==e.userRole?i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]):e._e()],1),i("br")],1)])]),i("div",{staticClass:"right-div"},[i("div",{staticClass:"top-title"},[e._v("系统信息")]),i("div",[i("ul",[i("li",{staticClass:"sys-li"},[e._v("系统版本："+e._s(e.systemInfo.version))]),i("li",{staticClass:"sys-li"},[e._v("版本时间："+e._s(e.systemInfo.versionTime))]),i("li",{staticClass:"sys-li"},[e._v(" 公司名称： "),i("el-input",{staticStyle:{width:"2rem"},attrs:{type:"text"},model:{value:e.systemInfo.companyName,callback:function(t){e.$set(e.systemInfo,"companyName",t)},expression:"systemInfo.companyName"}}),3==e.userRole?i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary"},on:{click:function(t){return e.modifyCompanyName()}}},[e._v("修改")]):e._e()],1),i("li",{staticClass:"sys-li"},[e._v(" 平台名称： "),i("el-input",{staticStyle:{width:"2rem"},attrs:{type:"text"},model:{value:e.systemInfo.platformName,callback:function(t){e.$set(e.systemInfo,"platformName",t)},expression:"systemInfo.platformName"}}),3==e.userRole?i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{size:"small",type:"primary"},on:{click:function(t){return e.modifyPlatformName()}}},[e._v("修改")]):e._e()],1)])])])])])},[],!1,null,null,null);t.default=o.exports},f9ec:function(e,t,i){"use strict";i("c549")},fa47:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAaCAYAAACkVDyJAAACMUlEQVRIib3WO2gVQRQG4O9GE/MyvqIm4qOxEkQEm4jpLESjhZWFbbASGyvBJ1gLVgqCpS8UJNZWkspGsYlBQfFVREWJiTGPa7Fnk8syG3ODyQ/Duff8c86/c3bO7FT6qj17cQk7LB3GcXXA4JNKX7XnBzqWUKwWJxqWUQwONSyjGLSvTDhf4D26sS/Bv8Q7rMOBBP8aQ+hET4GbSq3wIo7hbMlTXgn+ZAl/c8DgMfSnyJRgZ9hNJQlzfksJvzZs10IFlxQpwdGwP5dCMN800/iFZlzAKVnp/uA3VqCtztzV+QSnzPXjrhg5mvB1gYLVeHCyCs3E79lK5oIVPIoJbWiRrWw0fAf/ITQTD9WM3qP2j2I3RmTVWR8as4JNeIBhvMJETNyDbTj6D8EJrIk8R2IkUdv4d8L24xaO434iZrJGJEcFb0OwOfLOxJwKtoqypk6aFQWbI38fLZF0dY2vEefxLBHThOfYTLotpsJOF/zTstVdlpX+XvjGwp7DQ/QOGPyCdtyOkR8GyRWWoTHsqoR/Bnvj/6BsP+zE4WKSegSv4ZusfVplq/0u69XT5o668bCTxQT1Cg7hI57Kykh2iBdXPC/qEbwR9gyuoxeP6xFjcYf3n7DFTbVowfwdjCW4Wn60hM/7MxmfElwja9Z1JQk7gt9QwreHTcZX+qo9xVP9Mz7Jrhipj+wXfMBG6avlCN5E/PYCdze1abpjlKFLydc80GnuVlBE60r8mCf4f2P4L+GOcqnJpfflAAAAAElFTkSuQmCC"},fbce:function(e,t,i){"use strict";i("86f3")}}]);