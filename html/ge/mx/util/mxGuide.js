function mxGuide(t,i){this.graph=t,this.setStates(i)}mxGuide.prototype.graph=null,mxGuide.prototype.states=null,mxGuide.prototype.horizontal=!0,mxGuide.prototype.vertical=!0,mxGuide.prototype.guideX=null,mxGuide.prototype.guideY=null,mxGuide.prototype.rounded=!1,mxGuide.prototype.tolerance=2,mxGuide.prototype.setStates=function(t){this.states=t},mxGuide.prototype.isEnabledForEvent=function(t){return!0},mxGuide.prototype.getGuideTolerance=function(t){return t&&this.graph.gridEnabled?this.graph.gridSize/2:this.tolerance},mxGuide.prototype.createGuideShape=function(t){var i=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH);return i.isDashed=!0,i},mxGuide.prototype.isStateIgnored=function(t){return!1},mxGuide.prototype.move=function(t,i,e,n){if(null!=this.states&&(this.horizontal||this.vertical)&&null!=t&&null!=i){var s=this.graph.getView().scale,l=this.getGuideTolerance(e)*s,h=t.clone();h.x+=i.x,h.y+=i.y;var a=!1,u=null,o=null,r=!1,d=null,g=null,p=l,x=l,y=h.x,c=h.x+h.width,m=h.getCenterX(),G=h.y,v=h.y+h.height,C=h.getCenterY();function b(e,n,s){var l=!1;s&&Math.abs(e-m)<p?(i.x=e-t.getCenterX(),p=Math.abs(e-m),l=!0):s||(Math.abs(e-y)<p?(i.x=e-t.x,p=Math.abs(e-y),l=!0):Math.abs(e-c)<p&&(i.x=e-t.x-t.width,p=Math.abs(e-c),l=!0)),l&&(u=n,o=e,null==this.guideX&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane()))),a=a||l}function D(e,n,s){var l=!1;s&&Math.abs(e-C)<x?(i.y=e-t.getCenterY(),x=Math.abs(e-C),l=!0):s||(Math.abs(e-G)<x?(i.y=e-t.y,x=Math.abs(e-G),l=!0):Math.abs(e-v)<x&&(i.y=e-t.y-t.height,x=Math.abs(e-v),l=!0)),l&&(d=n,g=e,null==this.guideY&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_VML:mxConstants.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane()))),r=r||l}for(var X=0;X<this.states.length;X++){var Y=this.states[X];null==Y||this.isStateIgnored(Y)||(this.horizontal&&(b.call(this,Y.getCenterX(),Y,!0),b.call(this,Y.x,Y,!1),b.call(this,Y.x+Y.width,Y,!1),null==Y.cell&&b.call(this,Y.getCenterX(),Y,!1)),this.vertical&&(D.call(this,Y.getCenterY(),Y,!0),D.call(this,Y.y,Y,!1),D.call(this,Y.y+Y.height,Y,!1),null==Y.cell&&D.call(this,Y.getCenterY(),Y,!1)))}this.graph.snapDelta(i,t,!e,a,r),i=this.getDelta(t,u,i.x,d,i.y);var w=this.graph.container;if(a||null==this.guideX){if(null!=this.guideX){var f=null,M=null;null!=u&&null!=t&&(f=Math.min(t.y+i.y-this.graph.panDy,u.y),M=Math.max(t.y+t.height+i.y-this.graph.panDy,u.y+u.height)),this.guideX.points=null!=f&&null!=M?[new mxPoint(o,f),new mxPoint(o,M)]:[new mxPoint(o,-this.graph.panDy),new mxPoint(o,w.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(u,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()}}else this.guideX.node.style.visibility="hidden";if(r||null==this.guideY){if(null!=this.guideY){var E=null,S=null;null!=d&&null!=t&&(E=Math.min(t.x+i.x-this.graph.panDx,d.x),S=Math.max(t.x+t.width+i.x-this.graph.panDx,d.x+d.width)),this.guideY.points=null!=E&&null!=S?[new mxPoint(E,g),new mxPoint(S,g)]:[new mxPoint(-this.graph.panDx,g),new mxPoint(w.scrollWidth-3-this.graph.panDx,g)],this.guideY.stroke=this.getGuideColor(d,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()}}else this.guideY.node.style.visibility="hidden"}return i},mxGuide.prototype.getDelta=function(t,i,e,n,s){var l=this.graph.view.scale;return(this.rounded||null!=i&&null==i.cell)&&(e=Math.round((t.x+e)/l)*l-t.x),(this.rounded||null!=n&&null==n.cell)&&(s=Math.round((t.y+s)/l)*l-t.y),new mxPoint(e,s)},mxGuide.prototype.getGuideColor=function(t,i){return mxConstants.GUIDE_COLOR},mxGuide.prototype.hide=function(){this.setVisible(!1)},mxGuide.prototype.setVisible=function(t){null!=this.guideX&&(this.guideX.node.style.visibility=t?"visible":"hidden"),null!=this.guideY&&(this.guideY.node.style.visibility=t?"visible":"hidden")},mxGuide.prototype.destroy=function(){null!=this.guideX&&(this.guideX.destroy(),this.guideX=null),null!=this.guideY&&(this.guideY.destroy(),this.guideY=null)};