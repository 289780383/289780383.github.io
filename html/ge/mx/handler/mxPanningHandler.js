function mxPanningHandler(n){null!=n&&(this.graph=n,this.graph.addMouseListener(this),this.forcePanningHandler=mxUtils.bind(this,function(n,t){var e=t.getProperty("eventName"),i=t.getProperty("event");e==mxEvent.MOUSE_DOWN&&this.isForcePanningEvent(i)&&(this.start(i),this.active=!0,this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",i)),i.consume())}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=mxUtils.bind(this,function(n,t){if(this.isPinchEnabled()){var e=t.getProperty("event");mxEvent.isConsumed(e)||"gesturestart"!=e.type?"gestureend"==e.type&&null!=this.initialScale&&(this.initialScale=null):(this.initialScale=this.graph.view.scale,this.active||null==this.mouseDownEvent||(this.start(this.mouseDownEvent),this.mouseDownEvent=null)),null!=this.initialScale&&this.zoomGraph(e)}}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.reset()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener))}mxPanningHandler.prototype=new mxEventSource,mxPanningHandler.prototype.constructor=mxPanningHandler,mxPanningHandler.prototype.graph=null,mxPanningHandler.prototype.useLeftButtonForPanning=!1,mxPanningHandler.prototype.usePopupTrigger=!0,mxPanningHandler.prototype.ignoreCell=!1,mxPanningHandler.prototype.previewEnabled=!0,mxPanningHandler.prototype.useGrid=!1,mxPanningHandler.prototype.panningEnabled=!0,mxPanningHandler.prototype.pinchEnabled=!0,mxPanningHandler.prototype.maxScale=8,mxPanningHandler.prototype.minScale=.01,mxPanningHandler.prototype.dx=null,mxPanningHandler.prototype.dy=null,mxPanningHandler.prototype.startX=0,mxPanningHandler.prototype.startY=0,mxPanningHandler.prototype.isActive=function(){return this.active||null!=this.initialScale},mxPanningHandler.prototype.isPanningEnabled=function(){return this.panningEnabled},mxPanningHandler.prototype.setPanningEnabled=function(n){this.panningEnabled=n},mxPanningHandler.prototype.isPinchEnabled=function(){return this.pinchEnabled},mxPanningHandler.prototype.setPinchEnabled=function(n){this.pinchEnabled=n},mxPanningHandler.prototype.isPanningTrigger=function(n){var t=n.getEvent();return this.useLeftButtonForPanning&&null==n.getState()&&mxEvent.isLeftMouseButton(t)||mxEvent.isControlDown(t)&&mxEvent.isShiftDown(t)||this.usePopupTrigger&&mxEvent.isPopupTrigger(t)},mxPanningHandler.prototype.isForcePanningEvent=function(n){return this.ignoreCell||mxEvent.isMultiTouchEvent(n.getEvent())},mxPanningHandler.prototype.mouseDown=function(n,t){this.mouseDownEvent=t,!t.isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(t)&&(this.start(t),this.consumePanningTrigger(t))},mxPanningHandler.prototype.start=function(n){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=n.getX(),this.startY=n.getY(),this.dx=null,this.dy=null,this.panningTrigger=!0},mxPanningHandler.prototype.consumePanningTrigger=function(n){n.consume()},mxPanningHandler.prototype.mouseMove=function(n,t){if(this.dx=t.getX()-this.startX,this.dy=t.getY()-this.startY,this.active)this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject(mxEvent.PAN,"event",t));else if(this.panningTrigger){var e=this.active;this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!e&&this.active&&this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",t))}(this.active||this.panningTrigger)&&t.consume()},mxPanningHandler.prototype.mouseUp=function(n,t){if(this.active){if(null!=this.dx&&null!=this.dy){if(!this.graph.useScrollbarsForPanning||!mxUtils.hasScrollbars(this.graph.container)){var e=this.graph.getView().scale,i=this.graph.getView().translate;this.graph.panGraph(0,0),this.panGraph(i.x+this.dx/e,i.y+this.dy/e)}t.consume()}this.fireEvent(new mxEventObject(mxEvent.PAN_END,"event",t))}this.reset()},mxPanningHandler.prototype.zoomGraph=function(n){var t=Math.round(this.initialScale*n.scale*100)/100;null!=this.minScale&&(t=Math.max(this.minScale,t)),null!=this.maxScale&&(t=Math.min(this.maxScale,t)),this.graph.view.scale!=t&&(this.graph.zoomTo(t),mxEvent.consume(n))},mxPanningHandler.prototype.reset=function(){this.panningTrigger=!1,this.mouseDownEvent=null,this.active=!1,this.dx=null,this.dy=null},mxPanningHandler.prototype.panGraph=function(n,t){this.graph.getView().setTranslate(n,t)},mxPanningHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler),mxEvent.removeListener(document,"mouseup",this.mouseUpListener)};