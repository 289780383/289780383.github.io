var mxEvent={addListener:function(){var e=function(e,n,t){null==e.mxListenerList&&(e.mxListenerList=[]);var E={name:n,f:t};e.mxListenerList.push(E)};return window.addEventListener?function(n,t,E){n.addEventListener(t,E,!1),e(n,t,E)}:function(n,t,E){n.attachEvent("on"+t,E),e(n,t,E)}}(),removeListener:function(){var e=function(e,n,t){if(null!=e.mxListenerList){for(var E=e.mxListenerList.length,o=0;o<E;o++){if(e.mxListenerList[o].f==t){e.mxListenerList.splice(o,1);break}}0==e.mxListenerList.length&&(e.mxListenerList=null)}};return window.removeEventListener?function(n,t,E){n.removeEventListener(t,E,!1),e(n,0,E)}:function(n,t,E){n.detachEvent("on"+t,E),e(n,0,E)}}(),removeAllListeners:function(e){var n=e.mxListenerList;if(null!=n)for(;n.length>0;){var t=n[0];mxEvent.removeListener(e,t.name,t.f)}},addGestureListeners:function(e,n,t,E){null!=n&&mxEvent.addListener(e,GE.IS_POINTER?"pointerdown":"mousedown",n),null!=t&&mxEvent.addListener(e,GE.IS_POINTER?"pointermove":"mousemove",t),null!=E&&mxEvent.addListener(e,GE.IS_POINTER?"pointerup":"mouseup",E)},removeGestureListeners:function(e,n,t,E){null!=n&&mxEvent.removeListener(e,GE.IS_POINTER?"pointerdown":"mousedown",n),null!=t&&mxEvent.removeListener(e,GE.IS_POINTER?"pointermove":"mousemove",t),null!=E&&mxEvent.removeListener(e,GE.IS_POINTER?"pointerup":"mouseup",E)},redirectMouseEvents:function(e,n,t,E,o,u,i){var r=function(e){return"function"==typeof t?t(e):t};mxEvent.addGestureListeners(e,function(e){null!=E?E(e):mxEvent.isConsumed(e)||n.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(e,r(e)))},function(e){null!=o?o(e):mxEvent.isConsumed(e)||n.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(e,r(e)))},function(e){null!=u?u(e):mxEvent.isConsumed(e)||n.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(e,r(e)))}),mxEvent.addListener(e,"dblclick",function(e){if(null!=i)i(e);else if(!mxEvent.isConsumed(e)){var t=r(e);n.dblClick(e,null!=t?t.cell:null)}})},release:function(e){try{if(null!=e){mxEvent.removeAllListeners(e);var n=e.childNodes;if(null!=n)for(var t=n.length,E=0;E<t;E+=1)mxEvent.release(n[E])}}catch(e){}},addMouseWheelListener:function(e,n){if(null!=e){if(n=null!=n?n:window,GE.IS_SF){var t=1;mxEvent.addListener(n,"gesturestart",function(e){mxEvent.consume(e),t=1}),mxEvent.addListener(n,"gesturechange",function(n){mxEvent.consume(n);var E=t-n.scale;Math.abs(E)>.2&&(e(n,E<0,!0),t=n.scale)}),mxEvent.addListener(n,"gestureend",function(e){mxEvent.consume(e)})}mxEvent.addListener(n,"wheel",function(n){null==n&&(n=window.event),n.ctrlKey&&n.preventDefault();n.deltaY;(Math.abs(n.deltaX)>.5||Math.abs(n.deltaY)>.5)&&e(n,0==n.deltaY?-n.deltaX>0:-n.deltaY>0)})}},disableContextMenu:function(e){mxEvent.addListener(e,"contextmenu",function(e){return e.preventDefault&&e.preventDefault(),!1})},getSource:function(e){return null!=e.srcElement?e.srcElement:e.target},isConsumed:function(e){return null!=e.isConsumed&&e.isConsumed},isTouchEvent:function(e){return null!=e.pointerType?"touch"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_TOUCH:null!=e.mozInputSource?5==e.mozInputSource:0==e.type.indexOf("touch")},isPenEvent:function(e){return null!=e.pointerType?"pen"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_PEN:null!=e.mozInputSource?2==e.mozInputSource:0==e.type.indexOf("pen")},isMultiTouchEvent:function(e){return null!=e.type&&0==e.type.indexOf("touch")&&null!=e.touches&&e.touches.length>1},isMouseEvent:function(e){return null!=e.pointerType?"mouse"==e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE:null!=e.mozInputSource?1==e.mozInputSource:0==e.type.indexOf("mouse")},isLeftMouseButton:function(e){return"buttons"in e&&("mousedown"==e.type||"mousemove"==e.type)?1==e.buttons:"which"in e?1===e.which:1===e.button},isMiddleMouseButton:function(e){return"which"in e?2===e.which:4===e.button},isRightMouseButton:function(e){return"which"in e?3===e.which:2===e.button},isPopupTrigger:function(e){return mxEvent.isRightMouseButton(e)||GE.IS_MAC&&mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e)&&!mxEvent.isMetaDown(e)&&!mxEvent.isAltDown(e)},isShiftDown:function(e){return null!=e&&e.shiftKey},isAltDown:function(e){return null!=e&&e.altKey},isControlDown:function(e){return null!=e&&e.ctrlKey},isMetaDown:function(e){return null!=e&&e.metaKey},getMainEvent:function(e){return"touchstart"!=e.type&&"touchmove"!=e.type||null==e.touches||null==e.touches[0]?"touchend"==e.type&&null!=e.changedTouches&&null!=e.changedTouches[0]&&(e=e.changedTouches[0]):e=e.touches[0],e},getClientX:function(e){return mxEvent.getMainEvent(e).clientX},getClientY:function(e){return mxEvent.getMainEvent(e).clientY},consume:function(e,n,t){n=null==n||n,t=null==t||t,n&&(e.preventDefault?(t&&e.stopPropagation(),e.preventDefault()):t&&(e.cancelBubble=!0)),e.isConsumed=!0,e.preventDefault||(e.returnValue=!1)},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-1e5,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",VAR_GUID_CHANGED:"bindPropertiesChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset"};