GE.OpenDialog=function(){var e=document.createElement("iframe");e.style.backgroundColor="transparent",e.allowTransparency="true",e.style.borderStyle="none",e.style.borderWidth="0px",e.style.overflow="hidden",e.frameBorder="0",e.setAttribute("width",(GE.Editor.useLocalStorage?640:320)+"px"),e.setAttribute("height",(GE.Editor.useLocalStorage?480:220)+"px"),e.setAttribute("src",GE.SYS_ROOT+"open.html"),this.container=e},GE.ColorDialog=function(e,t,n,i){this.editorUi=e;var o=document.createElement("input");o.style.marginBottom="10px",o.style.width="216px";var l=null!=n?n:this.createApplyFunction();function a(){var t=o.value;/(^#?[a-zA-Z0-9]*$)/.test(t)?("none"!=t&&"#"!=t.charAt(0)&&(t="#"+t),GE.ColorDialog.addRecentColor("none"!=t?t.substring(1):t,12),l(t),e.hideDialog()):e.handleError({message:mxResources.get("invalidInput")})}this.init=function(){o.focus()};var r=new GE.Color.color(o);r.pickerOnfocus=!1,r.showPicker();var s=document.createElement("div");GE.Color.picker.box.style.position="relative",GE.Color.picker.box.style.width="230px",GE.Color.picker.box.style.height="100px",GE.Color.picker.box.style.paddingBottom="10px",s.appendChild(GE.Color.picker.box);var d=document.createElement("center");function c(){var e=u(0==GE.ColorDialog.recentColors.length?["FFFFFF"]:GE.ColorDialog.recentColors,11,"FFFFFF",!0);return e.style.marginBottom="8px",e}function u(e,t,n,i){t=null!=t?t:12;var l=document.createElement("table");l.style.borderCollapse="collapse",l.setAttribute("cellspacing","0"),l.style.marginBottom="20px",l.style.cellSpacing="0px";var s=document.createElement("tbody");l.appendChild(s);for(var u=e.length/t,p=0;p<u;p++){for(var m=document.createElement("tr"),g=0;g<t;g++)!function(e){var t=document.createElement("td");t.style.border="1px solid black",t.style.padding="0px",t.style.width="16px",t.style.height="16px",null==e&&(e=n),"none"==e?t.style.background="url('"+GE.Dialog.prototype.noColorImage+"')":t.style.backgroundColor="#"+e,m.appendChild(t),null!=e&&(t.style.cursor="pointer",mxEvent.addListener(t,"click",function(){"none"==e?(r.fromString("ffffff"),o.value="none"):r.fromString(e)}),mxEvent.addListener(t,"dblclick",a))}(e[p*t+g]);s.appendChild(m)}if(i){var h=document.createElement("td");h.setAttribute("title",mxResources.get("reset")),h.style.border="1px solid black",h.style.padding="0px",h.style.width="16px",h.style.height="16px",h.style.backgroundImage="url('"+GE.Dialog.prototype.closeImage+"')",h.style.backgroundPosition="center center",h.style.backgroundRepeat="no-repeat",h.style.cursor="pointer",m.appendChild(h),mxEvent.addListener(h,"click",function(){GE.ColorDialog.resetRecentColors(),l.parentNode.replaceChild(c(),l)})}return d.appendChild(l),l}s.appendChild(o),mxUtils.br(s),c();var p=u(this.presetColors);p.style.marginBottom="8px",(p=u(this.defaultColors)).style.marginBottom="16px",s.appendChild(d);var m=document.createElement("div");m.style.textAlign="right",m.style.whiteSpace="nowrap";var g=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog(),null!=i&&i()});g.className="geBtn",e.editor.cancelFirst&&m.appendChild(g);var h=mxUtils.button(mxResources.get("apply"),a);h.className="geBtn gePrimaryBtn",m.appendChild(h),e.editor.cancelFirst||m.appendChild(g),null!=t&&("none"==t?(r.fromString("ffffff"),o.value="none"):r.fromString(t)),s.appendChild(m),this.picker=r,this.colorInput=o,mxEvent.addListener(s,"keydown",function(t){27==t.keyCode&&(e.hideDialog(),null!=i&&i(),mxEvent.consume(t))}),this.container=s},GE.ColorDialog.prototype.presetColors=["E6D0DE","CDA2BE","B5739D","E1D5E7","C3ABD0","A680B8","D4E1F5","A9C4EB","7EA6E0","D5E8D4","9AC7BF","67AB9F","D5E8D4","B9E0A5","97D077","FFF2CC","FFE599","FFD966","FFF4C3","FFCE9F","FFB570","F8CECC","F19C99","EA6B66"],GE.ColorDialog.prototype.defaultColors=["none","FFFFFF","E6E6E6","CCCCCC","B3B3B3","999999","808080","666666","4D4D4D","333333","1A1A1A","000000","FFCCCC","FFE6CC","FFFFCC","E6FFCC","CCFFCC","CCFFE6","CCFFFF","CCE5FF","CCCCFF","E5CCFF","FFCCFF","FFCCE6","FF9999","FFCC99","FFFF99","CCFF99","99FF99","99FFCC","99FFFF","99CCFF","9999FF","CC99FF","FF99FF","FF99CC","FF6666","FFB366","FFFF66","B3FF66","66FF66","66FFB3","66FFFF","66B2FF","6666FF","B266FF","FF66FF","FF66B3","FF3333","FF9933","FFFF33","99FF33","33FF33","33FF99","33FFFF","3399FF","3333FF","9933FF","FF33FF","FF3399","FF0000","FF8000","FFFF00","80FF00","00FF00","00FF80","00FFFF","007FFF","0000FF","7F00FF","FF00FF","FF0080","CC0000","CC6600","CCCC00","66CC00","00CC00","00CC66","00CCCC","0066CC","0000CC","6600CC","CC00CC","CC0066","990000","994C00","999900","4D9900","009900","00994D","009999","004C99","000099","4C0099","990099","99004D","660000","663300","666600","336600","006600","006633","006666","003366","000066","330066","660066","660033","330000","331A00","333300","1A3300","003300","00331A","003333","001933","000033","190033","330033","33001A"],GE.ColorDialog.prototype.createApplyFunction=function(){return mxUtils.bind(this,function(e){var t=this.editorUi.editor.graph;t.getModel().beginUpdate();try{t.setCellStyles(this.currentColorKey,e),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[this.currentColorKey],"values",[e],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}})},GE.ColorDialog.recentColors=[],GE.ColorDialog.addRecentColor=function(e,t){null!=e&&(mxUtils.remove(e,GE.ColorDialog.recentColors),GE.ColorDialog.recentColors.splice(0,0,e),GE.ColorDialog.recentColors.length>=t&&GE.ColorDialog.recentColors.pop())},GE.ColorDialog.resetRecentColors=function(){GE.ColorDialog.recentColors=[]},GE.TextareaDialog=function(e,t,n,i,o,l,a,r,s,d,c,u,p,m){var g,h;a=null!=a?a:300,r=null!=r?r:120,d=null!=d&&d;var C=document.createElement("table"),x=document.createElement("tbody");g=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",h.style.width="100px",mxUtils.write(h,t),g.appendChild(h),x.appendChild(g),g=document.createElement("tr"),h=document.createElement("td");var f=document.createElement("textarea");if(c&&f.setAttribute("wrap","off"),f.setAttribute("spellcheck","false"),f.setAttribute("autocorrect","off"),f.setAttribute("autocomplete","off"),f.setAttribute("autocapitalize","off"),mxUtils.write(f,n||""),f.style.resize="none",f.style.width=a+"px",f.style.height=r+"px",this.textarea=f,this.init=function(){f.focus(),f.scrollTop=0},h.appendChild(f),g.appendChild(h),x.appendChild(g),g=document.createElement("tr"),(h=document.createElement("td")).style.paddingTop="14px",h.style.whiteSpace="nowrap",h.setAttribute("align","right"),null!=p){var E=mxUtils.button(mxResources.get("help"),function(){e.editor.graph.openLink(p)});E.className="geBtn",h.appendChild(E)}if(null!=m)for(var b=0;b<m.length;b++)!function(e,t){var n=mxUtils.button(e,function(e){t(e,f)});n.className="geBtn",h.appendChild(n)}(m[b][0],m[b][1]);var y=mxUtils.button(l||mxResources.get("cancel"),function(){e.hideDialog(),null!=o&&o()});if(y.className="geBtn",e.editor.cancelFirst&&h.appendChild(y),null!=s&&s(h,f),null!=i){var F=mxUtils.button(u||mxResources.get("apply"),function(){d||e.hideDialog(),i(f.value)});F.className="geBtn gePrimaryBtn",h.appendChild(F)}e.editor.cancelFirst||h.appendChild(y),g.appendChild(h),x.appendChild(g),C.appendChild(x),this.container=C},GE.EditDiagramDialog=function(e){var t=document.createElement("div");t.style.textAlign="right";var n=document.createElement("textarea");if(n.setAttribute("wrap","off"),n.setAttribute("spellcheck","false"),n.setAttribute("autocorrect","off"),n.setAttribute("autocomplete","off"),n.setAttribute("autocapitalize","off"),n.style.overflow="auto",n.style.resize="none",n.style.width="600px",n.style.height="360px",n.style.marginBottom="16px",n.value=mxUtils.getPrettyXml(e.editor.getGraphXml()),t.appendChild(n),this.init=function(){n.focus()},GE.Graph.fileSupport){n.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault()},!1),n.addEventListener("drop",function(t){if(t.stopPropagation(),t.preventDefault(),t.dataTransfer.files.length>0){var i=t.dataTransfer.files[0],o=new FileReader;o.onload=function(e){n.value=e.target.result},o.readAsText(i)}else n.value=e.extractGraphModelFromEvent(t)},!1)}var i=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()});i.className="geBtn",e.editor.cancelFirst&&t.appendChild(i);var o=mxUtils.button(mxResources.get("ok"),function(){var t=GE.Graph.zapGremlins(mxUtils.trim(n.value)),i=null;e.editor.graph.model.beginUpdate();try{e.editor.setGraphXml(mxUtils.parseXml(t).documentElement),e.hideDialog()}catch(e){i=e}finally{e.editor.graph.model.endUpdate()}null!=i&&mxUtils.alert(i.message)});o.className="geBtn gePrimaryBtn",t.appendChild(o),e.editor.cancelFirst||t.appendChild(i),this.container=t},GE.VersionDialog=function(e){var t=document.createElement("div");t.style.textAlign="right";var n=document.createElement("textarea");n.readOnly=!0,n.setAttribute("wrap","off"),n.setAttribute("spellcheck","false"),n.setAttribute("autocorrect","off"),n.setAttribute("autocomplete","off"),n.setAttribute("autocapitalize","off"),n.style.overflow="auto",n.style.resize="none",n.style.width="600px",n.style.height="360px",n.style.marginBottom="16px",n.value="\n  当前版本：V1.0.0\n  历史:\n    1. 2021-03-22，完成V1.0.0的基础功能设计，实现了如下图元：\n      (1) 与变量绑定的图元：指针表1_1 指针表1_2 风扇1 文本1 水浸绳1 流动1 流动2 遥控1 选项二1 进度条1\n      (2) 动态图元：时间日期\n      (3) 外部扩展图元\n  ",t.appendChild(n),this.init=function(){n.focus()};var i=mxUtils.button(mxResources.get("ok"),function(){e.hideDialog()});i.className="geBtn",t.appendChild(i),this.container=t},GE.ExportDialog=function(e){var t,n,i=document.createElement("table"),o=document.createElement("tbody");i.setAttribute("cellpadding",GE.IS_SF?"0":"2"),t=document.createElement("tr"),(n=document.createElement("td")).style.fontSize="10pt",n.style.width="100px",mxUtils.write(n,mxResources.get("filename")+":"),t.appendChild(n);var l=document.createElement("input");l.setAttribute("value",e.editor.getOrCreateFilename()),l.style.width="180px",(n=document.createElement("td")).appendChild(l),t.appendChild(n),o.appendChild(t),t=document.createElement("tr"),(n=document.createElement("td")).setAttribute("align","right"),n.style.paddingTop="22px",n.colSpan=2;var a=mxUtils.button(mxResources.get("export"),mxUtils.bind(this,function(){var t=l.value,n=t.lastIndexOf(".");l.value=n>0?t.substring(0,n+1)+"xml":t+".xml",GE.ExportDialog.exportFile(e,t)}));a.className="geBtn gePrimaryBtn";var r=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()});r.className="geBtn",e.editor.cancelFirst?(n.appendChild(r),n.appendChild(a)):(n.appendChild(a),n.appendChild(r)),t.appendChild(n),o.appendChild(t),i.appendChild(o),this.container=i},GE.ExportDialog.exportFile=function(e,t){e.hideDialog();const n=e.editor.getGraphXml(),i=mxUtils.getXml(n),o=new Blob([i],{type:"text/xml"}),l=window.URL||window.webkitURL||window,a=l.createObjectURL(o),r=document.createElement("a");r.href=a,r.download=t,r.click(),l.revokeObjectURL(a)},GE.OutlineWindow=function(e,t,n,i,o){var l=e.editor.graph,a=document.createElement("div");a.style.position="absolute",a.style.width="100%",a.style.height="100%",a.style.border="1px solid whiteSmoke",a.style.overflow="hidden",this.window=new mxWindow(mxResources.get("outline"),a,t,n,i,o,!0,!0),this.window.minimumSize=new mxRectangle(0,0,80,80),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(e,t){var n=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,n-this.table.clientWidth)),t=Math.max(0,Math.min(t,i-this.table.clientHeight-48)),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)};var r=mxUtils.bind(this,function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)});mxEvent.addListener(window,"resize",r);var s=e.createOutline(this.window);this.destroy=function(){mxEvent.removeListener(window,"resize",r),this.window.destroy(),s.destroy()},this.window.addListener(mxEvent.RESIZE,mxUtils.bind(this,function(){s.update(!1),s.outline.sizeDidChange()})),this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit(),s.suspended=!1,s.outline.refresh(),s.update()})),this.window.addListener(mxEvent.HIDE,mxUtils.bind(this,function(){s.suspended=!0})),this.window.addListener(mxEvent.NORMALIZE,mxUtils.bind(this,function(){s.suspended=!1,s.update()})),this.window.addListener(mxEvent.MINIMIZE,mxUtils.bind(this,function(){s.suspended=!0}));var d=s.createGraph;function c(){s.outline.pageScale=l.pageScale,s.outline.pageFormat=l.pageFormat,s.outline.background=null==l.background||l.background==mxConstants.NONE?l.defaultPageBackgroundColor:l.background;var e=mxUtils.getCurrentStyle(l.container);a.style.backgroundColor=e.backgroundColor,null!=l.view.backgroundPageShape&&null!=s.outline.view.backgroundPageShape&&(s.outline.view.backgroundPageShape.fill=l.view.backgroundPageShape.fill),s.outline.refresh()}if(s.createGraph=function(e){var t=d.apply(this,arguments);t.gridEnabled=!1,t.pageScale=l.pageScale,t.pageFormat=l.pageFormat,t.background=null==l.background||l.background==mxConstants.NONE?l.defaultPageBackgroundColor:l.background;var n=mxUtils.getCurrentStyle(l.container);return a.style.backgroundColor=n.backgroundColor,t},s.init(a),e.editor.addListener("resetGraphView",c),e.addListener("pageFormatChanged",c),e.addListener("backgroundColorChanged",c),e.addListener("backgroundImageChanged",c),e.addListener("pageViewChanged",function(){c(),s.update(!0)}),s.outline.dialect==mxConstants.DIALECT_SVG){var u=e.actions.get("zoomIn"),p=e.actions.get("zoomOut");mxEvent.addMouseWheelListener(function(e,t){for(var n=!1,i=mxEvent.getSource(e);null!=i;){if(i==s.outline.view.canvas.ownerSVGElement){n=!0;break}i=i.parentNode}n&&(t?u.funct():p.funct())})}},GE.LayersWindow=function(e,t,n,i,o){var l=e.editor.graph,a=document.createElement("div");a.style.userSelect="none",a.style.background="white"==GE.Dialog.backdropColor?"whiteSmoke":GE.Dialog.backdropColor,a.style.border="1px solid whiteSmoke",a.style.height="100%",a.style.marginBottom="10px",a.style.overflow="auto";var r=GE.EditorUi.compactUi?"26px":"30px",s=document.createElement("div");s.style.backgroundColor="white"==GE.Dialog.backdropColor?"#dcdcdc":GE.Dialog.backdropColor,s.style.position="absolute",s.style.overflow="auto",s.style.left="0px",s.style.right="0px",s.style.top="0px",s.style.bottom=parseInt(r)+7+"px",a.appendChild(s);var d=null,c=null;mxEvent.addListener(a,"dragover",function(e){e.dataTransfer.dropEffect="move",c=0,e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(a,"drop",function(e){e.stopPropagation(),e.preventDefault()});var u=null,p=null,m=document.createElement("div");m.className="geToolbarContainer",m.style.position="absolute",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.style.height=r,m.style.overflow="hidden",m.style.padding=GE.EditorUi.compactUi?"4px 0px 3px 0px":"1px",m.style.backgroundColor="white"==GE.Dialog.backdropColor?"whiteSmoke":GE.Dialog.backdropColor,m.style.borderWidth="1px 0px 0px 0px",m.style.borderColor="#c3c3c3",m.style.borderStyle="solid",m.style.display="block",m.style.whiteSpace="nowrap";var g=document.createElement("a");g.className="geButton";var h=g.cloneNode();h.innerHTML='<div class="geSprite geSprite-delete" style="display:inline-block;"></div>',mxEvent.addListener(h,"click",function(e){if(l.isEnabled()){l.model.beginUpdate();try{var t=l.model.root.getIndex(p);l.removeCells([p],!1),0==l.model.getChildCount(l.model.root)?(l.model.add(l.model.root,new mxCell),l.setDefaultParent(null)):t>0&&t<=l.model.getChildCount(l.model.root)?l.setDefaultParent(l.model.getChildAt(l.model.root,t-1)):l.setDefaultParent(null)}finally{l.model.endUpdate()}}mxEvent.consume(e)}),l.isEnabled()||(h.className="geButton mxDisabled"),m.appendChild(h);var C=g.cloneNode();C.setAttribute("title",mxUtils.trim(mxResources.get("moveSelectionTo",[""]))),C.innerHTML='<div class="geSprite geSprite-insert" style="display:inline-block;"></div>',mxEvent.addListener(C,"click",function(t){if(l.isEnabled()&&!l.isSelectionEmpty()){e.editor.graph.popupMenuHandler.hideMenu();var n=new mxPopupMenu(mxUtils.bind(this,function(e,t){for(var n=u-1;n>=0;n--)mxUtils.bind(this,function(n){var i=e.addItem(l.convertValueToString(n)||mxResources.get("background"),null,mxUtils.bind(this,function(){l.moveCells(l.getSelectionCells(),0,0,!1,n)}),t);1==l.getSelectionCount()&&l.model.isAncestor(n,l.getSelectionCell())&&e.addCheckmark(i,GE.Editor.checkmarkImage)})(l.model.getChildAt(l.model.root,n))}));n.div.className+=" geMenubarMenu",n.smartSeparators=!0,n.showDisabled=!0,n.autoExpand=!0,n.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(n,arguments),n.destroy()});var i=mxUtils.getOffset(C);n.popup(i.x,i.y+C.offsetHeight,null,t),e.setCurrentMenu(n)}}),m.appendChild(C);var x=g.cloneNode();x.innerHTML='<div class="geSprite geSprite-duplicate" style="display:inline-block;"></div>',mxEvent.addListener(x,"click",function(e){if(l.isEnabled()){var t=null;l.model.beginUpdate();try{t=l.cloneCell(p),l.cellLabelChanged(t,mxResources.get("untitledLayer")),t.setVisible(!0),t=l.addCell(t,l.model.root),l.setDefaultParent(t)}finally{l.model.endUpdate()}null==t||l.isCellLocked(t)||l.selectAll(t)}}),l.isEnabled()||(x.className="geButton mxDisabled"),m.appendChild(x);var f=g.cloneNode();function E(){function t(t,n,i,o){var a=document.createElement("div");a.className="geToolbarContainer",a.style.overflow="hidden",a.style.position="relative",a.style.padding="4px",a.style.height="22px",a.style.display="block",a.style.backgroundColor="white"==GE.Dialog.backdropColor?"whiteSmoke":GE.Dialog.backdropColor,a.style.borderWidth="0px 0px 1px 0px",a.style.borderColor="#c3c3c3",a.style.borderStyle="solid",a.style.whiteSpace="nowrap",a.setAttribute("title",n);var r=document.createElement("div");r.style.display="inline-block",r.style.width="100%",r.style.textOverflow="ellipsis",r.style.overflow="hidden",mxEvent.addListener(a,"dragover",function(e){e.dataTransfer.dropEffect="move",c=t,e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(a,"dragstart",function(e){d=a,GE.IS_FF&&e.dataTransfer.setData("Text","<layer/>")}),mxEvent.addListener(a,"dragend",function(e){null!=d&&null!=c&&l.addCell(i,l.model.root,c),d=null,c=null,e.stopPropagation(),e.preventDefault()});var m=document.createElement("img");m.setAttribute("draggable","false"),m.setAttribute("align","top"),m.setAttribute("border","0"),m.style.padding="4px",m.setAttribute("title",mxResources.get("lockUnlock"));var g=l.getCurrentCellStyle(i);"1"==mxUtils.getValue(g,"locked","0")?m.setAttribute("src",GE.Dialog.prototype.lockedImage):m.setAttribute("src",GE.Dialog.prototype.unlockedImage),l.isEnabled()&&(m.style.cursor="pointer"),mxEvent.addListener(m,"click",function(e){if(l.isEnabled()){var t=null;l.getModel().beginUpdate();try{t="1"==mxUtils.getValue(g,"locked","0")?null:"1",l.setCellStyles("locked",t,[i])}finally{l.getModel().endUpdate()}"1"==t&&l.removeSelectionCells(l.getModel().getDescendants(i)),mxEvent.consume(e)}}),r.appendChild(m);var h=document.createElement("input");if(h.setAttribute("type","checkbox"),h.setAttribute("title",mxResources.get("hideIt",[i.value||mxResources.get("background")])),h.style.marginLeft="4px",h.style.marginRight="6px",h.style.marginTop="4px",r.appendChild(h),l.model.isVisible(i)&&(h.setAttribute("checked","checked"),h.defaultChecked=!0),mxEvent.addListener(h,"click",function(e){l.model.setVisible(i,!l.model.isVisible(i)),mxEvent.consume(e)}),mxUtils.write(r,n),a.appendChild(r),l.isEnabled()){if(GE.IS_POINTER||GE.IS_VML){var C=document.createElement("div");if(C.style.display="block",C.style.textAlign="right",C.style.whiteSpace="nowrap",C.style.position="absolute",C.style.right="6px",C.style.top="6px",t>0){var x=document.createElement("a");x.setAttribute("title",mxResources.get("toBack")),x.className="geButton",x.style.cssFloat="none",x.innerHTML="&#9660;",x.style.width="14px",x.style.height="14px",x.style.fontSize="14px",x.style.margin="0px",x.style.marginTop="-1px",C.appendChild(x),mxEvent.addListener(x,"click",function(e){l.isEnabled()&&l.addCell(i,l.model.root,t-1),mxEvent.consume(e)})}if(t>=0&&t<u-1){var f=document.createElement("a");f.setAttribute("title",mxResources.get("toFront")),f.className="geButton",f.style.cssFloat="none",f.innerHTML="&#9650;",f.style.width="14px",f.style.height="14px",f.style.fontSize="14px",f.style.margin="0px",f.style.marginTop="-1px",C.appendChild(f),mxEvent.addListener(f,"click",function(e){l.isEnabled()&&l.addCell(i,l.model.root,t+1),mxEvent.consume(e)})}a.appendChild(C)}GE.IS_SVG&&(a.setAttribute("draggable","true"),a.style.cursor="move")}mxEvent.addListener(a,"dblclick",function(t){var n=mxEvent.getSource(t).nodeName;"INPUT"!=n&&"IMG"!=n&&(!function(t){if(l.isEnabled()&&null!=t){var n=l.convertValueToString(t),i=new GE.FilenameDialog(e,n||mxResources.get("background"),mxResources.get("rename"),mxUtils.bind(this,function(e){null!=e&&l.cellLabelChanged(t,e)}),mxResources.get("enterName"));e.showDialog(i.container,300,100,!0,!0),i.init()}}(i),mxEvent.consume(t))}),l.getDefaultParent()==i?(a.style.background="white"==GE.Dialog.backdropColor?"#e6eff8":"#505759",a.style.fontWeight=l.isEnabled()?"bold":"",p=i):mxEvent.addListener(a,"click",function(e){l.isEnabled()&&(l.setDefaultParent(o),l.view.setCurrentRoot(null),E())}),s.appendChild(a)}u=l.model.getChildCount(l.model.root),s.innerHTML="";for(var n=u-1;n>=0;n--)mxUtils.bind(this,function(e){t(n,l.convertValueToString(e)||mxResources.get("background"),e,e)})(l.model.getChildAt(l.model.root,n));var i=l.convertValueToString(p)||mxResources.get("background");h.setAttribute("title",mxResources.get("removeIt",[i])),x.setAttribute("title",mxResources.get("duplicateIt",[i])),l.isSelectionEmpty()&&(C.className="geButton mxDisabled")}f.innerHTML='<div class="geSprite geSprite-plus" style="display:inline-block;"></div>',f.setAttribute("title",mxResources.get("addLayer")),mxEvent.addListener(f,"click",function(e){if(l.isEnabled()){l.model.beginUpdate();try{var t=l.addCell(new mxCell(mxResources.get("untitledLayer")),l.model.root);l.setDefaultParent(t)}finally{l.model.endUpdate()}}mxEvent.consume(e)}),l.isEnabled()||(f.className="geButton mxDisabled"),m.appendChild(f),a.appendChild(m),E(),l.model.addListener(mxEvent.CHANGE,function(){E()}),l.selectionModel.addListener(mxEvent.CHANGE,function(){l.isSelectionEmpty()?C.className="geButton mxDisabled":C.className="geButton"}),this.window=new mxWindow(mxResources.get("layers"),a,t,n,i,o,!0,!0),this.window.minimumSize=new mxRectangle(0,0,120,120),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.init=function(){s.scrollTop=s.scrollHeight-s.clientHeight},this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit()})),this.refreshLayers=E,this.window.setLocation=function(e,t){var n=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,i=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,n-this.table.clientWidth)),t=Math.max(0,Math.min(t,i-this.table.clientHeight-48)),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)};var b=mxUtils.bind(this,function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)});mxEvent.addListener(window,"resize",b),this.destroy=function(){mxEvent.removeListener(window,"resize",b),this.window.destroy()}};